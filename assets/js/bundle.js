!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){var r;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,i){"use strict";var o=[],a=n.document,s=Object.getPrototypeOf,l=o.slice,c=o.concat,u=o.push,d=o.indexOf,f={},p=f.toString,h=f.hasOwnProperty,g=h.toString,v=g.call(Object),m={},b=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},y=function(e){return null!=e&&e===e.window},x={type:!0,src:!0,noModule:!0};function _(e,t,n){var r,i=(t=t||a).createElement("script");if(i.text=e,n)for(r in x)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[p.call(e)]||"object":typeof e}var k=function(e,t){return new k.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function A(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!b(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}k.fn=k.prototype={jquery:"3.3.1",constructor:k,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(e){return this.pushStack(k.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||b(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(c&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&k.isPlainObject(n)?n:{},a[t]=k.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==p.call(e))&&(!(t=s(e))||"function"==typeof(n=h.call(t,"constructor")&&t.constructor)&&g.call(n)===v)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){_(e)},each:function(e,t){var n,r=0;if(A(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(A(Object(e))?k.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(A(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return c.apply([],a)},guid:1,support:m}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=o[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()});var C=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){var t,n,r,i,o,a,s,l,c,u,d,f,p,h,g,v,m,b,y,x="sizzle"+1*new Date,_=e.document,w=0,k=0,T=ae(),A=ae(),C=ae(),S=function(e,t){return e===t&&(d=!0),0},M={}.hasOwnProperty,E=[],O=E.pop,L=E.push,P=E.push,D=E.slice,R=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",N="\\["+j+"*("+I+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+j+"*\\]",z=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",q=new RegExp(j+"+","g"),H=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),B=new RegExp("^"+j+"*,"+j+"*"),V=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),U=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),$=new RegExp(z),W=new RegExp("^"+I+"$"),X={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){f()},ie=be(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{P.apply(E=D.call(_.childNodes),_.childNodes),E[_.childNodes.length].nodeType}catch(e){P={apply:E.length?function(e,t){L.apply(e,D.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function oe(e,t,r,i){var o,s,c,u,d,h,m,b=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!i&&((t?t.ownerDocument||t:_)!==p&&f(t),t=t||p,g)){if(11!==w&&(d=J.exec(e)))if(o=d[1]){if(9===w){if(!(c=t.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(b&&(c=b.getElementById(o))&&y(t,c)&&c.id===o)return r.push(c),r}else{if(d[2])return P.apply(r,t.getElementsByTagName(e)),r;if((o=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!C[e+" "]&&(!v||!v.test(e))){if(1!==w)b=t,m=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(te,ne):t.setAttribute("id",u=x),s=(h=a(e)).length;s--;)h[s]="#"+u+" "+me(h[s]);m=h.join(","),b=K.test(e)&&ge(t.parentNode)||t}if(m)try{return P.apply(r,b.querySelectorAll(m)),r}catch(e){}finally{u===x&&t.removeAttribute("id")}}}return l(e.replace(H,"$1"),t,r,i)}function ae(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function se(e){return e[x]=!0,e}function le(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function ue(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:_;return a!==p&&9===a.nodeType&&a.documentElement?(h=(p=a).documentElement,g=!o(p),_!==p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(p.getElementsByClassName),n.getById=le(function(e){return h.appendChild(e).id=x,!p.getElementsByName||!p.getElementsByName(x).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Q,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Q,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],v=[],(n.qsa=Z.test(p.querySelectorAll))&&(le(function(e){h.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+j+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+x+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||v.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+j+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=Z.test(b=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){n.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=Z.test(h.compareDocumentPosition),y=t||Z.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},S=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===p||e.ownerDocument===_&&y(_,e)?-1:t===p||t.ownerDocument===_&&y(_,t)?1:u?R(u,e)-R(u,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===p?-1:t===p?1:i?-1:o?1:u?R(u,e)-R(u,t):0;if(i===o)return ue(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ue(a[r],s[r]):a[r]===_?-1:s[r]===_?1:0},p):p},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&f(e),t=t.replace(U,"='$1']"),n.matchesSelector&&g&&!C[t+" "]&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var r=b.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,p,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==p&&f(e),y(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==p&&f(e);var i=r.attrHandle[t.toLowerCase()],o=i&&M.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(S),d){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return u=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Q,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Q,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Q,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(q," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,f,p,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),b=!l&&!s,y=!1;if(v){if(o){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&b){for(y=(p=(c=(u=(d=(f=v)[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===w&&c[1])&&c[2],f=p&&v.childNodes[p];f=++p&&f&&f[g]||(y=p=0)||h.pop();)if(1===f.nodeType&&++y&&f===t){u[e]=[w,p,y];break}}else if(b&&(y=p=(c=(u=(d=(f=t)[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===w&&c[1]),!1===y)for(;(f=++p&&f&&f[g]||(y=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++y||(b&&((u=(d=f[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]=[w,y]),f!==t)););return(y-=i)===r||y%r==0&&y/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[x]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=R(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(H,"$1"));return r[x]?se(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Q,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return W.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Q,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=fe(t);function ve(){}function me(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=k++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var c,u,d,f=[w,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(u=(d=t[x]||(t[x]={}))[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[o])&&c[0]===w&&c[1]===s)return f[2]=c[2];if(u[o]=f,f[2]=e(t,n,l))return!0}return!1}}function ye(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xe(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function _e(e,t,n,r,i,o){return r&&!r[x]&&(r=_e(r)),i&&!i[x]&&(i=_e(i,o)),se(function(o,a,s,l){var c,u,d,f=[],p=[],h=a.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:xe(g,f,e,s,l),m=n?i||(o?e:h||r)?[]:a:v;if(n&&n(v,m,s,l),r)for(c=xe(m,p),r(c,[],s,l),u=c.length;u--;)(d=c[u])&&(m[p[u]]=!(v[p[u]]=d));if(o){if(i||e){if(i){for(c=[],u=m.length;u--;)(d=m[u])&&c.push(v[u]=d);i(null,m=[],c,l)}for(u=m.length;u--;)(d=m[u])&&(c=i?R(o,d):f[u])>-1&&(o[c]=!(a[c]=d))}}else m=xe(m===a?m.splice(h,m.length):m),i?i(null,a,m,l):P.apply(a,m)})}function we(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],l=a?1:0,u=be(function(e){return e===t},s,!0),d=be(function(e){return R(t,e)>-1},s,!0),f=[function(e,n,r){var i=!a&&(r||n!==c)||((t=n).nodeType?u(e,n,r):d(e,n,r));return t=null,i}];l<o;l++)if(n=r.relative[e[l].type])f=[be(ye(f),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[x]){for(i=++l;i<o&&!r.relative[e[i].type];i++);return _e(l>1&&ye(f),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(H,"$1"),n,l<i&&we(e.slice(l,i)),i<o&&we(e=e.slice(i)),i<o&&me(e))}f.push(n)}return ye(f)}return ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,a=oe.tokenize=function(e,t){var n,i,o,a,s,l,c,u=A[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=r.preFilter;s;){for(a in n&&!(i=B.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=V.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(H," ")}),s=s.slice(n.length)),r.filter)!(i=X[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):A(e,l).slice(0)},s=oe.compile=function(e,t){var n,i=[],o=[],s=C[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=we(t[n]))[x]?i.push(s):o.push(s);(s=C(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,l,u){var d,h,v,m=0,b="0",y=o&&[],x=[],_=c,k=o||i&&r.find.TAG("*",u),T=w+=null==_?1:Math.random()||.1,A=k.length;for(u&&(c=a===p||a||u);b!==A&&null!=(d=k[b]);b++){if(i&&d){for(h=0,a||d.ownerDocument===p||(f(d),s=!g);v=e[h++];)if(v(d,a||p,s)){l.push(d);break}u&&(w=T)}n&&((d=!v&&d)&&m--,o&&y.push(d))}if(m+=b,n&&b!==m){for(h=0;v=t[h++];)v(y,x,a,s);if(o){if(m>0)for(;b--;)y[b]||x[b]||(x[b]=O.call(l));x=xe(x)}P.apply(l,x),u&&!o&&x.length>0&&m+t.length>1&&oe.uniqueSort(l)}return u&&(w=T,c=_),y};return n?se(o):o}(o,i))).selector=e}return s},l=oe.select=function(e,t,n,i){var o,l,c,u,d,f="function"==typeof e&&e,p=!i&&a(e=f.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&g&&r.relative[l[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(Q,ee),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=X.needsContext.test(e)?0:l.length;o--&&(c=l[o],!r.relative[u=c.type]);)if((d=r.find[u])&&(i=d(c.matches[0].replace(Q,ee),K.test(l[0].type)&&ge(t.parentNode)||t))){if(l.splice(o,1),!(e=i.length&&me(l)))return P.apply(n,i),n;break}}return(f||s(e,p))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=x.split("").sort(S).join("")===x,n.detectDuplicates=!!d,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(F,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(n);k.find=C,k.expr=C.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=C.uniqueSort,k.text=C.getText,k.isXMLDoc=C.isXML,k.contains=C.contains,k.escapeSelector=C.escape;var S=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},M=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},E=k.expr.match.needsContext;function O(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,n){return b(t)?k.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?k.grep(e,function(e){return e===t!==n}):"string"!=typeof t?k.grep(e,function(e){return d.call(t,e)>-1!==n}):k.filter(t,e,n)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return r>1?k.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&E.test(e)?k(e):e||[],!1).length}});var D,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:R.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:a,!0)),L.test(r[1])&&k.isPlainObject(t))for(r in t)b(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=a.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):b(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,D=k(a);var F=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!E.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?d.call(k(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,n){return S(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,n){return S(e,"nextSibling",n)},prevUntil:function(e,t,n){return S(e,"previousSibling",n)},siblings:function(e){return M((e.parentNode||{}).firstChild,e)},children:function(e){return M(e.firstChild)},contents:function(e){return O(e,"iframe")?e.contentDocument:(O(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(e,t){k.fn[e]=function(n,r){var i=k.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=k.filter(r,i)),this.length>1&&(j[e]||k.uniqueSort(i),F.test(e)&&i.reverse()),this.pushStack(i)}});var N=/[^\x20\t\r\n\f]+/g;function z(e){return e}function q(e){throw e}function H(e,t,n,r){var i;try{e&&b(i=e.promise)?i.call(e).done(t).fail(n):e&&b(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return k.each(e.match(N)||[],function(e,n){t[n]=!0}),t}(e):k.extend({},e);var t,n,r,i,o=[],a=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){k.each(n,function(n,r){b(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==w(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return k.each(arguments,function(e,t){for(var n;(n=k.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?k.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},k.extend({Deferred:function(e){var t=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return k.Deferred(function(n){k.each(t,function(t,r){var i=b(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&b(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){var o=0;function a(e,t,r,i){return function(){var s=this,l=arguments,c=function(){var n,c;if(!(e<o)){if((n=r.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,b(c)?i?c.call(n,a(o,t,z,i),a(o,t,q,i)):(o++,c.call(n,a(o,t,z,i),a(o,t,q,i),a(o,t,z,t.notifyWith))):(r!==z&&(s=void 0,l=[n]),(i||t.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(n){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(n,u.stackTrace),e+1>=o&&(r!==q&&(s=void 0,l=[n]),t.rejectWith(s,l))}};e?u():(k.Deferred.getStackHook&&(u.stackTrace=k.Deferred.getStackHook()),n.setTimeout(u))}}return k.Deferred(function(n){t[0][3].add(a(0,n,b(i)?i:z,n.notifyWith)),t[1][3].add(a(0,n,b(e)?e:z)),t[2][3].add(a(0,n,b(r)?r:q))}).promise()},promise:function(e){return null!=e?k.extend(e,i):i}},o={};return k.each(t,function(e,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=l.call(arguments),o=k.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?l.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(H(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||b(i[n]&&i[n].then)))return o.then();for(;n--;)H(i[n],a(n),o.reject);return o.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&B.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){n.setTimeout(function(){throw e})};var V=k.Deferred();function U(){a.removeEventListener("DOMContentLoaded",U),n.removeEventListener("load",U),k.ready()}k.fn.ready=function(e){return V.then(e).catch(function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==e&&--k.readyWait>0||V.resolveWith(a,[k]))}}),k.ready.then=V.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(k.ready):(a.addEventListener("DOMContentLoaded",U),n.addEventListener("load",U));var $=function(e,t,n,r,i,o,a){var s=0,l=e.length,c=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,b(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(k(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):o},W=/^-ms-/,X=/-([a-z])/g;function G(e,t){return t.toUpperCase()}function Y(e){return e.replace(W,"ms-").replace(X,G)}var Z=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function J(){this.expando=k.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Z(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[Y(t)]=n;else for(r in t)i[Y(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Y(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(Y):(t=Y(t))in r?[t]:t.match(N)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var K=new J,Q=new J,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return Q.hasData(e)||K.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return K.access(e,t,n)},_removeData:function(e,t){K.remove(e,t)}}),k.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Q.get(o),1===o.nodeType&&!K.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=Y(r.slice(5)),ne(o,r,i[r]));K.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Q.set(this,e)}):$(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=Q.get(o,e))?n:void 0!==(n=ne(o,e))?n:void 0;this.each(function(){Q.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=K.get(e,t),n&&(!r||Array.isArray(n)?r=K.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return K.get(e,n)||K.access(e,n,{empty:k.Callbacks("once memory").add(function(){K.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?k.queue(this[0],e):void 0===t?this:this.each(function(){var n=k.queue(this,e,t);k._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&k.dequeue(this,e)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=K.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&k.contains(e.ownerDocument,e)&&"none"===k.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},l=s(),c=n&&n[3]||(k.cssNumber[t]?"":"px"),u=(k.cssNumber[t]||"px"!==c&&+l)&&ie.exec(k.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)k.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,k.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var ce={};function ue(e){var t,n=e.ownerDocument,r=e.nodeName,i=ce[r];return i||(t=n.body.appendChild(n.createElement(r)),i=k.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ce[r]=i,i)}function de(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=K.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ue(r))):"none"!==n&&(i[o]="none",K.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}k.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?k(this).show():k(this).hide()})}});var fe=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&O(e,t)?k.merge([e],n):n}function me(e,t){for(var n=0,r=e.length;n<r;n++)K.set(e[n],"globalEval",!t||K.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var be=/<|&#?\w+;/;function ye(e,t,n,r,i){for(var o,a,s,l,c,u,d=t.createDocumentFragment(),f=[],p=0,h=e.length;p<h;p++)if((o=e[p])||0===o)if("object"===w(o))k.merge(f,o.nodeType?[o]:o);else if(be.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(pe.exec(o)||["",""])[1].toLowerCase(),l=ge[s]||ge._default,a.innerHTML=l[1]+k.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;k.merge(f,a.childNodes),(a=d.firstChild).textContent=""}else f.push(t.createTextNode(o));for(d.textContent="",p=0;o=f[p++];)if(r&&k.inArray(o,r)>-1)i&&i.push(o);else if(c=k.contains(o.ownerDocument,o),a=ve(d.appendChild(o),"script"),c&&me(a),n)for(u=0;o=a[u++];)he.test(o.type||"")&&n.push(o);return d}!function(){var e=a.createDocumentFragment().appendChild(a.createElement("div")),t=a.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),m.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var xe=a.documentElement,_e=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ke=/^([^.]*)(?:\.(.+)|)/;function Te(){return!0}function Ae(){return!1}function Ce(){try{return a.activeElement}catch(e){}}function Se(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Se(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ae;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}k.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,c,u,d,f,p,h,g,v=K.get(e);if(v)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(xe,i),n.guid||(n.guid=k.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==k&&k.event.triggered!==t.type?k.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(N)||[""]).length;c--;)p=g=(s=ke.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=k.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=k.event.special[p]||{},u=k.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},o),(f=l[p])||((f=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,u):f.push(u),k.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,c,u,d,f,p,h,g,v=K.hasData(e)&&K.get(e);if(v&&(l=v.events)){for(c=(t=(t||"").match(N)||[""]).length;c--;)if(p=g=(s=ke.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=k.event.special[p]||{},f=l[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)u=f[o],!i&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(e,u));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,v.handle)||k.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)k.event.remove(e,p+t[c],n,r,!0);k.isEmptyObject(l)&&K.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=k.event.fix(e),l=new Array(arguments.length),c=(K.get(this,"events")||{})[s.type]||[],u=k.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=k.event.handlers.call(this,s,c),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?k(i,this).index(c)>-1:k.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(k.Event.prototype,e,{enumerable:!0,configurable:!0,get:b(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ce()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ce()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&O(this,"input"))return this.click(),!1},_default:function(e){return O(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Te:Ae,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Te,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Te,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Te,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){k.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||k.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),k.fn.extend({on:function(e,t,n,r){return Se(this,e,t,n,r)},one:function(e,t,n,r){return Se(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ae),this.each(function(){k.event.remove(this,e,n,t)})}});var Me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ee=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return O(e,"table")&&O(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,o,a,s,l,c;if(1===t.nodeType){if(K.hasData(e)&&(o=K.access(e),a=K.set(t,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)k.event.add(t,i,c[i][n]);Q.hasData(e)&&(s=Q.access(e),l=k.extend({},s),Q.set(t,l))}}function je(e,t){var n=t.nodeName.toLowerCase();"input"===n&&fe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ie(e,t,n,r){t=c.apply([],t);var i,o,a,s,l,u,d=0,f=e.length,p=f-1,h=t[0],g=b(h);if(g||f>1&&"string"==typeof h&&!m.checkClone&&Oe.test(h))return e.each(function(i){var o=e.eq(i);g&&(t[0]=h.call(this,i,o.html())),Ie(o,t,n,r)});if(f&&(o=(i=ye(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=k.map(ve(i,"script"),De)).length;d<f;d++)l=i,d!==p&&(l=k.clone(l,!0,!0),s&&k.merge(a,ve(l,"script"))),n.call(e[d],l,d);if(s)for(u=a[a.length-1].ownerDocument,k.map(a,Re),d=0;d<s;d++)l=a[d],he.test(l.type||"")&&!K.access(l,"globalEval")&&k.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?k._evalUrl&&k._evalUrl(l.src):_(l.textContent.replace(Le,""),u,l))}return e}function Ne(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ve(r)),r.parentNode&&(n&&k.contains(r.ownerDocument,r)&&me(ve(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e.replace(Me,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=k.contains(e.ownerDocument,e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=ve(s),r=0,i=(o=ve(e)).length;r<i;r++)je(o[r],a[r]);if(t)if(n)for(o=o||ve(e),a=a||ve(s),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,s);return(a=ve(s,"script")).length>0&&me(a,!l&&ve(e,"script")),s},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(Z(n)){if(t=n[K.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[K.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),k.fn.extend({detach:function(e){return Ne(this,e,!0)},remove:function(e){return Ne(this,e)},text:function(e){return $(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ee.test(e)&&!ge[(pe.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ie(this,arguments,function(t){var n=this.parentNode;k.inArray(this,e)<0&&(k.cleanData(ve(this)),n&&n.replaceChild(t,this))},e)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){k.fn[e]=function(e){for(var n,r=[],i=k(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),k(i[a])[t](n),u.apply(r,n.get());return this.pushStack(r)}});var ze=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),qe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},He=new RegExp(oe.join("|"),"i");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||qe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||k.contains(e.ownerDocument,e)||(a=k.style(e,t)),!m.pixelBoxStyles()&&ze.test(a)&&He.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Ve(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",xe.appendChild(c).appendChild(u);var e=n.getComputedStyle(u);r="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",s=36===t(e.right),i=36===t(e.width),u.style.position="absolute",o=36===u.offsetWidth||"absolute",xe.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,s,l,c=a.createElement("div"),u=a.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(m,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o}}))}();var Ue=/^(none|table(?!-c[ea]).+)/,$e=/^--/,We={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","Moz","ms"],Ye=a.createElement("div").style;function Ze(e){var t=k.cssProps[e];return t||(t=k.cssProps[e]=function(e){if(e in Ye)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;n--;)if((e=Ge[n]+t)in Ye)return e}(e)||e),t}function Je(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ke(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=k.css(e,n+oe[a],!0,i)),r?("content"===n&&(l-=k.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(l-=k.css(e,"border"+oe[a]+"Width",!0,i))):(l+=k.css(e,"padding"+oe[a],!0,i),"padding"!==n?l+=k.css(e,"border"+oe[a]+"Width",!0,i):s+=k.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))),l}function Qe(e,t,n){var r=qe(e),i=Be(e,t,r),o="border-box"===k.css(e,"boxSizing",!1,r),a=o;if(ze.test(i)){if(!n)return i;i="auto"}return a=a&&(m.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===k.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ke(e,t,n||(o?"border":"content"),a,r,i)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=Y(t),l=$e.test(t),c=e.style;if(l||(t=Ze(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t];"string"===(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,a,s=Y(t);return $e.test(t)||(t=Ze(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),"normal"===i&&t in Xe&&(i=Xe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,t){k.cssHooks[t]={get:function(e,n,r){if(n)return!Ue.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Qe(e,t,r):se(e,We,function(){return Qe(e,t,r)})},set:function(e,n,r){var i,o=qe(e),a="border-box"===k.css(e,"boxSizing",!1,o),s=r&&Ke(e,t,r,a,o);return a&&m.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ke(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=k.css(e,t)),Je(0,n,s)}}}),k.cssHooks.marginLeft=Ve(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(e,t){k.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(k.cssHooks[e+t].set=Je)}),k.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=qe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,arguments.length>1)}}),k.Tween=et,et.prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}},et.prototype.init.prototype=et.prototype,et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[k.cssProps[e.prop]]&&!k.cssHooks[e.prop]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}},et.propHooks.scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=et.prototype.init,k.fx.step={};var tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){nt&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ot):n.setTimeout(ot,k.fx.interval),k.fx.tick())}function at(){return n.setTimeout(function(){tt=void 0}),tt=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o=0,a=ct.prefilters.length,s=k.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=tt||at(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(e,[c,r,n]),r<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:k.extend({},t),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},n),originalProperties:t,originalOptions:n,startTime:tt||at(),duration:n.duration,tweens:[],createTween:function(t,n){var r=k.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=Y(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(u,c.opts.specialEasing);o<a;o++)if(r=ct.prefilters[o].call(c,e,u,c.opts))return b(r.stop)&&(k._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return k.map(u,lt,c),b(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),k.fx.timer(k.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}k.Animation=k.extend(ct,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){b(e)?(t=e,e=["*"]):e=e.match(N);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ct.tweeners[n]=ct.tweeners[n]||[],ct.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,l,c,u,d="width"in t||"height"in t,f=this,p={},h=e.style,g=e.nodeType&&ae(e),v=K.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}p[r]=v&&v[r]||k.style(e,r)}if((l=!k.isEmptyObject(t))||!k.isEmptyObject(p))for(r in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=v&&v.display)&&(c=K.get(e,"display")),"none"===(u=k.css(e,"display"))&&(c?u=c:(de([e],!0),c=e.style.display||c,u=k.css(e,"display"),de([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===k.css(e,"float")&&(l||(f.done(function(){h.display=c}),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),l=!1,p)l||(v?"hidden"in v&&(g=v.hidden):v=K.access(e,"fxshow",{display:c}),o&&(v.hidden=!g),g&&de([e],!0),f.done(function(){for(r in g||de([e]),K.remove(e,"fxshow"),p)k.style(e,r,p[r])})),l=lt(g?v[r]:0,r,f),r in v||(v[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||b(e)&&e,duration:e,easing:n&&t||t&&!b(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){b(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=k.isEmptyObject(e),o=k.speed(t,n,r),a=function(){var t=ct(this,k.extend({},e),o);(i||K.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=k.timers,a=K.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&it.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||k.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=K.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=k.timers,a=r?r.length:0;for(n.finish=!0,k.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),k.each(["toggle","show","hide"],function(e,t){var n=k.fn[t];k.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,i)}}),k.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){k.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),tt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){nt||(nt=!0,ot())},k.fx.stop=function(){nt=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(e,t){return e=k.fx&&k.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}})},function(){var e=a.createElement("input"),t=a.createElement("select").appendChild(a.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=a.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var ut,dt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return $(this,k.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ut:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&O(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(N);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ut={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var n=dt[t]||k.find.attr;dt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=dt[a],dt[a]=i,i=null!=n(e,t,r)?a:null,dt[a]=o),i}});var ft=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;function ht(e){return(e.match(N)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(N)||[]}k.fn.extend({prop:function(e,t){return $(this,k.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,l=0;if(b(e))return this.each(function(t){k(this).addClass(e.call(this,t,gt(this)))});if((t=vt(e)).length)for(;n=this[l++];)if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,l=0;if(b(e))return this.each(function(t){k(this).removeClass(e.call(this,t,gt(this)))});if(!arguments.length)return this.attr("class","");if((t=vt(e)).length)for(;n=this[l++];)if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):b(e)?this.each(function(n){k(this).toggleClass(e.call(this,n,gt(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=k(this),a=vt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=gt(this))&&K.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":K.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ht(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var mt=/\r/g;k.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=b(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,k(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=k.map(i,function(e){return null==e?"":e+""})),(t=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=k.valHooks[i.type]||k.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(mt,""):null==n?"":n:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:ht(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!O(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=k.makeArray(t),a=i.length;a--;)((r=i[a]).selected=k.inArray(k.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=k.inArray(k(e).val(),t)>-1}},m.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in n;var bt=/^(?:focusinfocus|focusoutblur)$/,yt=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,r,i){var o,s,l,c,u,d,f,p,g=[r||a],v=h.call(e,"type")?e.type:e,m=h.call(e,"namespace")?e.namespace.split("."):[];if(s=p=l=r=r||a,3!==r.nodeType&&8!==r.nodeType&&!bt.test(v+k.event.triggered)&&(v.indexOf(".")>-1&&(v=(m=v.split(".")).shift(),m.sort()),u=v.indexOf(":")<0&&"on"+v,(e=e[k.expando]?e:new k.Event(v,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:k.makeArray(t,[e]),f=k.event.special[v]||{},i||!f.trigger||!1!==f.trigger.apply(r,t))){if(!i&&!f.noBubble&&!y(r)){for(c=f.delegateType||v,bt.test(c+v)||(s=s.parentNode);s;s=s.parentNode)g.push(s),l=s;l===(r.ownerDocument||a)&&g.push(l.defaultView||l.parentWindow||n)}for(o=0;(s=g[o++])&&!e.isPropagationStopped();)p=s,e.type=o>1?c:f.bindType||v,(d=(K.get(s,"events")||{})[e.type]&&K.get(s,"handle"))&&d.apply(s,t),(d=u&&s[u])&&d.apply&&Z(s)&&(e.result=d.apply(s,t),!1===e.result&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(g.pop(),t)||!Z(r)||u&&b(r[v])&&!y(r)&&((l=r[u])&&(r[u]=null),k.event.triggered=v,e.isPropagationStopped()&&p.addEventListener(v,yt),r[v](),e.isPropagationStopped()&&p.removeEventListener(v,yt),k.event.triggered=void 0,l&&(r[u]=l)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),m.focusin||k.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){k.event.simulate(t,e.target,k.event.fix(e))};k.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=K.access(r,t);i||r.addEventListener(e,n,!0),K.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=K.access(r,t)-1;i?K.access(r,t,i):(r.removeEventListener(e,n,!0),K.remove(r,t))}}});var xt=n.location,_t=Date.now(),wt=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var kt=/\[\]$/,Tt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;function St(e,t,n,r){var i;if(Array.isArray(t))k.each(t,function(t,i){n||kt.test(e)?r(e,i):St(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==w(t))r(e,t);else for(i in t)St(e+"["+i+"]",t[i],n,r)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=b(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)St(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&Ct.test(this.nodeName)&&!At.test(e)&&(this.checked||!fe.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:n.replace(Tt,"\r\n")}}).get()}});var Mt=/%20/g,Et=/#.*$/,Ot=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Dt=/^\/\//,Rt={},Ft={},jt="*/".concat("*"),It=a.createElement("a");function Nt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(N)||[];if(b(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function zt(e,t,n,r){var i={},o=e===Ft;function a(s){var l;return i[s]=!0,k.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||o||i[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function qt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}It.href=xt.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,k.ajaxSettings),t):qt(k.ajaxSettings,e)},ajaxPrefilter:Nt(Rt),ajaxTransport:Nt(Ft),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,l,c,u,d,f,p,h=k.ajaxSetup({},t),g=h.context||h,v=h.context&&(g.nodeType||g.jquery)?k(g):k.event,m=k.Deferred(),b=k.Callbacks("once memory"),y=h.statusCode||{},x={},_={},w="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Lt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==u&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)T.always(e[T.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||w;return r&&r.abort(t),A(0,t),this}};if(m.promise(T),h.url=((e||h.url||xt.href)+"").replace(Dt,xt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(N)||[""],null==h.crossDomain){c=a.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=It.protocol+"//"+It.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=k.param(h.data,h.traditional)),zt(Rt,h,t,T),u)return T;for(f in(d=k.event&&h.global)&&0==k.active++&&k.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Pt.test(h.type),i=h.url.replace(Et,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Mt,"+")):(p=h.url.slice(i.length),h.data&&(h.processData||"string"==typeof h.data)&&(i+=(wt.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Ot,"$1"),p=(wt.test(i)?"&":"?")+"_="+_t+++p),h.url=i+p),h.ifModified&&(k.lastModified[i]&&T.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&T.setRequestHeader("If-None-Match",k.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&T.setRequestHeader("Content-Type",h.contentType),T.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+jt+"; q=0.01":""):h.accepts["*"]),h.headers)T.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(g,T,h)||u))return T.abort();if(w="abort",b.add(h.complete),T.done(h.success),T.fail(h.error),r=zt(Ft,h,t,T)){if(T.readyState=1,d&&v.trigger("ajaxSend",[T,h]),u)return T;h.async&&h.timeout>0&&(l=n.setTimeout(function(){T.abort("timeout")},h.timeout));try{u=!1,r.send(x,A)}catch(e){if(u)throw e;A(-1,e)}}else A(-1,"No Transport");function A(e,t,a,s){var c,f,p,x,_,w=t;u||(u=!0,l&&n.clearTimeout(l),r=void 0,o=s||"",T.readyState=e>0?4:0,c=e>=200&&e<300||304===e,a&&(x=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(h,T,a)),x=function(e,t,n,r){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(h,x,T,c),c?(h.ifModified&&((_=T.getResponseHeader("Last-Modified"))&&(k.lastModified[i]=_),(_=T.getResponseHeader("etag"))&&(k.etag[i]=_)),204===e||"HEAD"===h.type?w="nocontent":304===e?w="notmodified":(w=x.state,f=x.data,c=!(p=x.error))):(p=w,!e&&w||(w="error",e<0&&(e=0))),T.status=e,T.statusText=(t||w)+"",c?m.resolveWith(g,[f,w,T]):m.rejectWith(g,[T,w,p]),T.statusCode(y),y=void 0,d&&v.trigger(c?"ajaxSuccess":"ajaxError",[T,h,c?f:p]),b.fireWith(g,[T,w]),d&&(v.trigger("ajaxComplete",[T,h]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,t){k[t]=function(e,n,r,i){return b(n)&&(i=i||r,r=n,n=void 0),k.ajax(k.extend({url:e,type:t,dataType:i,data:n,success:r},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(b(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return b(e)?this.each(function(t){k(this).wrapInner(e.call(this,t))}):this.each(function(){var t=k(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b(e);return this.each(function(n){k(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},Bt=k.ajaxSettings.xhr();m.cors=!!Bt&&"withCredentials"in Bt,m.ajax=Bt=!!Bt,k.ajaxTransport(function(e){var t,r;if(m.cors||Bt&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,i){t=k("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),a.head.appendChild(t[0])},abort:function(){n&&n()}}});var Vt=[],Ut=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||k.expando+"_"+_t++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,r){var i,o,a,s=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ut,"$1"+i):!1!==e.jsonp&&(e.url+=(wt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||k.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?k(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,Vt.push(i)),a&&b(o)&&o(a[0]),a=o=void 0}),"script"}),m.createHTMLDocument=function(){var e=a.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((r=(t=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,t.head.appendChild(r)):t=a),i=L.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=ye([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=ht(e.slice(s)),e=e.slice(0,s)),b(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(e){return k.grep(k.timers,function(t){return e===t.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,c=k.css(e,"position"),u=k(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=k.css(e,"top"),l=k.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(r=u.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),b(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):u.css(d)}},k.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){k.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===k.css(e,"position");)e=e.offsetParent;return e||xe})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;k.fn[e]=function(r){return $(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),k.each(["top","left"],function(e,t){k.cssHooks[t]=Ve(m.pixelPosition,function(e,n){if(n)return n=Be(e,t),ze.test(n)?k(e).position()[t]+"px":n})}),k.each({Height:"height",Width:"width"},function(e,t){k.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){k.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return $(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?k.css(t,n,s):k.style(t,n,i,s)},t,a?i:void 0,a)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){k.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),b(e))return r=l.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(l.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=O,k.isFunction=b,k.isWindow=y,k.camelCase=Y,k.type=w,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(r=function(){return k}.apply(t,[]))||(e.exports=r);var $t=n.jQuery,Wt=n.$;return k.noConflict=function(e){return n.$===k&&(n.$=Wt),e&&n.jQuery===k&&(n.jQuery=$t),k},i||(n.jQuery=n.$=k),k})},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e,n){var r;!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},o=i._,a=Array.prototype,s=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,u=a.slice,d=s.toString,f=s.hasOwnProperty,p=Array.isArray,h=Object.keys,g=Object.create,v=function(){},m=function(e){return e instanceof m?e:this instanceof m?void(this._wrapped=e):new m(e)};void 0===t||t.nodeType?i._=m:(void 0!==n&&!n.nodeType&&n.exports&&(t=n.exports=m),t._=m),m.VERSION="1.9.1";var b,y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},x=function(e,t,n){return m.iteratee!==b?m.iteratee(e,t):null==e?m.identity:m.isFunction(e)?y(e,t,n):m.isObject(e)&&!m.isArray(e)?m.matcher(e):m.property(e)};m.iteratee=b=function(e,t){return x(e,t,1/0)};var _=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},w=function(e){if(!m.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},k=function(e){return function(t){return null==t?void 0:t[e]}},T=function(e,t){return null!=e&&f.call(e,t)},A=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},C=Math.pow(2,53)-1,S=k("length"),M=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=C};m.each=m.forEach=function(e,t,n){var r,i;if(t=y(t,n),M(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=m.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},m.map=m.collect=function(e,t,n){t=x(t,n);for(var r=!M(e)&&m.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o};var E=function(e){return function(t,n,r,i){var o=arguments.length>=3;return function(t,n,r,i){var o=!M(t)&&m.keys(t),a=(o||t).length,s=e>0?0:a-1;for(i||(r=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var l=o?o[s]:s;r=n(r,t[l],l,t)}return r}(t,y(n,i,4),r,o)}};m.reduce=m.foldl=m.inject=E(1),m.reduceRight=m.foldr=E(-1),m.find=m.detect=function(e,t,n){var r=(M(e)?m.findIndex:m.findKey)(e,t,n);if(void 0!==r&&-1!==r)return e[r]},m.filter=m.select=function(e,t,n){var r=[];return t=x(t,n),m.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},m.reject=function(e,t,n){return m.filter(e,m.negate(x(t)),n)},m.every=m.all=function(e,t,n){t=x(t,n);for(var r=!M(e)&&m.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},m.some=m.any=function(e,t,n){t=x(t,n);for(var r=!M(e)&&m.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},m.contains=m.includes=m.include=function(e,t,n,r){return M(e)||(e=m.values(e)),("number"!=typeof n||r)&&(n=0),m.indexOf(e,t,n)>=0},m.invoke=_(function(e,t,n){var r,i;return m.isFunction(t)?i=t:m.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),m.map(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=A(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})}),m.pluck=function(e,t){return m.map(e,m.property(t))},m.where=function(e,t){return m.filter(e,m.matcher(t))},m.findWhere=function(e,t){return m.find(e,m.matcher(t))},m.max=function(e,t,n){var r,i,o=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=M(e)?e:m.values(e)).length;s<l;s++)null!=(r=e[s])&&r>o&&(o=r);else t=x(t,n),m.each(e,function(e,n,r){((i=t(e,n,r))>a||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},m.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=M(e)?e:m.values(e)).length;s<l;s++)null!=(r=e[s])&&r<o&&(o=r);else t=x(t,n),m.each(e,function(e,n,r){((i=t(e,n,r))<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},m.shuffle=function(e){return m.sample(e,1/0)},m.sample=function(e,t,n){if(null==t||n)return M(e)||(e=m.values(e)),e[m.random(e.length-1)];var r=M(e)?m.clone(e):m.values(e),i=S(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,a=0;a<t;a++){var s=m.random(a,o),l=r[a];r[a]=r[s],r[s]=l}return r.slice(0,t)},m.sortBy=function(e,t,n){var r=0;return t=x(t,n),m.pluck(m.map(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var O=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=x(r,i),m.each(n,function(t,i){var a=r(t,i,n);e(o,t,a)}),o}};m.groupBy=O(function(e,t,n){T(e,n)?e[n].push(t):e[n]=[t]}),m.indexBy=O(function(e,t,n){e[n]=t}),m.countBy=O(function(e,t,n){T(e,n)?e[n]++:e[n]=1});var L=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(e){return e?m.isArray(e)?u.call(e):m.isString(e)?e.match(L):M(e)?m.map(e,m.identity):m.values(e):[]},m.size=function(e){return null==e?0:M(e)?e.length:m.keys(e).length},m.partition=O(function(e,t,n){e[n?0:1].push(t)},!0),m.first=m.head=m.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:m.initial(e,e.length-t)},m.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},m.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:m.rest(e,Math.max(0,e.length-t))},m.rest=m.tail=m.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},m.compact=function(e){return m.filter(e,Boolean)};var P=function(e,t,n,r){for(var i=(r=r||[]).length,o=0,a=S(e);o<a;o++){var s=e[o];if(M(s)&&(m.isArray(s)||m.isArguments(s)))if(t)for(var l=0,c=s.length;l<c;)r[i++]=s[l++];else P(s,t,n,r),i=r.length;else n||(r[i++]=s)}return r};m.flatten=function(e,t){return P(e,t,!1)},m.without=_(function(e,t){return m.difference(e,t)}),m.uniq=m.unique=function(e,t,n,r){m.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=x(n,r));for(var i=[],o=[],a=0,s=S(e);a<s;a++){var l=e[a],c=n?n(l,a,e):l;t&&!n?(a&&o===c||i.push(l),o=c):n?m.contains(o,c)||(o.push(c),i.push(l)):m.contains(i,l)||i.push(l)}return i},m.union=_(function(e){return m.uniq(P(e,!0,!0))}),m.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=S(e);r<i;r++){var o=e[r];if(!m.contains(t,o)){var a;for(a=1;a<n&&m.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},m.difference=_(function(e,t){return t=P(t,!0,!0),m.filter(e,function(e){return!m.contains(t,e)})}),m.unzip=function(e){for(var t=e&&m.max(e,S).length||0,n=Array(t),r=0;r<t;r++)n[r]=m.pluck(e,r);return n},m.zip=_(m.unzip),m.object=function(e,t){for(var n={},r=0,i=S(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var D=function(e){return function(t,n,r){n=x(n,r);for(var i=S(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};m.findIndex=D(1),m.findLastIndex=D(-1),m.sortedIndex=function(e,t,n,r){for(var i=(n=x(n,r,1))(t),o=0,a=S(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o};var R=function(e,t,n){return function(r,i,o){var a=0,s=S(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(u.call(r,a,s),m.isNaN))>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}};m.indexOf=R(1,m.findIndex,m.sortedIndex),m.lastIndexOf=R(-1,m.findLastIndex),m.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},m.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(u.call(e,r,r+=t));return n};var F=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=w(e.prototype),a=e.apply(o,i);return m.isObject(a)?a:o};m.bind=_(function(e,t,n){if(!m.isFunction(e))throw new TypeError("Bind must be called on a function");var r=_(function(i){return F(e,r,t,this,n.concat(i))});return r}),m.partial=_(function(e,t){var n=m.partial.placeholder,r=function(){for(var i=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return F(e,r,this,this,a)};return r}),m.partial.placeholder=m,m.bindAll=_(function(e,t){var n=(t=P(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=m.bind(e[r],e)}}),m.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return T(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=_(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),m.defer=m.partial(m.delay,m,1),m.throttle=function(e,t,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:m.now(),r=null,a=e.apply(i,o),r||(i=o=null)},c=function(){var c=m.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return i=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c},m.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},a=_(function(a){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(o,t),s&&(i=e.apply(this,a))}else r=m.delay(o,t,this,a);return i});return a.cancel=function(){clearTimeout(r),r=null},a},m.wrap=function(e,t){return m.partial(t,e)},m.negate=function(e){return function(){return!e.apply(this,arguments)}},m.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},m.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},m.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},m.once=m.partial(m.before,2),m.restArguments=_;var j=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],N=function(e,t){var n=I.length,r=e.constructor,i=m.isFunction(r)&&r.prototype||s,o="constructor";for(T(e,o)&&!m.contains(t,o)&&t.push(o);n--;)(o=I[n])in e&&e[o]!==i[o]&&!m.contains(t,o)&&t.push(o)};m.keys=function(e){if(!m.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)T(e,n)&&t.push(n);return j&&N(e,t),t},m.allKeys=function(e){if(!m.isObject(e))return[];var t=[];for(var n in e)t.push(n);return j&&N(e,t),t},m.values=function(e){for(var t=m.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},m.mapObject=function(e,t,n){t=x(t,n);for(var r=m.keys(e),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=t(e[s],s,e)}return o},m.pairs=function(e){for(var t=m.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},m.invert=function(e){for(var t={},n=m.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},m.functions=m.methods=function(e){var t=[];for(var n in e)m.isFunction(e[n])&&t.push(n);return t.sort()};var z=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,l=0;l<s;l++){var c=a[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}};m.extend=z(m.allKeys),m.extendOwn=m.assign=z(m.keys),m.findKey=function(e,t,n){t=x(t,n);for(var r,i=m.keys(e),o=0,a=i.length;o<a;o++)if(t(e[r=i[o]],r,e))return r};var q,H,B=function(e,t,n){return t in n};m.pick=_(function(e,t){var n={},r=t[0];if(null==e)return n;m.isFunction(r)?(t.length>1&&(r=y(r,t[1])),t=m.allKeys(e)):(r=B,t=P(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var a=t[i],s=e[a];r(s,a,e)&&(n[a]=s)}return n}),m.omit=_(function(e,t){var n,r=t[0];return m.isFunction(r)?(r=m.negate(r),t.length>1&&(n=t[1])):(t=m.map(P(t,!1,!1),String),r=function(e,n){return!m.contains(t,n)}),m.pick(e,r,n)}),m.defaults=z(m.allKeys,!0),m.create=function(e,t){var n=w(e);return t&&m.extendOwn(n,t),n},m.clone=function(e){return m.isObject(e)?m.isArray(e)?e.slice():m.extend({},e):e},m.tap=function(e,t){return t(e),e},m.isMatch=function(e,t){var n=m.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0},q=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&H(e,t,n,r)},H=function(e,t,n,r){e instanceof m&&(e=e._wrapped),t instanceof m&&(t=t._wrapped);var i=d.call(e);if(i!==d.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return l.valueOf.call(e)===l.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(m.isFunction(a)&&a instanceof a&&m.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),o){if((c=e.length)!==t.length)return!1;for(;c--;)if(!q(e[c],t[c],n,r))return!1}else{var u,f=m.keys(e);if(c=f.length,m.keys(t).length!==c)return!1;for(;c--;)if(u=f[c],!T(t,u)||!q(e[u],t[u],n,r))return!1}return n.pop(),r.pop(),!0},m.isEqual=function(e,t){return q(e,t)},m.isEmpty=function(e){return null==e||(M(e)&&(m.isArray(e)||m.isString(e)||m.isArguments(e))?0===e.length:0===m.keys(e).length)},m.isElement=function(e){return!(!e||1!==e.nodeType)},m.isArray=p||function(e){return"[object Array]"===d.call(e)},m.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){m["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),m.isArguments(arguments)||(m.isArguments=function(e){return T(e,"callee")});var V=i.document&&i.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof V&&(m.isFunction=function(e){return"function"==typeof e||!1}),m.isFinite=function(e){return!m.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},m.isNaN=function(e){return m.isNumber(e)&&isNaN(e)},m.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)},m.isNull=function(e){return null===e},m.isUndefined=function(e){return void 0===e},m.has=function(e,t){if(!m.isArray(t))return T(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!f.call(e,i))return!1;e=e[i]}return!!n},m.noConflict=function(){return i._=o,this},m.identity=function(e){return e},m.constant=function(e){return function(){return e}},m.noop=function(){},m.property=function(e){return m.isArray(e)?function(t){return A(t,e)}:k(e)},m.propertyOf=function(e){return null==e?function(){}:function(t){return m.isArray(t)?A(e,t):e[t]}},m.matcher=m.matches=function(e){return e=m.extendOwn({},e),function(t){return m.isMatch(t,e)}},m.times=function(e,t,n){var r=Array(Math.max(0,e));t=y(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},m.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},m.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=m.invert(U),W=function(e){var t=function(t){return e[t]},n="(?:"+m.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};m.escape=W(U),m.unescape=W($),m.result=function(e,t,n){m.isArray(t)||(t=[t]);var r=t.length;if(!r)return m.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=m.isFunction(o)?o.call(e):o}return e};var X=0;m.uniqueId=function(e){var t=++X+"";return e?e+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Z=/\\|'|\r|\n|\u2028|\u2029/g,J=function(e){return"\\"+Y[e]};m.template=function(e,t,n){!t&&n&&(t=n),t=m.defaults({},t,m.templateSettings);var r,i=RegExp([(t.escape||G).source,(t.interpolate||G).source,(t.evaluate||G).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,r,i,s){return a+=e.slice(o,s).replace(Z,J),o=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(e){return r.call(this,e,m)},l=t.variable||"obj";return s.source="function("+l+"){\n"+a+"}",s},m.chain=function(e){var t=m(e);return t._chain=!0,t};var K=function(e,t){return e._chain?m(t).chain():t};m.mixin=function(e){return m.each(m.functions(e),function(t){var n=m[t]=e[t];m.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),K(this,n.apply(m,e))}}),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];m.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],K(this,n)}}),m.each(["concat","join","slice"],function(e){var t=a[e];m.prototype[e]=function(){return K(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return m}.apply(t,[]))||(n.exports=r)}()}).call(t,n(1),n(21)(e))},function(e,t,n){(function(r){var i,o;!function(a){var s="object"==typeof self&&self.self===self&&self||"object"==typeof r&&r.global===r&&r;i=[n(2),n(0),t],void 0===(o=function(e,t,n){s.Backbone=a(s,n,e,t)}.apply(t,i))||(e.exports=o)}(function(e,t,n,r){var i=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],s(e,this),i)};case 4:return function(e,i,o){return n[t](this[r],s(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}}(t,i,r))})},s=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?l(e):n.isString(e)?function(t){return t.get(e)}:e},l=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},c=t.Events={},u=/\s+/,d=function(e,t,r,i,o){var a,s=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(a=n.keys(r);s<a.length;s++)t=d(e,t,a[s],r[a[s]],o)}else if(r&&u.test(r))for(a=r.split(u);s<a.length;s++)t=e(t,a[s],i,o);else t=e(t,r,i,o);return t};c.on=function(e,t,n){return f(this,e,t,n)};var f=function(e,t,n,r,i){(e._events=d(p,e._events||{},t,n,{context:r,ctx:e,listening:i}),i)&&((e._listeners||(e._listeners={}))[i.id]=i);return e};c.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[i];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[i]={obj:e,objId:i,id:s,listeningTo:o,count:0}}return f(e,t,r,this,a),this};var p=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),o=r.context,a=r.ctx,s=r.listening;s&&s.count++,i.push({callback:n,context:o,ctx:o||a,listening:s})}return e};c.off=function(e,t,n){return this._events?(this._events=d(h,this._events,e,t,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var o=e?[e._listenId]:n.keys(i),a=0;a<o.length;a++){var s=i[o[a]];if(!s)break;s.obj.off(t,r,this)}return this};var h=function(e,t,r,i){if(e){var o,a=0,s=i.context,l=i.listeners;if(t||r||s){for(var c=t?[t]:n.keys(e);a<c.length;a++){var u=e[t=c[a]];if(!u)break;for(var d=[],f=0;f<u.length;f++){var p=u[f];r&&r!==p.callback&&r!==p.callback._callback||s&&s!==p.context?d.push(p):(o=p.listening)&&0==--o.count&&(delete l[o.id],delete o.listeningTo[o.objId])}d.length?e[t]=d:delete e[t]}return e}for(var h=n.keys(l);a<h.length;a++)delete l[(o=l[h[a]]).id],delete o.listeningTo[o.objId]}};c.once=function(e,t,r){var i=d(g,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)},c.listenToOnce=function(e,t,r){var i=d(g,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var g=function(e,t,r,i){if(r){var o=e[t]=n.once(function(){i(t,o),r.apply(this,arguments)});o._callback=r}return e};c.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return d(v,this._events,e,void 0,n),this};var v=function(e,t,n,r){if(e){var i=e[t],o=e.all;i&&o&&(o=o.slice()),i&&m(i,r),o&&m(o,[t].concat(r))}return e},m=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};c.bind=c.on,c.unbind=c.off,n.extend(t,c);var b=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,a=r.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,d=this._previousAttributes;for(var f in i)t=i[f],n.isEqual(c[f],t)||s.push(f),n.isEqual(d[f],t)?delete u[f]:u[f]=t,o?delete c[f]:c[f]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=r);for(var p=0;p<s.length;p++)this.trigger("change:"+s[p],this,c[s[p]],r)}if(l)return this;if(!a)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var o=e[i];n.isEqual(t[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){var t=this,r=(e=n.extend({parse:!0},e)).success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var a=this,s=r.success,l=this.attributes;r.success=function(e){a.attributes=l;var t=r.parse?a.parse(e,r):e;if(o&&(t=n.extend({},i,t)),t&&!a.set(t,r))return!1;s&&s.call(r.context,a,e,r),a.trigger("sync",a,e,r)},I(this,r),i&&o&&(this.attributes=n.extend({},l,i));var c=this.isNew()?"create":r.patch?"patch":"update";"patch"!==c||r.attrs||(r.attrs=i);var u=this.sync(c,this,r);return this.attributes=l,u},destroy:function(e){var t=this,r=(e=e?n.clone(e):{}).success,i=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&o(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var a=!1;return this.isNew()?n.defer(e.success):(I(this,e),a=this.sync("delete",this,e)),i||o(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||j();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}});a(b,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},x={add:!0,remove:!0,merge:!0},_={add:!0,remove:!1},w=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r,i=Array(e.length-n),o=t.length;for(r=0;r<i.length;r++)i[r]=e[r+n];for(r=0;r<o;r++)e[r+n]=t[r];for(r=0;r<i.length;r++)e[r+o+n]=i[r]};n.extend(y.prototype,c,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,_))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(null!=e){(t=n.extend({},x,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,a,s=[],l=[],c=[],u=[],d={},f=t.add,p=t.merge,h=t.remove,g=!1,v=this.comparator&&null==i&&!1!==t.sort,m=n.isString(this.comparator)?this.comparator:null;for(a=0;a<e.length;a++){o=e[a];var b=this.get(o);if(b){if(p&&o!==b){var y=this._isModel(o)?o.attributes:o;t.parse&&(y=b.parse(y,t)),b.set(y,t),c.push(b),v&&!g&&(g=b.hasChanged(m))}d[b.cid]||(d[b.cid]=!0,s.push(b)),e[a]=b}else f&&(o=e[a]=this._prepareModel(o,t))&&(l.push(o),this._addReference(o,t),d[o.cid]=!0,s.push(o))}if(h){for(a=0;a<this.length;a++)d[(o=this.models[a]).cid]||u.push(o);u.length&&this._removeModels(u,t)}var _=!1,k=!v&&f&&h;if(s.length&&k?(_=this.length!==s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,w(this.models,s,0),this.length=this.models.length):l.length&&(v&&(g=!0),w(this.models,l,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!t.silent){for(a=0;a<l.length;a++)null!=i&&(t.index=i+a),(o=l[a]).trigger("add",o,this,t);(g||_)&&this.trigger("sort",this,t),(l.length||u.length||c.length)&&(t.changes={added:l,removed:u,merged:c},this.trigger("update",this,t))}return r?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===r||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){var r=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;r||this.add(e,t);var i=this,o=t.success;return t.success=function(e,t,n){r&&i.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var a=this.modelId(i.attributes);null!=a&&delete this._byId[a],t.silent||(t.index=o,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return n},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}});a(y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var k=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,A)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];n.extend(k.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(T);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var o=C[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||j()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1);var l=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,l&&l.call(i.context,e,t,n)};var c=i.xhr=t.ajax(n.extend(a,i));return r.trigger("request",r,c,i),c};var C={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var S=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,O=/\*\w+/g,L=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(S.prototype,c,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,function(n){var a=o._extractParameters(e,n);!1!==o.execute(i,a,r)&&(o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),t.history.trigger("route",o,r,a))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(L,"\\$&").replace(M,"(?:$1)?").replace(E,function(e,t){return t?e:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var P=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,F=/#.*$/;P.started=!1,n.extend(P.prototype,c,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(D,"")},start:function(e){if(P.started)throw new Error("Backbone.history has already been started");if(P.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(R,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!P.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(F,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new P;b.extend=y.extend=S.extend=k.extend=P.extend=function(e,t){var r,i=this;return r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t),r.prototype=n.create(i.prototype,e),r.prototype.constructor=r,r.__super__=i.prototype,r};var j=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t})}).call(t,n(1))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";(function(t){var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,a=new i(u),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var l=new t.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}e.exports=function(e){1!==c.push(e)||r||n()}}).call(t,n(1))},function(e,t,n){"use strict";var r=n(10),i=n.n(r),o="function"==typeof Promise?Promise:i.a;t.a=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return T}),n.d(t,"apps",function(){return T});var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),l=n.n(s),c=n(8),u=(n.n(c),n(9)),d=n.n(u),f=n(22),p=n.n(f),h=n(23),g=n(32),v=n(42),m=n.n(v),b=n(43),y=(n.n(b),n(44)),x=(n.n(y),n(46)),_=n(47),w=n(48);
/**
 * @file      OpenADMS UI is a single-page application serving as a remote
 *            control interface for OpenADMS Node instances. It is written in
 *            ECMAScript 2015 and relies on jQuery, Backbone.js, Semantic UI,
 *            and PouchDB.
 * @author    Philipp Engel
 * @license   BSD-2-Clause
 * @copyright Hochschule Neubrandenburg - University of Applied Sciences, 2018
 * @see       {@link https://github.com/dabamos/openadms-ui/}
 */
let k="/openadms-ui/",T=new x.a.AppsList,A={};h.a.plugin(g.a),d.a.useDefaults();let C=d.a.get("root");function S(){let e=i()("#loader");e.dimmer("show"),e.dimmer("hide")}function M(){A.page=new _.a.Page,A.appsMenu=new _.a.AppsMenu(new x.a.AppsList(T.where({menu:!0}))),A.appsMenu.render()}function E(){new w.a.Router(A.page);l.a.history.start({root:k})}function O(e,t){let n=m.a.join(e,"apps.json");return C.debug('Loading Apps list file "'+n+'"'),i.a.ajax({url:n,dataType:"json"}).then(function(n){let r=n.autoload;return i.a.when.apply(i.a,r.map(function(n){let r=m.a.join(e,n);return i.a.when(i.a.ajax({url:m.a.join(r,"meta.json"),dataType:"json"}),i.a.ajax({url:m.a.join(r,"app.js"),dataType:"text"}),i.a.ajax({url:m.a.join(r,"template.html"),dataType:"html"})).then(function(e,n,r){let i=a.a.first(e);i.id=i.name,i.script=new Function("args",a.a.first(n)),i.compiled=a.a.template(a.a.first(r)),t.add(i),C.debug(`Loaded App "${i.name}"`)})}))})}!function(e){e.$=i.a,e._=a.a,e.Backbone=l.a,e.LocalStorage=c.LocalStorage,e.Logger=d.a,e.Plotly=p.a,e.PouchDB=h.a,e.path=m.a,e.UI={rootPath:k,appsPath:"src/apps/",loadApps:O,Models:{App:x.a.App,AppsList:x.a.AppsList,Settings:x.a.Settings},version:1}}(window),i()(document).ready(function(){i.a.when(O(m.a.join(k,"src/apps/"),T)).then(M).then(E).done(S)})},function(e,t,n){!function(t,r){e.exports=r(n(2),n(3))}(0,function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.guid=function(){return""+i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()},t.getLocalStorage=function(e){return(0,r.result)(e,"localStorage")||(0,r.result)(e.collection,"localStorage")},t.getWindow=function(){return(0,r.isUndefined)(window)?e:window};var r=n(1);function i(){return(0|65536*(1+Math.random())).toString(16).substring(1)}}).call(t,n(6))},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorage=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),i=n(4),o=n(5),a=n(0);r.default.LocalStorage=i.LocalStorage;var s=r.default.sync;r.default.sync=function(e,t,n){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ajaxSync,n=(0,a.getLocalStorage)(e);return!t&&n?o.sync:s}(t,n).apply(this,[e,t,n])},t.LocalStorage=i.LocalStorage},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorage=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=n(0);var a={serialize:function(e){return(0,i.isObject)(e)?JSON.stringify(e):e},deserialize:function(e){return e&&JSON.parse(e)}};t.LocalStorage=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.serializer=n,!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";var r=this._getItem(this.name);this.records=r&&r.split(",")||[]}return r(e,[{key:"localStorage",value:function(){return(0,o.getWindow)().localStorage}},{key:"save",value:function(){this._setItem(this.name,this.records.join(","))}},{key:"create",value:function(e){return e.id||0===e.id||(e.id=(0,o.guid)(),e.set(e.idAttribute,e.id)),this._setItem(this._itemName(e.id),this.serializer.serialize(e)),this.records.push(e.id.toString()),this.save(),this.find(e)}},{key:"update",value:function(e){this._setItem(this._itemName(e.id),this.serializer.serialize(e));var t=e.id.toString();return(0,i.contains)(this.records,t)||(this.records.push(t),this.save()),this.find(e)}},{key:"find",value:function(e){return this.serializer.deserialize(this._getItem(this._itemName(e.id)))}},{key:"findAll",value:function(){var e=this;return(0,i.chain)(this.records).map(function(t){return e.serializer.deserialize(e._getItem(e._itemName(t)))}).filter(function(e){return null!=e}).value()}},{key:"destroy",value:function(e){this._removeItem(this._itemName(e.id));var t=(0,i.without)(this.records,e);return this.records=t,this.save(),e}},{key:"_clear",value:function(){var e=this.localStorage(),t=new RegExp("^"+this.name+"-");for(var n in e.removeItem(this.name),e)t.test(n)&&e.removeItem(n);this.records.length=0}},{key:"_storageSize",value:function(){return this.localStorage().length}},{key:"_getItem",value:function(e){return this.localStorage().getItem(e)}},{key:"_itemName",value:function(e){return this.name+"-"+e}},{key:"_setItem",value:function(e,t){this.localStorage().setItem(e,t)}},{key:"_removeItem",value:function(e){this.localStorage().removeItem(e)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,o.getLocalStorage)(t),s=void 0,l=void 0,c=function(){if(r.default.$)return(0,i.result)(r.default.$,"Deferred",!1);return(0,i.result)(r.default,"Deferred",!1)}();try{switch(e){case"read":s=(0,i.isUndefined)(t.id)?a.findAll():a.find(t);break;case"create":s=a.create(t);break;case"patch":case"update":s=a.update(t);break;case"delete":s=a.destroy(t)}}catch(e){l=22===e.code&&0===a._storageSize()?"Private browsing is unsupported":e.message}s?(n.success&&n.success.call(t,s,n),c&&c.resolve(s)):(l=l||"Record Not Found",n.error&&n.error.call(t,l,n),c&&c.reject(l));n.complete&&n.complete.call(t,s);return c&&c.promise()};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),i=n(1),o=n(0)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(3)}])})},function(e,t,n){var r,i;
/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(o){"use strict";var a,s={};s.VERSION="1.6.0";var l={},c=function(e,t){return function(){return t.apply(e,arguments)}},u=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},d=function(e,t){return{value:e,name:t}};s.TRACE=d(1,"TRACE"),s.DEBUG=d(2,"DEBUG"),s.INFO=d(3,"INFO"),s.TIME=d(4,"TIME"),s.WARN=d(5,"WARN"),s.ERROR=d(8,"ERROR"),s.OFF=d(99,"OFF");var f=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};f.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(s.TRACE,arguments)},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"end"])},invoke:function(e,t){a&&this.enabledFor(e)&&a(t,u({level:e},this.context))}};var p=new f({filterLevel:s.OFF});!function(){var e=s;e.enabledFor=c(p,p.enabledFor),e.trace=c(p,p.trace),e.debug=c(p,p.debug),e.time=c(p,p.time),e.timeEnd=c(p,p.timeEnd),e.info=c(p,p.info),e.warn=c(p,p.warn),e.error=c(p,p.error),e.log=e.info}(),s.setHandler=function(e){a=e},s.setLevel=function(e){for(var t in p.setLevel(e),l)l.hasOwnProperty(t)&&l[t].setLevel(e)},s.getLevel=function(){return p.getLevel()},s.get=function(e){return l[e]||(l[e]=new f(u({name:e},p.context)))},s.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var o,a=console.log;i.level===s.TIME?(o=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(o):t[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):n(a,[o+": "+((new Date).getTime()-t[o])+"ms"])):(i.level===s.WARN&&console.warn?a=console.warn:i.level===s.ERROR&&console.error?a=console.error:i.level===s.INFO&&console.info?a=console.info:i.level===s.DEBUG&&console.debug?a=console.debug:i.level===s.TRACE&&console.trace&&(a=console.trace),e.formatter(r,i),n(a,r))}},s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(e))},void 0===(i="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t,n){"use strict";var r=n(5);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=h(function(){t(i,r)});"error"===a.status&&r(a.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}e.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t));return n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=h(f,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){if(e instanceof this)return e;return o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var a=new Array(n),s=0,l=-1,c=new this(i);for(;++l<n;)u(e[l],l);return c;function u(e,i){t.resolve(e).then(function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(c,a))},function(e){r||(r=!0,o.reject(c,e))})}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var a=-1,s=new this(i);for(;++a<n;)l(e[a]);return s;function l(e){t.resolve(e).then(function(e){r||(r=!0,o.resolve(s,e))},function(e){r||(r=!0,o.reject(s,e))})}}},function(e,t,n){"use strict";e.exports=function(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,l=0;l<a;l++)c[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,c=[],u=!1,d=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var e=s(f);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return o});var r=function(e){return btoa(e)};function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}function o(e,t){if("undefined"==typeof FileReader)return t((new FileReaderSync).readAsArrayBuffer(e));var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return k}),n.d(t,"b",function(){return v}),n.d(t,"c",function(){return m});var r=n(11),i=n.n(r),o=n(6),a=(n(38),n(5)),s=n.n(a),l=n(12),c=(n.n(l),n(4)),u=n.n(c),d=(n(18),n(39)),f=n.n(d);function p(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}var h=Function.prototype.toString,g=h.call(Object);function v(e){var t,n,r;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=v(e[n]);return t}if(e instanceof Date)return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return p(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&h.call(n)==g}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=v(e[n]);void 0!==i&&(t[n]=i)}return t}function m(e){return i()(function(t){var n=this,r="function"==typeof(t=v(t))[t.length-1]&&t.pop(),a=new o.a(function(r,o){var a;try{var s=function(e){var t=!1;return i()(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}(function(e,t){e?o(e):r(t)});t.push(s),(a=e.apply(n,t))&&"function"==typeof a.then&&r(a)}catch(e){o(e)}});return r&&a.then(function(e){r(null,e)},r),a})}function b(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}var y;function x(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}if(x())y=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),y=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){y=!1}function _(){return y}function w(){l.EventEmitter.call(this),this._listeners={},function(e){x()?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):_()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}(this)}u()(w,l.EventEmitter),w.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var i=this,o=!1;this._listeners[t]=a,this.on(e,a)}function a(){if(i._listeners[t])if(o)o="waiting";else{o=!0;var e=b(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(e).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===o&&s()(a),o=!1}).on("error",function(){o=!1})}}},w.prototype.removeListener=function(e,t){t in this._listeners&&(l.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},w.prototype.notifyLocalWindows=function(e){x()?chrome.storage.local.set({dbName:e}):_()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},w.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var k="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};f.a.v4},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return d});var r=n(4);function i(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}n.n(r)()(i,Error),i.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new i(401,"unauthorized","Name or password is incorrect."),new i(400,"bad_request","Missing JSON list of 'docs'"),new i(404,"not_found","missing"),new i(409,"conflict","Document update conflict");var o=new i(400,"bad_request","_id field must contain a string"),a=new i(412,"missing_id","_id is required for puts"),s=new i(400,"bad_request","Only reserved document ids may start with underscore."),l=(new i(412,"precondition_failed","Database not open"),new i(500,"unknown_error","Database encountered an unknown error")),c=(new i(500,"badarg","Some query argument is invalid"),new i(400,"invalid_request","Request was invalid"),new i(400,"query_parse_error","Some query parameter is invalid"),new i(500,"doc_validation","Bad special document member"),new i(400,"bad_request","Something wrong with the request"));new i(400,"bad_request","Document must be a JSON object"),new i(404,"not_found","Database not found"),new i(500,"indexed_db_went_bad","unknown"),new i(500,"web_sql_went_bad","unknown"),new i(500,"levelDB_went_went_bad","unknown"),new i(403,"forbidden","Forbidden by design doc validate_doc_update function"),new i(400,"bad_request","Invalid rev format"),new i(412,"file_exists","The database could not be created, the file already exists."),new i(412,"missing_stub","A pre-existing attachment stub wasn't found"),new i(413,"invalid_url","Provided URL is invalid");function u(e,t){function n(t){for(var n in e)"function"!=typeof e[n]&&(this[n]=e[n]);void 0!==t&&(this.reason=t)}return n.prototype=i.prototype,new n(t)}function d(e){if("object"!=typeof e){var t=e;(e=l).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(t,n){var r;!function(t){e.exports=t()}(function(){return function(){return function e(t,n,i){function o(s,l){if(!n[s]){if(!t[s]){if(!l&&"function"==typeof r&&r)return r(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return o(t[s][1][e]||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}}()({1:[function(e,t,n){"use strict";var r=e("../src/lib"),i={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"top:-1px;display:flex;flex-direction:column;flex-wrap:wrap;height:100%;align-content:flex-end;","X .modebar.vertical .modebar-group":"display:block;float:none;margin-left:0px;margin-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in i){var a=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(a,i[o])}},{"../src/lib":161}],2:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #119dff;} .cls-2 {fill: #25fefd;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],3:[function(e,t,n){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":262}],4:[function(e,t,n){"use strict";t.exports=e("../src/core")},{"../src/core":145}],5:[function(e,t,n){"use strict";var r=e("./core");r.register([e("./bar"),e("./pie")]),t.exports=r},{"./bar":3,"./core":4,"./pie":6}],6:[function(e,t,n){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":276}],7:[function(e,t,n){var r=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var s,l=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),s=0===c.x}catch(e){s=!1}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]):(a=e._events=r(null),e._eventsCount=0),s){if("function"==typeof s?s=a[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&(o=u(e))&&o>0&&s.length>o){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else s=a[t]=n,++e._eventsCount;return e}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=o.call(f,r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length):[]}function g(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}s?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');l=e}}):a.defaultMaxListeners=l,a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){var t,n,r,i,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=a[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=v(e,r),o=0;o<r;++o)i[o].call(n)}(n,c,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=v(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,c,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=v(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=v(e,a),l=0;l<a;++l)s[l].call(n,r,i,o)}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=v(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,c,this,i)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,o,a,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=r(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),i.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.removeAllListeners=function(e){var t,n,o;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=r(null):delete n[e]),this;if(0===arguments.length){var a,s=i(n);for(o=0;o<s.length;++o)"removeListener"!==(a=s[o])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],8:[function(e,t,n){!function(){var e={version:"3.5.17"},n=[].slice,r=function(e){return n.call(e)},i=this.document;function o(e){return e&&(e.ownerDocument||e.document||e).documentElement}function a(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(i)try{r(i.documentElement.childNodes)[0].nodeType}catch(e){r=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var s=this.Element.prototype,l=s.setAttribute,c=s.setAttributeNS,u=this.CSSStyleDeclaration.prototype,d=u.setProperty;s.setAttribute=function(e,t){l.call(this,e,t+"")},s.setAttributeNS=function(e,t,n){c.call(this,e,t,n+"")},u.setProperty=function(e,t,n){d.call(this,e,t+"",n)}}function f(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function p(e){return null===e?NaN:+e}function h(e){return!isNaN(e)}function g(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}e.ascending=f,e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.min=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},e.max=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},e.extent=function(e,t){var n,r,i,o=-1,a=e.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=e[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=t.call(e,e[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t.call(e,e[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},e.sum=function(e,t){var n,r=0,i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)h(n=+e[o])&&(r+=n);else for(;++o<i;)h(n=+t.call(e,e[o],o))&&(r+=n);return r},e.mean=function(e,t){var n,r=0,i=e.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)h(n=p(e[o]))?r+=n:--a;else for(;++o<i;)h(n=p(t.call(e,e[o],o)))?r+=n:--a;if(a)return r/a},e.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],o=n-r;return o?i+o*(e[r]-i):i},e.median=function(t,n){var r,i=[],o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)h(r=p(t[a]))&&i.push(r);else for(;++a<o;)h(r=p(n.call(t,t[a],a)))&&i.push(r);if(i.length)return e.quantile(i.sort(f),.5)},e.variance=function(e,t){var n,r,i=e.length,o=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)h(n=p(e[s]))&&(a+=(r=n-o)*(n-(o+=r/++l)));else for(;++s<i;)h(n=p(t.call(e,e[s],s)))&&(a+=(r=n-o)*(n-(o+=r/++l)));if(l>1)return a/(l-1)},e.deviation=function(){var t=e.variance.apply(this,arguments);return t?Math.sqrt(t):t};var v=g(f);function m(e){return e.length}e.bisectLeft=v.left,e.bisect=e.bisectRight=v.right,e.bisector=function(e){return g(1===e.length?function(t,n){return f(e(t),n)}:e)},e.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,o<2&&(t=0));for(var r,i,o=n-t;o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},e.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},e.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},e.transpose=function(t){if(!(o=t.length))return[];for(var n=-1,r=e.min(t,m),i=new Array(r);++n<r;)for(var o,a=-1,s=i[n]=new Array(o);++a<o;)s[a]=t[a][n];return i},e.zip=function(){return e.transpose(arguments)},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},e.merge=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--a]=r[t];return n};var b=Math.abs;function y(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function x(){this._=Object.create(null)}e.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],o=function(e){var t=1;for(;e*t%1;)t*=10;return t}(b(n)),a=-1;if(e*=o,t*=o,(n*=o)<0)for(;(r=e+n*++a)>t;)i.push(r/o);else for(;(r=e+n*++a)<t;)i.push(r/o);return i},e.map=function(e,t){var n=new x;if(e instanceof x)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(1===arguments.length)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t.call(e,r=e[i],i),r)}else for(var a in e)n.set(a,e[a]);return n};var _="__proto__",w="\0";function k(e){return(e+="")===_||e[0]===w?w+e:e}function T(e){return(e+="")[0]===w?e.slice(1):e}function A(e){return k(e)in this._}function C(e){return(e=k(e))in this._&&delete this._[e]}function S(){var e=[];for(var t in this._)e.push(T(t));return e}function M(){var e=0;for(var t in this._)++e;return e}function E(){for(var e in this._)return!1;return!0}function O(){this._=Object.create(null)}function L(e){return e}function P(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function D(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=R.length;n<r;++n){var i=R[n]+t;if(i in e)return i}}y(x,{has:A,get:function(e){return this._[k(e)]},set:function(e,t){return this._[k(e)]=t},remove:C,keys:S,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:T(t),value:this._[t]});return e},size:M,empty:E,forEach:function(e){for(var t in this._)e.call(this,T(t),this._[t])}}),e.nest=function(){var t,n,r={},i=[],o=[];function a(e,o,s){if(s>=i.length)return n?n.call(r,o):t?o.sort(t):o;for(var l,c,u,d,f=-1,p=o.length,h=i[s++],g=new x;++f<p;)(d=g.get(l=h(c=o[f])))?d.push(c):g.set(l,[c]);return e?(c=e(),u=function(t,n){c.set(t,a(e,n,s))}):(c={},u=function(t,n){c[t]=a(e,n,s)}),g.forEach(u),c}return r.map=function(e,t){return a(t,e,0)},r.entries=function(t){return function e(t,n){if(n>=i.length)return t;var r=[],a=o[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),a?r.sort(function(e,t){return a(e.key,t.key)}):r}(a(e.map,t,0),0)},r.key=function(e){return i.push(e),r},r.sortKeys=function(e){return o[i.length-1]=e,r},r.sortValues=function(e){return t=e,r},r.rollup=function(e){return n=e,r},r},e.set=function(e){var t=new O;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},y(O,{has:A,add:function(e){return this._[k(e+="")]=!0,e},remove:C,values:S,size:M,empty:E,forEach:function(e){for(var t in this._)e.call(this,T(t))}}),e.behavior={},e.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=P(e,t,t[n]);return e};var R=["webkit","ms","moz","Moz","o","O"];function F(){}function j(){}function I(e){var t=[],n=new x;function r(){for(var n,r=t,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return e}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,t=t.slice(0,o=t.indexOf(a)).concat(t.slice(o+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function N(){e.event.preventDefault()}function z(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n}function q(t){for(var n=new j,r=0,i=arguments.length;++r<i;)n[arguments[r]]=I(n);return n.of=function(r,i){return function(o){try{var a=o.sourceEvent=e.event;o.target=t,e.event=o,n[o.type].apply(r,i)}finally{e.event=a}}},n}e.dispatch=function(){for(var e=new j,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=I(e);return e},j.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},e.event=null,e.requote=function(e){return e.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,B={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function V(e){return B(e,X),e}var U=function(e,t){return t.querySelector(e)},$=function(e,t){return t.querySelectorAll(e)},W=function(e,t){var n=e.matches||e[D(e,"matchesSelector")];return(W=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(U=function(e,t){return Sizzle(e,t)[0]||null},$=Sizzle,W=Sizzle.matchesSelector),e.selection=function(){return e.select(i.documentElement)};var X=e.selection.prototype=[];function G(e){return"function"==typeof e?e:function(){return U(e,this)}}function Y(e){return"function"==typeof e?e:function(){return $(e,this)}}X.select=function(e){var t,n,r,i,o=[];e=G(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return V(o)},X.selectAll=function(e){var t,n,i=[];e=Y(e);for(var o=-1,a=this.length;++o<a;)for(var s=this[o],l=-1,c=s.length;++l<c;)(n=s[l])&&(i.push(t=r(e.call(n,n.__data__,l,o))),t.parentNode=n);return V(i)};var Z="http://www.w3.org/1999/xhtml",J={svg:"http://www.w3.org/2000/svg",xhtml:Z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function K(t,n){return t=e.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function Q(e){return e.trim().replace(/\s+/g," ")}function ee(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function te(e){return(e+"").trim().split(/^|\s+/)}function ne(e,t){var n=(e=te(e).map(re)).length;return"function"==typeof t?function(){for(var r=-1,i=t.apply(this,arguments);++r<n;)e[r](this,i)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function re(e){var t=ee(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",Q(i+" "+e))):n.setAttribute("class",Q(i.replace(t," ")))}}function ie(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function oe(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function ae(t){return"function"==typeof t?t:(t=e.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Z&&e.documentElement.namespaceURI===Z?e.createElement(t):e.createElementNS(n,t)}}function se(){var e=this.parentNode;e&&e.removeChild(this)}function le(e){return{__data__:e}}function ce(e){return function(){return W(this,e)}}function ue(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,o=e[n],a=0,s=o.length;a<s;a++)(i=o[a])&&t(i,a,n);return e}function de(e){return B(e,fe),e}e.ns={prefix:J,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),J.hasOwnProperty(n)?{space:J[n],local:e}:e}},X.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var r=this.node();return(t=e.ns.qualify(t)).local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(n in t)this.each(K(n,t[n]));return this}return this.each(K(t,n))},X.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=te(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!ee(e[i]).test(t))return!1;return!0}for(t in e)this.each(ne(t,e[t]));return this}return this.each(ne(e,t))},X.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(ie(n,e[n],t));return this}if(r<2){var i=this.node();return a(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(ie(e,t,n))},X.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(oe(t,e[t]));return this}return this.each(oe(e,t))},X.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},X.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},X.append=function(e){return e=ae(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},X.insert=function(e,t){return e=ae(e),t=G(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},X.remove=function(){return this.each(se)},X.data=function(e,t){var n,r,i=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(e[i]=r.__data__);return e}function a(e,n){var r,i,o,a=e.length,u=n.length,d=Math.min(a,u),f=new Array(u),p=new Array(u),h=new Array(a);if(t){var g,v=new x,m=new Array(a);for(r=-1;++r<a;)(i=e[r])&&(v.has(g=t.call(i,i.__data__,r))?h[r]=i:v.set(g,i),m[r]=g);for(r=-1;++r<u;)(i=v.get(g=t.call(n,o=n[r],r)))?!0!==i&&(f[r]=i,i.__data__=o):p[r]=le(o),v.set(g,!0);for(r=-1;++r<a;)r in m&&!0!==v.get(m[r])&&(h[r]=e[r])}else{for(r=-1;++r<d;)i=e[r],o=n[r],i?(i.__data__=o,f[r]=i):p[r]=le(o);for(;r<u;++r)p[r]=le(n[r]);for(;r<a;++r)h[r]=e[r]}p.update=f,p.parentNode=f.parentNode=h.parentNode=e.parentNode,s.push(p),l.push(f),c.push(h)}var s=de([]),l=V([]),c=V([]);if("function"==typeof e)for(;++i<o;)a(n=this[i],e.call(n,n.parentNode.__data__,i));else for(;++i<o;)a(n=this[i],e);return l.enter=function(){return s},l.exit=function(){return c},l},X.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},X.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=ce(e));for(var o=0,a=this.length;o<a;o++){i.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return V(i)},X.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},X.sort=function(e){e=function(e){arguments.length||(e=f);return function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},X.each=function(e){return ue(this,function(t,n,r){e.call(t,t.__data__,n,r)})},X.call=function(e){var t=r(arguments);return e.apply(t[0]=this,t),this},X.empty=function(){return!this.node()},X.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},X.size=function(){var e=0;return ue(this,function(){++e}),e};var fe=[];function pe(t,n,i){var o="__on"+t,a=t.indexOf("."),s=ge;a>0&&(t=t.slice(0,a));var l=he.get(t);function c(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}return l&&(t=l,s=ve),a?n?function(){var e=s(n,r(arguments));c.call(this),this.addEventListener(t,this[o]=e,e.$=i),e._=n}:c:n?F:function(){var n,r=new RegExp("^__on([^.]+)"+e.requote(t)+"$");for(var i in this)if(n=i.match(r)){var o=this[i];this.removeEventListener(n[1],o,o.$),delete this[i]}}}e.selection.enter=de,e.selection.enter.prototype=fe,fe.append=X.append,fe.empty=X.empty,fe.node=X.node,fe.call=X.call,fe.size=X.size,fe.select=function(e){for(var t,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(o=i[c])?(t.push(r[c]=n=e.call(i.parentNode,o.__data__,c,s)),n.__data__=o.__data__):t.push(null)}return V(a)},fe.insert=function(e,t){return arguments.length<2&&(t=function(e){var t,n;return function(r,i,o){var a,s=e[o].update,l=s.length;for(o!=n&&(n=o,t=0),i>=t&&(t=i+1);!(a=s[t])&&++t<l;);return a}}(this)),X.insert.call(this,e,t)},e.select=function(e){var t;return"string"==typeof e?(t=[U(e,i)]).parentNode=i.documentElement:(t=[e]).parentNode=o(e),V([t])},e.selectAll=function(e){var t;return"string"==typeof e?(t=r($(e,i))).parentNode=i.documentElement:(t=r(e)).parentNode=null,V([t])},X.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(pe(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(pe(e,t,n))};var he=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});function ge(t,n){return function(r){var i=e.event;e.event=r,n[0]=this.__data__;try{t.apply(this,n)}finally{e.event=i}}}function ve(e,t){var n=ge(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}i&&he.forEach(function(e){"on"+e in i&&he.remove(e)});var me,be=0;function ye(t){var n=".dragsuppress-"+ ++be,r="click"+n,i=e.select(a(t)).on("touchmove"+n,N).on("dragstart"+n,N).on("selectstart"+n,N);if(null==me&&(me=!("onselectstart"in t)&&D(t.style,"userSelect")),me){var s=o(t).style,l=s[me];s[me]="none"}return function(e){if(i.on(n,null),me&&(s[me]=l),e){var t=function(){i.on(r,null)};i.on(r,function(){N(),t()},!0),setTimeout(t,0)}}}e.mouse=function(e){return _e(e,z())};var xe=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function _e(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(xe<0){var o=a(t);if(o.scrollX||o.scrollY){var s=(r=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xe=!(s.f||s.e),r.remove()}}return xe?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var l=t.getBoundingClientRect();return[n.clientX-l.left-t.clientLeft,n.clientY-l.top-t.clientTop]}function we(){return e.event.changedTouches[0].identifier}e.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=z().changedTouches),t)for(var r,i=0,o=t.length;i<o;++i)if((r=t[i]).identifier===n)return _e(e,r)},e.behavior.drag=function(){var t=q(o,"drag","dragstart","dragend"),n=null,r=s(F,e.mouse,a,"mousemove","mouseup"),i=s(we,e.touch,L,"touchmove","touchend");function o(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function s(r,i,o,a,s){return function(){var l,c=e.event.target.correspondingElement||e.event.target,u=this.parentNode,d=t.of(this,arguments),f=0,p=r(),h=".drag"+(null==p?"":"-"+p),g=e.select(o(c)).on(a+h,function(){var e,t,n=i(u,p);if(!n)return;e=n[0]-m[0],t=n[1]-m[1],f|=e|t,m=n,d({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:e,dy:t})}).on(s+h,function(){if(!i(u,p))return;g.on(a+h,null).on(s+h,null),v(f),d({type:"dragend"})}),v=ye(c),m=i(u,p);l=n?[(l=n.apply(this,arguments)).x-m[0],l.y-m[1]]:[0,0],d({type:"dragstart"})}}return o.origin=function(e){return arguments.length?(n=e,o):n},e.rebind(o,t,"on")},e.touches=function(e,t){return arguments.length<2&&(t=z().touches),t?r(t).map(function(t){var n=_e(e,t);return n.identifier=t.identifier,n}):[]};var ke=1e-6,Te=ke*ke,Ae=Math.PI,Ce=2*Ae,Se=Ce-ke,Me=Ae/2,Ee=Ae/180,Oe=180/Ae;function Le(e){return e>0?1:e<0?-1:0}function Pe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function De(e){return e>1?0:e<-1?Ae:Math.acos(e)}function Re(e){return e>1?Me:e<-1?-Me:Math.asin(e)}function Fe(e){return((e=Math.exp(e))+1/e)/2}function je(e){return(e=Math.sin(e/2))*e}var Ie=Math.SQRT2;e.interpolateZoom=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[0],l=t[1],c=t[2],u=s-i,d=l-o,f=u*u+d*d;if(f<Te)r=Math.log(c/a)/Ie,n=function(e){return[i+e*u,o+e*d,a*Math.exp(Ie*e*r)]};else{var p=Math.sqrt(f),h=(c*c-a*a+4*f)/(2*a*2*p),g=(c*c-a*a-4*f)/(2*c*2*p),v=Math.log(Math.sqrt(h*h+1)-h),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/Ie,n=function(e){var t=e*r,n=Fe(v),s=a/(2*p)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(Ie*t+v)-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[i+s*u,o+s*d,a*n/Fe(Ie*t+v)]}}return n.duration=1e3*r,n},e.behavior.zoom=function(){var t,n,r,o,s,l,c,u,d,f={x:0,y:0,k:1},p=[960,500],h=qe,g=250,v=0,m="mousedown.zoom",b="mousemove.zoom",y="mouseup.zoom",x="touchstart.zoom",_=q(w,"zoomstart","zoom","zoomend");function w(e){e.on(m,L).on(ze+".zoom",D).on("dblclick.zoom",R).on(x,P)}function k(e){return[(e[0]-f.x)/f.k,(e[1]-f.y)/f.k]}function T(e){f.k=Math.max(h[0],Math.min(h[1],e))}function A(e,t){t=function(e){return[e[0]*f.k+f.x,e[1]*f.k+f.y]}(t),f.x+=e[0]-t[0],f.y+=e[1]-t[1]}function C(t,r,i,o){t.__chart__={x:f.x,y:f.y,k:f.k},T(Math.pow(2,o)),A(n=r,i),t=e.select(t),g>0&&(t=t.transition().duration(g)),t.call(w.event)}function S(){c&&c.domain(l.range().map(function(e){return(e-f.x)/f.k}).map(l.invert)),d&&d.domain(u.range().map(function(e){return(e-f.y)/f.k}).map(u.invert))}function M(e){v++||e({type:"zoomstart"})}function E(e){S(),e({type:"zoom",scale:f.k,translate:[f.x,f.y]})}function O(e){--v||(e({type:"zoomend"}),n=null)}function L(){var t=this,n=_.of(t,arguments),r=0,i=e.select(a(t)).on(b,function(){r=1,A(e.mouse(t),o),E(n)}).on(y,function(){i.on(b,null).on(y,null),s(r),O(n)}),o=k(e.mouse(t)),s=ye(t);cs.call(t),M(n)}function P(){var t,n=this,r=_.of(n,arguments),i={},o=0,a=".zoom-"+e.event.changedTouches[0].identifier,l="touchmove"+a,c="touchend"+a,u=[],d=e.select(n),p=ye(n);function h(){var r=e.touches(n);return t=f.k,r.forEach(function(e){e.identifier in i&&(i[e.identifier]=k(e))}),r}function g(){var t=e.event.target;e.select(t).on(l,v).on(c,b),u.push(t);for(var r=e.event.changedTouches,a=0,d=r.length;a<d;++a)i[r[a].identifier]=null;var p=h(),g=Date.now();if(1===p.length){if(g-s<500){var m=p[0];C(n,m,i[m.identifier],Math.floor(Math.log(f.k)/Math.LN2)+1),N()}s=g}else if(p.length>1){m=p[0];var y=p[1],x=m[0]-y[0],_=m[1]-y[1];o=x*x+_*_}}function v(){var a,l,c,u,d=e.touches(n);cs.call(n);for(var f=0,p=d.length;f<p;++f,u=null)if(c=d[f],u=i[c.identifier]){if(l)break;a=c,l=u}if(u){var h=(h=c[0]-a[0])*h+(h=c[1]-a[1])*h,g=o&&Math.sqrt(h/o);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],T(g*t)}s=null,A(a,l),E(r)}function b(){if(e.event.touches.length){for(var t=e.event.changedTouches,n=0,o=t.length;n<o;++n)delete i[t[n].identifier];for(var s in i)return void h()}e.selectAll(u).on(a,null),d.on(m,L).on(x,P),p(),O(r)}g(),M(r),d.on(m,null).on(x,g)}function D(){var i=_.of(this,arguments);o?clearTimeout(o):(cs.call(this),t=k(n=r||e.mouse(this)),M(i)),o=setTimeout(function(){o=null,O(i)},50),N(),T(Math.pow(2,.002*Ne())*f.k),A(n,t),E(i)}function R(){var t=e.mouse(this),n=Math.log(f.k)/Math.LN2;C(this,t,k(t),e.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return ze||(ze="onwheel"in i?(Ne=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Ne=function(){return e.event.wheelDelta},"mousewheel"):(Ne=function(){return-e.event.detail},"MozMousePixelScroll")),w.event=function(t){t.each(function(){var t=_.of(this,arguments),r=f;fs?e.select(this).transition().each("start.zoom",function(){f=this.__chart__||{x:0,y:0,k:1},M(t)}).tween("zoom:zoom",function(){var i=p[0],o=p[1],a=n?n[0]:i/2,s=n?n[1]:o/2,l=e.interpolateZoom([(a-f.x)/f.k,(s-f.y)/f.k,i/f.k],[(a-r.x)/r.k,(s-r.y)/r.k,i/r.k]);return function(e){var n=l(e),r=i/n[2];this.__chart__=f={x:a-n[0]*r,y:s-n[1]*r,k:r},E(t)}}).each("interrupt.zoom",function(){O(t)}).each("end.zoom",function(){O(t)}):(this.__chart__=f,M(t),E(t),O(t))})},w.translate=function(e){return arguments.length?(f={x:+e[0],y:+e[1],k:f.k},S(),w):[f.x,f.y]},w.scale=function(e){return arguments.length?(f={x:f.x,y:f.y,k:null},T(+e),S(),w):f.k},w.scaleExtent=function(e){return arguments.length?(h=null==e?qe:[+e[0],+e[1]],w):h},w.center=function(e){return arguments.length?(r=e&&[+e[0],+e[1]],w):r},w.size=function(e){return arguments.length?(p=e&&[+e[0],+e[1]],w):p},w.duration=function(e){return arguments.length?(g=+e,w):g},w.x=function(e){return arguments.length?(c=e,l=e.copy(),f={x:0,y:0,k:1},w):c},w.y=function(e){return arguments.length?(d=e,u=e.copy(),f={x:0,y:0,k:1},w):d},e.rebind(w,_,"on")};var Ne,ze,qe=[0,1/0];function He(){}function Be(e,t,n){return this instanceof Be?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Be?new Be(e.h,e.s,e.l):ut(""+e,dt,Be):new Be(e,t,n)}e.color=He,He.prototype.toString=function(){return this.rgb()+""},e.hsl=Be;var Ve=Be.prototype=new He;function Ue(e,t,n){var r,i;function o(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new ot(o(e+120),o(e),o(e-120))}function $e(t,n,r){return this instanceof $e?(this.h=+t,this.c=+n,void(this.l=+r)):arguments.length<2?t instanceof $e?new $e(t.h,t.c,t.l):tt(t instanceof Ge?t.l:(t=ft((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new $e(t,n,r)}Ve.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Be(this.h,this.s,this.l/e)},Ve.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Be(this.h,this.s,e*this.l)},Ve.rgb=function(){return Ue(this.h,this.s,this.l)},e.hcl=$e;var We=$e.prototype=new He;function Xe(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Ge(n,Math.cos(e*=Ee)*t,Math.sin(e)*t)}function Ge(e,t,n){return this instanceof Ge?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Ge?new Ge(e.l,e.a,e.b):e instanceof $e?Xe(e.h,e.c,e.l):ft((e=ot(e)).r,e.g,e.b):new Ge(e,t,n)}We.brighter=function(e){return new $e(this.h,this.c,Math.min(100,this.l+Ye*(arguments.length?e:1)))},We.darker=function(e){return new $e(this.h,this.c,Math.max(0,this.l-Ye*(arguments.length?e:1)))},We.rgb=function(){return Xe(this.h,this.c,this.l).rgb()},e.lab=Ge;var Ye=18,Ze=.95047,Je=1,Ke=1.08883,Qe=Ge.prototype=new He;function et(e,t,n){var r=(e+16)/116,i=r+t/500,o=r-n/200;return new ot(it(3.2404542*(i=nt(i)*Ze)-1.5371385*(r=nt(r)*Je)-.4985314*(o=nt(o)*Ke)),it(-.969266*i+1.8760108*r+.041556*o),it(.0556434*i-.2040259*r+1.0572252*o))}function tt(e,t,n){return e>0?new $e(Math.atan2(n,t)*Oe,Math.sqrt(t*t+n*n),e):new $e(NaN,NaN,e)}function nt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function rt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function it(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ot(e,t,n){return this instanceof ot?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ot?new ot(e.r,e.g,e.b):ut(""+e,ot,Ue):new ot(e,t,n)}function at(e){return new ot(e>>16,e>>8&255,255&e)}function st(e){return at(e)+""}Qe.brighter=function(e){return new Ge(Math.min(100,this.l+Ye*(arguments.length?e:1)),this.a,this.b)},Qe.darker=function(e){return new Ge(Math.max(0,this.l-Ye*(arguments.length?e:1)),this.a,this.b)},Qe.rgb=function(){return et(this.l,this.a,this.b)},e.rgb=ot;var lt=ot.prototype=new He;function ct(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ut(e,t,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(ht(i[0]),ht(i[1]),ht(i[2]))}return(o=gt.get(e))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===e.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),t(a,s,l))}function dt(e,t,n){var r,i,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,l=(a+o)/2;return s?(i=l<.5?s/(a+o):s/(2-a-o),r=e==a?(t-n)/s+(t<n?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new Be(r,i,l)}function ft(e,t,n){var r=rt((.4124564*(e=pt(e))+.3575761*(t=pt(t))+.1804375*(n=pt(n)))/Ze),i=rt((.2126729*e+.7151522*t+.072175*n)/Je);return Ge(116*i-16,500*(r-i),200*(i-rt((.0193339*e+.119192*t+.9503041*n)/Ke)))}function pt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ht(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}lt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ot(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new ot(i,i,i)},lt.darker=function(e){return new ot((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},lt.hsl=function(){return dt(this.r,this.g,this.b)},lt.toString=function(){return"#"+ct(this.r)+ct(this.g)+ct(this.b)};var gt=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function vt(e){return"function"==typeof e?e:function(){return e}}function mt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),bt(t,n,e,r)}}function bt(t,n,i,o){var a={},s=e.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;function d(){var e,t=c.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(c)||t>=200&&t<300||304===t){try{e=i.call(a,c)}catch(e){return void s.error.call(a,e)}s.load.call(a,e)}else s.error.call(a,c)}return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=d:c.onreadystatechange=function(){c.readyState>3&&d()},c.onprogress=function(t){var n=e.event;e.event=t;try{s.progress.call(a,c)}finally{e.event=n}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?l[e]:(null==t?delete l[e]:l[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(n=null==e?null:e+"",a):n},a.responseType=function(e){return arguments.length?(u=e,a):u},a.response=function(e){return i=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(r(arguments)))}}),a.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),c.open(e,t,!0),null==n||"accept"in l||(l.accept=n+",*/*"),c.setRequestHeader)for(var o in l)c.setRequestHeader(o,l[o]);return null!=n&&c.overrideMimeType&&c.overrideMimeType(n),null!=u&&(c.responseType=u),null!=i&&a.on("error",i).on("load",function(e){i(null,e)}),s.beforesend.call(a,c),c.send(null==r?null:r),a},a.abort=function(){return c.abort(),a},e.rebind(a,s,"on"),null==o?a:a.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(o))}gt.forEach(function(e,t){gt.set(e,at(t))}),e.functor=vt,e.xhr=mt(L),e.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){arguments.length<3&&(r=n,n=null);var i=bt(e,t,null==n?o:a(n),r);return i.row=function(e){return arguments.length?i.response(null==(n=e)?o:a(e)):n},i}function o(e){return i.parse(e.responseText)}function a(e){return function(t){return i.parse(t.responseText,e)}}function s(t){return t.map(l).join(e)}function l(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i.parse=function(e,t){var n;return i.parseRows(e,function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})},i.parseRows=function(e,t){var n,i,o={},a={},s=[],l=e.length,c=0,u=0;function d(){if(c>=l)return a;if(i)return i=!1,o;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return c=n+2,13===(s=e.charCodeAt(n+1))?(i=!0,10===e.charCodeAt(n+2)&&++c):10===s&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=e.charCodeAt(c++)))i=!0;else if(13===s)i=!0,10===e.charCodeAt(c)&&(++c,++u);else if(s!==r)continue;return e.slice(t,c-u)}return e.slice(t)}for(;(n=d())!==a;){for(var f=[];n!==o&&n!==a;)f.push(n),n=d();t&&null==(f=t(f,u++))||s.push(f)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new O,r=[];return t.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(l).join(e)].concat(t.map(function(t){return r.map(function(e){return l(t[e])}).join(e)})).join("\n")},i.formatRows=function(e){return e.map(s).join("\n")},i},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("\t","text/tab-separated-values");var yt,xt,_t,wt,kt=this[D(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function Tt(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i={c:e,t:n+t,n:null};return xt?xt.n=i:yt=i,xt=i,_t||(wt=clearTimeout(wt),_t=1,kt(At)),i}function At(){var e=Ct(),t=St()-e;t>24?(isFinite(t)&&(clearTimeout(wt),wt=setTimeout(At,t)),_t=0):(_t=1,kt(At))}function Ct(){for(var e=Date.now(),t=yt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function St(){for(var e,t=yt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:yt=t.n;return xt=e,n}function Mt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}e.timer=function(){Tt.apply(this,arguments)},e.timer.flush=function(){Ct(),St()},e.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Et=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*b(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}});e.formatPrefix=function(t,n){var r=0;return(t=+t)&&(t<0&&(t*=-1),n&&(t=e.round(t,Mt(t,n))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),Et[8+r/3]};var Ot=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Lt=e.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(t,n){return(t=e.round(t,Mt(t,n))).toFixed(Math.max(0,Math.min(20,Mt(t*(1+1e-15),n))))}});function Pt(e){return e+""}var Dt=e.time={},Rt=Date;function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){jt.setUTCDate.apply(this._,arguments)},setDay:function(){jt.setUTCDay.apply(this._,arguments)},setFullYear:function(){jt.setUTCFullYear.apply(this._,arguments)},setHours:function(){jt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){jt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){jt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){jt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){jt.setUTCSeconds.apply(this._,arguments)},setTime:function(){jt.setTime.apply(this._,arguments)}};var jt=Date.prototype;function It(e,t,n){function r(t){var n=e(t),r=o(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new Rt(n-1)),1),n}function o(e,n){return t(e=new Rt(+e),n),e}function a(e,r,o){var a=i(e),s=[];if(o>1)for(;a<r;)n(a)%o||s.push(new Date(+a)),t(a,1);else for(;a<r;)s.push(new Date(+a)),t(a,1);return s}e.floor=e,e.round=r,e.ceil=i,e.offset=o,e.range=a;var s=e.utc=Nt(e);return s.floor=s,s.round=Nt(r),s.ceil=Nt(i),s.offset=Nt(o),s.range=function(e,t,n){try{Rt=Ft;var r=new Ft;return r._=e,a(r,t,n)}finally{Rt=Date}},e}function Nt(e){return function(t,n){try{Rt=Ft;var r=new Ft;return r._=t,e(r,n)._}finally{Rt=Date}}}Dt.year=It(function(e){return(e=Dt.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Dt.years=Dt.year.range,Dt.years.utc=Dt.year.utc.range,Dt.day=It(function(e){var t=new Rt(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Dt.days=Dt.day.range,Dt.days.utc=Dt.day.utc.range,Dt.dayOfYear=function(e){var t=Dt.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Dt[e]=It(function(e){return(e=Dt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=Dt.year(e).getDay();return Math.floor((Dt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Dt[e+"s"]=n.range,Dt[e+"s"].utc=n.utc.range,Dt[e+"OfYear"]=function(e){var n=Dt.year(e).getDay();return Math.floor((Dt.dayOfYear(e)+(n+t)%7)/7)}}),Dt.week=Dt.sunday,Dt.weeks=Dt.sunday.range,Dt.weeks.utc=Dt.sunday.utc.range,Dt.weekOfYear=Dt.sundayOfYear;var zt={"-":"",_:" ",0:"0"},qt=/^\s*\d+/,Ht=/^%/;function Bt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Vt(t){return new RegExp("^(?:"+t.map(e.requote).join("|")+")","i")}function Ut(e){for(var t=new x,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function $t(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Wt(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Xt(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Gt(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yt(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.y=function(e){return e+(e>68?1900:2e3)}(+r[0]),n+r[0].length):-1}function Zt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Jt(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Kt(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Qt(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function en(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function tn(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function nn(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function rn(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function on(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=b(t)/60|0,i=b(t)%60;return n+Bt(r,"0",2)+Bt(i,"0",2)}function an(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function sn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}e.locale=function(t){return{numberFormat:function(t){var n=t.decimal,r=t.thousands,i=t.grouping,o=t.currency,a=i&&r?function(e,t){for(var n=e.length,o=[],a=0,s=i[0],l=0;n>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),o.push(e.substring(n-=s,n+s)),!((l+=s+1)>t));)s=i[a=(a+1)%i.length];return o.reverse().join(r)}:L;return function(t){var r=Ot.exec(t),i=r[1]||" ",s=r[2]||">",l=r[3]||"-",c=r[4]||"",u=r[5],d=+r[6],f=r[7],p=r[8],h=r[9],g=1,v="",m="",b=!1,y=!0;switch(p&&(p=+p.substring(1)),(u||"0"===i&&"="===s)&&(u=i="0",s="="),h){case"n":f=!0,h="g";break;case"%":g=100,m="%",h="f";break;case"p":g=100,m="%",h="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+h.toLowerCase());case"c":y=!1;case"d":b=!0,p=0;break;case"s":g=-1,h="r"}"$"===c&&(v=o[0],m=o[1]),"r"!=h||p||(h="g"),null!=p&&("g"==h?p=Math.max(1,Math.min(21,p)):"e"!=h&&"f"!=h||(p=Math.max(0,Math.min(20,p)))),h=Lt.get(h)||Pt;var x=u&&f;return function(t){var r=m;if(b&&t%1)return"";var o=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===l?"":l;if(g<0){var c=e.formatPrefix(t,p);t=c.scale(t),r=c.symbol+m}else t*=g;var _,w,k=(t=h(t,p)).lastIndexOf(".");if(k<0){var T=y?t.lastIndexOf("e"):-1;T<0?(_=t,w=""):(_=t.substring(0,T),w=t.substring(T))}else _=t.substring(0,k),w=n+t.substring(k+1);!u&&f&&(_=a(_,1/0));var A=v.length+_.length+w.length+(x?0:o.length),C=A<d?new Array(A=d-A+1).join(i):"";return x&&(_=a(C+_,C.length?d-w.length:1/0)),o+=v,t=_+w,("<"===s?o+t+C:">"===s?C+o+t:"^"===s?C.substring(0,A>>=1)+o+t+C.substring(A):o+(x?t:C+t))+r}}}(t),timeFormat:function(t){var n=t.dateTime,r=t.date,i=t.time,o=t.periods,a=t.days,s=t.shortDays,l=t.months,c=t.shortMonths;function u(e){var t=e.length;function n(n){for(var r,i,o,a=[],s=-1,l=0;++s<t;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=zt[r=e.charAt(++s)])&&(r=e.charAt(++s)),(o=_[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d(n,e,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Rt!==Ft,i=new(r?Ft:Rt);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return e},n}function d(e,t,n,r){for(var i,o,a,s=0,l=t.length,c=n.length;s<l;){if(r>=c)return-1;if(37===(i=t.charCodeAt(s++))){if(a=t.charAt(s++),!(o=w[a in zt?t.charAt(s++):a])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}u.utc=function(e){var t=u(e);function n(e){try{var n=new(Rt=Ft);return n._=e,t(n)}finally{Rt=Date}}return n.parse=function(e){try{Rt=Ft;var n=t.parse(e);return n&&n._}finally{Rt=Date}},n.toString=t.toString,n},u.multi=u.utc.multi=sn;var f=e.map(),p=Vt(a),h=Ut(a),g=Vt(s),v=Ut(s),m=Vt(l),b=Ut(l),y=Vt(c),x=Ut(c);o.forEach(function(e,t){f.set(e.toLowerCase(),t)});var _={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:u(n),d:function(e,t){return Bt(e.getDate(),t,2)},e:function(e,t){return Bt(e.getDate(),t,2)},H:function(e,t){return Bt(e.getHours(),t,2)},I:function(e,t){return Bt(e.getHours()%12||12,t,2)},j:function(e,t){return Bt(1+Dt.dayOfYear(e),t,3)},L:function(e,t){return Bt(e.getMilliseconds(),t,3)},m:function(e,t){return Bt(e.getMonth()+1,t,2)},M:function(e,t){return Bt(e.getMinutes(),t,2)},p:function(e){return o[+(e.getHours()>=12)]},S:function(e,t){return Bt(e.getSeconds(),t,2)},U:function(e,t){return Bt(Dt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Bt(Dt.mondayOfYear(e),t,2)},x:u(r),X:u(i),y:function(e,t){return Bt(e.getFullYear()%100,t,2)},Y:function(e,t){return Bt(e.getFullYear()%1e4,t,4)},Z:on,"%":function(){return"%"}},w={a:function(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){y.lastIndex=0;var r=y.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){m.lastIndex=0;var r=m.exec(t.slice(n));return r?(e.m=b.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,n){return d(e,_.c.toString(),t,n)},d:Kt,e:Kt,H:en,I:en,j:Qt,L:rn,m:Jt,M:tn,p:function(e,t,n){var r=f.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:nn,U:Wt,w:$t,W:Xt,x:function(e,t,n){return d(e,_.x.toString(),t,n)},X:function(e,t,n){return d(e,_.X.toString(),t,n)},y:Yt,Y:Gt,Z:Zt,"%":an};return u}(t)}};var ln=e.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cn(){}e.format=ln.numberFormat,e.geo={},cn.prototype={s:0,t:0,add:function(e){dn(e,this.t,un),dn(un.s,this.s,this),this.s?this.t+=un.t:this.s=un.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var un=new cn;function dn(e,t,n){var r=n.s=e+t,i=r-e,o=r-i;n.t=e-o+(t-i)}function fn(e,t){e&&hn.hasOwnProperty(e.type)&&hn[e.type](e,t)}e.geo.stream=function(e,t){e&&pn.hasOwnProperty(e.type)?pn[e.type](e,t):fn(e,t)};var pn={Feature:function(e,t){fn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)fn(n[r].geometry,t)}},hn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){gn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)gn(n[r],t,0)},Polygon:function(e,t){vn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)fn(n[r],t)}};function gn(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function vn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)gn(e[n],t,1);t.polygonEnd()}e.geo.area=function(t){return mn=0,e.geo.stream(t,On),mn};var mn,bn,yn,xn,_n,wn,kn,Tn,An,Cn,Sn,Mn,En=new cn,On={sphere:function(){mn+=4*Ae},point:F,lineStart:F,lineEnd:F,polygonStart:function(){En.reset(),On.lineStart=Ln},polygonEnd:function(){var e=2*En;mn+=e<0?4*Ae+e:e,On.lineStart=On.lineEnd=On.point=F}};function Ln(){var e,t,n,r,i;function o(e,t){t=t*Ee/2+Ae/4;var o=(e*=Ee)-n,a=o>=0?1:-1,s=a*o,l=Math.cos(t),c=Math.sin(t),u=i*c,d=r*l+u*Math.cos(s),f=u*a*Math.sin(s);En.add(Math.atan2(f,d)),n=e,r=l,i=c}On.point=function(a,s){On.point=o,n=(e=a)*Ee,r=Math.cos(s=(t=s)*Ee/2+Ae/4),i=Math.sin(s)},On.lineEnd=function(){o(e,t)}}function Pn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Dn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Rn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Fn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function jn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function In(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Nn(e){return[Math.atan2(e[1],e[0]),Re(e[2])]}function zn(e,t){return b(e[0]-t[0])<ke&&b(e[1]-t[1])<ke}e.geo.bounds=function(){var t,n,r,i,o,a,s,l,c,u,d,f={point:p,lineStart:g,lineEnd:v,polygonStart:function(){f.point=m,f.lineStart=y,f.lineEnd=x,c=0,On.polygonStart()},polygonEnd:function(){On.polygonEnd(),f.point=p,f.lineStart=g,f.lineEnd=v,En<0?(t=-(r=180),n=-(i=90)):c>ke?i=90:c<-ke&&(n=-90),d[0]=t,d[1]=r}};function p(e,o){u.push(d=[t=e,r=e]),o<n&&(n=o),o>i&&(i=o)}function h(e,a){var s=Pn([e*Ee,a*Ee]);if(l){var c=Rn(l,s),u=Rn([c[1],-c[0],0],c);In(u),u=Nn(u);var d=e-o,f=d>0?1:-1,h=u[0]*Oe*f,g=b(d)>180;if(g^(f*o<h&&h<f*e))(v=u[1]*Oe)>i&&(i=v);else if(g^(f*o<(h=(h+360)%360-180)&&h<f*e)){var v;(v=-u[1]*Oe)<n&&(n=v)}else a<n&&(n=a),a>i&&(i=a);g?e<o?_(t,e)>_(t,r)&&(r=e):_(e,r)>_(t,r)&&(t=e):r>=t?(e<t&&(t=e),e>r&&(r=e)):e>o?_(t,e)>_(t,r)&&(r=e):_(e,r)>_(t,r)&&(t=e)}else p(e,a);l=s,o=e}function g(){f.point=h}function v(){d[0]=t,d[1]=r,f.point=p,l=null}function m(e,t){if(l){var n=e-o;c+=b(n)>180?n+(n>0?360:-360):n}else a=e,s=t;On.point(e,t),h(e,t)}function y(){On.lineStart()}function x(){m(a,s),On.lineEnd(),b(c)>ke&&(t=-(r=180)),d[0]=t,d[1]=r,l=null}function _(e,t){return(t-=e)<0?t+360:t}function w(e,t){return e[0]-t[0]}function k(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(o){if(i=r=-(t=n=1/0),u=[],e.geo.stream(o,f),c=u.length){u.sort(w);for(var a=1,s=[g=u[0]];a<c;++a)k((p=u[a])[0],g)||k(p[1],g)?(_(g[0],p[1])>_(g[0],g[1])&&(g[1]=p[1]),_(p[0],g[1])>_(g[0],g[1])&&(g[0]=p[0])):s.push(g=p);for(var l,c,p,h=-1/0,g=(a=0,s[c=s.length-1]);a<=c;g=p,++a)p=s[a],(l=_(g[1],p[0]))>h&&(h=l,t=p[0],r=g[1])}return u=d=null,t===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,n],[r,i]]}}(),e.geo.centroid=function(t){bn=yn=xn=_n=wn=kn=Tn=An=Cn=Sn=Mn=0,e.geo.stream(t,qn);var n=Cn,r=Sn,i=Mn,o=n*n+r*r+i*i;return o<Te&&(n=kn,r=Tn,i=An,yn<ke&&(n=xn,r=_n,i=wn),(o=n*n+r*r+i*i)<Te)?[NaN,NaN]:[Math.atan2(r,n)*Oe,Re(i/Math.sqrt(o))*Oe]};var qn={sphere:F,point:Hn,lineStart:Vn,lineEnd:Un,polygonStart:function(){qn.lineStart=$n},polygonEnd:function(){qn.lineStart=Vn}};function Hn(e,t){e*=Ee;var n=Math.cos(t*=Ee);Bn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Bn(e,t,n){xn+=(e-xn)/++bn,_n+=(t-_n)/bn,wn+=(n-wn)/bn}function Vn(){var e,t,n;function r(r,i){r*=Ee;var o=Math.cos(i*=Ee),a=o*Math.cos(r),s=o*Math.sin(r),l=Math.sin(i),c=Math.atan2(Math.sqrt((c=t*l-n*s)*c+(c=n*a-e*l)*c+(c=e*s-t*a)*c),e*a+t*s+n*l);yn+=c,kn+=c*(e+(e=a)),Tn+=c*(t+(t=s)),An+=c*(n+(n=l)),Bn(e,t,n)}qn.point=function(i,o){i*=Ee;var a=Math.cos(o*=Ee);e=a*Math.cos(i),t=a*Math.sin(i),n=Math.sin(o),qn.point=r,Bn(e,t,n)}}function Un(){qn.point=Hn}function $n(){var e,t,n,r,i;function o(e,t){e*=Ee;var o=Math.cos(t*=Ee),a=o*Math.cos(e),s=o*Math.sin(e),l=Math.sin(t),c=r*l-i*s,u=i*a-n*l,d=n*s-r*a,f=Math.sqrt(c*c+u*u+d*d),p=n*a+r*s+i*l,h=f&&-De(p)/f,g=Math.atan2(f,p);Cn+=h*c,Sn+=h*u,Mn+=h*d,yn+=g,kn+=g*(n+(n=a)),Tn+=g*(r+(r=s)),An+=g*(i+(i=l)),Bn(n,r,i)}qn.point=function(a,s){e=a,t=s,qn.point=o,a*=Ee;var l=Math.cos(s*=Ee);n=l*Math.cos(a),r=l*Math.sin(a),i=Math.sin(s),Bn(n,r,i)},qn.lineEnd=function(){o(e,t),qn.lineEnd=Un,qn.point=Hn}}function Wn(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Xn(){return!0}function Gn(e,t,n,r,i){var o=[],a=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(zn(n,r)){i.lineStart();for(var s=0;s<t;++s)i.point((n=e[s])[0],n[1]);i.lineEnd()}else{var l=new Zn(n,e,null,!0),c=new Zn(n,null,l,!1);l.o=c,o.push(l),a.push(c),c=new Zn(r,null,l=new Zn(r,e,null,!1),!0),l.o=c,o.push(l),a.push(c)}}}),a.sort(t),Yn(o),Yn(a),o.length){for(var s=0,l=n,c=a.length;s<c;++s)a[s].e=l=!l;for(var u,d,f=o[0];;){for(var p=f,h=!0;p.v;)if((p=p.n)===f)return;u=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(s=0,c=u.length;s<c;++s)i.point((d=u[s])[0],d[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(h)for(s=(u=p.p.z).length-1;s>=0;--s)i.point((d=u[s])[0],d[1]);else r(p.x,p.p.x,-1,i);p=p.p}u=(p=p.o).z,h=!h}while(!p.v);i.lineEnd()}}}function Yn(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Zn(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Jn(t,n,r,i){return function(o,a){var s,l=n(a),c=o.invert(i[0],i[1]),u={point:d,lineStart:p,lineEnd:h,polygonStart:function(){u.point=x,u.lineStart=_,u.lineEnd=w,s=[],g=[]},polygonEnd:function(){u.point=d,u.lineStart=p,u.lineEnd=h,s=e.merge(s);var t=function(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;En.reset();for(var s=0,l=t.length;s<l;++s){var c=t[s],u=c.length;if(u)for(var d=c[0],f=d[0],p=d[1]/2+Ae/4,h=Math.sin(p),g=Math.cos(p),v=1;;){v===u&&(v=0);var m=(e=c[v])[0],b=e[1]/2+Ae/4,y=Math.sin(b),x=Math.cos(b),_=m-f,w=_>=0?1:-1,k=w*_,T=k>Ae,A=h*y;if(En.add(Math.atan2(A*w*Math.sin(k),g*x+A*Math.cos(k))),o+=T?_+w*Ce:_,T^f>=n^m>=n){var C=Rn(Pn(d),Pn(e));In(C);var S=Rn(i,C);In(S);var M=(T^_>=0?-1:1)*Re(S[2]);(r>M||r===M&&(C[0]||C[1]))&&(a+=T^_>=0?1:-1)}if(!v++)break;f=m,h=y,g=x,d=e}}return(o<-ke||o<ke&&En<-ke)^1&a}(c,g);s.length?(y||(a.polygonStart(),y=!0),Gn(s,er,t,r,a)):t&&(y||(a.polygonStart(),y=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),y&&(a.polygonEnd(),y=!1),s=g=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(e,n){var r=o(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function f(e,t){var n=o(e,t);l.point(n[0],n[1])}function p(){u.point=f,l.lineStart()}function h(){u.point=d,l.lineEnd()}var g,v,m=Qn(),b=n(m),y=!1;function x(e,t){v.push([e,t]);var n=o(e,t);b.point(n[0],n[1])}function _(){b.lineStart(),v=[]}function w(){x(v[0][0],v[0][1]),b.lineEnd();var e,t=b.clean(),n=m.buffer(),r=n.length;if(v.pop(),g.push(v),v=null,r)if(1&t){var i,o=-1;if((r=(e=n[0]).length-1)>0){for(y||(a.polygonStart(),y=!0),a.lineStart();++o<r;)a.point((i=e[o])[0],i[1]);a.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),s.push(n.filter(Kn))}return u}}function Kn(e){return e.length>1}function Qn(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:F,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function er(e,t){return((e=e.x)[0]<0?e[1]-Me-ke:Me-e[1])-((t=t.x)[0]<0?t[1]-Me-ke:Me-t[1])}var tr=Jn(Xn,function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Ae:-Ae,l=b(o-n);b(l-Ae)<ke?(e.point(n,r=(r+a)/2>0?Me:-Me),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&l>=Ae&&(b(n-i)<ke&&(n-=i*ke),b(o-s)<ke&&(o-=s*ke),r=function(e,t,n,r){var i,o,a=Math.sin(e-n);return b(a)>ke?Math.atan((Math.sin(t)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}},function(e,t,n,r){var i;if(null==e)i=n*Me,r.point(-Ae,i),r.point(0,i),r.point(Ae,i),r.point(Ae,0),r.point(Ae,-i),r.point(0,-i),r.point(-Ae,-i),r.point(-Ae,0),r.point(-Ae,i);else if(b(e[0]-t[0])>ke){var o=e[0]<t[0]?Ae:-Ae;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])},[-Ae,-Ae/2]);function nr(e,t,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,c=a.y,u=0,d=1,f=s.x-l,p=s.y-c;if(o=e-l,f||!(o>0)){if(o/=f,f<0){if(o<u)return;o<d&&(d=o)}else if(f>0){if(o>d)return;o>u&&(u=o)}if(o=n-l,f||!(o<0)){if(o/=f,f<0){if(o>d)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<d&&(d=o)}if(o=t-c,p||!(o>0)){if(o/=p,p<0){if(o<u)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>u&&(u=o)}if(o=r-c,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<d&&(d=o)}return u>0&&(i.a={x:l+u*f,y:c+u*p}),d<1&&(i.b={x:l+d*f,y:c+d*p}),i}}}}}}var rr=1e9;function ir(t,n,r,i){return function(l){var c,u,d,f,p,h,g,v,m,b,y,x=l,_=Qn(),w=nr(t,n,r,i),k={point:C,lineStart:function(){k.point=S,u&&u.push(d=[]);b=!0,m=!1,g=v=NaN},lineEnd:function(){c&&(S(f,p),h&&m&&_.rejoin(),c.push(_.buffer()));k.point=C,m&&l.lineEnd()},polygonStart:function(){l=_,c=[],u=[],y=!0},polygonEnd:function(){l=x,c=e.merge(c);var n=function(e){for(var t=0,n=u.length,r=e[1],i=0;i<n;++i)for(var o,a=1,s=u[i],l=s.length,c=s[0];a<l;++a)o=s[a],c[1]<=r?o[1]>r&&Pe(c,o,e)>0&&++t:o[1]<=r&&Pe(c,o,e)<0&&--t,c=o;return 0!==t}([t,i]),r=y&&n,o=c.length;(r||o)&&(l.polygonStart(),r&&(l.lineStart(),T(null,null,1,l),l.lineEnd()),o&&Gn(c,a,n,T,l),l.polygonEnd()),c=u=d=null}};function T(e,a,l,c){var u=0,d=0;if(null==e||(u=o(e,l))!==(d=o(a,l))||s(e,a)<0^l>0)do{c.point(0===u||3===u?t:r,u>1?i:n)}while((u=(u+l+4)%4)!==d);else c.point(a[0],a[1])}function A(e,o){return t<=e&&e<=r&&n<=o&&o<=i}function C(e,t){A(e,t)&&l.point(e,t)}function S(e,t){var n=A(e=Math.max(-rr,Math.min(rr,e)),t=Math.max(-rr,Math.min(rr,t)));if(u&&d.push([e,t]),b)f=e,p=t,h=n,b=!1,n&&(l.lineStart(),l.point(e,t));else if(n&&m)l.point(e,t);else{var r={a:{x:g,y:v},b:{x:e,y:t}};w(r)?(m||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),n||l.lineEnd(),y=!1):n&&(l.lineStart(),l.point(e,t),y=!1)}g=e,v=t,m=n}return k};function o(e,i){return b(e[0]-t)<ke?i>0?0:3:b(e[0]-r)<ke?i>0?2:1:b(e[1]-n)<ke?i>0?1:0:i>0?3:2}function a(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function or(e){var t=0,n=Ae/3,r=Sr(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Ae/180,n=e[1]*Ae/180):[t/Ae*180,n/Ae*180]},i}function ar(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function a(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),o-n*Math.cos(e)]}return a.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/r,Re((i-(e*e+n*n)*r*r)/(2*r))]},a}e.geo.clipExtent=function(){var e,t,n,r,i,o,a={stream:function(e){return i&&(i.valid=!1),(i=o(e)).valid=!0,i},extent:function(s){return arguments.length?(o=ir(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[e,t],[n,r]]}};return a.extent([[0,0],[960,500]])},(e.geo.conicEqualArea=function(){return or(ar)}).raw=ar,e.geo.albers=function(){return e.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},e.geo.albersUsa=function(){var t,n,r,i,o=e.geo.albers(),a=e.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=e.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};function c(e){var o=e[0],a=e[1];return t=null,n(o,a),t||(r(o,a),t)||i(o,a),t}return c.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:o).invert(e)},c.stream=function(e){var t=o.stream(e),n=a.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},c.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),c):o.precision()},c.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),c.translate(o.translate())):o.scale()},c.translate=function(e){if(!arguments.length)return o.translate();var t=o.scale(),u=+e[0],d=+e[1];return n=o.translate(e).clipExtent([[u-.455*t,d-.238*t],[u+.455*t,d+.238*t]]).stream(l).point,r=a.translate([u-.307*t,d+.201*t]).clipExtent([[u-.425*t+ke,d+.12*t+ke],[u-.214*t-ke,d+.234*t-ke]]).stream(l).point,i=s.translate([u-.205*t,d+.212*t]).clipExtent([[u-.214*t+ke,d+.166*t+ke],[u-.115*t-ke,d+.234*t-ke]]).stream(l).point,c},c.scale(1070)};var sr,lr,cr,ur,dr,fr,pr={point:F,lineStart:F,lineEnd:F,polygonStart:function(){lr=0,pr.lineStart=hr},polygonEnd:function(){pr.lineStart=pr.lineEnd=pr.point=F,sr+=b(lr/2)}};function hr(){var e,t,n,r;function i(e,t){lr+=r*e-n*t,n=e,r=t}pr.point=function(o,a){pr.point=i,e=n=o,t=r=a},pr.lineEnd=function(){i(e,t)}}var gr={point:function(e,t){e<cr&&(cr=e);e>dr&&(dr=e);t<ur&&(ur=t);t>fr&&(fr=t)},lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F};function vr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var mr,br={point:yr,lineStart:xr,lineEnd:_r,polygonStart:function(){br.lineStart=wr},polygonEnd:function(){br.point=yr,br.lineStart=xr,br.lineEnd=_r}};function yr(e,t){xn+=e,_n+=t,++wn}function xr(){var e,t;function n(n,r){var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o);kn+=a*(e+n)/2,Tn+=a*(t+r)/2,An+=a,yr(e=n,t=r)}br.point=function(r,i){br.point=n,yr(e=r,t=i)}}function _r(){br.point=yr}function wr(){var e,t,n,r;function i(e,t){var i=e-n,o=t-r,a=Math.sqrt(i*i+o*o);kn+=a*(n+e)/2,Tn+=a*(r+t)/2,An+=a,Cn+=(a=r*e-n*t)*(n+e),Sn+=a*(r+t),Mn+=3*a,yr(n=e,r=t)}br.point=function(o,a){br.point=i,yr(e=n=o,t=r=a)},br.lineEnd=function(){i(e,t)}}function kr(e){var t=.5,n=Math.cos(30*Ee),r=16;function i(t){return(r?function(t){var n,i,a,s,l,c,u,d,f,p,h,g,v={point:m,lineStart:b,lineEnd:x,polygonStart:function(){t.polygonStart(),v.lineStart=_},polygonEnd:function(){t.polygonEnd(),v.lineStart=b}};function m(n,r){n=e(n,r),t.point(n[0],n[1])}function b(){d=NaN,v.point=y,t.lineStart()}function y(n,i){var a=Pn([n,i]),s=e(n,i);o(d,f,u,p,h,g,d=s[0],f=s[1],u=n,p=a[0],h=a[1],g=a[2],r,t),t.point(d,f)}function x(){v.point=m,t.lineEnd()}function _(){b(),v.point=w,v.lineEnd=k}function w(e,t){y(n=e,t),i=d,a=f,s=p,l=h,c=g,v.point=y}function k(){o(d,f,u,p,h,g,i,a,n,s,l,c,r,t),v.lineEnd=x,x()}return v}:function(t){return Ar(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})})(t)}function o(r,i,a,s,l,c,u,d,f,p,h,g,v,m){var y=u-r,x=d-i,_=y*y+x*x;if(_>4*t&&v--){var w=s+p,k=l+h,T=c+g,A=Math.sqrt(w*w+k*k+T*T),C=Math.asin(T/=A),S=b(b(T)-1)<ke||b(a-f)<ke?(a+f)/2:Math.atan2(k,w),M=e(S,C),E=M[0],O=M[1],L=E-r,P=O-i,D=x*L-y*P;(D*D/_>t||b((y*L+x*P)/_-.5)>.3||s*p+l*h+c*g<n)&&(o(r,i,a,s,l,c,E,O,S,w/=A,k/=A,T,v,m),m.point(E,O),o(E,O,S,w,k,T,u,d,f,p,h,g,v,m))}}return i.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function Tr(e){this.stream=e}function Ar(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Cr(e){return Sr(function(){return e})()}function Sr(t){var n,r,i,o,a,s,l=kr(function(e,t){return[(e=n(e,t))[0]*c+o,a-e[1]*c]}),c=150,u=480,d=250,f=0,p=0,h=0,g=0,v=0,m=tr,y=L,x=null,_=null;function w(e){return[(e=i(e[0]*Ee,e[1]*Ee))[0]*c+o,a-e[1]*c]}function k(e){return(e=i.invert((e[0]-o)/c,(a-e[1])/c))&&[e[0]*Oe,e[1]*Oe]}function T(){i=Wn(r=Lr(h,g,v),n);var e=n(f,p);return o=u-e[0]*c,a=d+e[1]*c,A()}function A(){return s&&(s.valid=!1,s=null),w}return w.stream=function(e){return s&&(s.valid=!1),(s=Mr(m(r,l(y(e))))).valid=!0,s},w.clipAngle=function(e){return arguments.length?(m=null==e?(x=e,tr):function(e){var t=Math.cos(e),n=t>0,r=b(t)>ke;return Jn(i,function(e){var t,s,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,f){var p,h=[d,f],g=i(d,f),v=n?g?0:a(d,f):g?a(d+(d<0?Ae:-Ae),f):0;if(!t&&(c=l=g)&&e.lineStart(),g!==l&&(p=o(t,h),(zn(t,p)||zn(h,p))&&(h[0]+=ke,h[1]+=ke,g=i(h[0],h[1]))),g!==l)u=0,g?(e.lineStart(),p=o(h,t),e.point(p[0],p[1])):(p=o(t,h),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(r&&t&&n^g){var m;v&s||!(m=o(h,t,!0))||(u=0,n?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1])))}!g||t&&zn(t,h)||e.point(h[0],h[1]),t=h,l=g,s=v},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return u|(c&&l)<<1}}},Fr(e,6*Ee),n?[0,-e]:[-Ae,e-Ae]);function i(e,n){return Math.cos(e)*Math.cos(n)>t}function o(e,n,r){var i=[1,0,0],o=Rn(Pn(e),Pn(n)),a=Dn(o,o),s=o[0],l=a-s*s;if(!l)return!r&&e;var c=t*a/l,u=-t*s/l,d=Rn(i,o),f=jn(i,c);Fn(f,jn(o,u));var p=d,h=Dn(f,p),g=Dn(p,p),v=h*h-g*(Dn(f,f)-1);if(!(v<0)){var m=Math.sqrt(v),y=jn(p,(-h-m)/g);if(Fn(y,f),y=Nn(y),!r)return y;var x,_=e[0],w=n[0],k=e[1],T=n[1];w<_&&(x=_,_=w,w=x);var A=w-_,C=b(A-Ae)<ke;if(!C&&T<k&&(x=k,k=T,T=x),C||A<ke?C?k+T>0^y[1]<(b(y[0]-_)<ke?k:T):k<=y[1]&&y[1]<=T:A>Ae^(_<=y[0]&&y[0]<=w)){var S=jn(p,(-h+m)/g);return Fn(S,f),[y,Nn(S)]}}}function a(t,r){var i=n?e:Ae-e,o=0;return t<-i?o|=1:t>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}((x=+e)*Ee),A()):x},w.clipExtent=function(e){return arguments.length?(_=e,y=e?ir(e[0][0],e[0][1],e[1][0],e[1][1]):L,A()):_},w.scale=function(e){return arguments.length?(c=+e,T()):c},w.translate=function(e){return arguments.length?(u=+e[0],d=+e[1],T()):[u,d]},w.center=function(e){return arguments.length?(f=e[0]%360*Ee,p=e[1]%360*Ee,T()):[f*Oe,p*Oe]},w.rotate=function(e){return arguments.length?(h=e[0]%360*Ee,g=e[1]%360*Ee,v=e.length>2?e[2]%360*Ee:0,T()):[h*Oe,g*Oe,v*Oe]},e.rebind(w,l,"precision"),function(){return n=t.apply(this,arguments),w.invert=n.invert&&k,T()}}function Mr(e){return Ar(e,function(t,n){e.point(t*Ee,n*Ee)})}function Er(e,t){return[e,t]}function Or(e,t){return[e>Ae?e-Ce:e<-Ae?e+Ce:e,t]}function Lr(e,t,n){return e?t||n?Wn(Dr(e),Rr(t,n)):Dr(e):t||n?Rr(t,n):Or}function Pr(e){return function(t,n){return[(t+=e)>Ae?t-Ce:t<-Ae?t+Ce:t,n]}}function Dr(e){var t=Pr(e);return t.invert=Pr(-e),t}function Rr(e,t){var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),o=Math.sin(t);function a(e,t){var a=Math.cos(t),s=Math.cos(e)*a,l=Math.sin(e)*a,c=Math.sin(t),u=c*n+s*r;return[Math.atan2(l*i-u*o,s*n-c*r),Re(u*i+l*o)]}return a.invert=function(e,t){var a=Math.cos(t),s=Math.cos(e)*a,l=Math.sin(e)*a,c=Math.sin(t),u=c*i-l*o;return[Math.atan2(l*i+c*o,s*n+u*r),Re(u*n-s*r)]},a}function Fr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,o,a,s){var l=a*t;null!=i?(i=jr(n,i),o=jr(n,o),(a>0?i<o:i>o)&&(i+=a*Ce)):(i=e+a*Ce,o=e-.5*l);for(var c,u=i;a>0?u>o:u<o;u-=l)s.point((c=Nn([n,-r*Math.cos(u),-r*Math.sin(u)]))[0],c[1])}}function jr(e,t){var n=Pn(t);n[0]-=e,In(n);var r=De(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-ke)%(2*Math.PI)}function Ir(t,n,r){var i=e.range(t,n-ke,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function Nr(t,n,r){var i=e.range(t,n-ke,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function zr(e){return e.source}function qr(e){return e.target}e.geo.path=function(){var t,n,r,i,o,a=4.5;function s(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=r(i)),e.geo.stream(t,o)),i.result()}function l(){return o=null,s}return s.area=function(t){return sr=0,e.geo.stream(t,r(pr)),sr},s.centroid=function(t){return xn=_n=wn=kn=Tn=An=Cn=Sn=Mn=0,e.geo.stream(t,r(br)),Mn?[Cn/Mn,Sn/Mn]:An?[kn/An,Tn/An]:wn?[xn/wn,_n/wn]:[NaN,NaN]},s.bounds=function(t){return dr=fr=-(cr=ur=1/0),e.geo.stream(t,r(gr)),[[cr,ur],[dr,fr]]},s.projection=function(e){return arguments.length?(r=(t=e)?e.stream||function(e){var t=kr(function(t,n){return e([t*Oe,n*Oe])});return function(e){return Mr(t(e))}}(e):L,l()):t},s.context=function(e){return arguments.length?(i=null==(n=e)?new function(){var e=vr(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=vr(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=o}function o(e,n){t.push("L",e,",",n)}function a(){n.point=r}function s(){t.push("Z")}return n}:new function(e){var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=e,n},result:F};function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,Ce)}function i(t,r){e.moveTo(t,r),n.point=o}function o(t,n){e.lineTo(t,n)}function a(){n.point=r}function s(){e.closePath()}return n}(e),"function"!=typeof a&&i.pointRadius(a),l()):n},s.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),s):a},s.projection(e.geo.albersUsa()).context(null)},e.geo.transform=function(e){return{stream:function(t){var n=new Tr(t);for(var r in e)n[r]=e[r];return n}}},Tr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},e.geo.projection=Cr,e.geo.projectionMutator=Sr,(e.geo.equirectangular=function(){return Cr(Er)}).raw=Er.invert=Er,e.geo.rotation=function(e){function t(t){return(t=e(t[0]*Ee,t[1]*Ee))[0]*=Oe,t[1]*=Oe,t}return e=Lr(e[0]%360*Ee,e[1]*Ee,e.length>2?e[2]*Ee:0),t.invert=function(t){return(t=e.invert(t[0]*Ee,t[1]*Ee))[0]*=Oe,t[1]*=Oe,t},t},Or.invert=Er,e.geo.circle=function(){var e,t,n=[0,0],r=6;function i(){var e="function"==typeof n?n.apply(this,arguments):n,r=Lr(-e[0]*Ee,-e[1]*Ee,0).invert,i=[];return t(null,null,1,{point:function(e,t){i.push(e=r(e,t)),e[0]*=Oe,e[1]*=Oe}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(e){return arguments.length?(n=e,i):n},i.angle=function(n){return arguments.length?(t=Fr((e=+n)*Ee,r*Ee),i):e},i.precision=function(n){return arguments.length?(t=Fr(e*Ee,(r=+n)*Ee),i):r},i.angle(90)},e.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Ee,i=e[1]*Ee,o=t[1]*Ee,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),c=Math.cos(i),u=Math.sin(o),d=Math.cos(o);return Math.atan2(Math.sqrt((n=d*a)*n+(n=c*u-l*d*s)*n),l*u+c*d*s)},e.geo.graticule=function(){var t,n,r,i,o,a,s,l,c,u,d,f,p=10,h=p,g=90,v=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:x()}}function x(){return e.range(Math.ceil(i/g)*g,r,g).map(d).concat(e.range(Math.ceil(l/v)*v,s,v).map(f)).concat(e.range(Math.ceil(n/p)*p,t,p).filter(function(e){return b(e%g)>ke}).map(c)).concat(e.range(Math.ceil(a/h)*h,o,h).filter(function(e){return b(e%v)>ke}).map(u))}return y.lines=function(){return x().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(f(s).slice(1),d(r).reverse().slice(1),f(l).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],l=+e[0][1],s=+e[1][1],i>r&&(e=i,i=r,r=e),l>s&&(e=l,l=s,s=e),y.precision(m)):[[i,l],[r,s]]},y.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],a=+e[0][1],o=+e[1][1],n>t&&(e=n,n=t,t=e),a>o&&(e=a,a=o,o=e),y.precision(m)):[[n,a],[t,o]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(g=+e[0],v=+e[1],y):[g,v]},y.minorStep=function(e){return arguments.length?(p=+e[0],h=+e[1],y):[p,h]},y.precision=function(e){return arguments.length?(m=+e,c=Ir(a,o,90),u=Nr(n,t,m),d=Ir(l,s,90),f=Nr(i,r,m),y):m},y.majorExtent([[-180,-90+ke],[180,90-ke]]).minorExtent([[-180,-80-ke],[180,80+ke]])},e.geo.greatArc=function(){var t,n,r=zr,i=qr;function o(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}return o.distance=function(){return e.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},o.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,o):r},o.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,o):i},o.precision=function(){return arguments.length?o:0},o},e.geo.interpolate=function(e,t){return function(e,t,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(r),s=Math.sin(r),l=i*Math.cos(e),c=i*Math.sin(e),u=a*Math.cos(n),d=a*Math.sin(n),f=2*Math.asin(Math.sqrt(je(r-t)+i*a*je(n-e))),p=1/Math.sin(f),h=f?function(e){var t=Math.sin(e*=f)*p,n=Math.sin(f-e)*p,r=n*l+t*u,i=n*c+t*d,a=n*o+t*s;return[Math.atan2(i,r)*Oe,Math.atan2(a,Math.sqrt(r*r+i*i))*Oe]}:function(){return[e*Oe,t*Oe]};return h.distance=f,h}(e[0]*Ee,e[1]*Ee,t[0]*Ee,t[1]*Ee)},e.geo.length=function(t){return mr=0,e.geo.stream(t,Hr),mr};var Hr={sphere:F,point:F,lineStart:function(){var e,t,n;function r(r,i){var o=Math.sin(i*=Ee),a=Math.cos(i),s=b((r*=Ee)-e),l=Math.cos(s);mr+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*o-t*a*l)*s),t*o+n*a*l),e=r,t=o,n=a}Hr.point=function(i,o){e=i*Ee,t=Math.sin(o*=Ee),n=Math.cos(o),Hr.point=r},Hr.lineEnd=function(){Hr.point=Hr.lineEnd=F}},lineEnd:F,polygonStart:F,polygonEnd:F};function Br(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),o=e(r*i);return[o*i*Math.sin(t),o*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(e*o,r*a),Math.asin(r&&n*o/r)]},n}var Vr=Br(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(e.geo.azimuthalEqualArea=function(){return Cr(Vr)}).raw=Vr;var Ur=Br(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},L);function $r(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Ae/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),o=n*Math.pow(r(e),i)/i;if(!i)return Gr;function a(e,t){o>0?t<-Me+ke&&(t=-Me+ke):t>Me-ke&&(t=Me-ke);var n=o/Math.pow(r(t),i);return[n*Math.sin(i*e),o-n*Math.cos(i*e)]}return a.invert=function(e,t){var n=o-t,r=Le(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(o/r,1/i))-Me]},a}function Wr(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;if(b(r)<ke)return Er;function o(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}return o.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-Le(r)*Math.sqrt(e*e+n*n)]},o}(e.geo.azimuthalEquidistant=function(){return Cr(Ur)}).raw=Ur,(e.geo.conicConformal=function(){return or($r)}).raw=$r,(e.geo.conicEquidistant=function(){return or(Wr)}).raw=Wr;var Xr=Br(function(e){return 1/e},Math.atan);function Gr(e,t){return[e,Math.log(Math.tan(Ae/4+t/2))]}function Yr(e){var t,n=Cr(e),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=o.apply(n,arguments);if(a===n){if(t=null==e){var s=Ae*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}(e.geo.gnomonic=function(){return Cr(Xr)}).raw=Xr,Gr.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Me]},(e.geo.mercator=function(){return Yr(Gr)}).raw=Gr;var Zr=Br(function(){return 1},Math.asin);(e.geo.orthographic=function(){return Cr(Zr)}).raw=Zr;var Jr=Br(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});function Kr(e,t){return[Math.log(Math.tan(Ae/4+t/2)),-e]}function Qr(e){return e[0]}function ei(e){return e[1]}function ti(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;r>1&&Pe(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ni(e,t){return e[0]-t[0]||e[1]-t[1]}(e.geo.stereographic=function(){return Cr(Jr)}).raw=Jr,Kr.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Me]},(e.geo.transverseMercator=function(){var e=Yr(Kr),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=Kr,e.geom={},e.geom.hull=function(e){var t=Qr,n=ei;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r,i=vt(t),o=vt(n),a=e.length,s=[],l=[];for(r=0;r<a;r++)s.push([+i.call(this,e[r],r),+o.call(this,e[r],r),r]);for(s.sort(ni),r=0;r<a;r++)l.push([s[r][0],-s[r][1]]);var c=ti(s),u=ti(l),d=u[0]===c[0],f=u[u.length-1]===c[c.length-1],p=[];for(r=c.length-1;r>=0;--r)p.push(e[s[c[r]][2]]);for(r=+d;r<u.length-f;++r)p.push(e[s[u[r]][2]]);return p}return r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},e.geom.polygon=function(e){return B(e,ri),e};var ri=e.geom.polygon.prototype=[];function ii(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function oi(e,t,n,r){var i=e[0],o=n[0],a=t[0]-i,s=r[0]-o,l=e[1],c=n[1],u=t[1]-l,d=r[1]-c,f=(s*(l-c)-d*(i-o))/(d*a-s*u);return[i+f*a,l+f*u]}function ai(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}ri.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},ri.centroid=function(e){var t,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},ri.clip=function(e){for(var t,n,r,i,o,a,s=ai(e),l=-1,c=this.length-ai(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,i=this[l],o=t[(r=t.length-s)-1],n=-1;++n<r;)ii(a=t[n],u,i)?(ii(o,u,i)||e.push(oi(o,a,u,i)),e.push(a)):ii(o,u,i)&&e.push(oi(o,a,u,i)),o=a;s&&e.push(e[0]),u=i}return e};var si,li,ci,ui,di,fi=[],pi=[];function hi(e){var t=fi.pop()||new function(){Li(this),this.edge=this.site=this.circle=null};return t.site=e,t}function gi(e){ki(e),ci.remove(e),fi.push(e),Li(e)}function vi(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},o=e.P,a=e.N,s=[e];gi(e);for(var l=o;l.circle&&b(n-l.circle.x)<ke&&b(r-l.circle.cy)<ke;)o=l.P,s.unshift(l),gi(l),l=o;s.unshift(l),ki(l);for(var c=a;c.circle&&b(n-c.circle.x)<ke&&b(r-c.circle.cy)<ke;)a=c.N,s.push(c),gi(c),c=a;s.push(c),ki(c);var u,d=s.length;for(u=1;u<d;++u)c=s[u],l=s[u-1],Mi(c.edge,l.site,c.site,i);l=s[0],(c=s[d-1]).edge=Ci(l.site,c.site,null,i),wi(l),wi(c)}function mi(e){for(var t,n,r,i,o=e.x,a=e.y,s=ci._;s;)if((r=bi(s,a)-o)>ke)s=s.L;else{if(!((i=o-yi(s,a))>ke)){r>-ke?(t=s.P,n=s):i>-ke?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=hi(e);if(ci.insert(t,l),t||n){if(t===n)return ki(t),n=hi(t.site),ci.insert(l,n),l.edge=n.edge=Ci(t.site,l.site),wi(t),void wi(n);if(n){ki(t),ki(n);var c=t.site,u=c.x,d=c.y,f=e.x-u,p=e.y-d,h=n.site,g=h.x-u,v=h.y-d,m=2*(f*v-p*g),b=f*f+p*p,y=g*g+v*v,x={x:(v*b-p*y)/m+u,y:(f*y-g*b)/m+d};Mi(n.edge,c,h,x),l.edge=Ci(c,e,null,x),n.edge=Ci(e,h,null,x),wi(t),wi(n)}else l.edge=Ci(t.site,l.site)}}function bi(e,t){var n=e.site,r=n.x,i=n.y,o=i-t;if(!o)return r;var a=e.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,c=l-t;if(!c)return s;var u=s-r,d=1/o-1/c,f=u/c;return d?(-f+Math.sqrt(f*f-2*d*(u*u/(-2*c)-l+c/2+i-o/2)))/d+r:(r+s)/2}function yi(e,t){var n=e.N;if(n)return bi(n,t);var r=e.site;return r.y===t?r.x:1/0}function xi(e){this.site=e,this.edges=[]}function _i(e,t){return t.angle-e.angle}function wi(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,c=r.y-s,u=o.x-a,d=2*(l*(v=o.y-s)-c*u);if(!(d>=-Te)){var f=l*l+c*c,p=u*u+v*v,h=(v*f-c*p)/d,g=(l*p-u*f)/d,v=g+s,m=pi.pop()||new function(){Li(this),this.x=this.y=this.arc=this.site=this.cy=null};m.arc=e,m.site=i,m.x=h+a,m.y=v+Math.sqrt(h*h+g*g),m.cy=v,e.circle=m;for(var b=null,y=di._;y;)if(m.y<y.y||m.y===y.y&&m.x<=y.x){if(!y.L){b=y.P;break}y=y.L}else{if(!y.R){b=y;break}y=y.R}di.insert(b,m),b||(ui=m)}}}}function ki(e){var t=e.circle;t&&(t.P||(ui=t.N),di.remove(t),pi.push(t),Li(t),e.circle=null)}function Ti(e,t){var n=e.b;if(n)return!0;var r,i,o=e.a,a=t[0][0],s=t[1][0],l=t[0][1],c=t[1][1],u=e.l,d=e.r,f=u.x,p=u.y,h=d.x,g=d.y,v=(f+h)/2,m=(p+g)/2;if(g===p){if(v<a||v>=s)return;if(f>h){if(o){if(o.y>=c)return}else o={x:v,y:l};n={x:v,y:c}}else{if(o){if(o.y<l)return}else o={x:v,y:c};n={x:v,y:l}}}else if(i=m-(r=(f-h)/(g-p))*v,r<-1||r>1)if(f>h){if(o){if(o.y>=c)return}else o={x:(l-i)/r,y:l};n={x:(c-i)/r,y:c}}else{if(o){if(o.y<l)return}else o={x:(c-i)/r,y:c};n={x:(l-i)/r,y:l}}else if(p<g){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return e.a=o,e.b=n,!0}function Ai(e,t){this.l=e,this.r=t,this.a=this.b=null}function Ci(e,t,n,r){var i=new Ai(e,t);return si.push(i),n&&Mi(i,e,t,n),r&&Mi(i,t,e,r),li[e.i].edges.push(new Ei(i,e,t)),li[t.i].edges.push(new Ei(i,t,e)),i}function Si(e,t,n){var r=new Ai(e,null);return r.a=t,r.b=n,si.push(r),r}function Mi(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Ei(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Oi(){this._=null}function Li(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Pi(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Di(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ri(e){for(;e.L;)e=e.L;return e}function Fi(e,t){var n,r,i,o=e.sort(ji).pop();for(si=[],li=new Array(e.length),ci=new Oi,di=new Oi;;)if(i=ui,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(li[o.i]=new xi(o),mi(o),n=o.x,r=o.y),o=e.pop();else{if(!i)break;vi(i.arc)}t&&(function(e){for(var t,n=si,r=nr(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)(!Ti(t=n[i],e)||!r(t)||b(t.a.x-t.b.x)<ke&&b(t.a.y-t.b.y)<ke)&&(t.a=t.b=null,n.splice(i,1))}(t),function(e){for(var t,n,r,i,o,a,s,l,c,u,d=e[0][0],f=e[1][0],p=e[0][1],h=e[1][1],g=li,v=g.length;v--;)if((o=g[v])&&o.prepare())for(l=(s=o.edges).length,a=0;a<l;)r=(u=s[a].end()).x,i=u.y,t=(c=s[++a%l].start()).x,n=c.y,(b(r-t)>ke||b(i-n)>ke)&&(s.splice(a,0,new Ei(Si(o.site,u,b(r-d)<ke&&h-i>ke?{x:d,y:b(t-d)<ke?n:h}:b(i-h)<ke&&f-r>ke?{x:b(n-h)<ke?t:f,y:h}:b(r-f)<ke&&i-p>ke?{x:f,y:b(t-f)<ke?n:p}:b(i-p)<ke&&r-d>ke?{x:b(n-p)<ke?t:d,y:p}:null),o.site,null)),++l)}(t));var a={cells:li,edges:si};return ci=di=si=li=null,a}function ji(e,t){return t.y-e.y||t.x-e.x}xi.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(_i),t.length},Ei.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Oi.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Ri(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Pi(this,n),n=(e=n).U),n.C=!1,r.C=!0,Di(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Di(this,n),n=(e=n).U),n.C=!1,r.C=!0,Pi(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?Ri(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Pi(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Di(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Pi(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Di(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Pi(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Di(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},e.geom.voronoi=function(e){var t=Qr,n=ei,r=t,i=n,o=Ii;if(e)return a(e);function a(e){var t=new Array(e.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return Fi(s(e),o).cells.forEach(function(o,s){var l=o.edges,c=o.site;(t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):c.x>=n&&c.x<=i&&c.y>=r&&c.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[]).point=e[s]}),t}function s(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/ke)*ke,y:Math.round(i(e,t)/ke)*ke,i:t}})}return a.links=function(e){return Fi(s(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},a.triangles=function(e){var t=[];return Fi(s(e)).cells.forEach(function(n,r){for(var i,o=n.site,a=n.edges.sort(_i),s=-1,l=a.length,c=a[l-1].edge,u=c.l===o?c.r:c.l;++s<l;)c,i=u,u=(c=a[s].edge).l===o?c.r:c.l,r<i.i&&r<u.i&&Ni(o,i,u)<0&&t.push([e[r],e[i.i],e[u.i]])}),t},a.x=function(e){return arguments.length?(r=vt(t=e),a):t},a.y=function(e){return arguments.length?(i=vt(n=e),a):n},a.clipExtent=function(e){return arguments.length?(o=null==e?Ii:e,a):o===Ii?null:o},a.size=function(e){return arguments.length?a.clipExtent(e&&[[0,0],e]):o===Ii?null:o&&o[1]},a};var Ii=[[-1e6,-1e6],[1e6,1e6]];function Ni(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function zi(e){return e.x}function qi(e){return e.y}function Hi(t,n){t=e.rgb(t),n=e.rgb(n);var r=t.r,i=t.g,o=t.b,a=n.r-r,s=n.g-i,l=n.b-o;return function(e){return"#"+ct(Math.round(r+a*e))+ct(Math.round(i+s*e))+ct(Math.round(o+l*e))}}function Bi(e,t){var n,r={},i={};for(n in e)n in t?r[n]=Xi(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function Vi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ui(e,t){var n,r,i,o=$i.lastIndex=Wi.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=$i.exec(e))&&(r=Wi.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Vi(n,r)})),o=Wi.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)},e.geom.quadtree=function(e,t,n,r,i){var o,a=Qr,s=ei;if(o=arguments.length)return a=zi,s=qi,3===o&&(i=n,r=t,n=t=0),l(e);function l(e){var l,c,u,d,f,p,h,g,v,m=vt(a),y=vt(s);if(null!=t)p=t,h=n,g=r,v=i;else if(g=v=-(p=h=1/0),c=[],u=[],f=e.length,o)for(d=0;d<f;++d)(l=e[d]).x<p&&(p=l.x),l.y<h&&(h=l.y),l.x>g&&(g=l.x),l.y>v&&(v=l.y),c.push(l.x),u.push(l.y);else for(d=0;d<f;++d){var x=+m(l=e[d],d),_=+y(l,d);x<p&&(p=x),_<h&&(h=_),x>g&&(g=x),_>v&&(v=_),c.push(x),u.push(_)}var w=g-p,k=v-h;function T(e,t,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(b(l-n)+b(c-r)<.01)A(e,t,n,r,i,o,a,s);else{var u=e.point;e.x=e.y=e.point=null,A(e,u,l,c,i,o,a,s),A(e,t,n,r,i,o,a,s)}else e.x=n,e.y=r,e.point=t}else A(e,t,n,r,i,o,a,s)}function A(e,t,n,r,i,o,a,s){var l=.5*(i+a),c=.5*(o+s),u=n>=l,d=r>=c,f=d<<1|u;e.leaf=!1,e=e.nodes[f]||(e.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){T(C,e,+m(e,++d),+y(e,d),p,h,g,v)}}),u?i=l:a=l,d?o=c:s=c,T(e,t,n,r,i,o,a,s)}w>k?v=h+w:g=p+k;var C={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){T(C,e,+m(e,++d),+y(e,d),p,h,g,v)}};if(C.visit=function(e){!function e(t,n,r,i,o,a){if(!t(n,r,i,o,a)){var s=.5*(r+o),l=.5*(i+a),c=n.nodes;c[0]&&e(t,c[0],r,i,s,l),c[1]&&e(t,c[1],s,i,o,l),c[2]&&e(t,c[2],r,l,s,a),c[3]&&e(t,c[3],s,l,o,a)}}(e,C,p,h,g,v)},C.find=function(e){return function(e,t,n,r,i,o,a){var s,l=1/0;return function e(c,u,d,f,p){if(!(u>o||d>a||f<r||p<i)){if(h=c.point){var h,g=t-c.x,v=n-c.y,m=g*g+v*v;if(m<l){var b=Math.sqrt(l=m);r=t-b,i=n-b,o=t+b,a=n+b,s=h}}for(var y=c.nodes,x=.5*(u+f),_=.5*(d+p),w=(n>=_)<<1|t>=x,k=w+4;w<k;++w)if(c=y[3&w])switch(3&w){case 0:e(c,u,d,x,_);break;case 1:e(c,x,d,f,_);break;case 2:e(c,u,_,x,p);break;case 3:e(c,x,_,f,p)}}}(e,r,i,o,a),s}(C,e[0],e[1],p,h,g,v)},d=-1,null==t){for(;++d<f;)T(C,e[d],c[d],u[d],p,h,g,v);--d}else e.forEach(C.add);return c=u=e=l=null,C}return l.x=function(e){return arguments.length?(a=e,l):a},l.y=function(e){return arguments.length?(s=e,l):s},l.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),l):null==t?null:[[t,n],[r,i]]},l.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),l):null==t?null:[r-t,i-n]},l},e.interpolateRgb=Hi,e.interpolateObject=Bi,e.interpolateNumber=Vi,e.interpolateString=Ui;var $i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wi=new RegExp($i.source,"g");function Xi(t,n){for(var r,i=e.interpolators.length;--i>=0&&!(r=e.interpolators[i](t,n)););return r}function Gi(e,t){var n,r=[],i=[],o=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(Xi(e[n],t[n]));for(;n<o;++n)i[n]=e[n];for(;n<a;++n)i[n]=t[n];return function(e){for(n=0;n<s;++n)i[n]=r[n](e);return i}}e.interpolate=Xi,e.interpolators=[function(e,t){var n=typeof t;return("string"===n?gt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Hi:Ui:t instanceof He?Hi:Array.isArray(t)?Gi:"object"===n&&isNaN(t)?Bi:Vi)(e,t)}],e.interpolateArray=Gi;var Yi=function(){return L},Zi=e.map({linear:Yi,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return eo},cubic:function(){return to},sin:function(){return ro},exp:function(){return io},circle:function(){return oo},elastic:function(e,t){var n;arguments.length<2&&(t=.45);arguments.length?n=t/Ce*Math.asin(1/e):(e=1,n=t/4);return function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Ce/t)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return ao}}),Ji=e.map({in:L,out:Ki,"in-out":Qi,"out-in":function(e){return Qi(Ki(e))}});function Ki(e){return function(t){return 1-e(1-t)}}function Qi(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function eo(e){return e*e}function to(e){return e*e*e}function no(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function ro(e){return 1-Math.cos(e*Me)}function io(e){return Math.pow(2,10*(e-1))}function oo(e){return 1-Math.sqrt(1-e*e)}function ao(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function so(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function lo(e){var t=[e.a,e.b],n=[e.c,e.d],r=uo(t),i=co(t,n),o=uo(function(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Oe,this.translate=[e.e,e.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Oe:0}function co(e,t){return e[0]*t[0]+e[1]*t[1]}function uo(e){var t=Math.sqrt(co(e,e));return t&&(e[0]/=t,e[1]/=t),t}e.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";return r=Zi.get(r)||Yi,function(e){return function(t){return t<=0?0:t>=1?1:e(t)}}((i=Ji.get(i)||L)(r.apply(null,n.call(arguments,1))))},e.interpolateHcl=function(t,n){t=e.hcl(t),n=e.hcl(n);var r=t.h,i=t.c,o=t.l,a=n.h-r,s=n.c-i,l=n.l-o;isNaN(s)&&(s=0,i=isNaN(i)?n.c:i);isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:a<-180&&(a+=360);return function(e){return Xe(r+a*e,i+s*e,o+l*e)+""}},e.interpolateHsl=function(t,n){t=e.hsl(t),n=e.hsl(n);var r=t.h,i=t.s,o=t.l,a=n.h-r,s=n.s-i,l=n.l-o;isNaN(s)&&(s=0,i=isNaN(i)?n.s:i);isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:a<-180&&(a+=360);return function(e){return Ue(r+a*e,i+s*e,o+l*e)+""}},e.interpolateLab=function(t,n){t=e.lab(t),n=e.lab(n);var r=t.l,i=t.a,o=t.b,a=n.l-r,s=n.a-i,l=n.b-o;return function(e){return et(r+a*e,i+s*e,o+l*e)+""}},e.interpolateRound=so,e.transform=function(t){var n=i.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(e){if(null!=e){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new lo(t?t.matrix:fo)})(t)},lo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fo={a:1,b:0,c:0,d:1,e:0,f:0};function po(e){return e.length?e.pop()+",":""}function ho(t,n){var r=[],i=[];return t=e.transform(t),n=e.transform(n),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Vi(e[0],t[0])},{i:i-2,x:Vi(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(t.translate,n.translate,r,i),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(po(n)+"rotate(",null,")")-2,x:Vi(e,t)})):t&&n.push(po(n)+"rotate("+t+")")}(t.rotate,n.rotate,r,i),function(e,t,n,r){e!==t?r.push({i:n.push(po(n)+"skewX(",null,")")-2,x:Vi(e,t)}):t&&n.push(po(n)+"skewX("+t+")")}(t.skew,n.skew,r,i),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(po(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Vi(e[0],t[0])},{i:i-2,x:Vi(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(po(n)+"scale("+t+")")}(t.scale,n.scale,r,i),t=n=null,function(e){for(var t,n=-1,o=i.length;++n<o;)r[(t=i[n]).i]=t.x(e);return r.join("")}}function go(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function vo(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function mo(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=bo(e),r=bo(t),i=n.pop(),o=r.pop(),a=null;for(;i===o;)a=i,i=n.pop(),o=r.pop();return a}(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function bo(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function yo(e){e.fixed|=2}function xo(e){e.fixed&=-7}function _o(e){e.fixed|=4,e.px=e.x,e.py=e.y}function wo(e){e.fixed&=-5}e.interpolateTransform=ho,e.layout={},e.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(mo(e[n]));return t}},e.layout.chord=function(){var t,n,r,i,o,a,s,l={},c=0;function u(){var l,u,f,p,h,g={},v=[],m=e.range(i),b=[];for(t=[],n=[],l=0,p=-1;++p<i;){for(u=0,h=-1;++h<i;)u+=r[p][h];v.push(u),b.push(e.range(i)),l+=u}for(o&&m.sort(function(e,t){return o(v[e],v[t])}),a&&b.forEach(function(e,t){e.sort(function(e,n){return a(r[t][e],r[t][n])})}),l=(Ce-c*i)/l,u=0,p=-1;++p<i;){for(f=u,h=-1;++h<i;){var y=m[p],x=b[y][h],_=r[y][x],w=u,k=u+=_*l;g[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:k,value:_}}n[y]={index:y,startAngle:f,endAngle:u,value:v[y]},u+=c}for(p=-1;++p<i;)for(h=p-1;++h<i;){var T=g[p+"-"+h],A=g[h+"-"+p];(T.value||A.value)&&t.push(T.value<A.value?{source:A,target:T}:{source:T,target:A})}s&&d()}function d(){t.sort(function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return l.matrix=function(e){return arguments.length?(i=(r=e)&&r.length,t=n=null,l):r},l.padding=function(e){return arguments.length?(c=e,t=n=null,l):c},l.sortGroups=function(e){return arguments.length?(o=e,t=n=null,l):o},l.sortSubgroups=function(e){return arguments.length?(a=e,t=null,l):a},l.sortChords=function(e){return arguments.length?(s=e,t&&d(),l):s},l.chords=function(){return t||u(),t},l.groups=function(){return n||u(),n},l},e.layout.force=function(){var t,n,r,i,o,a,s={},l=e.dispatch("start","tick","end"),c=[1,1],u=.9,d=ko,f=To,p=-30,h=Ao,g=.1,v=.64,m=[],b=[];function y(e){return function(t,n,r,i){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=i-n,l=o*o+a*a;if(s*s/v<l){if(l<h){var c=t.charge/l;e.px-=o*c,e.py-=a*c}return!0}if(t.point&&l&&l<h){c=t.pointCharge/l;e.px-=o*c,e.py-=a*c}}return!t.charge}}function x(t){t.px=e.event.x,t.py=e.event.y,s.resume()}return s.tick=function(){if((r*=.99)<.005)return t=null,l.end({type:"end",alpha:r=0}),!0;var n,s,d,f,h,v,x,_,w,k=m.length,T=b.length;for(s=0;s<T;++s)f=(d=b[s]).source,(v=(_=(h=d.target).x-f.x)*_+(w=h.y-f.y)*w)&&(_*=v=r*o[s]*((v=Math.sqrt(v))-i[s])/v,w*=v,h.x-=_*(x=f.weight+h.weight?f.weight/(f.weight+h.weight):.5),h.y-=w*x,f.x+=_*(x=1-x),f.y+=w*x);if((x=r*g)&&(_=c[0]/2,w=c[1]/2,s=-1,x))for(;++s<k;)(d=m[s]).x+=(_-d.x)*x,d.y+=(w-d.y)*x;if(p)for(!function e(t,n,r){var i=0,o=0;t.charge=0;if(!t.leaf)for(var a,s=t.nodes,l=s.length,c=-1;++c<l;)null!=(a=s[c])&&(e(a,n,r),t.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=n*r[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,o+=u*t.point.y}t.cx=i/t.charge;t.cy=o/t.charge}(n=e.geom.quadtree(m),r,a),s=-1;++s<k;)(d=m[s]).fixed||n.visit(y(d));for(s=-1;++s<k;)(d=m[s]).fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*u,d.y-=(d.py-(d.py=d.y))*u);l.tick({type:"tick",alpha:r})},s.nodes=function(e){return arguments.length?(m=e,s):m},s.links=function(e){return arguments.length?(b=e,s):b},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.friction=function(e){return arguments.length?(u=+e,s):u},s.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.chargeDistance=function(e){return arguments.length?(h=e*e,s):Math.sqrt(h)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(v=e*e,s):Math.sqrt(v)},s.alpha=function(e){return arguments.length?(e=+e,r?e>0?r=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:r=0})):e>0&&(l.start({type:"start",alpha:r=e}),t=Tt(s.tick)),s):r},s.start=function(){var e,t,n,r=m.length,l=b.length,u=c[0],h=c[1];for(e=0;e<r;++e)(n=m[e]).index=e,n.weight=0;for(e=0;e<l;++e)"number"==typeof(n=b[e]).source&&(n.source=m[n.source]),"number"==typeof n.target&&(n.target=m[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<r;++e)n=m[e],isNaN(n.x)&&(n.x=g("x",u)),isNaN(n.y)&&(n.y=g("y",h)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof d)for(e=0;e<l;++e)i[e]=+d.call(this,b[e],e);else for(e=0;e<l;++e)i[e]=d;if(o=[],"function"==typeof f)for(e=0;e<l;++e)o[e]=+f.call(this,b[e],e);else for(e=0;e<l;++e)o[e]=f;if(a=[],"function"==typeof p)for(e=0;e<r;++e)a[e]=+p.call(this,m[e],e);else for(e=0;e<r;++e)a[e]=p;function g(n,i){if(!t){for(t=new Array(r),c=0;c<r;++c)t[c]=[];for(c=0;c<l;++c){var o=b[c];t[o.source.index].push(o.target),t[o.target.index].push(o.source)}}for(var a,s=t[e],c=-1,u=s.length;++c<u;)if(!isNaN(a=s[c][n]))return a;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(n||(n=e.behavior.drag().origin(L).on("dragstart.force",yo).on("drag.force",x).on("dragend.force",xo)),!arguments.length)return n;this.on("mouseover.force",_o).on("mouseout.force",wo).call(n)},e.rebind(s,l,"on")};var ko=20,To=1,Ao=1/0;function Co(t,n){return e.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=Po,t}function So(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Mo(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(o=e.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(e=r.pop());)t(e)}function Eo(e){return e.children}function Oo(e){return e.value}function Lo(e,t){return t.value-e.value}function Po(t){return e.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}e.layout.hierarchy=function(){var e=Lo,t=Eo,n=Oo;function r(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(c=t.call(r,o,o.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)a.push(u=c[l]),u.parent=o,u.depth=o.depth+1;n&&(o.value=0),o.children=c}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return Mo(i,function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)}),s}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(So(e,function(e){e.children&&(e.value=0)}),Mo(e,function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},r},e.layout.partition=function(){var t=e.layout.hierarchy(),n=[1,1];function r(e,r){var i=t.call(this,e,r);return function e(t,n,r,i){var o=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,o&&(a=o.length)){var a,s,l,c=-1;for(r=t.value?r/t.value:0;++c<a;)e(s=o[c],n,l=s.value*r,i),n+=l}}(i[0],0,n[0],n[1]/function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}(i[0])),i}return r.size=function(e){return arguments.length?(n=e,r):n},Co(r,t)},e.layout.pie=function(){var t=Number,n=Do,r=0,i=Ce,o=0;function a(s){var l,c=s.length,u=s.map(function(e,n){return+t.call(a,e,n)}),d=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-d,p=Math.min(Math.abs(f)/c,+("function"==typeof o?o.apply(this,arguments):o)),h=p*(f<0?-1:1),g=e.sum(u),v=g?(f-c*h)/g:0,m=e.range(c),b=[];return null!=n&&m.sort(n===Do?function(e,t){return u[t]-u[e]}:function(e,t){return n(s[e],s[t])}),m.forEach(function(e){b[e]={data:s[e],value:l=u[e],startAngle:d,endAngle:d+=l*v+h,padAngle:p}}),b}return a.value=function(e){return arguments.length?(t=e,a):t},a.sort=function(e){return arguments.length?(n=e,a):n},a.startAngle=function(e){return arguments.length?(r=e,a):r},a.endAngle=function(e){return arguments.length?(i=e,a):i},a.padAngle=function(e){return arguments.length?(o=e,a):o},a};var Do={};function Ro(e){return e.x}function Fo(e){return e.y}function jo(e,t,n){e.y0=t,e.y=n}e.layout.stack=function(){var t=L,n=zo,r=qo,i=jo,o=Ro,a=Fo;function s(l,c){if(!(p=l.length))return l;var u=l.map(function(e,n){return t.call(s,e,n)}),d=u.map(function(e){return e.map(function(e,t){return[o.call(s,e,t),a.call(s,e,t)]})}),f=n.call(s,d,c);u=e.permute(u,f),d=e.permute(d,f);var p,h,g,v,m=r.call(s,d,c),b=u[0].length;for(g=0;g<b;++g)for(i.call(s,u[0][g],v=m[g],d[0][g][1]),h=1;h<p;++h)i.call(s,u[h][g],v+=d[h-1][g][1],d[h][g][1]);return l}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(e){return arguments.length?(n="function"==typeof e?e:Io.get(e)||zo,s):n},s.offset=function(e){return arguments.length?(r="function"==typeof e?e:No.get(e)||qo,s):r},s.x=function(e){return arguments.length?(o=e,s):o},s.y=function(e){return arguments.length?(a=e,s):a},s.out=function(e){return arguments.length?(i=e,s):i},s};var Io=e.map({"inside-out":function(t){var n,r,i=t.length,o=t.map(Ho),a=t.map(Bo),s=e.range(i).sort(function(e,t){return o[e]-o[t]}),l=0,c=0,u=[],d=[];for(n=0;n<i;++n)r=s[n],l<c?(l+=a[r],u.push(r)):(c+=a[r],d.push(r));return d.reverse().concat(u)},reverse:function(t){return e.range(t.length).reverse()},default:zo}),No=e.map({silhouette:function(e){var t,n,r,i=e.length,o=e[0].length,a=[],s=0,l=[];for(n=0;n<o;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<o;++n)l[n]=(s-a[n])/2;return l},wiggle:function(e){var t,n,r,i,o,a,s,l,c,u=e.length,d=e[0],f=d.length,p=[];for(p[0]=l=c=0,n=1;n<f;++n){for(t=0,i=0;t<u;++t)i+=e[t][n][1];for(t=0,o=0,s=d[n][0]-d[n-1][0];t<u;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;o+=a*e[t][n][1]}p[n]=l-=i?o/i*s:0,l<c&&(c=l)}for(n=0;n<f;++n)p[n]-=c;return p},expand:function(e){var t,n,r,i=e.length,o=e[0].length,a=1/i,s=[];for(n=0;n<o;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:qo});function zo(t){return e.range(t.length)}function qo(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function Ho(e){for(var t,n=1,r=0,i=e[0][1],o=e.length;n<o;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function Bo(e){return e.reduce(Vo,0)}function Vo(e,t){return e+t[1]}function Uo(e,t){return $o(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function $o(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,o=[];++n<=t;)o[n]=i*n+r;return o}function Wo(t){return[e.min(t),e.max(t)]}function Xo(e,t){return e.value-t.value}function Go(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Yo(e,t){e._pack_next=t,t._pack_prev=e}function Zo(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Jo(e){if((t=e.children)&&(l=t.length)){var t,n,r,i,o,a,s,l,c=1/0,u=-1/0,d=1/0,f=-1/0;if(t.forEach(Ko),(n=t[0]).x=-n.r,n.y=0,y(n),l>1&&((r=t[1]).x=r.r,r.y=0,y(r),l>2))for(ea(n,r,i=t[2]),y(i),Go(n,i),n._pack_prev=i,Go(i,r),r=n._pack_next,o=3;o<l;o++){ea(n,r,i=t[o]);var p=0,h=1,g=1;for(a=r._pack_next;a!==r;a=a._pack_next,h++)if(Zo(a,i)){p=1;break}if(1==p)for(s=n._pack_prev;s!==a._pack_prev&&!Zo(s,i);s=s._pack_prev,g++);p?(h<g||h==g&&r.r<n.r?Yo(n,r=a):Yo(n=s,r),o--):(Go(n,i),r=i,y(i))}var v=(c+u)/2,m=(d+f)/2,b=0;for(o=0;o<l;o++)(i=t[o]).x-=v,i.y-=m,b=Math.max(b,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=b,t.forEach(Qo)}function y(e){c=Math.min(e.x-e.r,c),u=Math.max(e.x+e.r,u),d=Math.min(e.y-e.r,d),f=Math.max(e.y+e.r,f)}}function Ko(e){e._pack_next=e._pack_prev=e}function Qo(e){delete e._pack_next,delete e._pack_prev}function ea(e,t,n){var r=e.r+n.r,i=t.x-e.x,o=t.y-e.y;if(r&&(i||o)){var a=t.r+n.r,s=i*i+o*o,l=.5+((r*=r)-(a*=a))/(2*s),c=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=e.x+l*i+c*o,n.y=e.y+l*o-c*i}else n.x=e.x+r,n.y=e.y}function ta(e,t){return e.parent==t.parent?1:2}function na(e){var t=e.children;return t.length?t[0]:e.t}function ra(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function ia(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function oa(e,t,n){return e.a.parent===t.parent?e.a:n}function aa(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function sa(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function la(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function ca(e){return e.rangeExtent?e.rangeExtent():la(e.range())}function ua(e,t,n,r){var i=n(e[0],e[1]),o=r(t[0],t[1]);return function(e){return o(i(e))}}function da(e,t){var n,r=0,i=e.length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function fa(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:pa}e.layout.histogram=function(){var t=!0,n=Number,r=Wo,i=Uo;function o(o,a){for(var s,l,c=[],u=o.map(n,this),d=r.call(this,u,a),f=i.call(this,d,u,a),p=(a=-1,u.length),h=f.length-1,g=t?1:1/p;++a<h;)(s=c[a]=[]).dx=f[a+1]-(s.x=f[a]),s.y=0;if(h>0)for(a=-1;++a<p;)(l=u[a])>=d[0]&&l<=d[1]&&((s=c[e.bisect(f,l,1,h)-1]).y+=g,s.push(o[a]));return c}return o.value=function(e){return arguments.length?(n=e,o):n},o.range=function(e){return arguments.length?(r=vt(e),o):r},o.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return $o(t,e)}:vt(e),o):i},o.frequency=function(e){return arguments.length?(t=!!e,o):t},o},e.layout.pack=function(){var t,n=e.layout.hierarchy().sort(Xo),r=0,i=[1,1];function o(e,o){var a=n.call(this,e,o),s=a[0],l=i[0],c=i[1],u=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,Mo(s,function(e){e.r=+u(e.value)}),Mo(s,Jo),r){var d=r*(t?1:Math.max(2*s.r/l,2*s.r/c))/2;Mo(s,function(e){e.r+=d}),Mo(s,Jo),Mo(s,function(e){e.r-=d})}return function e(t,n,r,i){var o=t.children;t.x=n+=i*t.x;t.y=r+=i*t.y;t.r*=i;if(o)for(var a=-1,s=o.length;++a<s;)e(o[a],n,r,i)}(s,l/2,c/2,t?1:1/Math.max(2*s.r/l,2*s.r/c)),a}return o.size=function(e){return arguments.length?(i=e,o):i},o.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,o):t},o.padding=function(e){return arguments.length?(r=+e,o):r},Co(o,n)},e.layout.tree=function(){var t=e.layout.hierarchy().sort(null).value(null),n=ta,r=[1,1],i=null;function o(e,o){var c=t.call(this,e,o),u=c[0],d=function(e){var t,n={A:null,children:[e]},r=[n];for(;null!=(t=r.pop());)for(var i,o=t.children,a=0,s=o.length;a<s;++a)r.push((o[a]=i={_:o[a],parent:t,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(u);if(Mo(d,a),d.parent.m=-d.z,So(d,s),i)So(u,l);else{var f=u,p=u,h=u;So(u,function(e){e.x<f.x&&(f=e),e.x>p.x&&(p=e),e.depth>h.depth&&(h=e)});var g=n(f,p)/2-f.x,v=r[0]/(p.x+n(p,f)/2+g),m=r[1]/(h.depth||1);So(u,function(e){e.x=(e.x+g)*v,e.y=e.depth*m})}return c}function a(e){var t=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(t.length){!function(e){var t,n=0,r=0,i=e.children,o=i.length;for(;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var o=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+n(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+n(e._,i._));e.parent.A=function(e,t,r){if(t){for(var i,o=e,a=e,s=t,l=o.parent.children[0],c=o.m,u=a.m,d=s.m,f=l.m;s=ra(s),o=na(o),s&&o;)l=na(l),(a=ra(a)).a=e,(i=s.z+d-o.z-c+n(s._,o._))>0&&(ia(oa(s,e,r),e,i),c+=i,u+=i),d+=s.m,c+=o.m,f+=l.m,u+=a.m;s&&!ra(a)&&(a.t=s,a.m+=d-u),o&&!na(l)&&(l.t=o,l.m+=c-f,r=e)}return r}(e,i,e.parent.A||r[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=r[0],e.y=e.depth*r[1]}return o.separation=function(e){return arguments.length?(n=e,o):n},o.size=function(e){return arguments.length?(i=null==(r=e)?l:null,o):i?null:r},o.nodeSize=function(e){return arguments.length?(i=null==(r=e)?null:l,o):i?r:null},Co(o,t)},e.layout.cluster=function(){var t=e.layout.hierarchy().sort(null).value(null),n=ta,r=[1,1],i=!1;function o(o,a){var s,l=t.call(this,o,a),c=l[0],u=0;Mo(c,function(t){var r=t.children;r&&r.length?(t.x=function(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}(r),t.y=function(t){return 1+e.max(t,function(e){return e.y})}(r)):(t.x=s?u+=n(t,s):0,t.y=0,s=t)});var d=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(c),f=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(c),p=d.x-n(d,f)/2,h=f.x+n(f,d)/2;return Mo(c,i?function(e){e.x=(e.x-c.x)*r[0],e.y=(c.y-e.y)*r[1]}:function(e){e.x=(e.x-p)/(h-p)*r[0],e.y=(1-(c.y?e.y/c.y:1))*r[1]}),l}return o.separation=function(e){return arguments.length?(n=e,o):n},o.size=function(e){return arguments.length?(i=null==(r=e),o):i?null:r},o.nodeSize=function(e){return arguments.length?(i=null!=(r=e),o):i?r:null},Co(o,t)},e.layout.treemap=function(){var t,n=e.layout.hierarchy(),r=Math.round,i=[1,1],o=null,a=aa,s=!1,l="squarify",c=.5*(1+Math.sqrt(5));function u(e,t){for(var n,r,i=-1,o=e.length;++i<o;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function d(e){var t=e.children;if(t&&t.length){var n,r,i,o=a(e),s=[],c=t.slice(),f=1/0,g="slice"===l?o.dx:"dice"===l?o.dy:"slice-dice"===l?1&e.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(u(c,o.dx*o.dy/e.value),s.area=0;(i=c.length)>0;)s.push(n=c[i-1]),s.area+=n.area,"squarify"!==l||(r=p(s,g))<=f?(c.pop(),f=r):(s.area-=s.pop().area,h(s,g,o,!1),g=Math.min(o.dx,o.dy),s.length=s.area=0,f=1/0);s.length&&(h(s,g,o,!0),s.length=s.area=0),t.forEach(d)}}function f(e){var t=e.children;if(t&&t.length){var n,r=a(e),i=t.slice(),o=[];for(u(i,r.dx*r.dy/e.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(h(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);t.forEach(f)}}function p(e,t){for(var n,r=e.area,i=0,o=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(n<o&&(o=n),n>i&&(i=n));return t*=t,(r*=r)?Math.max(t*i*c/r,r/(t*o*c)):1/0}function h(e,t,n,i){var o,a=-1,s=e.length,l=n.x,c=n.y,u=t?r(e.area/t):0;if(t==n.dx){for((i||u>n.dy)&&(u=n.dy);++a<s;)(o=e[a]).x=l,o.y=c,o.dy=u,l+=o.dx=Math.min(n.x+n.dx-l,u?r(o.area/u):0);o.z=!0,o.dx+=n.x+n.dx-l,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++a<s;)(o=e[a]).x=l,o.y=c,o.dx=u,c+=o.dy=Math.min(n.y+n.dy-c,u?r(o.area/u):0);o.z=!1,o.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function g(e){var r=t||n(e),o=r[0];return o.x=o.y=0,o.value?(o.dx=i[0],o.dy=i[1]):o.dx=o.dy=0,t&&n.revalue(o),u([o],o.dx*o.dy/o.value),(t?f:d)(o),s&&(t=r),r}return g.size=function(e){return arguments.length?(i=e,g):i},g.padding=function(e){if(!arguments.length)return o;function t(t){return sa(t,e)}var n;return a=null==(o=e)?aa:"function"==(n=typeof e)?function(t){var n=e.call(g,t,t.depth);return null==n?aa(t):sa(t,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,g},g.round=function(e){return arguments.length?(r=e?Math.round:Number,g):r!=Number},g.sticky=function(e){return arguments.length?(s=e,t=null,g):s},g.ratio=function(e){return arguments.length?(c=e,g):c},g.mode=function(e){return arguments.length?(l=e+"",g):l},Co(g,n)},e.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=e.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},e.scale={};var pa={floor:L,ceil:L};function ha(t,n,r,i){var o=[],a=[],s=0,l=Math.min(t.length,n.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++s<=l;)o.push(r(t[s-1],t[s])),a.push(i(n[s-1],n[s]));return function(n){var r=e.bisect(t,n,1,l)-1;return a[r](o[r](n))}}function ga(t,n){return e.rebind(t,n,"range","rangeRound","interpolate","clamp")}function va(e,t){return da(e,fa(ma(e,t)[2])),da(e,fa(ma(e,t)[2])),e}function ma(e,t){null==t&&(t=10);var n=la(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),o=t/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function ba(t,n){return e.range.apply(e,ma(t,n))}function ya(t,n,r){var i=ma(t,n);if(r){var o=Ot.exec(r);if(o.shift(),"s"===o[8]){var a=e.formatPrefix(Math.max(b(i[0]),b(i[1])));return o[7]||(o[7]="."+_a(a.scale(i[2]))),o[8]="f",r=e.format(o.join("")),function(e){return r(a.scale(e))+a.symbol}}o[7]||(o[7]="."+function(e,t){var n=_a(t[2]);return e in xa?Math.abs(n-_a(Math.max(b(t[0]),b(t[1]))))+ +("e"!==e):n-2*("%"===e)}(o[8],i)),r=o.join("")}else r=",."+_a(i[2])+"f";return e.format(r)}e.scale.linear=function(){return function e(t,n,r,i){var o,a;function s(){var e=Math.min(t.length,n.length)>2?ha:ua,s=i?vo:go;return o=e(t,n,s,r),a=e(n,t,s,Xi),l}function l(e){return o(e)}l.invert=function(e){return a(e)};l.domain=function(e){return arguments.length?(t=e.map(Number),s()):t};l.range=function(e){return arguments.length?(n=e,s()):n};l.rangeRound=function(e){return l.range(e).interpolate(so)};l.clamp=function(e){return arguments.length?(i=e,s()):i};l.interpolate=function(e){return arguments.length?(r=e,s()):r};l.ticks=function(e){return ba(t,e)};l.tickFormat=function(e,n){return ya(t,e,n)};l.nice=function(e){return va(t,e),s()};l.copy=function(){return e(t,n,r,i)};return s()}([0,1],[0,1],Xi,!1)};var xa={s:1,g:1,p:1,r:1,e:1};function _a(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}e.scale.log=function(){return function t(n,r,i,o){function a(e){return(i?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(r)}function s(e){return i?Math.pow(r,e):-Math.pow(r,-e)}function l(e){return n(a(e))}l.invert=function(e){return s(n.invert(e))};l.domain=function(e){return arguments.length?(i=e[0]>=0,n.domain((o=e.map(Number)).map(a)),l):o};l.base=function(e){return arguments.length?(r=+e,n.domain(o.map(a)),l):r};l.nice=function(){var e=da(o.map(a),i?Math:ka);return n.domain(e),o=e.map(s),l};l.ticks=function(){var e=la(o),t=[],n=e[0],l=e[1],c=Math.floor(a(n)),u=Math.ceil(a(l)),d=r%1?2:r;if(isFinite(u-c)){if(i){for(;c<u;c++)for(var f=1;f<d;f++)t.push(s(c)*f);t.push(s(c))}else for(t.push(s(c));c++<u;)for(var f=d-1;f>0;f--)t.push(s(c)*f);for(c=0;t[c]<n;c++);for(u=t.length;t[u-1]>l;u--);t=t.slice(c,u)}return t};l.tickFormat=function(t,n){if(!arguments.length)return wa;arguments.length<2?n=wa:"function"!=typeof n&&(n=e.format(n));var i=Math.max(1,r*t/l.ticks().length);return function(e){var t=e/s(Math.round(a(e)));return t*r<r-.5&&(t*=r),t<=i?n(e):""}};l.copy=function(){return t(n.copy(),r,i,o)};return ga(l,n)}(e.scale.linear().domain([0,1]),10,!0,[1,10])};var wa=e.format(".0e"),ka={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Ta(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}e.scale.pow=function(){return function e(t,n,r){var i=Ta(n),o=Ta(1/n);function a(e){return t(i(e))}a.invert=function(e){return o(t.invert(e))};a.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(i)),a):r};a.ticks=function(e){return ba(r,e)};a.tickFormat=function(e,t){return ya(r,e,t)};a.nice=function(e){return a.domain(va(r,e))};a.exponent=function(e){return arguments.length?(i=Ta(n=e),o=Ta(1/n),t.domain(r.map(i)),a):n};a.copy=function(){return e(t.copy(),n,r)};return ga(a,t)}(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return function t(n,r){var i,o,a;function s(e){return o[((i.get(e)||("range"===r.t?i.set(e,n.push(e)):NaN))-1)%o.length]}function l(t,r){return e.range(n.length).map(function(e){return t+r*e})}s.domain=function(e){if(!arguments.length)return n;n=[],i=new x;for(var t,o=-1,a=e.length;++o<a;)i.has(t=e[o])||i.set(t,n.push(t));return s[r.t].apply(s,r.a)};s.range=function(e){return arguments.length?(o=e,a=0,r={t:"range",a:arguments},s):o};s.rangePoints=function(e,t){arguments.length<2&&(t=0);var i=e[0],c=e[1],u=n.length<2?(i=(i+c)/2,0):(c-i)/(n.length-1+t);return o=l(i+u*t/2,u),a=0,r={t:"rangePoints",a:arguments},s};s.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var i=e[0],c=e[1],u=n.length<2?(i=c=Math.round((i+c)/2),0):(c-i)/(n.length-1+t)|0;return o=l(i+Math.round(u*t/2+(c-i-(n.length-1+t)*u)/2),u),a=0,r={t:"rangeRoundPoints",a:arguments},s};s.rangeBands=function(e,t,i){arguments.length<2&&(t=0),arguments.length<3&&(i=t);var c=e[1]<e[0],u=e[c-0],d=e[1-c],f=(d-u)/(n.length-t+2*i);return o=l(u+f*i,f),c&&o.reverse(),a=f*(1-t),r={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(e,t,i){arguments.length<2&&(t=0),arguments.length<3&&(i=t);var c=e[1]<e[0],u=e[c-0],d=e[1-c],f=Math.floor((d-u)/(n.length-t+2*i));return o=l(u+Math.round((d-u-(n.length-t)*f)/2),f),c&&o.reverse(),a=Math.round(f*(1-t)),r={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return a};s.rangeExtent=function(){return la(r.a[0])};s.copy=function(){return t(n,r)};return s.domain(n)}([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(Aa)},e.scale.category20=function(){return e.scale.ordinal().range(Ca)},e.scale.category20b=function(){return e.scale.ordinal().range(Sa)},e.scale.category20c=function(){return e.scale.ordinal().range(Ma)};var Aa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(st),Ca=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(st),Sa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(st),Ma=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(st);function Ea(){return 0}e.scale.quantile=function(){return function t(n,r){var i;function o(){var t=0,o=r.length;for(i=[];++t<o;)i[t-1]=e.quantile(n,t/o);return a}function a(t){if(!isNaN(t=+t))return r[e.bisect(i,t)]}a.domain=function(e){return arguments.length?(n=e.map(p).filter(h).sort(f),o()):n};a.range=function(e){return arguments.length?(r=e,o()):r};a.quantiles=function(){return i};a.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]};a.copy=function(){return t(n,r)};return o()}([],[])},e.scale.quantize=function(){return function e(t,n,r){var i,o;function a(e){return r[Math.max(0,Math.min(o,Math.floor(i*(e-t))))]}function s(){return i=r.length/(n-t),o=r.length-1,a}a.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]};a.range=function(e){return arguments.length?(r=e,s()):r};a.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/i+t,e+1/i]};a.copy=function(){return e(t,n,r)};return s()}(0,1,[0,1])},e.scale.threshold=function(){return function t(n,r){function i(t){if(t<=t)return r[e.bisect(n,t)]}i.domain=function(e){return arguments.length?(n=e,i):n};i.range=function(e){return arguments.length?(r=e,i):r};i.invertExtent=function(e){return e=r.indexOf(e),[n[e-1],n[e]]};i.copy=function(){return t(n,r)};return i}([.5],[0,1])},e.scale.identity=function(){return function e(t){function n(e){return+e}n.invert=n;n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t};n.ticks=function(e){return ba(t,e)};n.tickFormat=function(e,n){return ya(t,e,n)};n.copy=function(){return e(t)};return n}([0,1])},e.svg={},e.svg.arc=function(){var e=La,t=Pa,n=Ea,r=Oa,i=Da,o=Ra,a=Fa;function s(){var s=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+t.apply(this,arguments)),u=i.apply(this,arguments)-Me,d=o.apply(this,arguments)-Me,f=Math.abs(d-u),p=u>d?0:1;if(c<s&&(h=c,c=s,s=h),f>=Se)return l(c,p)+(s?l(s,1-p):"")+"Z";var h,g,v,m,b,y,x,_,w,k,T,A,C=0,S=0,M=[];if((m=(+a.apply(this,arguments)||0)/2)&&(v=r===Oa?Math.sqrt(s*s+c*c):+r.apply(this,arguments),p||(S*=-1),c&&(S=Re(v/c*Math.sin(m))),s&&(C=Re(v/s*Math.sin(m)))),c){b=c*Math.cos(u+S),y=c*Math.sin(u+S),x=c*Math.cos(d-S),_=c*Math.sin(d-S);var E=Math.abs(d-u-2*S)<=Ae?0:1;if(S&&ja(b,y,x,_)===p^E){var O=(u+d)/2;b=c*Math.cos(O),y=c*Math.sin(O),x=_=null}}else b=y=0;if(s){w=s*Math.cos(d-C),k=s*Math.sin(d-C),T=s*Math.cos(u+C),A=s*Math.sin(u+C);var L=Math.abs(u-d+2*C)<=Ae?0:1;if(C&&ja(w,k,T,A)===1-p^L){var P=(u+d)/2;w=s*Math.cos(P),k=s*Math.sin(P),T=A=null}}else w=k=0;if(f>ke&&(h=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){g=s<c^p?0:1;var D=h,R=h;if(f<Ae){var F=null==T?[w,k]:null==x?[b,y]:oi([b,y],[T,A],[x,_],[w,k]),j=b-F[0],I=y-F[1],N=x-F[0],z=_-F[1],q=1/Math.sin(Math.acos((j*N+I*z)/(Math.sqrt(j*j+I*I)*Math.sqrt(N*N+z*z)))/2),H=Math.sqrt(F[0]*F[0]+F[1]*F[1]);R=Math.min(h,(s-H)/(q-1)),D=Math.min(h,(c-H)/(q+1))}if(null!=x){var B=Ia(null==T?[w,k]:[T,A],[b,y],c,D,p),V=Ia([x,_],[w,k],c,D,p);h===D?M.push("M",B[0],"A",D,",",D," 0 0,",g," ",B[1],"A",c,",",c," 0 ",1-p^ja(B[1][0],B[1][1],V[1][0],V[1][1]),",",p," ",V[1],"A",D,",",D," 0 0,",g," ",V[0]):M.push("M",B[0],"A",D,",",D," 0 1,",g," ",V[0])}else M.push("M",b,",",y);if(null!=T){var U=Ia([b,y],[T,A],s,-R,p),$=Ia([w,k],null==x?[b,y]:[x,_],s,-R,p);h===R?M.push("L",$[0],"A",R,",",R," 0 0,",g," ",$[1],"A",s,",",s," 0 ",p^ja($[1][0],$[1][1],U[1][0],U[1][1]),",",1-p," ",U[1],"A",R,",",R," 0 0,",g," ",U[0]):M.push("L",$[0],"A",R,",",R," 0 0,",g," ",U[0])}else M.push("L",w,",",k)}else M.push("M",b,",",y),null!=x&&M.push("A",c,",",c," 0 ",E,",",p," ",x,",",_),M.push("L",w,",",k),null!=T&&M.push("A",s,",",s," 0 ",L,",",1-p," ",T,",",A);return M.push("Z"),M.join("")}function l(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=vt(t),s):e},s.outerRadius=function(e){return arguments.length?(t=vt(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=vt(e),s):n},s.padRadius=function(e){return arguments.length?(r=e==Oa?Oa:vt(e),s):r},s.startAngle=function(e){return arguments.length?(i=vt(e),s):i},s.endAngle=function(e){return arguments.length?(o=vt(e),s):o},s.padAngle=function(e){return arguments.length?(a=vt(e),s):a},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Me;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Oa="auto";function La(e){return e.innerRadius}function Pa(e){return e.outerRadius}function Da(e){return e.startAngle}function Ra(e){return e.endAngle}function Fa(e){return e&&e.padAngle}function ja(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function Ia(e,t,n,r,i){var o=e[0]-t[0],a=e[1]-t[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,c=-s*o,u=e[0]+l,d=e[1]+c,f=t[0]+l,p=t[1]+c,h=(u+f)/2,g=(d+p)/2,v=f-u,m=p-d,b=v*v+m*m,y=n-r,x=u*p-f*d,_=(m<0?-1:1)*Math.sqrt(Math.max(0,y*y*b-x*x)),w=(x*m-v*_)/b,k=(-x*v-m*_)/b,T=(x*m+v*_)/b,A=(-x*v+m*_)/b,C=w-h,S=k-g,M=T-h,E=A-g;return C*C+S*S>M*M+E*E&&(w=T,k=A),[[w-l,k-c],[w*n/y,k*n/y]]}function Na(e){var t=Qr,n=ei,r=Xn,i=qa,o=i.key,a=.7;function s(o){var s,l=[],c=[],u=-1,d=o.length,f=vt(t),p=vt(n);function h(){l.push("M",i(e(c),a))}for(;++u<d;)r.call(this,s=o[u],u)?c.push([+f.call(this,s,u),+p.call(this,s,u)]):c.length&&(h(),c=[]);return c.length&&h(),l.length?l.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(r=e,s):r},s.interpolate=function(e){return arguments.length?(o="function"==typeof e?i=e:(i=za.get(e)||qa).key,s):o},s.tension=function(e){return arguments.length?(a=e,s):a},s}e.svg.line=function(){return Na(L)};var za=e.map({linear:qa,"linear-closed":Ha,step:function(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];for(;++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")},"step-before":Ba,"step-after":Va,basis:Wa,"basis-open":function(e){if(e.length<4)return qa(e);var t,n=[],r=-1,i=e.length,o=[0],a=[0];for(;++r<3;)t=e[r],o.push(t[0]),a.push(t[1]);n.push(Xa(Za,o)+","+Xa(Za,a)),--r;for(;++r<i;)t=e[r],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),Ja(n,o,a);return n.join("")},"basis-closed":function(e){var t,n,r=-1,i=e.length,o=i+4,a=[],s=[];for(;++r<4;)n=e[r%i],a.push(n[0]),s.push(n[1]);t=[Xa(Za,a),",",Xa(Za,s)],--r;for(;++r<o;)n=e[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Ja(t,a,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,o=e[0][0],a=e[0][1],s=e[n][0]-o,l=e[n][1]-a,c=-1;++c<=n;)r=e[c],i=c/n,r[0]=t*r[0]+(1-t)*(o+i*s),r[1]=t*r[1]+(1-t)*(a+i*l);return Wa(e)},cardinal:function(e,t){return e.length<3?qa(e):e[0]+Ua(e,$a(e,t))},"cardinal-open":function(e,t){return e.length<4?qa(e):e[1]+Ua(e.slice(1,-1),$a(e,t))},"cardinal-closed":function(e,t){return e.length<3?Ha(e):e[0]+Ua((e.push(e[0]),e),$a([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?qa(e):e[0]+Ua(e,function(e){var t,n,r,i,o=[],a=function(e){var t=0,n=e.length-1,r=[],i=e[0],o=e[1],a=r[0]=Ka(i,o);for(;++t<n;)r[t]=(a+(a=Ka(i=o,o=e[t+1])))/2;return r[t]=a,r}(e),s=-1,l=e.length-1;for(;++s<l;)t=Ka(e[s],e[s+1]),b(t)<ke?a[s]=a[s+1]=0:(n=a[s]/t,r=a[s+1]/t,(i=n*n+r*r)>9&&(i=3*t/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));s=-1;for(;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(e))}});function qa(e){return e.length>1?e.join("L"):e+"Z"}function Ha(e){return e.join("L")+"Z"}function Ba(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Va(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Ua(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return qa(e);var n=e.length!=t.length,r="",i=e[0],o=e[1],a=t[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=e[1],l=2),t.length>1){s=t[1],o=e[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var c=2;c<t.length;c++,l++)o=e[l],s=t[c],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var u=e[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+u[0]+","+u[1]}return r}function $a(e,t){for(var n,r=[],i=(1-t)/2,o=e[0],a=e[1],s=1,l=e.length;++s<l;)n=o,o=a,a=e[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Wa(e){if(e.length<3)return qa(e);var t=1,n=e.length,r=e[0],i=r[0],o=r[1],a=[i,i,i,(r=e[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Xa(Za,a),",",Xa(Za,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Ja(l,a,s);return e.pop(),l.push("L",r),l.join("")}function Xa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}za.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Ga=[0,2/3,1/3,0],Ya=[0,1/3,2/3,0],Za=[0,1/6,2/3,1/6];function Ja(e,t,n){e.push("C",Xa(Ga,t),",",Xa(Ga,n),",",Xa(Ya,t),",",Xa(Ya,n),",",Xa(Za,t),",",Xa(Za,n))}function Ka(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Qa(e){for(var t,n,r,i=-1,o=e.length;++i<o;)n=(t=e[i])[0],r=t[1]-Me,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function es(e){var t=Qr,n=Qr,r=0,i=ei,o=Xn,a=qa,s=a.key,l=a,c="L",u=.7;function d(s){var d,f,p,h=[],g=[],v=[],m=-1,b=s.length,y=vt(t),x=vt(r),_=t===n?function(){return f}:vt(n),w=r===i?function(){return p}:vt(i);function k(){h.push("M",a(e(v),u),c,l(e(g.reverse()),u),"Z")}for(;++m<b;)o.call(this,d=s[m],m)?(g.push([f=+y.call(this,d,m),p=+x.call(this,d,m)]),v.push([+_.call(this,d,m),+w.call(this,d,m)])):g.length&&(k(),g=[],v=[]);return g.length&&k(),h.length?h.join(""):null}return d.x=function(e){return arguments.length?(t=n=e,d):n},d.x0=function(e){return arguments.length?(t=e,d):t},d.x1=function(e){return arguments.length?(n=e,d):n},d.y=function(e){return arguments.length?(r=i=e,d):i},d.y0=function(e){return arguments.length?(r=e,d):r},d.y1=function(e){return arguments.length?(i=e,d):i},d.defined=function(e){return arguments.length?(o=e,d):o},d.interpolate=function(e){return arguments.length?(s="function"==typeof e?a=e:(a=za.get(e)||qa).key,l=a.reverse||a,c=a.closed?"M":"L",d):s},d.tension=function(e){return arguments.length?(u=e,d):u},d}function ts(e){return e.radius}function ns(e){return[e.x,e.y]}function rs(){return 64}function is(){return"circle"}function os(e){var t=Math.sqrt(e/Ae);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}e.svg.line.radial=function(){var e=Na(Qa);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ba.reverse=Va,Va.reverse=Ba,e.svg.area=function(){return es(L)},e.svg.area.radial=function(){var e=es(Qa);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},e.svg.chord=function(){var e=zr,t=qr,n=ts,r=Da,i=Ra;function o(n,r){var i=a(this,e,n,r),o=a(this,t,n,r);return"M"+i.p0+s(i.r,i.p1,i.a1-i.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(i,o)?l(i.r,i.p1,i.r,i.p0):l(i.r,i.p1,o.r,o.p0)+s(o.r,o.p1,o.a1-o.a0)+l(o.r,o.p1,i.r,i.p0))+"Z"}function a(e,t,o,a){var s=t.call(e,o,a),l=n.call(e,s,a),c=r.call(e,s,a)-Me,u=i.call(e,s,a)-Me;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ae)+",1 "+t}function l(e,t,n,r){return"Q 0,0 "+r}return o.radius=function(e){return arguments.length?(n=vt(e),o):n},o.source=function(t){return arguments.length?(e=vt(t),o):e},o.target=function(e){return arguments.length?(t=vt(e),o):t},o.startAngle=function(e){return arguments.length?(r=vt(e),o):r},o.endAngle=function(e){return arguments.length?(i=vt(e),o):i},o},e.svg.diagonal=function(){var e=zr,t=qr,n=ns;function r(r,i){var o=e.call(this,r,i),a=t.call(this,r,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(t){return arguments.length?(e=vt(t),r):e},r.target=function(e){return arguments.length?(t=vt(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),n=ns,r=t.projection;return t.projection=function(e){return arguments.length?r(function(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Me;return[n*Math.cos(r),n*Math.sin(r)]}}(n=e)):n},t},e.svg.symbol=function(){var e=is,t=rs;function n(n,r){return(as.get(e.call(this,n,r))||os)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=vt(t),n):e},n.size=function(e){return arguments.length?(t=vt(e),n):t},n};var as=e.map({circle:os,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ls)),n=t*ls;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/ss),n=t*ss/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/ss),n=t*ss/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});e.svg.symbolTypes=as.keys();var ss=Math.sqrt(3),ls=Math.tan(30*Ee);X.transition=function(e){for(var t,n,r=fs||++gs,i=bs(e),o=[],a=ps||{time:Date.now(),ease:no,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&ys(n,u,i,r,a),t.push(n)}return ds(o,i,r)},X.interrupt=function(e){return this.each(null==e?cs:us(bs(e)))};var cs=us(bs());function us(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ds(e,t,n){return B(e,hs),e.namespace=t,e.id=n,e}var fs,ps,hs=[],gs=0;function vs(e,t,n,r){var i=e.id,o=e.namespace;return ue(e,"function"==typeof n?function(e,a,s){e[o][i].tween.set(t,r(n.call(e,e.__data__,a,s)))}:(n=r(n),function(e){e[o][i].tween.set(t,n)}))}function ms(e){return null==e&&(e=""),function(){this.textContent=e}}function bs(e){return null==e?"__transition__":"__transition_"+e+"__"}function ys(e,t,n,r,i){var o,a,s,l,c,u=e[n]||(e[n]={active:0,count:0}),d=u[r];function f(n){var i=u.active,f=u[i];for(var h in f&&(f.timer.c=null,f.timer.t=NaN,--u.count,delete u[i],f.event&&f.event.interrupt.call(e,e.__data__,f.index)),u)if(+h<r){var g=u[h];g.timer.c=null,g.timer.t=NaN,--u.count,delete u[h]}a.c=p,Tt(function(){return a.c&&p(n||1)&&(a.c=null,a.t=NaN),1},0,o),u.active=r,d.event&&d.event.start.call(e,e.__data__,t),c=[],d.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&c.push(r)}),l=d.ease,s=d.duration}function p(i){for(var o=i/s,a=l(o),f=c.length;f>0;)c[--f].call(e,a);if(o>=1)return d.event&&d.event.end.call(e,e.__data__,t),--u.count?delete u[r]:delete e[n],1}d||(o=i.time,a=Tt(function(e){var t=d.delay;if(a.t=t+o,t<=e)return f(e-t);a.c=f},0,o),d=u[r]={tween:new x,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++u.count)}hs.call=X.call,hs.empty=X.empty,hs.node=X.node,hs.size=X.size,e.transition=function(t,n){return t&&t.transition?fs?t.transition(n):t:e.selection().transition(t)},e.transition.prototype=hs,hs.select=function(e){var t,n,r,i=this.id,o=this.namespace,a=[];e=G(e);for(var s=-1,l=this.length;++s<l;){a.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=e.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),ys(n,u,o,i,r[o][i]),t.push(n)):t.push(null)}return ds(a,o,i)},hs.selectAll=function(e){var t,n,r,i,o,a=this.id,s=this.namespace,l=[];e=Y(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],f=-1,p=d.length;++f<p;)if(r=d[f]){o=r[s][a],n=e.call(r,r.__data__,f,c),l.push(t=[]);for(var h=-1,g=n.length;++h<g;)(i=n[h])&&ys(i,h,s,a,o),t.push(i)}return ds(l,s,a)},hs.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=ce(e));for(var i=0,o=this.length;i<o;i++){r.push(t=[]);for(var a,s=0,l=(a=this[i]).length;s<l;s++)(n=a[s])&&e.call(n,n.__data__,s,i)&&t.push(n)}return ds(r,this.namespace,this.id)},hs.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):ue(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},hs.attr=function(t,n){if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var r="transform"==t?ho:Xi,i=e.ns.qualify(t);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}return vs(this,"attr."+t,n,i.local?function(e){return null==e?a:(e+="",function(){var t,n=this.getAttributeNS(i.space,i.local);return n!==e&&(t=r(n,e),function(e){this.setAttributeNS(i.space,i.local,t(e))})})}:function(e){return null==e?o:(e+="",function(){var t,n=this.getAttribute(i);return n!==e&&(t=r(n,e),function(e){this.setAttribute(i,t(e))})})})},hs.attrTween=function(t,n){var r=e.ns.qualify(t);return this.tween("attr."+t,r.local?function(e,t){var i=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}:function(e,t){var i=n.call(this,e,t,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}})},hs.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function i(){this.style.removeProperty(e)}return vs(this,"style."+e,t,function(t){return null==t?i:(t+="",function(){var r,i=a(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=Xi(i,t),function(t){this.style.setProperty(e,r(t),n)})})})},hs.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(r,i){var o=t.call(this,r,i,a(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}})},hs.text=function(e){return vs(this,"text",e,ms)},hs.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},hs.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=e.ease.apply(e,arguments)),ue(this,function(e){e[r][n].ease=t}))},hs.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:ue(this,"function"==typeof e?function(r,i,o){r[n][t].delay=+e.call(r,r.__data__,i,o)}:(e=+e,function(r){r[n][t].delay=e}))},hs.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:ue(this,"function"==typeof e?function(r,i,o){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,o))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},hs.each=function(t,n){var r=this.id,i=this.namespace;if(arguments.length<2){var o=ps,a=fs;try{fs=r,ue(this,function(e,n,o){ps=e[i][r],t.call(e,e.__data__,n,o)})}finally{ps=o,fs=a}}else ue(this,function(o){var a=o[i][r];(a.event||(a.event=e.dispatch("start","end","interrupt"))).on(t,n)});return this},hs.transition=function(){for(var e,t,n,r=this.id,i=++gs,o=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(e=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(t=c[u])&&ys(t,u,o,i,{time:(n=t[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return ds(a,o,i)},e.svg.axis=function(){var t,n=e.scale.linear(),i=xs,o=6,a=6,s=3,l=[10],c=null;function u(r){r.each(function(){var r,u=e.select(this),d=this.__chart__||n,f=this.__chart__=n.copy(),p=null==c?f.ticks?f.ticks.apply(f,l):f.domain():c,h=null==t?f.tickFormat?f.tickFormat.apply(f,l):L:t,g=u.selectAll(".tick").data(p,f),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",ke),m=e.transition(g.exit()).style("opacity",ke).remove(),b=e.transition(g.order()).style("opacity",1),y=Math.max(o,0)+s,x=ca(f),_=u.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),e.transition(_));v.append("line"),v.append("text");var k,T,A,C,S=v.select("line"),M=b.select("line"),E=g.select("text").text(h),O=v.select("text"),P=b.select("text"),D="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(r=ws,k="x",A="y",T="x2",C="y2",E.attr("dy",D<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+x[0]+","+D*a+"V0H"+x[1]+"V"+D*a)):(r=ks,k="y",A="x",T="y2",C="x2",E.attr("dy",".32em").style("text-anchor",D<0?"end":"start"),w.attr("d","M"+D*a+","+x[0]+"H0V"+x[1]+"H"+D*a)),S.attr(C,D*o),O.attr(A,D*y),M.attr(T,0).attr(C,D*o),P.attr(k,0).attr(A,D*y),f.rangeBand){var R=f,F=R.rangeBand()/2;d=f=function(e){return R(e)+F}}else d.rangeBand?d=f:m.call(r,f,d);v.call(r,d,f),b.call(r,f,f)})}return u.scale=function(e){return arguments.length?(n=e,u):n},u.orient=function(e){return arguments.length?(i=e in _s?e+"":xs,u):i},u.ticks=function(){return arguments.length?(l=r(arguments),u):l},u.tickValues=function(e){return arguments.length?(c=e,u):c},u.tickFormat=function(e){return arguments.length?(t=e,u):t},u.tickSize=function(e){var t=arguments.length;return t?(o=+e,a=+arguments[t-1],u):o},u.innerTickSize=function(e){return arguments.length?(o=+e,u):o},u.outerTickSize=function(e){return arguments.length?(a=+e,u):a},u.tickPadding=function(e){return arguments.length?(s=+e,u):s},u.tickSubdivide=function(){return arguments.length&&u},u};var xs="bottom",_s={top:1,right:1,bottom:1,left:1};function ws(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function ks(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}e.svg.brush=function(){var t,n,r=q(f,"brushstart","brush","brushend"),i=null,o=null,s=[0,0],l=[0,0],c=!0,u=!0,d=As[0];function f(t){t.each(function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),n=t.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=t.selectAll(".resize").data(d,L);r.exit().remove(),r.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Ts[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),r.style("display",f.empty()?"none":null);var a,s=e.transition(t),l=e.transition(n);i&&(a=ca(i),l.attr("x",a[0]).attr("width",a[1]-a[0]),h(s)),o&&(a=ca(o),l.attr("y",a[0]).attr("height",a[1]-a[0]),g(s)),p(s)})}function p(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+s[+/e$/.test(e)]+","+l[+/^s/.test(e)]+")"})}function h(e){e.select(".extent").attr("x",s[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function g(e){e.select(".extent").attr("y",l[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function v(){var d,v,m=this,b=e.select(e.event.target),y=r.of(m,arguments),x=e.select(m),_=b.datum(),w=!/^(n|s)$/.test(_)&&i,k=!/^(e|w)$/.test(_)&&o,T=b.classed("extent"),A=ye(m),C=e.mouse(m),S=e.select(a(m)).on("keydown.brush",function(){32==e.event.keyCode&&(T||(d=null,C[0]-=s[1],C[1]-=l[1],T=2),N())}).on("keyup.brush",function(){32==e.event.keyCode&&2==T&&(C[0]+=s[1],C[1]+=l[1],T=0,N())});if(e.event.changedTouches?S.on("touchmove.brush",O).on("touchend.brush",P):S.on("mousemove.brush",O).on("mouseup.brush",P),x.interrupt().selectAll("*").interrupt(),T)C[0]=s[0]-C[0],C[1]=l[0]-C[1];else if(_){var M=+/w$/.test(_),E=+/^n/.test(_);v=[s[1-M]-C[0],l[1-E]-C[1]],C[0]=s[M],C[1]=l[E]}else e.event.altKey&&(d=C.slice());function O(){var t=e.mouse(m),n=!1;v&&(t[0]+=v[0],t[1]+=v[1]),T||(e.event.altKey?(d||(d=[(s[0]+s[1])/2,(l[0]+l[1])/2]),C[0]=s[+(t[0]<d[0])],C[1]=l[+(t[1]<d[1])]):d=null),w&&L(t,i,0)&&(h(x),n=!0),k&&L(t,o,1)&&(g(x),n=!0),n&&(p(x),y({type:"brush",mode:T?"move":"resize"}))}function L(e,r,i){var o,a,f=ca(r),p=f[0],h=f[1],g=C[i],v=i?l:s,m=v[1]-v[0];if(T&&(p-=g,h-=m+g),o=(i?u:c)?Math.max(p,Math.min(h,e[i])):e[i],T?a=(o+=g)+m:(d&&(g=Math.max(p,Math.min(h,2*d[i]-o))),g<o?(a=o,o=g):a=g),v[0]!=o||v[1]!=a)return i?n=null:t=null,v[0]=o,v[1]=a,!0}function P(){O(),x.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null),e.select("body").style("cursor",null),S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),y({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",b.style("cursor")),y({type:"brushstart"}),O()}return f.event=function(i){i.each(function(){var i=r.of(this,arguments),o={x:s,y:l,i:t,j:n},a=this.__chart__||o;this.__chart__=o,fs?e.select(this).transition().each("start.brush",function(){t=a.i,n=a.j,s=a.x,l=a.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=Gi(s,o.x),r=Gi(l,o.y);return t=n=null,function(t){s=o.x=e(t),l=o.y=r(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=o.i,n=o.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},f.x=function(e){return arguments.length?(d=As[!(i=e)<<1|!o],f):i},f.y=function(e){return arguments.length?(d=As[!i<<1|!(o=e)],f):o},f.clamp=function(e){return arguments.length?(i&&o?(c=!!e[0],u=!!e[1]):i?c=!!e:o&&(u=!!e),f):i&&o?[c,u]:i?c:o?u:null},f.extent=function(e){var r,a,c,u,d;return arguments.length?(i&&(r=e[0],a=e[1],o&&(r=r[0],a=a[0]),t=[r,a],i.invert&&(r=i(r),a=i(a)),a<r&&(d=r,r=a,a=d),r==s[0]&&a==s[1]||(s=[r,a])),o&&(c=e[0],u=e[1],i&&(c=c[1],u=u[1]),n=[c,u],o.invert&&(c=o(c),u=o(u)),u<c&&(d=c,c=u,u=d),c==l[0]&&u==l[1]||(l=[c,u])),f):(i&&(t?(r=t[0],a=t[1]):(r=s[0],a=s[1],i.invert&&(r=i.invert(r),a=i.invert(a)),a<r&&(d=r,r=a,a=d))),o&&(n?(c=n[0],u=n[1]):(c=l[0],u=l[1],o.invert&&(c=o.invert(c),u=o.invert(u)),u<c&&(d=c,c=u,u=d))),i&&o?[[r,c],[a,u]]:i?[r,a]:o&&[c,u])},f.clear=function(){return f.empty()||(s=[0,0],l=[0,0],t=n=null),f},f.empty=function(){return!!i&&s[0]==s[1]||!!o&&l[0]==l[1]},e.rebind(f,r,"on")};var Ts={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},As=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Cs=Dt.format=ln.timeFormat,Ss=Cs.utc,Ms=Ss("%Y-%m-%dT%H:%M:%S.%LZ");function Es(e){return e.toISOString()}function Os(t,n,r){function i(e){return t(e)}function o(t,r){var i=(t[1]-t[0])/r,o=e.bisect(Ps,i);return o==Ps.length?[n.year,ma(t.map(function(e){return e/31536e6}),r)[2]]:o?n[i/Ps[o-1]<Ps[o]/i?o-1:o]:[Fs,ma(t,r)[2]]}return i.invert=function(e){return Ls(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Ls)},i.nice=function(e,t){var n=i.domain(),r=la(n),a=null==e?o(r,10):"number"==typeof e&&o(r,e);function s(n){return!isNaN(n)&&!e.range(n,Ls(+n+1),t).length}return a&&(e=a[0],t=a[1]),i.domain(da(n,t>1?{floor:function(t){for(;s(t=e.floor(t));)t=Ls(t-1);return t},ceil:function(t){for(;s(t=e.ceil(t));)t=Ls(+t+1);return t}}:e))},i.ticks=function(e,t){var n=la(i.domain()),r=null==e?o(n,10):"number"==typeof e?o(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],Ls(+n[1]+1),t<1?1:t)},i.tickFormat=function(){return r},i.copy=function(){return Os(t.copy(),n,r)},ga(i,t)}function Ls(e){return new Date(e)}Cs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Es:Ms,Es.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Es.toString=Ms.toString,Dt.second=It(function(e){return new Rt(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),Dt.seconds=Dt.second.range,Dt.seconds.utc=Dt.second.utc.range,Dt.minute=It(function(e){return new Rt(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),Dt.minutes=Dt.minute.range,Dt.minutes.utc=Dt.minute.utc.range,Dt.hour=It(function(e){var t=e.getTimezoneOffset()/60;return new Rt(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),Dt.hours=Dt.hour.range,Dt.hours.utc=Dt.hour.utc.range,Dt.month=It(function(e){return(e=Dt.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Dt.months=Dt.month.range,Dt.months.utc=Dt.month.utc.range;var Ps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ds=[[Dt.second,1],[Dt.second,5],[Dt.second,15],[Dt.second,30],[Dt.minute,1],[Dt.minute,5],[Dt.minute,15],[Dt.minute,30],[Dt.hour,1],[Dt.hour,3],[Dt.hour,6],[Dt.hour,12],[Dt.day,1],[Dt.day,2],[Dt.week,1],[Dt.month,1],[Dt.month,3],[Dt.year,1]],Rs=Cs.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Xn]]),Fs={range:function(t,n,r){return e.range(Math.ceil(t/r)*r,+n,r).map(Ls)},floor:L,ceil:L};Ds.year=Dt.year,Dt.scale=function(){return Os(e.scale.linear(),Ds,Rs)};var js=Ds.map(function(e){return[e[0].utc,e[1]]}),Is=Ss.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Xn]]);function Ns(e){return JSON.parse(e.responseText)}function zs(e){var t=i.createRange();return t.selectNode(i.body),t.createContextualFragment(e.responseText)}js.year=Dt.year.utc,Dt.scale.utc=function(){return Os(e.scale.linear(),js,Is)},e.text=mt(function(e){return e.responseText}),e.json=function(e,t){return bt(e,"application/json",Ns,t)},e.html=function(e,t){return bt(e,"text/html",zs,t)},e.xml=mt(function(e){return e.responseXML}),"object"==typeof t&&t.exports?t.exports=e:this.d3=e}()},{}],9:[function(e,n,r){(function(t,i){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
!function(e,t){"object"==typeof r&&void 0!==n?n.exports=t():e.ES6Promise=t()}(this,function(){"use strict";function n(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,a=void 0,s=void 0,l=function(e,t){g[o]=e,g[o+1]=t,2===(o+=2)&&(s?s(v):m())};var c="undefined"!=typeof window?window:void 0,u=c||{},d=u.MutationObserver||u.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(v,1)}}var g=new Array(1e3);function v(){for(var e=0;e<o;e+=2){(0,g[e])(g[e+1]),g[e]=void 0,g[e+1]=void 0}o=0}var m=void 0;function b(e,t){var n=arguments,r=this,i=new this.constructor(_);void 0===i[x]&&N(i);var o=r._state;return o?function(){var e=n[o-1];l(function(){return j(o,i,e,r._result)})}():P(r,i,e,t),i}function y(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(_);return M(t,e),t}m=f?function(){return t.nextTick(v)}:d?function(){var e=0,t=new d(v),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():p?function(){var e=new MessageChannel;return e.port1.onmessage=v,function(){return e.port2.postMessage(0)}}():void 0===c&&"function"==typeof e?function(){try{var t=e("vertx");return a=t.runOnLoop||t.runOnContext,function(){a(v)}}catch(e){return h()}}():h();var x=Math.random().toString(36).substring(16);function _(){}var w=void 0,k=1,T=2,A=new R;function C(e){try{return e.then}catch(e){return A.error=e,A}}function S(e,t,r){t.constructor===e.constructor&&r===b&&t.constructor.resolve===y?function(e,t){t._state===k?O(e,t._result):t._state===T?L(e,t._result):P(t,void 0,function(t){return M(e,t)},function(t){return L(e,t)})}(e,t):r===A?L(e,A.error):void 0===r?O(e,t):n(r)?function(e,t,n){l(function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?M(e,n):O(e,n))},function(t){r||(r=!0,L(e,t))},e._label);!r&&i&&(r=!0,L(e,i))},e)}(e,t,r):O(e,t)}function M(e,t){e===t?L(e,new TypeError("You cannot resolve a promise with itself")):!function(e){return"function"==typeof e||"object"==typeof e&&null!==e}(t)?O(e,t):S(e,t,C(t))}function E(e){e._onerror&&e._onerror(e._result),D(e)}function O(e,t){e._state===w&&(e._result=t,e._state=k,0!==e._subscribers.length&&l(D,e))}function L(e,t){e._state===w&&(e._state=T,e._result=t,l(E,e))}function P(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+k]=n,i[o+T]=r,0===o&&e._state&&l(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?j(n,r,i,o):i(o);e._subscribers.length=0}}function R(){this.error=null}var F=new R;function j(e,t,r,i){var o=n(r),a=void 0,s=void 0,l=void 0,c=void 0;if(o){if((a=function(e,t){try{return e(t)}catch(e){return F.error=e,F}}(r,i))===F?(c=!0,s=a.error,a=null):l=!0,t===a)return void L(t,new TypeError("A promises callback cannot return that same promise."))}else a=i,l=!0;t._state!==w||(o&&l?M(t,a):c?L(t,s):e===k?O(t,a):e===T&&L(t,a))}var I=0;function N(e){e[x]=I++,e._state=void 0,e._result=void 0,e._subscribers=[]}function z(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[x]||N(this.promise),r(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):L(this.promise,new Error("Array Methods must be provided an Array"))}function q(e){this[x]=I++,this._result=this._state=void 0,this._subscribers=[],_!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(e,t){try{t(function(t){M(e,t)},function(t){L(e,t)})}catch(t){L(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function H(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=q}return z.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===w&&n<e;n++)this._eachEntry(t[n],n)},z.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===y){var i=C(e);if(i===b&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===q){var o=new n(_);S(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},z.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===w&&(this._remaining--,e===T?L(r,n):this._result[t]=n),0===this._remaining&&O(r,this._result)},z.prototype._willSettleAt=function(e,t){var n=this;P(e,void 0,function(e){return n._settledAt(k,t,e)},function(e){return n._settledAt(T,t,e)})},q.all=function(e){return new z(this,e).promise},q.race=function(e){var t=this;return r(e)?new t(function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},q.resolve=y,q.reject=function(e){var t=new this(_);return L(t,e),t},q._setScheduler=function(e){s=e},q._setAsap=function(e){l=e},q._asap=l,q.prototype={constructor:q,then:b,catch:function(e){return this.then(null,e)}},H(),q.polyfill=H,q.Promise=q,q})}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25}],10:[function(e,t,n){"use strict";var r=e("is-string-blank");t.exports=function(e){var t=typeof e;if("string"===t){var n=e;if(0===(e=+e)&&r(n))return!1}else if("number"!==t)return!1;return e-e<1}},{"is-string-blank":15}],11:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,d=r*s,f=i*a,p=i*s,h=i*l,g=o*a,v=o*s,m=o*l;return e[0]=1-d-h,e[1]=u+m,e[2]=f-v,e[3]=0,e[4]=u-m,e[5]=1-c-h,e[6]=p+g,e[7]=0,e[8]=f+v,e[9]=p-g,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],12:[function(e,n,r){(function(t){"use strict";var r,i=e("is-browser");r="function"==typeof t.matchMedia?!t.matchMedia("(hover: none)").matches:i,n.exports=r}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":14}],13:[function(e,t,n){"use strict";var r=e("is-browser");t.exports=r&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},{"is-browser":14}],14:[function(e,t,n){t.exports=!0},{}],15:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},{}],16:[function(e,t,n){var r={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var i=e.clientX||0,o=e.clientY||0,a=function(e){return e===window||e===document||e===document.body?r:e.getBoundingClientRect()}(t);return n[0]=i-a.left,n[1]=o-a.top,n}},{}],17:[function(e,t,n){
/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */
var r,i=e("./lib/build-log"),o=e("./lib/epsilon"),a=e("./lib/intersecter"),s=e("./lib/segment-chainer"),l=e("./lib/segment-selector"),c=e("./lib/geojson"),u=!1,d=o();function f(e,t,n){var i=r.segments(e),o=r.segments(t),a=n(r.combine(i,o));return r.polygon(a)}r={buildLog:function(e){return!0===e?u=i():!1===e&&(u=!1),!1!==u&&u.list},epsilon:function(e){return d.epsilon(e)},segments:function(e){var t=a(!0,d,u);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:a(!1,d,u).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,d,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(r,e)},polygonToGeoJSON:function(e){return c.fromPolygon(r,d,e)},union:function(e,t){return f(e,t,r.selectUnion)},intersect:function(e,t){return f(e,t,r.selectIntersect)},difference:function(e,t){return f(e,t,r.selectDifference)},differenceRev:function(e,t){return f(e,t,r.selectDifferenceRev)},xor:function(e,t){return f(e,t,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),t.exports=r},{"./lib/build-log":18,"./lib/epsilon":19,"./lib/geojson":20,"./lib/intersecter":21,"./lib/segment-chainer":23,"./lib/segment-selector":24}],18:[function(e,t,n){t.exports=function(){var e,t=0,n=!1;function r(t,n){return e.list.push({type:t,data:n?JSON.parse(JSON.stringify(n)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(t){return t===n?e:(n=t,r("vert",{x:t}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),r("log",{txt:e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},{}],19:[function(e,t,n){t.exports=function(e){"number"!=typeof e&&(e=1e-10);var t={epsilon:function(t){return"number"==typeof t&&(e=t),e},pointAboveOrOnLine:function(t,n,r){var i=n[0],o=n[1],a=r[0],s=r[1],l=t[0];return(a-i)*(t[1]-o)-(s-o)*(l-i)>=-e},pointBetween:function(t,n,r){var i=t[1]-n[1],o=r[0]-n[0],a=t[0]-n[0],s=r[1]-n[1],l=a*o+i*s;return!(l<e||l-(o*o+s*s)>-e)},pointsSameX:function(t,n){return Math.abs(t[0]-n[0])<e},pointsSameY:function(t,n){return Math.abs(t[1]-n[1])<e},pointsSame:function(e,n){return t.pointsSameX(e,n)&&t.pointsSameY(e,n)},pointsCompare:function(e,n){return t.pointsSameX(e,n)?t.pointsSameY(e,n)?0:e[1]<n[1]?-1:1:e[0]<n[0]?-1:1},pointsCollinear:function(t,n,r){var i=t[0]-n[0],o=t[1]-n[1],a=n[0]-r[0],s=n[1]-r[1];return Math.abs(i*s-a*o)<e},linesIntersect:function(t,n,r,i){var o=n[0]-t[0],a=n[1]-t[1],s=i[0]-r[0],l=i[1]-r[1],c=o*l-a*s;if(Math.abs(c)<e)return!1;var u=t[0]-r[0],d=t[1]-r[1],f=(s*d-l*u)/c,p=(o*d-a*u)/c,h={alongA:0,alongB:0,pt:[t[0]+f*o,t[1]+f*a]};return h.alongA=f<=-e?-2:f<e?-1:f-1<=-e?0:f-1<e?1:2,h.alongB=p<=-e?-2:p<e?-1:p-1<=-e?0:p-1<e?1:2,h},pointInsideRegion:function(t,n){for(var r=t[0],i=t[1],o=n[n.length-1][0],a=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var c=n[l][0],u=n[l][1];u-i>e!=a-i>e&&(o-c)*(i-u)/(a-u)+c-r>e&&(s=!s),o=c,a=u}return s}};return t}},{}],20:[function(e,t,n){var r={toPolygon:function(e,t){function n(t){if(t.length<=0)return e.segments({inverted:!1,regions:[]});function n(t){var n=t.slice(0,t.length-1);return e.segments({inverted:!1,regions:[n]})}for(var r=n(t[0]),i=1;i<t.length;i++)r=e.selectDifference(e.combine(r,n(t[i])));return r}if("Polygon"===t.type)return e.polygon(n(t.coordinates));if("MultiPolygon"===t.type){for(var r=e.segments({inverted:!1,regions:[]}),i=0;i<t.coordinates.length;i++)r=e.selectUnion(e.combine(r,n(t.coordinates[i])));return e.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,n){function r(e,n){return t.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],n)}function i(e){return{region:e,children:[]}}n=e.polygon(e.segments(n));var o=i(null);function a(e,t){for(var n=0;n<e.children.length;n++){if(r(t,(s=e.children[n]).region))return void a(s,t)}var o=i(t);for(n=0;n<e.children.length;n++){var s;r((s=e.children[n]).region,t)&&(o.children.push(s),e.children.splice(n,1),n--)}e.children.push(o)}for(var s=0;s<n.regions.length;s++){var l=n.regions[s];l.length<3||a(o,l)}function c(e,t){for(var n=0,r=e[e.length-1][0],i=e[e.length-1][1],o=[],a=0;a<e.length;a++){var s=e[a][0],l=e[a][1];o.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==t&&o.reverse(),o.push([o[0][0],o[0][1]]),o}var u=[];function d(e){var t=[c(e.region,!1)];u.push(t);for(var n=0;n<e.children.length;n++)t.push(f(e.children[n]))}function f(e){for(var t=0;t<e.children.length;t++)d(e.children[t]);return c(e.region,!0)}for(s=0;s<o.children.length;s++)d(o.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}};t.exports=r},{}],21:[function(e,t,n){var r=e("./linked-list");t.exports=function(e,t,n){function i(e,t){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function o(e,t,r){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var a=r.create();function s(e,n){a.insertBefore(e,function(r){return function(e,n,r,i,o,a){var s=t.pointsCompare(n,o);return 0!==s?s:t.pointsSame(r,a)?0:e!==i?e?1:-1:t.pointAboveOrOnLine(r,i?o:a,i?a:o)?1:-1}(e.isStart,e.pt,n,r.isStart,r.pt,r.other.pt)<0})}function l(e,t){var n=function(e,t){var n=r.node({isStart:!0,pt:e.start,seg:e,primary:t,other:null,status:null});return s(n,e.end),n}(e,t);return function(e,t,n){var i=r.node({isStart:!1,pt:t.end,seg:t,primary:n,other:e,status:null});e.other=i,s(i,e.pt)}(n,e,t),n}function c(e,t){var r=o(t,e.seg.end,e.seg);return function(e,t){n&&n.segmentChop(e.seg,t),e.other.remove(),e.seg.end=t,e.other.pt=t,s(e.other,e.pt)}(e,t),l(r,e.primary)}function u(i,o){var s=r.create();function l(e){return s.findTransition(function(n){return function(e,n){var r=e.seg.start,i=e.seg.end,o=n.seg.start,a=n.seg.end;return t.pointsCollinear(r,o,a)?t.pointsCollinear(i,o,a)?1:t.pointAboveOrOnLine(i,o,a)?1:-1:t.pointAboveOrOnLine(r,o,a)?1:-1}(e,n.ev)>0})}function u(e,r){var i=e.seg,o=r.seg,a=i.start,s=i.end,l=o.start,u=o.end;n&&n.checkIntersection(i,o);var d=t.linesIntersect(a,s,l,u);if(!1===d){if(!t.pointsCollinear(a,s,l))return!1;if(t.pointsSame(a,u)||t.pointsSame(s,l))return!1;var f=t.pointsSame(a,l),p=t.pointsSame(s,u);if(f&&p)return r;var h=!f&&t.pointBetween(a,l,u),g=!p&&t.pointBetween(s,l,u);if(f)return g?c(r,s):c(e,u),r;h&&(p||(g?c(r,s):c(e,u)),c(r,a))}else 0===d.alongA&&(-1===d.alongB?c(e,l):0===d.alongB?c(e,d.pt):1===d.alongB&&c(e,u)),0===d.alongB&&(-1===d.alongA?c(r,a):0===d.alongA?c(r,d.pt):1===d.alongA&&c(r,s));return!1}for(var d=[];!a.isEmpty();){var f=a.getHead();if(n&&n.vert(f.pt[0]),f.isStart){n&&n.segmentNew(f.seg,f.primary);var p=l(f),h=p.before?p.before.ev:null,g=p.after?p.after.ev:null;function v(){if(h){var e=u(f,h);if(e)return e}return!!g&&u(f,g)}n&&n.tempStatus(f.seg,!!h&&h.seg,!!g&&g.seg);var m,b,y=v();if(y)e?(b=null===f.seg.myFill.below||f.seg.myFill.above!==f.seg.myFill.below)&&(y.seg.myFill.above=!y.seg.myFill.above):y.seg.otherFill=f.seg.myFill,n&&n.segmentUpdate(y.seg),f.other.remove(),f.remove();if(a.getHead()!==f){n&&n.rewind(f.seg);continue}e?(b=null===f.seg.myFill.below||f.seg.myFill.above!==f.seg.myFill.below,f.seg.myFill.below=g?g.seg.myFill.above:i,f.seg.myFill.above=b?!f.seg.myFill.below:f.seg.myFill.below):null===f.seg.otherFill&&(m=g?f.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:f.primary?o:i,f.seg.otherFill={above:m,below:m}),n&&n.status(f.seg,!!h&&h.seg,!!g&&g.seg),f.other.status=p.insert(r.node({ev:f}))}else{var x=f.status;if(null===x)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(x.prev)&&s.exists(x.next)&&u(x.prev.ev,x.next.ev),n&&n.statusRemove(x.ev.seg),x.remove(),!f.primary){var _=f.seg.myFill;f.seg.myFill=f.seg.otherFill,f.seg.otherFill=_}d.push(f.seg)}a.getHead().remove()}return n&&n.done(),d}return e?{addRegion:function(e){for(var n,r=e[e.length-1],o=0;o<e.length;o++){n=r,r=e[o];var a=t.pointsCompare(n,r);0!==a&&l(i(a<0?n:r,a<0?r:n),!0)}},calculate:function(e){return u(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach(function(e){l(o(e.start,e.end,e),!0)}),n.forEach(function(e){l(o(e.start,e.end,e),!1)}),u(t,r)}}}},{"./linked-list":22}],22:[function(e,t,n){t.exports={create:function(){var e={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==e.root},isEmpty:function(){return null===e.root.next},getHead:function(){return e.root.next},insertBefore:function(t,n){for(var r=e.root,i=e.root.next;null!==i;){if(n(i))return t.prev=i.prev,t.next=i,i.prev.next=t,void(i.prev=t);r=i,i=i.next}r.next=t,t.prev=r,t.next=null},findTransition:function(t){for(var n=e.root,r=e.root.next;null!==r&&!t(r);)n=r,r=r.next;return{before:n===e.root?null:n,after:r,insert:function(e){return e.prev=n,e.next=r,n.next=e,null!==r&&(r.prev=e),e}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},{}],23:[function(e,t,n){t.exports=function(e,t,n){var r=[],i=[];return e.forEach(function(e){var o=e.start,a=e.end;if(t.pointsSame(o,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(e);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<r.length;u++){var d=(v=r[u])[0],f=(v[1],v[v.length-1]);if(v[v.length-2],t.pointsSame(d,o)){if(T(u,!0,!0))break}else if(t.pointsSame(d,a)){if(T(u,!0,!1))break}else if(t.pointsSame(f,o)){if(T(u,!1,!0))break}else if(t.pointsSame(f,a)&&T(u,!1,!1))break}if(c===s)return r.push([o,a]),void(n&&n.chainNew(o,a));if(c===l){n&&n.chainMatch(s.index);var p=s.index,h=s.matches_pt1?a:o,g=s.matches_head,v=r[p],m=g?v[0]:v[v.length-1],b=g?v[1]:v[v.length-2],y=g?v[v.length-1]:v[0],x=g?v[v.length-2]:v[1];return t.pointsCollinear(b,m,h)&&(g?(n&&n.chainRemoveHead(s.index,h),v.shift()):(n&&n.chainRemoveTail(s.index,h),v.pop()),m=b),t.pointsSame(y,h)?(r.splice(p,1),t.pointsCollinear(x,y,m)&&(g?(n&&n.chainRemoveTail(s.index,m),v.pop()):(n&&n.chainRemoveHead(s.index,m),v.shift())),n&&n.chainClose(s.index),void i.push(v)):void(g?(n&&n.chainAddHead(s.index,h),v.unshift(h)):(n&&n.chainAddTail(s.index,h),v.push(h)))}var _=s.index,w=l.index;n&&n.chainConnect(_,w);var k=r[_].length<r[w].length;s.matches_head?l.matches_head?k?(A(_),C(_,w)):(A(w),C(w,_)):C(w,_):l.matches_head?C(_,w):k?(A(_),C(w,_)):(A(w),C(_,w))}function T(e,t,n){return c.index=e,c.matches_head=t,c.matches_pt1=n,c===s?(c=l,!1):(c=null,!0)}function A(e){n&&n.chainReverse(e),r[e].reverse()}function C(e,i){var o=r[e],a=r[i],s=o[o.length-1],l=o[o.length-2],c=a[0],u=a[1];t.pointsCollinear(l,s,c)&&(n&&n.chainRemoveTail(e,s),o.pop(),s=l),t.pointsCollinear(s,c,u)&&(n&&n.chainRemoveHead(i,c),a.shift()),n&&n.chainJoin(e,i),r[e]=o.concat(a),r.splice(i,1)}}),i}},{}],24:[function(e,t,n){function r(e,t,n){var r=[];return e.forEach(function(e){var i=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==t[i]&&r.push({id:n?n.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===t[i],below:2===t[i]},otherFill:null})}),n&&n.selected(r),r}var i={union:function(e,t){return r(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return r(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return r(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return r(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return r(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};t.exports=i},{}],25:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,u=[],d=!1,f=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):f=-1,u.length&&h())}function h(){if(!d){var e=l(p);d=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new g(e,t)),1!==u.length||d||l(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],26:[function(e,t,n){!function(e){var n=/^\s+/,r=/\s+$/,i=0,o=e.round,a=e.min,s=e.max,l=e.random;function c(t,l){if(t=t||"",l=l||{},t instanceof c)return t;if(!(this instanceof c))return new c(t,l);var u=function(t){var i={r:0,g:0,b:0},o=1,l=null,c=null,u=null,d=!1,f=!1;"string"==typeof t&&(t=function(e){e=e.replace(n,"").replace(r,"").toLowerCase();var t,i=!1;if(S[e])e=S[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=I.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=I.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=I.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=I.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=I.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=I.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=I.hex8.exec(e))return{r:P(t[1]),g:P(t[2]),b:P(t[3]),a:j(t[4]),format:i?"name":"hex8"};if(t=I.hex6.exec(e))return{r:P(t[1]),g:P(t[2]),b:P(t[3]),format:i?"name":"hex"};if(t=I.hex4.exec(e))return{r:P(t[1]+""+t[1]),g:P(t[2]+""+t[2]),b:P(t[3]+""+t[3]),a:j(t[4]+""+t[4]),format:i?"name":"hex8"};if(t=I.hex3.exec(e))return{r:P(t[1]+""+t[1]),g:P(t[2]+""+t[2]),b:P(t[3]+""+t[3]),format:i?"name":"hex"};return!1}(t));"object"==typeof t&&(N(t.r)&&N(t.g)&&N(t.b)?(i=function(e,t,n){return{r:255*O(e,255),g:255*O(t,255),b:255*O(n,255)}}(t.r,t.g,t.b),d=!0,f="%"===String(t.r).substr(-1)?"prgb":"rgb"):N(t.h)&&N(t.s)&&N(t.v)?(l=R(t.s),c=R(t.v),i=function(t,n,r){t=6*O(t,360),n=O(n,100),r=O(r,100);var i=e.floor(t),o=t-i,a=r*(1-n),s=r*(1-o*n),l=r*(1-(1-o)*n),c=i%6;return{r:255*[r,s,a,a,l,r][c],g:255*[l,r,r,s,a,a][c],b:255*[a,a,l,r,r,s][c]}}(t.h,l,c),d=!0,f="hsv"):N(t.h)&&N(t.s)&&N(t.l)&&(l=R(t.s),u=R(t.l),i=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=O(e,360),t=O(t,100),n=O(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,l,u),d=!0,f="hsl"),t.hasOwnProperty("a")&&(o=t.a));return o=E(o),{ok:d,format:t.format||f,r:a(255,s(i.r,0)),g:a(255,s(i.g,0)),b:a(255,s(i.b,0)),a:o}}(t);this._originalInput=t,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=o(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=u.ok,this._tc_id=i++}function u(e,t,n){e=O(e,255),t=O(t,255),n=O(n,255);var r,i,o=s(e,t,n),l=a(e,t,n),c=(o+l)/2;if(o==l)r=i=0;else{var u=o-l;switch(i=c>.5?u/(2-o-l):u/(o+l),o){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,l:c}}function d(e,t,n){e=O(e,255),t=O(t,255),n=O(n,255);var r,i,o=s(e,t,n),l=a(e,t,n),c=o,u=o-l;if(i=0===o?0:u/o,o==l)r=0;else{switch(o){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,v:c}}function f(e,t,n,r){var i=[D(o(e).toString(16)),D(o(t).toString(16)),D(o(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function p(e,t,n,r){return[D(F(r)),D(o(e).toString(16)),D(o(t).toString(16)),D(o(n).toString(16))].join("")}function h(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=L(n.s),c(n)}function g(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=L(n.s),c(n)}function v(e){return c(e).desaturate(100)}function m(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=L(n.l),c(n)}function b(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=s(0,a(255,n.r-o(-t/100*255))),n.g=s(0,a(255,n.g-o(-t/100*255))),n.b=s(0,a(255,n.b-o(-t/100*255))),c(n)}function y(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=L(n.l),c(n)}function x(e,t){var n=c(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,c(n)}function _(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function w(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function k(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function A(e,t,n){t=t||6,n=n||30;var r=c(e).toHsl(),i=360/n,o=[c(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(c(r));return o}function C(e,t){t=t||6;for(var n=c(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(c({h:r,s:i,v:o})),o=(o+s)%1;return a}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,n,r,i=this.toRgb();return t=i.r/255,n=i.g/255,r=i.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:e.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=E(e),this._roundA=o(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=o(360*e.h),n=o(100*e.s),r=o(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b),t=o(360*e.h),n=o(100*e.s),r=o(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return f(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var a=[D(o(e).toString(16)),D(o(t).toString(16)),D(o(n).toString(16)),D(F(r))];if(i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*O(this._r,255))+"%",g:o(100*O(this._g,255))+"%",b:o(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*O(this._r,255))+"%, "+o(100*O(this._g,255))+"%, "+o(100*O(this._b,255))+"%)":"rgba("+o(100*O(this._r,255))+"%, "+o(100*O(this._g,255))+"%, "+o(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(M[f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+p(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=c(e);n="#"+p(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:R(e[r]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(e,t,n){n=0===n?0:n||50;var r=c(e).toRgb(),i=c(t).toRgb(),o=n/100;return c({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},c.readability=function(t,n){var r=c(t),i=c(n);return(e.max(r.getLuminance(),i.getLuminance())+.05)/(e.min(r.getLuminance(),i.getLuminance())+.05)},c.isReadable=function(e,t,n){var r,i,o=c.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},c.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<t.length;u++)(r=c.readability(e,t[u]))>l&&(l=r,s=c(t[u]));return c.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var S=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(S);function E(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function O(t,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(t)&&(t="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(t);return t=a(n,s(0,parseFloat(t))),r&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function L(e){return a(1,s(0,e))}function P(e){return parseInt(e,16)}function D(e){return 1==e.length?"0"+e:""+e}function R(e){return e<=1&&(e=100*e+"%"),e}function F(t){return e.round(255*parseFloat(t)).toString(16)}function j(e){return P(e)/255}var I=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function N(e){return!!I.CSS_UNIT.exec(e)}void 0!==t&&t.exports?t.exports=c:window.tinycolor=c}(Math)},{}],27:[function(e,t,n){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],28:[function(e,t,n){"use strict";var r=e("./arrow_paths"),i=e("../../plots/font_attributes"),o=e("../../plots/cartesian/constants"),a=e("../../plot_api/plot_template").templatedArray;t.exports=a("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:i({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":196,"../../plots/cartesian/constants":212,"../../plots/font_attributes":233,"./arrow_paths":27}],29:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/axes"),o=e("./draw").draw;function a(e){var t=e._fullLayout;r.filterVisible(t.annotations).forEach(function(t){var n=i.getFromId(e,t.xref),r=i.getFromId(e,t.yref);t._extremes={},n&&s(t,n),r&&s(t,r)})}function s(e,t){var n,r=t._id,o=r.charAt(0),a=e[o],s=e["a"+o],l=e[o+"ref"],c=e["a"+o+"ref"],u=e["_"+o+"padplus"],d=e["_"+o+"padminus"],f={x:1,y:-1}[o]*e[o+"shift"],p=3*e.arrowsize*e.arrowwidth||0,h=p+f,g=p-f,v=3*e.startarrowsize*e.arrowwidth||0,m=v+f,b=v-f;if(c===l){var y=i.findExtremes(t,[t.r2c(a)],{ppadplus:h,ppadminus:g}),x=i.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(u,m),ppadminus:Math.max(d,b)});n={min:[y.min[0],x.min[0]],max:[y.max[0],x.max[0]]}}else m=s?m+s:m,b=s?b-s:b,n=i.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(u,h,m),ppadminus:Math.max(d,g,b)});e._extremes[r]=n}t.exports=function(e){var t=e._fullLayout;if(r.filterVisible(t.annotations).length&&e._fullData.length)return r.syncOrAsync([o,a],e)}},{"../../lib":161,"../../plots/cartesian/axes":206,"./draw":34}],30:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../registry"),o=e("../../plot_api/plot_template").arrayEditor;function a(e,t){var n,r,i,o,a,l,c,u=e._fullLayout.annotations,d=[],f=[],p=[],h=(t||[]).length;for(n=0;n<u.length;n++)if(o=(i=u[n]).clicktoshow){for(r=0;r<h;r++)if(l=(a=t[r]).xaxis,c=a.yaxis,l._id===i.xref&&c._id===i.yref&&l.d2r(a.x)===s(i._xclick,l)&&c.d2r(a.y)===s(i._yclick,c)){(i.visible?"onout"===o?f:p:d).push(n);break}r===h&&i.visible&&"onout"===o&&f.push(n)}return{on:d,off:f,explicitOff:p}}function s(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}t.exports={hasClickToShow:function(e,t){var n=a(e,t);return n.on.length>0||n.explicitOff.length>0},onClick:function(e,t){var n,s,l=a(e,t),c=l.on,u=l.off.concat(l.explicitOff),d={},f=e._fullLayout.annotations;if(!c.length&&!u.length)return;for(n=0;n<c.length;n++)(s=o(e.layout,"annotations",f[c[n]])).modifyItem("visible",!0),r.extendFlat(d,s.getUpdateObj());for(n=0;n<u.length;n++)(s=o(e.layout,"annotations",f[u[n]])).modifyItem("visible",!1),r.extendFlat(d,s.getUpdateObj());return i.call("update",e,{},d)}}},{"../../lib":161,"../../plot_api/plot_template":196,"../../registry":246}],31:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../color");t.exports=function(e,t,n,o){o("opacity");var a=o("bgcolor"),s=o("bordercolor"),l=i.opacity(s);o("borderpad");var c=o("borderwidth"),u=o("showarrow");if(o("text",u?" ":n._dfltTitle.annotation),o("textangle"),r.coerceFont(o,"font",n.font),o("width"),o("align"),o("height")&&o("valign"),u){var d,f,p=o("arrowside");-1!==p.indexOf("end")&&(d=o("arrowhead"),f=o("arrowsize")),-1!==p.indexOf("start")&&(o("startarrowhead",d),o("startarrowsize",f)),o("arrowcolor",l?t.bordercolor:i.defaultLine),o("arrowwidth",2*(l&&c||1)),o("standoff"),o("startstandoff")}var h=o("hovertext"),g=n.hoverlabel||{};if(h){var v=o("hoverlabel.bgcolor",g.bgcolor||(i.opacity(a)?i.rgb(a):i.defaultLine)),m=o("hoverlabel.bordercolor",g.bordercolor||i.contrast(v));r.coerceFont(o,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||m})}o("captureevents",!!h)}},{"../../lib":161,"../color":43}],32:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib/to_log_range");t.exports=function(e,t,n,o){t=t||{};var a="log"===n&&"linear"===t.type,s="linear"===n&&"log"===t.type;if(a||s)for(var l,c,u=e._fullLayout.annotations,d=t._id.charAt(0),f=0;f<u.length;f++)l=u[f],c="annotations["+f+"].",l[d+"ref"]===t._id&&p(d),l["a"+d+"ref"]===t._id&&p("a"+d);function p(e){var n=l[e],s=null;s=a?i(n,t.range):Math.pow(10,n),r(s)||(s=null),o(c+e,s)}}},{"../../lib/to_log_range":185,"fast-isnumeric":10}],33:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/axes"),o=e("../../plots/array_container_defaults"),a=e("./common_defaults"),s=e("./attributes");function l(e,t,n){function o(n,i){return r.coerce(e,t,s,n,i)}var l=o("visible"),c=o("clicktoshow");if(l||c){a(e,t,n,o);for(var u=t.showarrow,d=["x","y"],f=[-10,-30],p={_fullLayout:n},h=0;h<2;h++){var g=d[h],v=i.coerceRef(e,t,p,g,"","paper");if("paper"!==v)i.getFromId(p,v)._annIndices.push(t._index);if(i.coercePosition(t,p,o,v,g,.5),u){var m="a"+g,b=i.coerceRef(e,t,p,m,"pixel");"pixel"!==b&&b!==v&&(b=t[m]="pixel");var y="pixel"===b?f[h]:.4;i.coercePosition(t,p,o,b,m,y)}o(g+"anchor"),o(g+"shift")}if(r.noneOrAll(e,t,["x","y"]),u&&r.noneOrAll(e,t,["ax","ay"]),c){var x=o("xclick"),_=o("yclick");t._xclick=void 0===x?t.x:i.cleanPosition(x,p,t.xref),t._yclick=void 0===_?t.y:i.cleanPosition(_,p,t.yref)}}}t.exports=function(e,t){o(e,t,{name:"annotations",handleItemDefaults:l})}},{"../../lib":161,"../../plots/array_container_defaults":202,"../../plots/cartesian/axes":206,"./attributes":28,"./common_defaults":31}],34:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../registry"),o=e("../../plots/plots"),a=e("../../lib"),s=e("../../plots/cartesian/axes"),l=e("../color"),c=e("../drawing"),u=e("../fx"),d=e("../../lib/svg_text_utils"),f=e("../../lib/setcursor"),p=e("../dragelement"),h=e("../../plot_api/plot_template").arrayEditor,g=e("./draw_arrow_head");function v(e,t){var n=e._fullLayout.annotations[t]||{};m(e,n,t,!1,s.getFromId(e,n.xref),s.getFromId(e,n.yref))}function m(e,t,n,o,s,v){var m,b,y=e._fullLayout,x=e._fullLayout._size,_=e._context.edits;o?(m="annotation-"+o,b=o+".annotations"):(m="annotation",b="annotations");var w=h(e.layout,b,t),k=w.modifyBase,T=w.modifyItem,A=w.getUpdateObj;y._infolayer.selectAll("."+m+'[data-index="'+n+'"]').remove();var C="clip"+y._uid+"_ann"+n;if(t._input&&!1!==t.visible){var S={x:{},y:{}},M=+t.textangle||0,E=y._infolayer.append("g").classed(m,!0).attr("data-index",String(n)).style("opacity",t.opacity),O=E.append("g").classed("annotation-text-g",!0),L=_[t.showarrow?"annotationTail":"annotationPosition"],P=t.captureevents||_.annotationText||L,D=O.append("g").style("pointer-events",P?"all":null).call(f,"pointer").on("click",function(){e._dragging=!1;var i={index:n,annotation:t._input,fullAnnotation:t,event:r.event};o&&(i.subplotId=o),e.emit("plotly_clickannotation",i)});t.hovertext&&D.on("mouseover",function(){var n=t.hoverlabel,r=n.font,i=this.getBoundingClientRect(),o=e.getBoundingClientRect();u.loneHover({x0:i.left-o.left,x1:i.right-o.left,y:(i.top+i.bottom)/2-o.top,text:t.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:r.family,fontSize:r.size,fontColor:r.color},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:e})}).on("mouseout",function(){u.loneUnhover(y._hoverlayer.node())});var R=t.borderwidth,F=t.borderpad,j=R+F,I=D.append("rect").attr("class","bg").style("stroke-width",R+"px").call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor),N=t.width||t.height,z=y._topclips.selectAll("#"+C).data(N?[0]:[]);z.enter().append("clipPath").classed("annclip",!0).attr("id",C).append("rect"),z.exit().remove();var q=t.font,H=D.append("text").classed("annotation-text",!0).text(t.text);_.annotationText?H.call(d.makeEditable,{delegate:D,gd:e}).call(B).on("edit",function(n){t.text=n,this.call(B),T("text",n),s&&s.autorange&&k(s._name+".autorange",!0),v&&v.autorange&&k(v._name+".autorange",!0),i.call("relayout",e,A())}):H.call(B)}else r.selectAll("#"+C).remove();function B(n){return n.call(c.font,q).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),d.convertToTspans(n,e,V),n}function V(){var n=H.selectAll("a");1===n.size()&&n.text()===H.text()&&D.insert("a",":first-child").attr({"xlink:xlink:href":n.attr("xlink:href"),"xlink:xlink:show":n.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(I.node());var r=D.select(".annotation-text-math-group"),u=!r.empty(),h=c.bBox((u?r:H).node()),m=h.width,b=h.height,w=t.width||m,P=t.height||b,F=Math.round(w+2*j),q=Math.round(P+2*j);function B(e,t){return"auto"===t&&(t=e<1/3?"left":e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}for(var V=!1,U=["x","y"],$=0;$<U.length;$++){var W,X,G,Y,Z,J=U[$],K=t[J+"ref"]||J,Q=t["a"+J+"ref"],ee={x:s,y:v}[J],te=(M+("x"===J?0:-90))*Math.PI/180,ne=F*Math.cos(te),re=q*Math.sin(te),ie=Math.abs(ne)+Math.abs(re),oe=t[J+"anchor"],ae=t[J+"shift"]*("x"===J?1:-1),se=S[J];if(ee){var le=ee.r2fraction(t[J]);(le<0||le>1)&&(Q===K?((le=ee.r2fraction(t["a"+J]))<0||le>1)&&(V=!0):V=!0),W=ee._offset+ee.r2p(t[J]),Y=.5}else"x"===J?(G=t[J],W=x.l+x.w*G):(G=1-t[J],W=x.t+x.h*G),Y=t.showarrow?.5:G;if(t.showarrow){se.head=W;var ce=t["a"+J];Z=ne*B(.5,t.xanchor)-re*B(.5,t.yanchor),Q===K?(se.tail=ee._offset+ee.r2p(ce),X=Z):(se.tail=W+ce,X=Z+ce),se.text=se.tail+Z;var ue=y["x"===J?"width":"height"];if("paper"===K&&(se.head=a.constrain(se.head,1,ue-1)),"pixel"===Q){var de=-Math.max(se.tail-3,se.text),fe=Math.min(se.tail+3,se.text)-ue;de>0?(se.tail+=de,se.text+=de):fe>0&&(se.tail-=fe,se.text-=fe)}se.tail+=ae,se.head+=ae}else X=Z=ie*B(Y,oe),se.text=W+Z;se.text+=ae,Z+=ae,X+=ae,t["_"+J+"padplus"]=ie/2+X,t["_"+J+"padminus"]=ie/2-X,t["_"+J+"size"]=ie,t["_"+J+"shift"]=Z}if(e._dragging||!V){var pe=0,he=0;if("left"!==t.align&&(pe=(w-m)*("center"===t.align?.5:1)),"top"!==t.valign&&(he=(P-b)*("middle"===t.valign?.5:1)),u)r.select("svg").attr({x:j+pe-1,y:j+he}).call(c.setClipUrl,N?C:null);else{var ge=j+he-h.top,ve=j+pe-h.left;H.call(d.positionText,ve,ge).call(c.setClipUrl,N?C:null)}z.select("rect").call(c.setRect,j,j,w,P),I.call(c.setRect,R/2,R/2,F-R,q-R),D.call(c.setTranslate,Math.round(S.x.text-F/2),Math.round(S.y.text-q/2)),O.attr({transform:"rotate("+M+","+S.x.text+","+S.y.text+")"});var me,be=function(n,r){E.selectAll(".annotation-arrow-g").remove();var u=S.x.head,d=S.y.head,f=S.x.tail+n,h=S.y.tail+r,m=S.x.text+n,b=S.y.text+r,y=a.rotationXYMatrix(M,m,b),w=a.apply2DTransform(y),C=a.apply2DTransform2(y),L=+I.attr("width"),P=+I.attr("height"),R=m-.5*L,F=R+L,j=b-.5*P,N=j+P,z=[[R,j,R,N],[R,N,F,N],[F,N,F,j],[F,j,R,j]].map(C);if(!z.reduce(function(e,t){return e^!!a.segmentsIntersect(u,d,u+1e6,d+1e6,t[0],t[1],t[2],t[3])},!1)){z.forEach(function(e){var t=a.segmentsIntersect(f,h,u,d,e[0],e[1],e[2],e[3]);t&&(f=t.x,h=t.y)});var q=t.arrowwidth,H=t.arrowcolor,B=t.arrowside,V=E.append("g").style({opacity:l.opacity(H)}).classed("annotation-arrow-g",!0),U=V.append("path").attr("d","M"+f+","+h+"L"+u+","+d).style("stroke-width",q+"px").call(l.stroke,l.rgb(H));if(g(U,B,t),_.annotationPosition&&U.node().parentNode&&!o){var $=u,W=d;if(t.standoff){var X=Math.sqrt(Math.pow(u-f,2)+Math.pow(d-h,2));$+=t.standoff*(f-u)/X,W+=t.standoff*(h-d)/X}var G,Y,Z=V.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(f-$)+","+(h-W),transform:"translate("+$+","+W+")"}).style("stroke-width",q+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");p.init({element:Z.node(),gd:e,prepFn:function(){var e=c.getTranslate(D);G=e.x,Y=e.y,s&&s.autorange&&k(s._name+".autorange",!0),v&&v.autorange&&k(v._name+".autorange",!0)},moveFn:function(e,n){var r=w(G,Y),i=r[0]+e,o=r[1]+n;D.call(c.setTranslate,i,o),T("x",s?s.p2r(s.r2p(t.x)+e):t.x+e/x.w),T("y",v?v.p2r(v.r2p(t.y)+n):t.y-n/x.h),t.axref===t.xref&&T("ax",s.p2r(s.r2p(t.ax)+e)),t.ayref===t.yref&&T("ay",v.p2r(v.r2p(t.ay)+n)),V.attr("transform","translate("+e+","+n+")"),O.attr({transform:"rotate("+M+","+i+","+o+")"})},doneFn:function(){i.call("relayout",e,A());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}};if(t.showarrow&&be(0,0),L)p.init({element:D.node(),gd:e,prepFn:function(){me=O.attr("transform")},moveFn:function(e,n){var r="pointer";if(t.showarrow)t.axref===t.xref?T("ax",s.p2r(s.r2p(t.ax)+e)):T("ax",t.ax+e),t.ayref===t.yref?T("ay",v.p2r(v.r2p(t.ay)+n)):T("ay",t.ay+n),be(e,n);else{if(o)return;var i,a;if(s)i=s.p2r(s.r2p(t.x)+e);else{var l=t._xsize/x.w,c=t.x+(t._xshift-t.xshift)/x.w-l/2;i=p.align(c+e/x.w,l,0,1,t.xanchor)}if(v)a=v.p2r(v.r2p(t.y)+n);else{var u=t._ysize/x.h,d=t.y-(t._yshift+t.yshift)/x.h-u/2;a=p.align(d-n/x.h,u,0,1,t.yanchor)}T("x",i),T("y",a),s&&v||(r=p.getCursor(s?.5:i,v?.5:a,t.xanchor,t.yanchor))}O.attr({transform:"translate("+e+","+n+")"+me}),f(D,r)},doneFn:function(){f(D),i.call("relayout",e,A());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}else D.remove()}}t.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&v(e,n);return o.previousPromises(e)},drawOne:v,drawRaw:m}},{"../../lib":161,"../../lib/setcursor":181,"../../lib/svg_text_utils":183,"../../plot_api/plot_template":196,"../../plots/cartesian/axes":206,"../../plots/plots":239,"../../registry":246,"../color":43,"../dragelement":65,"../drawing":68,"../fx":85,"./draw_arrow_head":35,d3:8}],35:[function(e,t,n){"use strict";var r=e("d3"),i=e("../color"),o=e("./arrow_paths");t.exports=function(e,t,n){var a,s,l,c,u=e.node(),d=o[n.arrowhead||0],f=o[n.startarrowhead||0],p=(n.arrowwidth||1)*(n.arrowsize||1),h=(n.arrowwidth||1)*(n.startarrowsize||1),g=t.indexOf("start")>=0,v=t.indexOf("end")>=0,m=d.backoff*p+n.standoff,b=f.backoff*h+n.startstandoff;if("line"===u.nodeName){a={x:+e.attr("x1"),y:+e.attr("y1")},s={x:+e.attr("x2"),y:+e.attr("y2")};var y=a.x-s.x,x=a.y-s.y;if(c=(l=Math.atan2(x,y))+Math.PI,m&&b&&m+b>Math.sqrt(y*y+x*x))return void L();if(m){if(m*m>y*y+x*x)return void L();var _=m*Math.cos(l),w=m*Math.sin(l);s.x+=_,s.y+=w,e.attr({x2:s.x,y2:s.y})}if(b){if(b*b>y*y+x*x)return void L();var k=b*Math.cos(l),T=b*Math.sin(l);a.x-=k,a.y-=T,e.attr({x1:a.x,y1:a.y})}}else if("path"===u.nodeName){var A=u.getTotalLength(),C="";if(A<m+b)return void L();var S=u.getPointAtLength(0),M=u.getPointAtLength(.1);l=Math.atan2(S.y-M.y,S.x-M.x),a=u.getPointAtLength(Math.min(b,A)),C="0px,"+b+"px,";var E=u.getPointAtLength(A),O=u.getPointAtLength(A-.1);c=Math.atan2(E.y-O.y,E.x-O.x),s=u.getPointAtLength(Math.max(0,A-m)),C+=A-(C?b+m:m)+"px,"+A+"px",e.style("stroke-dasharray",C)}function L(){e.style("stroke-dasharray","0px,100px")}function P(t,o,a,s){t.path&&(t.noRotate&&(a=0),r.select(u.parentNode).append("path").attr({class:e.attr("class"),d:t.path,transform:"translate("+o.x+","+o.y+")"+(a?"rotate("+180*a/Math.PI+")":"")+"scale("+s+")"}).style({fill:i.rgb(n.arrowcolor),"stroke-width":0}))}g&&P(f,a,l,h),v&&P(d,s,c,p)}},{"../color":43,"./arrow_paths":27,d3:8}],36:[function(e,t,n){"use strict";var r=e("./draw"),i=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":217,"./attributes":28,"./calc_autorange":29,"./click":30,"./convert_coords":32,"./defaults":33,"./draw":34}],37:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),i=e("../../plot_api/edit_types").overrideAll,o=e("../../plot_api/plot_template").templatedArray;t.exports=i(o("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":189,"../../plot_api/plot_template":196,"../annotations/attributes":28}],38:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/axes");function o(e,t){var n=t.fullSceneLayout.domain,o=t.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},r.extendFlat(e._xa,a),i.setConvert(e._xa),e._xa._offset=o.l+n.x[0]*o.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*o.w*(n.x[1]-n.x[0])},e._ya={},r.extendFlat(e._ya,a),i.setConvert(e._ya),e._ya._offset=o.t+(1-n.y[1])*o.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*o.h*(n.y[1]-n.y[0])}}t.exports=function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)o(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":161,"../../plots/cartesian/axes":206}],39:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/axes"),o=e("../../plots/array_container_defaults"),a=e("../annotations/common_defaults"),s=e("./attributes");function l(e,t,n,o){function l(n,i){return r.coerce(e,t,s,n,i)}function c(e){var r=e+"axis",o={_fullLayout:{}};return o._fullLayout[r]=n[r],i.coercePosition(t,o,l,e,e,.5)}l("visible")&&(a(e,t,o.fullLayout,l),c("x"),c("y"),c("z"),r.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",l("ax",-10),l("ay",-30),r.noneOrAll(e,t,["ax","ay"])))}t.exports=function(e,t,n){o(e,t,{name:"annotations",handleItemDefaults:l,fullLayout:n.fullLayout})}},{"../../lib":161,"../../plots/array_container_defaults":202,"../../plots/cartesian/axes":206,"../annotations/common_defaults":31,"./attributes":37}],40:[function(e,t,n){"use strict";var r=e("../annotations/draw").drawRaw,i=e("../../plots/gl3d/project"),o=["x","y","z"];t.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,a=t.annotations,s=0;s<a.length;s++){for(var l=a[s],c=!1,u=0;u<3;u++){var d=o[u],f=l[d],p=t[d+"axis"].r2fraction(f);if(p<0||p>1){c=!0;break}}c?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+s+'"]').remove():(l._pdata=i(e.glplot.cameraParams,[t.xaxis.r2l(l.x)*n[0],t.yaxis.r2l(l.y)*n[1],t.zaxis.r2l(l.z)*n[2]]),r(e.graphDiv,l,s,e.id,l._xa,l._ya))}}},{"../../plots/gl3d/project":236,"../annotations/draw":34}],41:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:function(e,t){var n=r.subplotsRegistry.gl3d;if(!n)return;for(var o=n.attrRegex,a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];o.test(l)&&(e[l].annotations||[]).length&&(i.pushUnique(t._basePlotModules,n),i.pushUnique(t._subplots.gl3d,l))}},convert:e("./convert"),draw:e("./draw")}},{"../../lib":161,"../../registry":246,"./attributes":37,"./convert":38,"./defaults":39,"./draw":40}],42:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],43:[function(e,t,n){"use strict";var r=e("tinycolor2"),i=e("fast-isnumeric"),o=t.exports={},a=e("./attributes");o.defaults=a.defaults;var s=o.defaultLine=a.defaultLine;o.lightLine=a.lightLine;var l=o.background=a.background;function c(e){if(i(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),o="a"===t.charAt(3)&&4===r.length;if(!o&&3!==r.length)return e;for(var a=0;a<r.length;a++){if(!r[a].length)return e;if(r[a]=Number(r[a]),!(r[a]>=0))return e;if(3===a)r[a]>1&&(r[a]=1);else if(r[a]>=1)return e}var s=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return o?"rgba("+s+", "+r[3]+")":"rgb("+s+")"}o.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},o.rgb=function(e){return o.tinyRGB(r(e))},o.opacity=function(e){return e?r(e).getAlpha():0},o.addOpacity=function(e,t){var n=r(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},o.combine=function(e,t){var n=r(e).toRgb();if(1===n.a)return r(e).toRgbString();var i=r(t||l).toRgb(),o=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},a={r:o.r*(1-n.a)+n.r*n.a,g:o.g*(1-n.a)+n.g*n.a,b:o.b*(1-n.a)+n.b*n.a};return r(a).toRgbString()},o.contrast=function(e,t,n){var i=r(e);return 1!==i.getAlpha()&&(i=r(o.combine(e,l))),(i.isDark()?t?i.lighten(t):l:n?i.darken(n):s).toString()},o.stroke=function(e,t){var n=r(t);e.style({stroke:o.tinyRGB(n),"stroke-opacity":n.getAlpha()})},o.fill=function(e,t){var n=r(t);e.style({fill:o.tinyRGB(n),"fill-opacity":n.getAlpha()})},o.clean=function(e){if(e&&"object"==typeof e){var t,n,r,i,a=Object.keys(e);for(t=0;t<a.length;t++)if(i=e[r=a[t]],"color"===r.substr(r.length-5))if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=c(i[n]);else e[r]=c(i);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=c(i[n][1]));else if(Array.isArray(i)){var s=i[0];if(!Array.isArray(s)&&s&&"object"==typeof s)for(n=0;n<i.length;n++)o.clean(i[n])}else i&&"object"==typeof i&&o.clean(i)}}},{"./attributes":42,"fast-isnumeric":10,tinycolor2:26}],44:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),i=e("../../plots/font_attributes"),o=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll;t.exports=a({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:o({},r.ticks,{dflt:""}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:i({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,showexponent:r.showexponent,title:{valType:"string"},titlefont:i({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root")},{"../../lib/extend":155,"../../plot_api/edit_types":189,"../../plots/cartesian/layout_attributes":219,"../../plots/font_attributes":233}],45:[function(e,t,n){"use strict";var r=e("./draw");t.exports=function(e,t,n){if("function"==typeof n)return n(e,t);var i=t[0].trace,o="cb"+i.uid,a=n.container,s=a?i[a]:i;(e._fullLayout._infolayer.selectAll("."+o).remove(),s&&s.showscale)&&(t[0].t.cb=r(e,o)).fillgradient(s.colorscale).zrange([s[n.min],s[n.max]]).options(s.colorbar)()}},{"./draw":48}],46:[function(e,t,n){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],47:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plot_api/plot_template"),o=e("../../plots/cartesian/tick_value_defaults"),a=e("../../plots/cartesian/tick_mark_defaults"),s=e("../../plots/cartesian/tick_label_defaults"),l=e("./attributes");t.exports=function(e,t,n){var c=i.newContainer(t,"colorbar"),u=e.colorbar||{};function d(e,t){return r.coerce(u,c,l,e,t)}d("thickness","fraction"===d("thicknessmode")?30/(n.width-n.margin.l-n.margin.r):30),d("len","fraction"===d("lenmode")?1:n.height-n.margin.t-n.margin.b),d("x"),d("xanchor"),d("xpad"),d("y"),d("yanchor"),d("ypad"),r.noneOrAll(u,c,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor"),o(u,c,d,"linear");var f={outerTicks:!1,font:n.font};s(u,c,d,"linear",f),a(u,c,d,"linear",f),d("title",n._dfltTitle.colorbar),r.coerceFont(d,"titlefont",n.font),d("titleside")}},{"../../lib":161,"../../plot_api/plot_template":196,"../../plots/cartesian/tick_label_defaults":226,"../../plots/cartesian/tick_mark_defaults":227,"../../plots/cartesian/tick_value_defaults":228,"./attributes":44}],48:[function(e,t,n){"use strict";var r=e("d3"),i=e("tinycolor2"),o=e("../../plots/plots"),a=e("../../registry"),s=e("../../plots/cartesian/axes"),l=e("../dragelement"),c=e("../../lib"),u=e("../../lib/extend").extendFlat,d=e("../../lib/setcursor"),f=e("../drawing"),p=e("../color"),h=e("../titles"),g=e("../../lib/svg_text_utils"),v=e("../../constants/alignment"),m=v.LINE_SPACING,b=v.FROM_TL,y=v.FROM_BR,x=e("../../plots/cartesian/axis_defaults"),_=e("../../plots/cartesian/position_defaults"),w=e("../../plots/cartesian/layout_attributes"),k=e("./attributes"),T=e("./constants").cn;t.exports=function(e,t){var n={};for(var v in k)n[v]=null;function A(){var v=e._fullLayout,k=v._size;if("function"==typeof n.fillcolor||"function"==typeof n.line.color||n.fillgradient){var S,M,E=n.zrange||r.extent(("function"==typeof n.fillcolor?n.fillcolor:n.line.color).domain()),O=[],L=[],P="function"==typeof n.line.color?n.line.color:function(){return n.line.color},D="function"==typeof n.fillcolor?n.fillcolor:function(){return n.fillcolor},R=n.levels.end+n.levels.size/100,F=n.levels.size,j=1.001*E[0]-.001*E[1],I=1.001*E[1]-.001*E[0];for(M=0;M<1e5&&(S=n.levels.start+M*F,!(F>0?S>=R:S<=R));M++)S>j&&S<I&&O.push(S);if(n.fillgradient)L=[0];else if("function"==typeof n.fillcolor)if(n.filllevels)for(R=n.filllevels.end+n.filllevels.size/100,F=n.filllevels.size,M=0;M<1e5&&(S=n.filllevels.start+M*F,!(F>0?S>=R:S<=R));M++)S>E[0]&&S<E[1]&&L.push(S);else(L=O.map(function(e){return e-n.levels.size/2})).push(L[L.length-1]+n.levels.size);else n.fillcolor&&"string"==typeof n.fillcolor&&(L=[0]);n.levels.size<0&&(O.reverse(),L.reverse());var N,z=k.h,q=k.w,H=Math.round(n.thickness*("fraction"===n.thicknessmode?q:1)),B=H/k.w,V=Math.round(n.len*("fraction"===n.lenmode?z:1)),U=V/k.h,$=n.xpad/k.w,W=(n.borderwidth+n.outlinewidth)/2,X=n.ypad/k.h,G=Math.round(n.x*k.w+n.xpad),Y=n.x-B*({middle:.5,right:1}[n.xanchor]||0),Z=n.y+U*(({top:-.5,bottom:.5}[n.yanchor]||0)-.5),J=Math.round(k.h*(1-Z)),K=J-V,Q={type:"linear",range:E,tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,exponentformat:n.exponentformat,separatethousands:n.separatethousands,showexponent:n.showexponent,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,title:n.title,titlefont:n.titlefont,showline:!0,anchor:"free",position:1},ee={type:"linear",_id:"y"+t},te={letter:"y",font:v.font,noHover:!0,calendar:v.calendar};if(x(Q,ee,ve,te,v),_(Q,ee,ve,te),ee.position=n.x+$+B,A.axis=ee,-1!==["top","bottom"].indexOf(n.titleside)&&(ee.titleside=n.titleside,ee.titlex=n.x+$,ee.titley=Z+("top"===n.titleside?U-X:X)),n.line.color&&"auto"===n.tickmode){ee.tickmode="linear",ee.tick0=n.levels.start;var ne=n.levels.size,re=c.constrain((J-K)/50,4,15)+1,ie=(E[1]-E[0])/((n.nticks||re)*ne);if(ie>1){var oe=Math.pow(10,Math.floor(Math.log(ie)/Math.LN10));ne*=oe*c.roundUp(ie/oe,[2,5,10]),(Math.abs(n.levels.start)/n.levels.size+1e-6)%1<2e-6&&(ee.tick0=0)}ee.dtick=ne}ee.domain=[Z+X,Z+U-X],ee.setScale();var ae=c.ensureSingle(v._infolayer,"g",t,function(e){e.classed(T.colorbar,!0).each(function(){var e=r.select(this);e.append("rect").classed(T.cbbg,!0),e.append("g").classed(T.cbfills,!0),e.append("g").classed(T.cblines,!0),e.append("g").classed(T.cbaxis,!0).classed(T.crisp,!0),e.append("g").classed(T.cbtitleunshift,!0).append("g").classed(T.cbtitle,!0),e.append("rect").classed(T.cboutline,!0),e.select(".cbtitle").datum(0)})});ae.attr("transform","translate("+Math.round(k.l)+","+Math.round(k.t)+")");var se=ae.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(k.l)+",-"+Math.round(k.t)+")");ee._axislayer=ae.select(".cbaxis");var le=0;if(-1!==["top","bottom"].indexOf(n.titleside)){var ce,ue=k.l+(n.x+$)*k.w,de=ee.titlefont.size;ce="top"===n.titleside?(1-(Z+U-X))*k.h+k.t+3+.75*de:(1-(Z+X))*k.h+k.t-3-.25*de,me(ee._id+"title",{attributes:{x:ue,y:ce,"text-anchor":"start"}})}var fe,pe,he,ge=c.syncOrAsync([o.previousPromises,function(){if(-1!==["top","bottom"].indexOf(n.titleside)){var o=ae.select(".cbtitle"),a=o.select("text"),l=[-n.outlinewidth/2,n.outlinewidth/2],u=o.select(".h"+ee._id+"title-math-group").node(),d=15.6;if(a.node()&&(d=parseInt(a.node().style.fontSize,10)*m),u?(le=f.bBox(u).height)>d&&(l[1]-=(le-d)/2):a.node()&&!a.classed(T.jsPlaceholder)&&(le=f.bBox(a.node()).height),le){if(le+=5,"top"===n.titleside)ee.domain[1]-=le/k.h,l[1]*=-1;else{ee.domain[0]+=le/k.h;var p=g.lineCount(a);l[1]+=(1-p)*d}o.attr("transform","translate("+l+")"),ee.setScale()}}ae.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(k.h*(1-ee.domain[1]))+")"),ee._axislayer.attr("transform","translate(0,"+Math.round(-k.t)+")");var h=ae.select(".cbfills").selectAll("rect.cbfill").data(L);h.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),h.exit().remove();var b=E.map(ee.c2p).map(Math.round).sort(function(e,t){return e-t});h.each(function(o,a){var s=[0===a?E[0]:(L[a]+L[a-1])/2,a===L.length-1?E[1]:(L[a]+L[a+1])/2].map(ee.c2p).map(Math.round);s[1]=c.constrain(s[1]+(s[1]>s[0])?1:-1,b[0],b[1]);var l=r.select(this).attr({x:G,width:Math.max(H,2),y:r.min(s),height:Math.max(r.max(s)-r.min(s),2)});if(n.fillgradient)f.gradient(l,e,t,"vertical",n.fillgradient,"fill");else{var u=D(o).replace("e-","");l.attr("fill",i(u).toHexString())}});var y=ae.select(".cblines").selectAll("path.cbline").data(n.line.color&&n.line.width?O:[]);return y.enter().append("path").classed(T.cbline,!0),y.exit().remove(),y.each(function(e){r.select(this).attr("d","M"+G+","+(Math.round(ee.c2p(e))+n.line.width/2%1)+"h"+H).call(f.lineGroupStyle,n.line.width,P(e),n.line.dash)}),ee._axislayer.selectAll("g."+ee._id+"tick,path").remove(),ee._pos=G+H+(n.outlinewidth||0)/2-("outside"===n.ticks?1:0),ee.side="right",c.syncOrAsync([function(){return s.doTicksSingle(e,ee,!0)},function(){if(-1===["top","bottom"].indexOf(n.titleside)){var t=ee.titlefont.size,i=ee._offset+ee._length/2,o=k.l+(ee.position||0)*k.w+("right"===ee.side?10+t*(ee.showticklabels?1:.5):-10-t*(ee.showticklabels?.5:0));me("h"+ee._id+"title",{avoid:{selection:r.select(e).selectAll("g."+ee._id+"tick"),side:n.titleside,offsetLeft:k.l,offsetTop:0,maxShift:v.width},attributes:{x:o,y:i,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])},o.previousPromises,function(){var r=H+n.outlinewidth/2+f.bBox(ee._axislayer.node()).width;if((N=se.select("text")).node()&&!N.classed(T.jsPlaceholder)){var i,a=se.select(".h"+ee._id+"title-math-group").node();i=a&&-1!==["top","bottom"].indexOf(n.titleside)?f.bBox(a).width:f.bBox(se.node()).right-G-k.l,r=Math.max(r,i)}var s=2*n.xpad+r+n.borderwidth+n.outlinewidth/2,l=J-K;ae.select(".cbbg").attr({x:G-n.xpad-(n.borderwidth+n.outlinewidth)/2,y:K-W,width:Math.max(s,2),height:Math.max(l+2*W,2)}).call(p.fill,n.bgcolor).call(p.stroke,n.bordercolor).style({"stroke-width":n.borderwidth}),ae.selectAll(".cboutline").attr({x:G,y:K+n.ypad+("top"===n.titleside?le:0),width:Math.max(H,2),height:Math.max(l-2*n.ypad-le,2)}).call(p.stroke,n.outlinecolor).style({fill:"None","stroke-width":n.outlinewidth});var c=({center:.5,right:1}[n.xanchor]||0)*s;ae.attr("transform","translate("+(k.l-c)+","+k.t+")");var u={},d=b[n.yanchor],h=y[n.yanchor];"pixels"===n.lenmode?(u.y=n.y,u.t=l*d,u.b=l*h):(u.t=u.b=0,u.yt=n.y+n.len*d,u.yb=n.y-n.len*h);var g=b[n.xanchor],v=y[n.xanchor];if("pixels"===n.thicknessmode)u.x=n.x,u.l=s*g,u.r=s*v;else{var m=s-H;u.l=m*g,u.r=m*v,u.xl=n.x-n.thickness*g,u.xr=n.x+n.thickness*v}o.autoMargin(e,t,u)}],e);if(ge&&ge.then&&(e._promises||[]).push(ge),e._context.edits.colorbarPosition)l.init({element:ae.node(),gd:e,prepFn:function(){fe=ae.attr("transform"),d(ae)},moveFn:function(e,t){ae.attr("transform",fe+" translate("+e+","+t+")"),pe=l.align(Y+e/k.w,B,0,1,n.xanchor),he=l.align(Z-t/k.h,U,0,1,n.yanchor);var r=l.getCursor(pe,he,n.xanchor,n.yanchor);d(ae,r)},doneFn:function(){d(ae),void 0!==pe&&void 0!==he&&a.call("restyle",e,{"colorbar.x":pe,"colorbar.y":he},C().index)}});return ge}function ve(e,t){return c.coerce(Q,ee,w,e,t)}function me(t,n){var r=C(),i="colorbar.title",o=r._module.colorbar.container;o&&(i=o+"."+i);var a={propContainer:ee,propName:i,traceIndex:r.index,placeholder:v._dfltTitle.colorbar,containerGroup:ae.select(".cbtitle")},s="h"===t.charAt(0)?t.substr(1):"h"+t;ae.selectAll("."+s+",."+s+"-math-group").remove(),h.draw(e,t,u(a,n||{}))}v._infolayer.selectAll("g."+t).remove()}function C(){var n,r,i=t.substr(2);for(n=0;n<e._fullData.length;n++)if((r=e._fullData[n]).uid===i)return r}return n.fillcolor=null,n.line={color:null,width:null,dash:null},n.levels={start:null,end:null,size:null},n.filllevels=null,n.fillgradient=null,n.zrange=null,Object.keys(n).forEach(function(e){A[e]=function(t){return arguments.length?(n[e]=c.isPlainObject(n[e])?c.extendFlat(n[e],t):t,A):n[e]}}),A.options=function(e){for(var t in e)"function"==typeof A[t]&&A[t](e[t]);return A},A._opts=n,A}},{"../../constants/alignment":141,"../../lib":161,"../../lib/extend":155,"../../lib/setcursor":181,"../../lib/svg_text_utils":183,"../../plots/cartesian/axes":206,"../../plots/cartesian/axis_defaults":208,"../../plots/cartesian/layout_attributes":219,"../../plots/cartesian/position_defaults":222,"../../plots/plots":239,"../../registry":246,"../color":43,"../dragelement":65,"../drawing":68,"../titles":134,"./attributes":44,"./constants":46,d3:8,tinycolor2:26}],49:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e){return r.isPlainObject(e.colorbar)}},{"../../lib":161}],50:[function(e,t,n){"use strict";var r=e("./scales.js");Object.keys(r);function i(e){return"`"+e+"`"}t.exports=function(e,t){e=e||"";var n,o=(t=t||{}).cLetter||"c",a=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),"noScale"in t?t.noScale:"marker.line"===e),s="showScaleDflt"in t?t.showScaleDflt:"z"===o,l="string"==typeof t.colorscaleDflt?r[t.colorscaleDflt]:null,c=t.editTypeOverride||"",u=e?e+".":"";"colorAttr"in t?(n=t.colorAttr,t.colorAttr):i(u+(n={z:"z",c:"color"}[o]));var d=o+"auto",f=o+"min",p=o+"max",h=(i(u+f),i(u+p),{});h[f]=h[p]=void 0;var g={};g[d]=!1;var v={};return"color"===n&&(v.color={valType:"color",arrayOk:!0,editType:c||"style"}),v[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:h},v[f]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:g},v[p]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:g},v.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}},v.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},v.reversescale={valType:"boolean",dflt:!1,editType:"calc"},a||(v.showscale={valType:"boolean",dflt:s,editType:"calc"}),v}},{"./scales.js":62}],51:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./scales"),o=e("./flip_scale");t.exports=function(e,t,n,a){var s=e,l=e._input,c=e._fullInput,u=e.updateStyle;function d(t,r,i){void 0===i&&(i=r),u?u(e._input,n?n+"."+t:t,r):l[t]=r,s[t]=i,c&&e!==e._fullInput&&(u?u(e._fullInput,n?n+"."+t:t,i):c[t]=i)}n&&(s=r.nestedProperty(s,n).get(),l=r.nestedProperty(l,n).get(),c=r.nestedProperty(c,n).get()||{});var f=a+"auto",p=a+"min",h=a+"max",g=s[f],v=s[p],m=s[h],b=s.colorscale;!1===g&&void 0!==v||(v=r.aggNums(Math.min,null,t)),!1===g&&void 0!==m||(m=r.aggNums(Math.max,null,t)),v===m&&(v-=.5,m+=.5),d(p,v),d(h,m),d(f,!1!==g||void 0===v&&void 0===m),s.autocolorscale&&(d("colorscale",b=v*m<0?i.RdBu:v>=0?i.Reds:i.Blues,s.reversescale?o(b):b),l.autocolorscale||d("autocolorscale",!1))}},{"../../lib":161,"./flip_scale":55,"./scales":62}],52:[function(e,t,n){"use strict";var r=e("./scales");t.exports=r.RdBu},{"./scales":62}],53:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),o=e("../colorbar/has_colorbar"),a=e("../colorbar/defaults"),s=e("./is_valid_scale"),l=e("./flip_scale");t.exports=function(e,t,n,c,u){var d,f=u.prefix,p=u.cLetter,h=f.slice(0,f.length-1),g=f?i.nestedProperty(e,h).get()||{}:e,v=f?i.nestedProperty(t,h).get()||{}:t,m=g[p+"min"],b=g[p+"max"],y=g.colorscale;c(f+p+"auto",!(r(m)&&r(b)&&m<b)),c(f+p+"min"),c(f+p+"max"),void 0!==y&&(d=!s(y)),c(f+"autocolorscale",d);var x,_=c(f+"colorscale");(c(f+"reversescale")&&(v.colorscale=l(_)),"marker.line."!==f)&&(u.noScale||(f&&(x=o(g)),c(f+"showscale",x)&&a(g,v,n)))}},{"../../lib":161,"../colorbar/defaults":47,"../colorbar/has_colorbar":49,"./flip_scale":55,"./is_valid_scale":59,"fast-isnumeric":10}],54:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var r=e.length,i=new Array(r),o=new Array(r),a=0;a<r;a++){var s=e[a];i[a]=t+s[0]*(n-t),o[a]=s[1]}return{domain:i,range:o}}},{}],55:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=new Array(n),i=n-1,o=0;i>=0;i--,o++)t=e[i],r[o]=[1-t[0],t[1]];return r}},{}],56:[function(e,t,n){"use strict";var r=e("./scales"),i=e("./default_scale"),o=e("./is_valid_scale_array");t.exports=function(e,t){if(t||(t=i),!e)return t;function n(){try{e=r[e]||JSON.parse(e)}catch(n){e=t}}return"string"==typeof e&&(n(),"string"==typeof e&&n()),o(e)?e:t}},{"./default_scale":52,"./is_valid_scale_array":60,"./scales":62}],57:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),o=e("./is_valid_scale");t.exports=function(e,t){var n=t?i.nestedProperty(e,t).get()||{}:e,a=n.color,s=!1;if(i.isArrayOrTypedArray(a))for(var l=0;l<a.length;l++)if(r(a[l])){s=!0;break}return i.isPlainObject(n)&&(s||!0===n.showscale||r(n.cmin)&&r(n.cmax)||o(n.colorscale)||i.isPlainObject(n.colorbar))}},{"../../lib":161,"./is_valid_scale":59,"fast-isnumeric":10}],58:[function(e,t,n){"use strict";n.scales=e("./scales"),n.defaultScale=e("./default_scale"),n.attributes=e("./attributes"),n.handleDefaults=e("./defaults"),n.calc=e("./calc"),n.hasColorscale=e("./has_colorscale"),n.isValidScale=e("./is_valid_scale"),n.getScale=e("./get_scale"),n.flipScale=e("./flip_scale"),n.extractScale=e("./extract_scale"),n.makeColorScaleFunc=e("./make_color_scale_func")},{"./attributes":50,"./calc":51,"./default_scale":52,"./defaults":53,"./extract_scale":54,"./flip_scale":55,"./get_scale":56,"./has_colorscale":57,"./is_valid_scale":59,"./make_color_scale_func":61,"./scales":62}],59:[function(e,t,n){"use strict";var r=e("./scales"),i=e("./is_valid_scale_array");t.exports=function(e){return void 0!==r[e]||i(e)}},{"./is_valid_scale_array":60,"./scales":62}],60:[function(e,t,n){"use strict";var r=e("tinycolor2");t.exports=function(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var i=e[n];if(2!==i.length||+i[0]<t||!r(i[1]).isValid())return!1;t=+i[0]}return!0}},{tinycolor2:26}],61:[function(e,t,n){"use strict";var r=e("d3"),i=e("tinycolor2"),o=e("fast-isnumeric"),a=e("../color");function s(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return i(t).toRgbString()}t.exports=function(e,t){t=t||{};for(var n=e.domain,l=e.range,c=l.length,u=new Array(c),d=0;d<c;d++){var f=i(l[d]).toRgb();u[d]=[f.r,f.g,f.b,f.a]}var p,h=r.scale.linear().domain(n).range(u).clamp(!0),g=t.noNumericCheck,v=t.returnArray;return(p=g&&v?h:g?function(e){return s(h(e))}:v?function(e){return o(e)?h(e):i(e).isValid()?e:a.defaultLine}:function(e){return o(e)?s(h(e)):i(e).isValid()?e:a.defaultLine}).domain=h.domain,p.range=function(){return l},p}},{"../color":43,d3:8,"fast-isnumeric":10,tinycolor2:26}],62:[function(e,t,n){"use strict";t.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]}},{}],63:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){var o=(e-n)/(r-n),a=o+t/(r-n),s=(o+a)/2;return"left"===i||"bottom"===i?o:"center"===i||"middle"===i?s:"right"===i||"top"===i?a:o<2/3-s?o:a>4/3-s?a:s}},{}],64:[function(e,t,n){"use strict";var r=e("../../lib"),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(e,t,n,o){return e="left"===n?0:"center"===n?1:"right"===n?2:r.constrain(Math.floor(3*e),0,2),t="bottom"===o?0:"middle"===o?1:"top"===o?2:r.constrain(Math.floor(3*t),0,2),i[t][e]}},{"../../lib":161}],65:[function(e,t,n){"use strict";var r=e("mouse-event-offset"),i=e("has-hover"),o=e("has-passive-events"),a=e("../../registry"),s=e("../../lib"),l=e("../../plots/cartesian/constants"),c=e("../../constants/interactions"),u=t.exports={};u.align=e("./align"),u.getCursor=e("./cursor");var d=e("./unhover");function f(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function p(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}u.unhover=d.wrapped,u.unhoverRaw=d.raw,u.init=function(e){var t,n,r,d,h,g,v,m,b=e.gd,y=1,x=c.DBLCLICKDELAY,_=e.element;b._mouseDownTime||(b._mouseDownTime=0),_.style.pointerEvents="all",_.onmousedown=k,o?(_._ontouchstart&&_.removeEventListener("touchstart",_._ontouchstart),_._ontouchstart=k,_.addEventListener("touchstart",k,{passive:!1})):_.ontouchstart=k;var w=e.clampFn||function(e,t,n){return Math.abs(e)<n&&(e=0),Math.abs(t)<n&&(t=0),[e,t]};function k(o){o.preventDefault(),b._dragged=!1,b._dragging=!0;var a=p(o);t=a[0],n=a[1],v=o.target,g=o,m=2===o.buttons||o.ctrlKey,void 0===o.clientX&&void 0===o.clientY&&(o.clientX=t,o.clientY=n),(r=(new Date).getTime())-b._mouseDownTime<x?y+=1:(y=1,b._mouseDownTime=r),e.prepFn&&e.prepFn(o,t,n),i&&!m?(h=f()).style.cursor=window.getComputedStyle(_).cursor:i||(h=document,d=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(_).cursor),document.addEventListener("mousemove",T),document.addEventListener("mouseup",A),document.addEventListener("touchmove",T),document.addEventListener("touchend",A)}function T(r){r.preventDefault();var i=p(r),o=e.minDrag||l.MINDRAG,a=w(i[0]-t,i[1]-n,o),s=a[0],c=a[1];(s||c)&&(b._dragged=!0,u.unhover(b)),b._dragged&&e.moveFn&&!m&&e.moveFn(s,c)}function A(t){if(document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",A),document.removeEventListener("touchmove",T),document.removeEventListener("touchend",A),t.preventDefault(),i?s.removeElement(h):d&&(h.documentElement.style.cursor=d,d=null),b._dragging){if(b._dragging=!1,(new Date).getTime()-b._mouseDownTime>x&&(y=Math.max(y-1,1)),b._dragged)e.doneFn&&e.doneFn();else if(e.clickFn&&e.clickFn(y,g),!m){var n;try{n=new MouseEvent("click",t)}catch(e){var r=p(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}v.dispatchEvent(n)}!function(e){e._dragging=!1,e._replotPending&&a.call("plot",e)}(b),b._dragged=!1}else b._dragged=!1}},u.coverSlip=f},{"../../constants/interactions":142,"../../lib":161,"../../plots/cartesian/constants":212,"../../registry":246,"./align":63,"./cursor":64,"./unhover":66,"has-hover":12,"has-passive-events":13,"mouse-event-offset":16}],66:[function(e,t,n){"use strict";var r=e("../../lib/events"),i=e("../../lib/throttle"),o=e("../../lib/get_graph_div"),a=e("../fx/constants"),s=t.exports={};s.wrapped=function(e,t,n){(e=o(e))._fullLayout&&i.clear(e._fullLayout._uid+a.HOVERID),s.raw(e,t,n)},s.raw=function(e,t){var n=e._fullLayout,i=e._hoverdata;t||(t={}),t.target&&!1===r.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&i&&e.emit("plotly_unhover",{event:t,points:i}))}},{"../../lib/events":154,"../../lib/get_graph_div":159,"../../lib/throttle":184,"../fx/constants":80}],67:[function(e,t,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],68:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("tinycolor2"),a=e("../../registry"),s=e("../color"),l=e("../colorscale"),c=e("../../lib"),u=e("../../lib/svg_text_utils"),d=e("../../constants/xmlns_namespaces"),f=e("../../constants/alignment").LINE_SPACING,p=e("../../constants/interactions").DESELECTDIM,h=e("../../traces/scatter/subtypes"),g=e("../../traces/scatter/make_bubble_size_func"),v=t.exports={};v.font=function(e,t,n,r){c.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(s.fill,r)},v.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},v.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},v.setRect=function(e,t,n,r,i){e.call(v.setPosition,t,n).call(v.setSize,r,i)},v.translatePoint=function(e,t,n,r){var o=n.c2p(e.x),a=r.c2p(e.y);return!!(i(o)&&i(a)&&t.node())&&("text"===t.node().nodeName?t.attr("x",o).attr("y",a):t.attr("transform","translate("+o+","+a+")"),!0)},v.translatePoints=function(e,t,n){e.each(function(e){var i=r.select(this);v.translatePoint(e,i,t,n)})},v.hideOutsideRangePoint=function(e,t,n,r,i,o){t.attr("display",n.isPtWithinRange(e,i)&&r.isPtWithinRange(e,o)?null:"none")},v.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var n=t.xaxis,i=t.yaxis;e.each(function(t){var o=t[0].trace,a=o.xcalendar,s=o.ycalendar,l="bar"===o.type?".bartext":".point,.textpoint";e.selectAll(l).each(function(e){v.hideOutsideRangePoint(e,r.select(this),n,i,a,s)})})}},v.crispRound=function(e,t,n){return t&&i(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},v.singleLineStyle=function(e,t,n,r,i){t.style("fill","none");var o=(((e||[])[0]||{}).trace||{}).line||{},a=n||o.width||0,l=i||o.dash||"";s.stroke(t,r||o.color),v.dashLine(t,l,a)},v.lineGroupStyle=function(e,t,n,i){e.style("fill","none").each(function(e){var o=(((e||[])[0]||{}).trace||{}).line||{},a=t||o.width||0,l=i||o.dash||"";r.select(this).call(s.stroke,n||o.color).call(v.dashLine,l,a)})},v.dashLine=function(e,t,n){n=+n||0,t=v.dashStyle(t,n),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},v.dashStyle=function(e,t){t=+t||1;var n=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=n+"px,"+n+"px":"dash"===e?e=3*n+"px,"+3*n+"px":"longdash"===e?e=5*n+"px,"+5*n+"px":"dashdot"===e?e=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===e&&(e=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),e},v.singleFillStyle=function(e){var t=(((r.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;t&&e.call(s.fill,t)},v.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(e){r.select(this).call(s.fill,e[0].trace.fillcolor)})};var m=e("./symbol_defs");v.symbolNames=[],v.symbolFuncs=[],v.symbolNeedLines={},v.symbolNoDot={},v.symbolNoFill={},v.symbolList=[],Object.keys(m).forEach(function(e){var t=m[e];v.symbolList=v.symbolList.concat([t.n,e,t.n+100,e+"-open"]),v.symbolNames[t.n]=e,v.symbolFuncs[t.n]=t.f,t.needLine&&(v.symbolNeedLines[t.n]=!0),t.noDot?v.symbolNoDot[t.n]=!0:v.symbolList=v.symbolList.concat([t.n+200,e+"-dot",t.n+300,e+"-open-dot"]),t.noFill&&(v.symbolNoFill[t.n]=!0)});var b=v.symbolNames.length,y="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function x(e,t){var n=e%100;return v.symbolFuncs[n](t)+(e>=200?y:"")}v.symbolNumber=function(e){if("string"==typeof e){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),(e=v.symbolNames.indexOf(e))>=0&&(e+=t)}return e%100>=b||e>=400?0:Math.floor(Math.max(e,0))};var _={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},k=r.format("~.1f"),T={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:_},horizontalreversed:{node:"linearGradient",attrs:_,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};v.gradient=function(e,t,n,i,a,l){for(var u=a.length,d=T[i],f=new Array(u),p=0;p<u;p++)d.reversed?f[u-1-p]=[k(100*(1-a[p][0])),a[p][1]]:f[p]=[k(100*a[p][0]),a[p][1]];var h="g"+t._fullLayout._uid+"-"+n,g=t._fullLayout._defs.select(".gradients").selectAll("#"+h).data([i+f.join(";")],c.identity);g.exit().remove(),g.enter().append(d.node).each(function(){var e=r.select(this);d.attrs&&e.attr(d.attrs),e.attr("id",h);var t=e.selectAll("stop").data(f);t.exit().remove(),t.enter().append("stop"),t.each(function(e){var t=o(e[1]);r.select(this).attr({offset:e[0]+"%","stop-color":s.tinyRGB(t),"stop-opacity":t.getAlpha()})})}),e.style(l,"url(#"+h+")").style(l+"-opacity",null)},v.initGradients=function(e){c.ensureSingle(e._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove()},v.pointStyle=function(e,t,n){if(e.size()){var i=v.makePointStyleFns(t);e.each(function(e){v.singlePointStyle(e,r.select(this),t,i,n)})}},v.singlePointStyle=function(e,t,n,r,i){var o=n.marker,a=o.line;if(t.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(e):void 0===e.mo?o.opacity:e.mo),r.ms2mrc){var l;l="various"===e.ms||"various"===o.size?3:r.ms2mrc(e.ms),e.mrc=l,r.selectedSizeFn&&(l=e.mrc=r.selectedSizeFn(e));var u=v.symbolNumber(e.mx||o.symbol)||0;e.om=u%200>=100,t.attr("d",x(u,l))}var d,f,p,h=!1;if(e.so)p=a.outlierwidth,f=a.outliercolor,d=o.outliercolor;else{var g=(a||{}).width;p=(e.mlw+1||g+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,f="mlc"in e?e.mlcc=r.lineScale(e.mlc):c.isArrayOrTypedArray(a.color)?s.defaultLine:a.color,c.isArrayOrTypedArray(o.color)&&(d=s.defaultLine,h=!0),d="mc"in e?e.mcc=r.markerScale(e.mc):o.color||"rgba(0,0,0,0)",r.selectedColorFn&&(d=r.selectedColorFn(e))}if(e.om)t.call(s.stroke,d).style({"stroke-width":(p||1)+"px",fill:"none"});else{t.style("stroke-width",p+"px");var m=o.gradient,b=e.mgt;if(b?h=!0:b=m&&m.type,Array.isArray(b)&&(b=b[0],T[b]||(b=0)),b&&"none"!==b){var y=e.mgc;y?h=!0:y=m.color;var _=n.uid;h&&(_+="-"+e.i),v.gradient(t,i,_,b,[[0,y],[1,d]],"fill")}else s.fill(t,d);p&&s.stroke(t,f)}},v.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=v.tryColorscale(n,""),t.lineScale=v.tryColorscale(n,"line"),a.traceIs(e,"symbols")&&(t.ms2mrc=h.isBubble(e)?g(e):function(){return(n.size||6)/2}),e.selectedpoints&&c.extendFlat(t,v.makeSelectedPointStyleFns(e)),t},v.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},i=e.marker||{},o=n.marker||{},s=r.marker||{},l=i.opacity,u=o.opacity,d=s.opacity,f=void 0!==u,h=void 0!==d;(c.isArrayOrTypedArray(l)||f||h)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?i.opacity:e.mo;return e.selected?f?u:t:h?d:p*t});var g=i.color,v=o.color,m=s.color;(v||m)&&(t.selectedColorFn=function(e){var t=e.mcc||g;return e.selected?v||t:m||t});var b=i.size,y=o.size,x=s.size,_=void 0!==y,w=void 0!==x;return a.traceIs(e,"symbols")&&(_||w)&&(t.selectedSizeFn=function(e){var t=e.mrc||b/2;return e.selected?_?y/2:t:w?x/2:t}),t},v.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},i=e.textfont||{},o=n.textfont||{},a=r.textfont||{},l=i.color,c=o.color,u=a.color;return t.selectedTextColorFn=function(e){var t=e.tc||l;return e.selected?c||t:u||(c?t:s.addOpacity(t,p))},t},v.selectedPointStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=v.makeSelectedPointStyleFns(t),i=t.marker||{},o=[];n.selectedOpacityFn&&o.push(function(e,t){e.style("opacity",n.selectedOpacityFn(t))}),n.selectedColorFn&&o.push(function(e,t){s.fill(e,n.selectedColorFn(t))}),n.selectedSizeFn&&o.push(function(e,t){var r=t.mx||i.symbol||0,o=n.selectedSizeFn(t);e.attr("d",x(v.symbolNumber(r),o)),t.mrc2=o}),o.length&&e.each(function(e){for(var t=r.select(this),n=0;n<o.length;n++)o[n](t,e)})}},v.tryColorscale=function(e,t){var n=t?c.nestedProperty(e,t).get():e;if(n){var r=n.colorscale,i=n.color;if(r&&c.isArrayOrTypedArray(i))return l.makeColorScaleFunc(l.extractScale(r,n.cmin,n.cmax))}return c.identity};var A={start:1,end:-1,middle:0,bottom:1,top:-1};function C(e,t,n,i){var o=r.select(e.node().parentNode),a=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",s=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",l=i?i/.8+1:0,c=(u.lineCount(e)-1)*f+1,d=A[s]*l,p=.75*n+A[a]*l+(A[a]-1)*c*n/2;e.attr("text-anchor",s),o.attr("transform","translate("+d+","+p+")")}function S(e,t){var n=e.ts||t.textfont.size;return i(n)&&n>0?n:0}v.textPointStyle=function(e,t,n){if(e.size()){var i;if(t.selectedpoints){var o=v.makeSelectedTextStyleFns(t);i=o.selectedTextColorFn}e.each(function(e){var o=r.select(this),a=c.extractOption(e,t,"tx","text");if(a||0===a){var s=e.tp||t.textposition,l=S(e,t),d=i?i(e):e.tc||t.textfont.color;o.call(v.font,e.tf||t.textfont.family,l,d).text(a).call(u.convertToTspans,n).call(C,s,l,e.mrc)}else o.remove()})}},v.selectedTextStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=v.makeSelectedTextStyleFns(t);e.each(function(e){var i=r.select(this),o=n.selectedTextColorFn(e),a=e.tp||t.textposition,l=S(e,t);s.fill(i,o),C(i,a,l,e.mrc2||e.mrc)})}};var M=.5;function E(e,t,n,i){var o=e[0]-t[0],a=e[1]-t[1],s=n[0]-t[0],l=n[1]-t[1],c=Math.pow(o*o+a*a,M/2),u=Math.pow(s*s+l*l,M/2),d=(u*u*o-c*c*s)*i,f=(u*u*a-c*c*l)*i,p=3*u*(c+u),h=3*c*(c+u);return[[r.round(t[0]+(p&&d/p),2),r.round(t[1]+(p&&f/p),2)],[r.round(t[0]-(h&&d/h),2),r.round(t[1]-(h&&f/h),2)]]}v.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n,r="M"+e[0],i=[];for(n=1;n<e.length-1;n++)i.push(E(e[n-1],e[n],e[n+1],t));for(r+="Q"+i[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+e[n];return r+="Q"+i[e.length-3][1]+" "+e[e.length-1]},v.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n,r="M"+e[0],i=e.length-1,o=[E(e[i],e[0],e[1],t)];for(n=1;n<i;n++)o.push(E(e[n-1],e[n],e[n+1],t));for(o.push(E(e[i-1],e[i],e[0],t)),n=1;n<=i;n++)r+="C"+o[n-1][1]+" "+o[n][0]+" "+e[n];return r+="C"+o[i][1]+" "+o[0][0]+" "+e[0]+"Z"};var O={hv:function(e,t){return"H"+r.round(t[0],2)+"V"+r.round(t[1],2)},vh:function(e,t){return"V"+r.round(t[1],2)+"H"+r.round(t[0],2)},hvh:function(e,t){return"H"+r.round((e[0]+t[0])/2,2)+"V"+r.round(t[1],2)+"H"+r.round(t[0],2)},vhv:function(e,t){return"V"+r.round((e[1]+t[1])/2,2)+"H"+r.round(t[0],2)+"V"+r.round(t[1],2)}},L=function(e,t){return"L"+r.round(t[0],2)+","+r.round(t[1],2)};v.steps=function(e){var t=O[e]||L;return function(e){for(var n="M"+r.round(e[0][0],2)+","+r.round(e[0][1],2),i=1;i<e.length;i++)n+=t(e[i-1],e[i]);return n}},v.makeTester=function(){var e=c.ensureSingleById(r.select("body"),"svg","js-plotly-tester",function(e){e.attr(d.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=c.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});v.tester=e,v.testref=t},v.savedBBoxes={};var P=0;function D(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}v.bBox=function(e,t,n){var i,o,a;if(n||(n=D(e)),n){if(i=v.savedBBoxes[n])return c.extendFlat({},i)}else if(1===e.childNodes.length){var s=e.childNodes[0];if(n=D(s)){var l=+s.getAttribute("x")||0,d=+s.getAttribute("y")||0,f=s.getAttribute("transform");if(!f){var p=v.bBox(s,!1,n);return l&&(p.left+=l,p.right+=l),d&&(p.top+=d,p.bottom+=d),p}if(n+="~"+l+"~"+d+"~"+f,i=v.savedBBoxes[n])return c.extendFlat({},i)}}t?o=e:(a=v.tester.node(),o=e.cloneNode(!0),a.appendChild(o)),r.select(o).attr("transform",null).call(u.positionText,0,0);var h=o.getBoundingClientRect(),g=v.testref.node().getBoundingClientRect();t||a.removeChild(o);var m={height:h.height,width:h.width,left:h.left-g.left,top:h.top-g.top,right:h.right-g.left,bottom:h.bottom-g.top};return P>=1e4&&(v.savedBBoxes={},P=0),n&&(v.savedBBoxes[n]=m),P++,c.extendFlat({},m)},v.setClipUrl=function(e,t){if(t){if(void 0===v.baseUrl){var n=r.select("base");n.size()&&n.attr("href")?v.baseUrl=window.location.href.split("#")[0]:v.baseUrl=""}e.attr("clip-path","url("+v.baseUrl+"#"+t+")")}else e.attr("clip-path",null)},v.getTranslate=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+t[0]||0,y:+t[1]||0}},v.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",o=e[r]("transform")||"";return t=t||0,n=n||0,o=o.replace(/(\btranslate\(.*?\);?)/,"").trim(),o=(o+=" translate("+t+", "+n+")").trim(),e[i]("transform",o),o},v.getScale=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+t[0]||1,y:+t[1]||1}},v.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",o=e[r]("transform")||"";return t=t||1,n=n||1,o=o.replace(/(\bscale\(.*?\);?)/,"").trim(),o=(o+=" scale("+t+", "+n+")").trim(),e[i]("transform",o),o};var R=/\s*sc.*/;v.setPointGroupScale=function(e,t,n){if(t=t||1,n=n||1,e){var r=1===t&&1===n?"":" scale("+t+","+n+")";e.each(function(){var e=(this.getAttribute("transform")||"").replace(R,"");e=(e+=r).trim(),this.setAttribute("transform",e)})}};var F=/translate\([^)]*\)\s*$/;v.setTextPointsScale=function(e,t,n){e&&e.each(function(){var e,i=r.select(this),o=i.select("text");if(o.node()){var a=parseFloat(o.attr("x")||0),s=parseFloat(o.attr("y")||0),l=(i.attr("transform")||"").match(F);e=1===t&&1===n?[]:["translate("+a+","+s+")","scale("+t+","+n+")","translate("+-a+","+-s+")"],l&&e.push(l),i.attr("transform",e.join(" "))}})}},{"../../constants/alignment":141,"../../constants/interactions":142,"../../constants/xmlns_namespaces":144,"../../lib":161,"../../lib/svg_text_utils":183,"../../registry":246,"../../traces/scatter/make_bubble_size_func":300,"../../traces/scatter/subtypes":307,"../color":43,"../colorscale":58,"./symbol_defs":69,d3:8,"fast-isnumeric":10,tinycolor2:26}],69:[function(e,t,n){"use strict";var r=e("d3");t.exports={circle:{n:0,f:function(e){var t=r.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=r.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=r.round(.4*e,2),n=r.round(1.2*e,2);return"M"+n+","+t+"H"+t+"V"+n+"H-"+t+"V"+t+"H-"+n+"V-"+t+"H-"+t+"V-"+n+"H"+t+"V-"+t+"H"+n+"Z"}},x:{n:4,f:function(e){var t=r.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,i="l"+t+",-"+t,o="l-"+t+",-"+t,a="l-"+t+","+t;return"M0,"+t+n+i+o+i+o+a+o+a+n+a+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=r.round(2*e/Math.sqrt(3),2);return"M-"+t+","+r.round(e/2,2)+"H"+t+"L0,-"+r.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var t=r.round(2*e/Math.sqrt(3),2);return"M-"+t+",-"+r.round(e/2,2)+"H"+t+"L0,"+r.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var t=r.round(2*e/Math.sqrt(3),2);return"M"+r.round(e/2,2)+",-"+t+"V"+t+"L-"+r.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var t=r.round(2*e/Math.sqrt(3),2);return"M-"+r.round(e/2,2)+",-"+t+"V"+t+"L"+r.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M-"+n+",-"+t+"H"+t+"V"+n+"Z"}},"triangle-se":{n:10,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M"+t+",-"+n+"V"+t+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M"+n+","+t+"H-"+t+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M-"+t+","+n+"V-"+t+"H"+n+"Z"}},pentagon:{n:13,f:function(e){var t=r.round(.951*e,2),n=r.round(.588*e,2),i=r.round(-e,2),o=r.round(-.309*e,2);return"M"+t+","+o+"L"+n+","+r.round(.809*e,2)+"H-"+n+"L-"+t+","+o+"L0,"+i+"Z"}},hexagon:{n:14,f:function(e){var t=r.round(e,2),n=r.round(e/2,2),i=r.round(e*Math.sqrt(3)/2,2);return"M"+i+",-"+n+"V"+n+"L0,"+t+"L-"+i+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=r.round(e,2),n=r.round(e/2,2),i=r.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+i+"H"+n+"L"+t+",0L"+n+",-"+i+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=r.round(.924*e,2),n=r.round(.383*e,2);return"M-"+n+",-"+t+"H"+n+"L"+t+",-"+n+"V"+n+"L"+n+","+t+"H-"+n+"L-"+t+","+n+"V-"+n+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=r.round(.225*t,2),i=r.round(.951*t,2),o=r.round(.363*t,2),a=r.round(.588*t,2),s=r.round(-t,2),l=r.round(-.309*t,2),c=r.round(.118*t,2),u=r.round(.809*t,2);return"M"+n+","+l+"H"+i+"L"+o+","+c+"L"+a+","+u+"L0,"+r.round(.382*t,2)+"L-"+a+","+u+"L-"+o+","+c+"L-"+i+","+l+"H-"+n+"L0,"+s+"Z"}},hexagram:{n:18,f:function(e){var t=r.round(.66*e,2),n=r.round(.38*e,2),i=r.round(.76*e,2);return"M-"+i+",0l-"+n+",-"+t+"h"+i+"l"+n+",-"+t+"l"+n+","+t+"h"+i+"l-"+n+","+t+"l"+n+","+t+"h-"+i+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+i+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=r.round(e*Math.sqrt(3)*.8,2),n=r.round(.8*e,2),i=r.round(1.6*e,2),o=r.round(4*e,2),a="A "+o+","+o+" 0 0 1 ";return"M-"+t+","+n+a+t+","+n+a+"0,-"+i+a+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=r.round(e*Math.sqrt(3)*.8,2),n=r.round(.8*e,2),i=r.round(1.6*e,2),o=r.round(4*e,2),a="A "+o+","+o+" 0 0 1 ";return"M"+t+",-"+n+a+"-"+t+",-"+n+a+"0,"+i+a+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=r.round(1.1*e,2),n=r.round(2*e,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+t+",-"+t+i+"-"+t+","+t+i+t+","+t+i+t+",-"+t+i+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=r.round(1.4*e,2),n=r.round(1.9*e,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+t+",0"+i+"0,"+t+i+t+",0"+i+"0,-"+t+i+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=r.round(.7*e,2),n=r.round(1.4*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=r.round(1.4*e,2),n=r.round(.7*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var t=r.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=r.round(e,2),n=r.round(e/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var t=r.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var t=r.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=r.round(1.3*e,2),n=r.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var t=r.round(1.4*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=r.round(1.2*e,2),n=r.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=r.round(e/2,2),n=r.round(e,2);return"M"+t+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+t+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M-"+t+","+i+"L0,0M"+t+","+i+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M-"+t+",-"+i+"L0,0M"+t+",-"+i+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M"+i+","+t+"L0,0M"+i+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M-"+i+","+t+"L0,0M-"+i+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){var t=r.round(1.4*e,2);return"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){var t=r.round(1.4*e,2);return"M0,"+t+"V-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){var t=r.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:!0,noDot:!0,noFill:!0}}},{d3:8}],70:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],71:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../registry"),o=e("../../plots/cartesian/axes"),a=e("./compute_error");function s(e,t,n,i){var s=t["error_"+i]||{},l=[];if(s.visible&&-1!==["linear","log"].indexOf(n.type)){for(var c=a(s),u=0;u<e.length;u++){var d=e[u],f=d.i;if(void 0===f)f=u;else if(null===f)continue;var p=d[i];if(r(n.c2l(p))){var h=c(p,f);if(r(h[0])&&r(h[1])){var g=d[i+"s"]=p-h[0],v=d[i+"h"]=p+h[1];l.push(g,v)}}}var m=o.findExtremes(n,l,{padded:!0}),b=n._id;t._extremes[b].min=t._extremes[b].min.concat(m.min),t._extremes[b].max=t._extremes[b].max.concat(m.max)}}t.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r=t[n],a=r[0].trace;if(!0===a.visible&&i.traceIs(a,"errorBarsOK")){var l=o.getFromId(e,a.xaxis),c=o.getFromId(e,a.yaxis);s(r,a,l,"x"),s(r,a,c,"y")}}}},{"../../plots/cartesian/axes":206,"../../registry":246,"./compute_error":72,"fast-isnumeric":10}],72:[function(e,t,n){"use strict";function r(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}t.exports=function(e){var t=e.type,n=e.symmetric;if("data"===t){var i=e.array||[];if(n)return function(e,t){var n=+i[t];return[n,n]};var o=e.arrayminus||[];return function(e,t){var n=+i[t],r=+o[t];return isNaN(n)&&isNaN(r)?[NaN,NaN]:[r||0,n||0]}}var a=r(t,e.value),s=r(t,e.valueminus);return n||void 0===e.valueminus?function(e){var t=a(e);return[t,t]}:function(e){return[s(e),a(e)]}}},{}],73:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../registry"),o=e("../../lib"),a=e("../../plot_api/plot_template"),s=e("./attributes");t.exports=function(e,t,n,l){var c="error_"+l.axis,u=a.newContainer(t,c),d=e[c]||{};function f(e,t){return o.coerce(d,u,s,e,t)}if(!1!==f("visible",void 0!==d.array||void 0!==d.value||"sqrt"===d.type)){var p=f("type","array"in d?"data":"percent"),h=!0;"sqrt"!==p&&(h=f("symmetric",!(("data"===p?"arrayminus":"valueminus")in d))),"data"===p?(f("array"),f("traceref"),h||(f("arrayminus"),f("tracerefminus"))):"percent"!==p&&"constant"!==p||(f("value"),h||f("valueminus"));var g="copy_"+l.inherit+"style";if(l.inherit)(t["error_"+l.inherit]||{}).visible&&f(g,!(d.color||r(d.thickness)||r(d.width)));l.inherit&&u[g]||(f("color",n),f("thickness"),f("width",i.traceIs(t,"gl3d")?0:4))}}},{"../../lib":161,"../../plot_api/plot_template":196,"../../registry":246,"./attributes":70,"fast-isnumeric":10}],74:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plot_api/edit_types").overrideAll,o=e("./attributes"),a={error_x:r.extendFlat({},o),error_y:r.extendFlat({},o)};delete a.error_x.copy_zstyle,delete a.error_y.copy_zstyle,delete a.error_y.copy_ystyle;var s={error_x:r.extendFlat({},o),error_y:r.extendFlat({},o),error_z:r.extendFlat({},o)};delete s.error_x.copy_ystyle,delete s.error_y.copy_ystyle,delete s.error_z.copy_ystyle,delete s.error_z.copy_zstyle,t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:a,bar:a,histogram:a,scatter3d:i(s,"calc","nested"),scattergl:i(a,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys));(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},{"../../lib":161,"../../plot_api/edit_types":189,"./attributes":70,"./calc":71,"./compute_error":72,"./defaults":73,"./plot":75,"./style":76}],75:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("../drawing"),a=e("../../traces/scatter/subtypes");t.exports=function(e,t,n){var s=t.xaxis,l=t.yaxis,c=n&&n.duration>0;e.each(function(e){var u,d=e[0].trace,f=d.error_x||{},p=d.error_y||{};d.ids&&(u=function(e){return e.id});var h=a.hasMarkers(d)&&d.marker.maxdisplayed>0;p.visible||f.visible||(e=[]);var g=r.select(this).selectAll("g.errorbar").data(e,u);if(g.exit().remove(),e.length){f.visible||g.selectAll("path.xerror").remove(),p.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var v=g.enter().append("g").classed("errorbar",!0);c&&v.style("opacity",0).transition().duration(n.duration).style("opacity",1),o.setClipUrl(g,t.layerClipId),g.each(function(e){var t=r.select(this),o=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),i(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),i(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0)));return r}(e,s,l);if(!h||e.vis){var a,u=t.select("path.yerror");if(p.visible&&i(o.x)&&i(o.yh)&&i(o.ys)){var d=p.width;a="M"+(o.x-d)+","+o.yh+"h"+2*d+"m-"+d+",0V"+o.ys,o.noYS||(a+="m-"+d+",0h"+2*d),!u.size()?u=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):c&&(u=u.transition().duration(n.duration).ease(n.easing)),u.attr("d",a)}else u.remove();var g=t.select("path.xerror");if(f.visible&&i(o.y)&&i(o.xh)&&i(o.xs)){var v=(f.copy_ystyle?p:f).width;a="M"+o.xh+","+(o.y-v)+"v"+2*v+"m0,-"+v+"H"+o.xs,o.noXS||(a+="m0,-"+v+"v"+2*v),!g.size()?g=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):c&&(g=g.transition().duration(n.duration).ease(n.easing)),g.attr("d",a)}else g.remove()}})}})}},{"../../traces/scatter/subtypes":307,"../drawing":68,d3:8,"fast-isnumeric":10}],76:[function(e,t,n){"use strict";var r=e("d3"),i=e("../color");t.exports=function(e){e.each(function(e){var t=e[0].trace,n=t.error_y||{},o=t.error_x||{},a=r.select(this);a.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),o.copy_ystyle&&(o=n),a.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(i.stroke,o.color)})}},{"../color":43,d3:8}],77:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes");t.exports={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,editType:"none"},font:r({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}}},{"../../plots/font_attributes":233}],78:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../registry");function o(e,t,n,i){i=i||r.identity,Array.isArray(e)&&(t[0][n]=i(e))}t.exports=function(e){var t=e.calcdata,n=e._fullLayout;function a(e){return function(t){return r.coerceHoverinfo({hoverinfo:t},{_module:e._module},n)}}for(var s=0;s<t.length;s++){var l=t[s],c=l[0].trace;if(!i.traceIs(c,"pie")){var u=i.traceIs(c,"2dMap")?o:r.fillArray;u(c.hoverinfo,l,"hi",a(c)),c.hoverlabel&&(u(c.hoverlabel.bgcolor,l,"hbg"),u(c.hoverlabel.bordercolor,l,"hbc"),u(c.hoverlabel.font.size,l,"hts"),u(c.hoverlabel.font.color,l,"htc"),u(c.hoverlabel.font.family,l,"htf"),u(c.hoverlabel.namelength,l,"hnl"))}}}},{"../../lib":161,"../../registry":246}],79:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("./hover").hover;t.exports=function(e,t,n){var o=r.getComponentMethod("annotations","onClick")(e,e._hoverdata);function a(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&i(e,t,n,!0),e._hoverdata&&t&&t.target&&(o&&o.then?o.then(a):a(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":246,"./hover":83}],80:[function(e,t,n){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],81:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes"),o=e("./hoverlabel_defaults");t.exports=function(e,t,n,a){o(e,t,function(n,o){return r.coerce(e,t,i,n,o)},a.hoverlabel)}},{"../../lib":161,"./attributes":77,"./hoverlabel_defaults":84}],82:[function(e,t,n){"use strict";var r=e("../../lib");n.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},n.isTraceInSubplots=function(e,t){if("splom"===e.type){for(var r=e.xaxes||[],i=e.yaxes||[],o=0;o<r.length;o++)for(var a=0;a<i.length;a++)if(-1!==t.indexOf(r[o]+i[a]))return!0;return!1}return-1!==t.indexOf(n.getSubplot(e))},n.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},n.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},n.getDistanceFunction=function(e,t,r,i){return"closest"===e?i||n.quadrature(t,r):"x"===e?t:r},n.getClosest=function(e,t,n){if(!1!==n.index)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var i=t(e[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},n.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},n.quadrature=function(e,t){return function(n){var r=e(n),i=t(n);return Math.sqrt(r*r+i*i)}},n.makeEventData=function(e,t,r){var i="index"in e?e.index:e.pointNumber,o={data:t._input,fullData:t,curveNumber:t.index,pointNumber:i};if(t._indexToPoints){var a=t._indexToPoints[i];1===a.length?o.pointIndex=a[0]:o.pointIndices=a}else o.pointIndex=i;return t._module.eventData?o=t._module.eventData(o,e,t,r,i):("xVal"in e?o.x=e.xVal:"x"in e&&(o.x=e.x),"yVal"in e?o.y=e.yVal:"y"in e&&(o.y=e.y),e.xa&&(o.xaxis=e.xa),e.ya&&(o.yaxis=e.ya),void 0!==e.zLabelVal&&(o.z=e.zLabelVal)),n.appendArrayPointValue(o,t,i),o},n.appendArrayPointValue=function(e,t,n){var i=t._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var l=i[s],c=o(l);if(void 0===e[c]){var u=a(r.nestedProperty(t,l).get(),n);void 0!==u&&(e[c]=u)}}},n.appendArrayMultiPointValues=function(e,t,n){var i=t._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var l=i[s],c=o(l);if(void 0===e[c]){for(var u=r.nestedProperty(t,l).get(),d=new Array(n.length),f=0;f<n.length;f++)d[f]=a(u,n[f]);e[c]=d}}};var i={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function o(e){return i[e]||e}function a(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}},{"../../lib":161}],83:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("tinycolor2"),a=e("../../lib"),s=e("../../lib/events"),l=e("../../lib/svg_text_utils"),c=e("../../lib/override_cursor"),u=e("../drawing"),d=e("../color"),f=e("../dragelement"),p=e("../../plots/cartesian/axes"),h=e("../../registry"),g=e("./helpers"),v=e("./constants"),m=v.YANGLE,b=Math.PI*m/180,y=1/Math.sin(b),x=Math.cos(b),_=Math.sin(b),w=v.HOVERARROWSIZE,k=v.HOVERTEXTPAD;function T(e,t,n){var i=t.hovermode,o=t.rotateLabels,s=t.bgColor,c=t.container,f=t.outerContainer,p=t.commonLabelOpts||{},h=t.fontFamily||v.HOVERFONT,g=t.fontSize||v.HOVERFONTSIZE,b=e[0],y=b.xa,x=b.ya,_="y"===i?"yLabel":"xLabel",T=b[_],A=(String(T)||"").split(" ")[0],C=f.node().getBoundingClientRect(),S=C.top,M=C.width,E=C.height,O=void 0!==T&&b.distance<=t.hoverdistance&&("x"===i||"y"===i);if(O){var L,P,D=!0;for(L=0;L<e.length;L++){D&&void 0===e[L].zLabel&&(D=!1),P=e[L].hoverinfo||e[L].trace.hoverinfo;var R=Array.isArray(P)?P:P.split("+");if(-1===R.indexOf("all")&&-1===R.indexOf(i)){O=!1;break}}D&&(O=!1)}var F=c.selectAll("g.axistext").data(O?[0]:[]);F.enter().append("g").classed("axistext",!0),F.exit().remove(),F.each(function(){var t=r.select(this),o=a.ensureSingle(t,"path","",function(e){e.style({"stroke-width":"1px"})}),s=a.ensureSingle(t,"text","",function(e){e.attr("data-notex",1)}),c=p.bgcolor||d.defaultLine,f=p.bordercolor||d.contrast(c),v=d.contrast(c);o.style({fill:c,stroke:f}),s.text(T).call(u.font,p.font.family||h,p.font.size||g,p.font.color||v).call(l.positionText,0,0).call(l.convertToTspans,n),t.attr("transform","");var m=s.node().getBoundingClientRect();if("x"===i){s.attr("text-anchor","middle").call(l.positionText,0,"top"===y.side?S-m.bottom-w-k:S-m.top+w+k);var C="top"===y.side?"-":"";o.attr("d","M0,0L"+w+","+C+w+"H"+(k+m.width/2)+"v"+C+(2*k+m.height)+"H-"+(k+m.width/2)+"V"+C+w+"H-"+w+"Z"),t.attr("transform","translate("+(y._offset+(b.x0+b.x1)/2)+","+(x._offset+("top"===y.side?0:x._length))+")")}else{s.attr("text-anchor","right"===x.side?"start":"end").call(l.positionText,("right"===x.side?1:-1)*(k+w),S-m.top-m.height/2);var M="right"===x.side?"":"-";o.attr("d","M0,0L"+M+w+","+w+"V"+(k+m.height/2)+"h"+M+(2*k+m.width)+"V-"+(k+m.height/2)+"H"+M+w+"V-"+w+"Z"),t.attr("transform","translate("+(y._offset+("right"===x.side?y._length:0))+","+(x._offset+(b.y0+b.y1)/2)+")")}e=e.filter(function(e){return void 0!==e.zLabelVal||(e[_]||"").split(" ")[0]===A})});var j=c.selectAll("g.hovertext").data(e,function(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")});return j.enter().append("g").classed("hovertext",!0).each(function(){var e=r.select(this);e.append("rect").call(d.fill,d.addOpacity(s,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(u.font,h,g)}),j.exit().remove(),j.each(function(e){var t=r.select(this).attr("transform",""),a="",c="",f=e.bgcolor||e.color,p=d.combine(d.opacity(f)?f:d.defaultLine,s),v=d.combine(d.opacity(e.color)?e.color:d.defaultLine,s),b=e.borderColor||d.contrast(p);if(void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name){a=l.plainText(e.name||"");var y=Math.round(e.nameLength);y>-1&&a.length>y&&(a=y>3?a.substr(0,y-3)+"...":a.substr(0,y))}void 0!==e.zLabel?(void 0!==e.xLabel&&(c+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(c+="y: "+e.yLabel+"<br>"),c+=(c?"z: ":"")+e.zLabel):O&&e[i+"Label"]===T?c=e[("x"===i?"y":"x")+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&(c=e.yLabel):c=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",!e.text&&0!==e.text||Array.isArray(e.text)||(c+=(c?"<br>":"")+e.text),void 0!==e.extraText&&(c+=(c?"<br>":"")+e.extraText),""===c&&(""===a&&t.remove(),c=a);var x=t.select("text.nums").call(u.font,e.fontFamily||h,e.fontSize||g,e.fontColor||b).text(c).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,n),_=t.select("text.name"),A=0;a&&a!==c?(_.call(u.font,e.fontFamily||h,e.fontSize||g,v).text(a).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,n),A=_.node().getBoundingClientRect().width+2*k):(_.remove(),t.select("rect").remove()),t.select("path").style({fill:p,stroke:b});var C,L,P=x.node().getBoundingClientRect(),D=e.xa._offset+(e.x0+e.x1)/2,R=e.ya._offset+(e.y0+e.y1)/2,F=Math.abs(e.x1-e.x0),j=Math.abs(e.y1-e.y0),I=P.width+w+k+A;e.ty0=S-P.top,e.bx=P.width+2*k,e.by=P.height+2*k,e.anchor="start",e.txwidth=P.width,e.tx2width=A,e.offset=0,o?(e.pos=D,C=R+j/2+I<=E,L=R-j/2-I>=0,"top"!==e.idealAlign&&C||!L?C?(R+=j/2,e.anchor="start"):e.anchor="middle":(R-=j/2,e.anchor="end")):(e.pos=R,C=D+F/2+I<=M,L=D-F/2-I>=0,"left"!==e.idealAlign&&C||!L?C?(D+=F/2,e.anchor="start"):e.anchor="middle":(D-=F/2,e.anchor="end")),x.attr("text-anchor",e.anchor),A&&_.attr("text-anchor",e.anchor),t.attr("transform","translate("+D+","+R+")"+(o?"rotate("+m+")":""))}),j}function A(e,t){e.each(function(e){var n=r.select(this);if(e.del)n.remove();else{var i="end"===e.anchor?-1:1,o=n.select("text.nums"),a={start:1,end:-1,middle:0}[e.anchor],s=a*(w+k),c=s+a*(e.txwidth+k),d=0,f=e.offset;"middle"===e.anchor&&(s-=e.tx2width/2,c+=e.txwidth/2+k),t&&(f*=-_,d=e.offset*x),n.select("path").attr("d","middle"===e.anchor?"M-"+(e.bx/2+e.tx2width/2)+","+(f-e.by/2)+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(i*w+d)+","+(w+f)+"v"+(e.by/2-w)+"h"+i*e.bx+"v-"+e.by+"H"+(i*w+d)+"V"+(f-w)+"Z"),o.call(l.positionText,s+d,f+e.ty0-e.by/2+k),e.tx2width&&(n.select("text.name").call(l.positionText,c+a*k+d,f+e.ty0-e.by/2+k),n.select("rect").call(u.setRect,c+(a-1)*e.tx2width/2+d,f-e.by/2-1,e.tx2width,e.by+2))}})}function C(e,t){var n=e.index,r=e.trace||{},i=e.cd[0],o=e.cd[n]||{},s=Array.isArray(n)?function(e,t){return a.castOption(i,n,e)||a.extractOption({},r,"",t)}:function(e,t){return a.extractOption(o,r,e,t)};function l(t,n,r){var i=s(n,r);i&&(e[t]=i)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),e.posref="y"===t?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=a.constrain(e.x0,0,e.xa._length),e.x1=a.constrain(e.x1,0,e.xa._length),e.y0=a.constrain(e.y0,0,e.ya._length),e.y1=a.constrain(e.y1,0,e.ya._length),void 0!==e.xLabelVal&&(e.xLabel="xLabel"in e?e.xLabel:p.hoverLabelText(e.xa,e.xLabelVal),e.xVal=e.xa.c2d(e.xLabelVal)),void 0!==e.yLabelVal&&(e.yLabel="yLabel"in e?e.yLabel:p.hoverLabelText(e.ya,e.yLabelVal),e.yVal=e.ya.c2d(e.yLabelVal)),void 0!==e.zLabelVal&&void 0===e.zLabel&&(e.zLabel=String(e.zLabelVal)),!(isNaN(e.xerr)||"log"===e.xa.type&&e.xerr<=0)){var c=p.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;void 0!==e.xerrneg?e.xLabel+=" +"+c+" / -"+p.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" Â± "+c,"x"===t&&(e.distance+=1)}if(!(isNaN(e.yerr)||"log"===e.ya.type&&e.yerr<=0)){var u=p.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;void 0!==e.yerrneg?e.yLabel+=" +"+u+" / -"+p.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" Â± "+u,"y"===t&&(e.distance+=1)}var d=e.hoverinfo||e.trace.hoverinfo;return"all"!==d&&(-1===(d=Array.isArray(d)?d:d.split("+")).indexOf("x")&&(e.xLabel=void 0),-1===d.indexOf("y")&&(e.yLabel=void 0),-1===d.indexOf("z")&&(e.zLabel=void 0),-1===d.indexOf("text")&&(e.text=void 0),-1===d.indexOf("name")&&(e.name=void 0)),e}function S(e,t){var n,r,i=t.container,a=t.fullLayout,s=t.event,l=!!e.hLinePoint,c=!!e.vLinePoint;if(i.selectAll(".spikeline").remove(),c||l){var f=d.combine(a.plot_bgcolor,a.paper_bgcolor);if(l){var p,h,g=e.hLinePoint;n=g&&g.xa,"cursor"===(r=g&&g.ya).spikesnap?(p=s.pointerX,h=s.pointerY):(p=n._offset+g.x,h=r._offset+g.y);var v,m,b=o.readability(g.color,f)<1.5?d.contrast(f):g.color,y=r.spikemode,x=r.spikethickness,_=r.spikecolor||b,w=r._boundingBox,k=(w.left+w.right)/2<p?w.right:w.left;-1===y.indexOf("toaxis")&&-1===y.indexOf("across")||(-1!==y.indexOf("toaxis")&&(v=k,m=p),-1!==y.indexOf("across")&&(v=r._counterSpan[0],m=r._counterSpan[1]),i.insert("line",":first-child").attr({x1:v,x2:m,y1:h,y2:h,"stroke-width":x,stroke:_,"stroke-dasharray":u.dashStyle(r.spikedash,x)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:v,x2:m,y1:h,y2:h,"stroke-width":x+2,stroke:f}).classed("spikeline",!0).classed("crisp",!0)),-1!==y.indexOf("marker")&&i.insert("circle",":first-child").attr({cx:k+("right"!==r.side?x:-x),cy:h,r:x,fill:_}).classed("spikeline",!0)}if(c){var T,A,C=e.vLinePoint;n=C&&C.xa,r=C&&C.ya,"cursor"===n.spikesnap?(T=s.pointerX,A=s.pointerY):(T=n._offset+C.x,A=r._offset+C.y);var S,M,E=o.readability(C.color,f)<1.5?d.contrast(f):C.color,O=n.spikemode,L=n.spikethickness,P=n.spikecolor||E,D=n._boundingBox,R=(D.top+D.bottom)/2<A?D.bottom:D.top;-1===O.indexOf("toaxis")&&-1===O.indexOf("across")||(-1!==O.indexOf("toaxis")&&(S=R,M=A),-1!==O.indexOf("across")&&(S=n._counterSpan[0],M=n._counterSpan[1]),i.insert("line",":first-child").attr({x1:T,x2:T,y1:S,y2:M,"stroke-width":L,stroke:P,"stroke-dasharray":u.dashStyle(n.spikedash,L)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:T,x2:T,y1:S,y2:M,"stroke-width":L+2,stroke:f}).classed("spikeline",!0).classed("crisp",!0)),-1!==O.indexOf("marker")&&i.insert("circle",":first-child").attr({cx:T,cy:R-("top"!==n.side?L:-L),r:L,fill:P}).classed("spikeline",!0)}}}function M(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}n.hover=function(e,t,n,o){e=a.getGraphDiv(e),a.throttle(e._fullLayout._uid+v.HOVERID,v.HOVERMINTIME,function(){!function(e,t,n,o){n||(n="xy");var l=Array.isArray(n)?n:[n],u=e._fullLayout,v=u._plots||[],m=v[n],b=u._has("cartesian");if(m){var x=m.overlays.map(function(e){return e.id});l=l.concat(x)}for(var _=l.length,w=new Array(_),k=new Array(_),E=!1,O=0;O<_;O++){var L=l[O],P=v[L];if(P)E=!0,w[O]=p.getFromId(e,P.xaxis._id),k[O]=p.getFromId(e,P.yaxis._id);else{var D=u[L]._subplot;w[O]=D.xaxis,k[O]=D.yaxis}}var R=t.hovermode||u.hovermode;R&&!E&&(R="closest");if(-1===["x","y","closest"].indexOf(R)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return f.unhoverRaw(e,t);var F,j,I,N,z,q,H,B,V,U,$,W,X,G=-1===u.hoverdistance?1/0:u.hoverdistance,Y=-1===u.spikedistance?1/0:u.spikedistance,Z=[],J=[],K={hLinePoint:null,vLinePoint:null},Q=!1;if(Array.isArray(t))for(R="array",I=0;I<t.length;I++)z=e.calcdata[t[I].curveNumber||0],q=z[0].trace,"skip"!==z[0].trace.hoverinfo&&(J.push(z),"h"===q.orientation&&(Q=!0));else{for(N=0;N<e.calcdata.length;N++)z=e.calcdata[N],"skip"!==(q=z[0].trace).hoverinfo&&g.isTraceInSubplots(q,l)&&(J.push(z),"h"===q.orientation&&(Q=!0));var ee,te,ne=!t.target;if(ne)ee="xpx"in t?t.xpx:w[0]._length/2,te="ypx"in t?t.ypx:k[0]._length/2;else{if(!1===s.triggerHandler(e,"plotly_beforehover",t))return;var re=t.target.getBoundingClientRect();if(ee=t.clientX-re.left,te=t.clientY-re.top,ee<0||ee>w[0]._length||te<0||te>k[0]._length)return f.unhoverRaw(e,t)}if(t.pointerX=ee+w[0]._offset,t.pointerY=te+k[0]._offset,F="xval"in t?g.flat(l,t.xval):g.p2c(w,ee),j="yval"in t?g.flat(l,t.yval):g.p2c(k,te),!i(F[0])||!i(j[0]))return a.warn("Fx.hover failed",t,e),f.unhoverRaw(e,t)}var ie=1/0;for(N=0;N<J.length;N++)if((z=J[N])&&z[0]&&z[0].trace&&!0===z[0].trace.visible&&(q=z[0].trace,-1===["carpet","contourcarpet"].indexOf(q._module.name))){if("splom"===q.type?H=l[B=0]:(H=g.getSubplot(q),B=l.indexOf(H)),V=R,W={cd:z,trace:q,xa:w[B],ya:k[B],maxHoverDistance:G,maxSpikeDistance:Y,index:!1,distance:Math.min(ie,G),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:d.defaultLine,name:q.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},u[H]&&(W.subplot=u[H]._subplot),u._splomScenes&&u._splomScenes[q.uid]&&(W.scene=u._splomScenes[q.uid]),X=Z.length,"array"===V){var oe=t[N];"pointNumber"in oe?(W.index=oe.pointNumber,V="closest"):(V="","xval"in oe&&(U=oe.xval,V="x"),"yval"in oe&&($=oe.yval,V=V?"closest":"y"))}else U=F[B],$=j[B];if(0!==G)if(q._module&&q._module.hoverPoints){var ae=q._module.hoverPoints(W,U,$,V,u._hoverlayer);if(ae)for(var se,le=0;le<ae.length;le++)se=ae[le],i(se.x0)&&i(se.y0)&&Z.push(C(se,R))}else a.log("Unrecognized trace type in hover:",q);if("closest"===R&&Z.length>X&&(Z.splice(0,X),ie=Z[0].distance),b&&0!==Y&&0===Z.length){W.distance=Y,W.index=!1;var ce=q._module.hoverPoints(W,U,$,"closest",u._hoverlayer);if(ce&&(ce=ce.filter(function(e){return e.spikeDistance<=Y})),ce&&ce.length){var ue,de=ce.filter(function(e){return e.xa.showspikes});if(de.length){var fe=de[0];i(fe.x0)&&i(fe.y0)&&(ue=ve(fe),(!K.vLinePoint||K.vLinePoint.spikeDistance>ue.spikeDistance)&&(K.vLinePoint=ue))}var pe=ce.filter(function(e){return e.ya.showspikes});if(pe.length){var he=pe[0];i(he.x0)&&i(he.y0)&&(ue=ve(he),(!K.hLinePoint||K.hLinePoint.spikeDistance>ue.spikeDistance)&&(K.hLinePoint=ue))}}}}function ge(e,t){for(var n,r=null,i=1/0,o=0;o<e.length;o++)(n=e[o].spikeDistance)<i&&n<=t&&(r=e[o],i=n);return r}function ve(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}var me={fullLayout:u,container:u._hoverlayer,outerContainer:u._paperdiv,event:t},be=e._spikepoints,ye={vLinePoint:K.vLinePoint,hLinePoint:K.hLinePoint};if(e._spikepoints=ye,b&&0!==Y&&0!==Z.length){var xe=Z.filter(function(e){return e.ya.showspikes}),_e=ge(xe,Y);K.hLinePoint=ve(_e);var we=Z.filter(function(e){return e.xa.showspikes}),ke=ge(we,Y);K.vLinePoint=ve(ke)}if(0===Z.length){var Te=f.unhoverRaw(e,t);return!b||null===K.hLinePoint&&null===K.vLinePoint||M(be)&&S(K,me),Te}b&&M(be)&&S(K,me);Z.sort(function(e,t){return e.distance-t.distance});var Ae=e._hoverdata,Ce=[];for(I=0;I<Z.length;I++){var Se=Z[I];Ce.push(g.makeEventData(Se,Se.trace,Se.cd))}e._hoverdata=Ce;var Me="y"===R&&(J.length>1||Z.length>1)||"closest"===R&&Q&&Z.length>1,Ee=d.combine(u.plot_bgcolor||d.background,u.paper_bgcolor),Oe={hovermode:R,rotateLabels:Me,bgColor:Ee,container:u._hoverlayer,outerContainer:u._paperdiv,commonLabelOpts:u.hoverlabel,hoverdistance:u.hoverdistance},Le=T(Z,Oe,e);if(function(e,t,n){var r,i,o,a,s,l,c,u=0,d=1,f=e.map(function(e,r){var i=e[t],o="x"===i._id.charAt(0),a=i.range;return!r&&a&&a[0]>a[1]!==o&&(d=-1),[{i:r,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(o?y:1)/2,pmin:0,pmax:o?n.width:n.height}]}).sort(function(e,t){return e[0].posref-t[0].posref||d*(t[0].traceIndex-e[0].traceIndex)});function p(e){var t=e[0],n=e[e.length-1];if(i=t.pmin-t.pos-t.dp+t.size,o=n.pos+n.dp+n.size-t.pmax,i>.01){for(s=e.length-1;s>=0;s--)e[s].dp+=i;r=!1}if(!(o<.01)){if(i<-.01){for(s=e.length-1;s>=0;s--)e[s].dp-=o;r=!1}if(r){var c=0;for(a=0;a<e.length;a++)(l=e[a]).pos+l.dp+l.size>t.pmax&&c++;for(a=e.length-1;a>=0&&!(c<=0);a--)(l=e[a]).pos>t.pmax-1&&(l.del=!0,c--);for(a=0;a<e.length&&!(c<=0);a++)if((l=e[a]).pos<t.pmin+1)for(l.del=!0,c--,o=2*l.size,s=e.length-1;s>=0;s--)e[s].dp-=o;for(a=e.length-1;a>=0&&!(c<=0);a--)(l=e[a]).pos+l.dp+l.size>t.pmax&&(l.del=!0,c--)}}}for(;!r&&u<=e.length;){for(u++,r=!0,a=0;a<f.length-1;){var h=f[a],g=f[a+1],v=h[h.length-1],m=g[0];if((i=v.pos+v.dp+v.size-m.pos-m.dp+m.size)>.01&&v.pmin===m.pmin&&v.pmax===m.pmax){for(s=g.length-1;s>=0;s--)g[s].dp+=i;for(h.push.apply(h,g),f.splice(a+1,1),c=0,s=h.length-1;s>=0;s--)c+=h[s].dp;for(o=c/h.length,s=h.length-1;s>=0;s--)h[s].dp-=o;r=!1}else a++}f.forEach(p)}for(a=f.length-1;a>=0;a--){var b=f[a];for(s=b.length-1;s>=0;s--){var x=b[s],_=e[x.i];_.offset=x.dp,_.del=x.del}}}(Z,Me?"xa":"ya",u),A(Le,Me),t.target&&t.target.tagName){var Pe=h.getComponentMethod("annotations","hasClickToShow")(e,Ce);c(r.select(t.target),Pe?"pointer":"")}if(!t.target||o||!function(e,t,n){if(!n||n.length!==e._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],o=e._hoverdata[r];if(i.curveNumber!==o.curveNumber||String(i.pointNumber)!==String(o.pointNumber))return!0}return!1}(e,0,Ae))return;Ae&&e.emit("plotly_unhover",{event:t,points:Ae});e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:w,yaxes:k,xvals:F,yvals:j})}(e,t,n,o)})},n.loneHover=function(e,t){var n={color:e.color||d.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},i=r.select(t.container),o=t.outerContainer?r.select(t.outerContainer):i,a={hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||d.background,container:i,outerContainer:o},s=T([n],a,t.gd);return A(s,a.rotateLabels),s.node()},n.multiHovers=function(e,t){Array.isArray(e)||(e=[e]);var n=e.map(function(e){return{color:e.color||d.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0}}),i=r.select(t.container),o=t.outerContainer?r.select(t.outerContainer):i,a={hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||d.background,container:i,outerContainer:o},s=T(n,a,t.gd),l=0;return s.sort(function(e,t){return e.y0-t.y0}).each(function(e){var t=e.y0-e.by/2;e.offset=t-5<l?l-t+5:0,l=t+e.by+e.offset}),A(s,a.rotateLabels),s.node()}},{"../../lib":161,"../../lib/events":154,"../../lib/override_cursor":173,"../../lib/svg_text_utils":183,"../../plots/cartesian/axes":206,"../../registry":246,"../color":43,"../dragelement":65,"../drawing":68,"./constants":80,"./helpers":82,d3:8,"fast-isnumeric":10,tinycolor2:26}],84:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t,n,i){n("hoverlabel.bgcolor",(i=i||{}).bgcolor),n("hoverlabel.bordercolor",i.bordercolor),n("hoverlabel.namelength",i.namelength),r.coerceFont(n,"hoverlabel.font",i.font)}},{"../../lib":161}],85:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../lib"),o=e("../dragelement"),a=e("./helpers"),s=e("./layout_attributes"),l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:a.getDistanceFunction,getClosest:a.getClosest,inbox:a.inbox,quadrature:a.quadrature,appendArrayPointValue:a.appendArrayPointValue,castHoverOption:function(e,t,n){return i.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(e,t,n){return i.castOption(e,n,"hoverinfo",function(n){return i.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)})},hover:l.hover,unhover:o.unhover,loneHover:l.loneHover,multiHovers:l.multiHovers,loneUnhover:function(e){var t=i.isD3Selection(e)?e:r.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e("./click")}},{"../../lib":161,"../dragelement":65,"./attributes":77,"./calc":78,"./click":79,"./constants":80,"./defaults":81,"./helpers":82,"./hover":83,"./layout_attributes":86,"./layout_defaults":87,"./layout_global_defaults":88,d3:8}],86:[function(e,t,n){"use strict";var r=e("./constants"),i=e("../../plots/font_attributes")({editType:"none"});i.family.dflt=r.HOVERFONT,i.size.dflt=r.HOVERFONTSIZE,t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:i,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":233,"./constants":80}],87:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./layout_attributes");t.exports=function(e,t,n){function o(n,o){return r.coerce(e,t,i,n,o)}var a,s=o("clickmode");"select"===o("dragmode")&&o("selectdirection"),t._has("cartesian")?s.indexOf("select")>-1?a="closest":(t._isHoriz=function(e){for(var t=!0,n=0;n<e.length;n++){var r=e[n];if("h"!==r.orientation){t=!1;break}}return t}(n),a=t._isHoriz?"y":"x"):a="closest",o("hovermode",a)&&(o("hoverdistance"),o("spikedistance"));var l=t._has("mapbox"),c=t._has("geo"),u=t._basePlotModules.length;"zoom"===t.dragmode&&((l||c)&&1===u||l&&c&&2===u)&&(t.dragmode="pan")}},{"../../lib":161,"./layout_attributes":86}],88:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./hoverlabel_defaults"),o=e("./layout_attributes");t.exports=function(e,t){i(e,t,function(n,i){return r.coerce(e,t,o,n,i)})}},{"../../lib":161,"./hoverlabel_defaults":84,"./layout_attributes":86}],89:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../lib/regex").counter,o=e("../../plots/domain").attributes,a=e("../../plots/cartesian/constants").idRegex,s=e("../../plot_api/plot_template"),l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[i("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function c(e,t,n){var r=t[n+"axes"],i=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(r)?r:i.length?i:void 0}function u(e,t,n,r,i,o){var a=t(e+"gap",n),s=t("domain."+e);t(e+"side",r);for(var l=new Array(i),c=s[0],u=(s[1]-c)/(i-a),d=u*(1-a),f=0;f<i;f++){var p=c+u*f;l[o?i-1-f:f]=[p,p+d]}return l}function d(e,t,n,r,i){var o,a=new Array(n);function s(e,n){-1!==t.indexOf(n)&&void 0===r[n]?(a[e]=n,r[n]=e):a[e]=""}if(Array.isArray(e))for(o=0;o<n;o++)s(o,e[o]);else for(s(0,i),o=1;o<n;o++)s(o,i+(o+1));return a}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(e,t){var n=e.grid||{},i=c(t,n,"x"),o=c(t,n,"y");if(e.grid||i||o){var a,d,f=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),p=Array.isArray(i),h=Array.isArray(o),g=p&&i!==n.xaxes&&h&&o!==n.yaxes;f?(a=n.subplots.length,d=n.subplots[0].length):(h&&(a=o.length),p&&(d=i.length));var v=s.newContainer(t,"grid"),m=T("rows",a),b=T("columns",d);if(m*b>1){f||p||h||"independent"===T("pattern")&&(f=!0),v._hasSubplotGrid=f;var y,x,_="top to bottom"===T("roworder"),w=f?.2:.1,k=f?.3:.1;g&&t._splomGridDflt&&(y=t._splomGridDflt.xside,x=t._splomGridDflt.yside),v._domains={x:u("x",T,w,y,b),y:u("y",T,k,x,m,_)}}else delete t.grid}function T(e,t){return r.coerce(n,v,l,e,t)}},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,i,o,a,s,l,u,f=e.grid||{},p=t._subplots,h=n._hasSubplotGrid,g=n.rows,v=n.columns,m="independent"===n.pattern,b=n._axisMap={};if(h){var y=f.subplots||[];l=n.subplots=new Array(g);var x=1;for(r=0;r<g;r++){var _=l[r]=new Array(v),w=y[r]||[];for(i=0;i<v;i++)if(m?(s=1===x?"xy":"x"+x+"y"+x,x++):s=w[i],_[i]="",-1!==p.cartesian.indexOf(s)){if(u=s.indexOf("y"),o=s.slice(0,u),a=s.slice(u),void 0!==b[o]&&b[o]!==i||void 0!==b[a]&&b[a]!==r)continue;_[i]=s,b[o]=i,b[a]=r}}}else{var k=c(t,f,"x"),T=c(t,f,"y");n.xaxes=d(k,p.xaxis,v,b,"x"),n.yaxes=d(T,p.yaxis,g,b,"y")}var A=n._anchors={},C="top to bottom"===n.roworder;for(var S in b){var M,E,O,L=S.charAt(0),P=n[L+"side"];if(P.length<8)A[S]="free";else if("x"===L){if("t"===P.charAt(0)===C?(M=0,E=1,O=g):(M=g-1,E=-1,O=-1),h){var D=b[S];for(r=M;r!==O;r+=E)if((s=l[r][D])&&(u=s.indexOf("y"),s.slice(0,u)===S)){A[S]=s.slice(u);break}}else for(r=M;r!==O;r+=E)if(a=n.yaxes[r],-1!==p.cartesian.indexOf(S+a)){A[S]=a;break}}else if("l"===P.charAt(0)?(M=0,E=1,O=v):(M=v-1,E=-1,O=-1),h){var R=b[S];for(r=M;r!==O;r+=E)if((s=l[R][r])&&(u=s.indexOf("y"),s.slice(u)===S)){A[S]=s.slice(0,u);break}}else for(r=M;r!==O;r+=E)if(o=n.xaxes[r],-1!==p.cartesian.indexOf(o+S)){A[S]=o;break}}}}}},{"../../lib":161,"../../lib/regex":177,"../../plot_api/plot_template":196,"../../plots/cartesian/constants":212,"../../plots/domain":232}],90:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants"),i=e("../../plot_api/plot_template").templatedArray;t.exports=i("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":196,"../../plots/cartesian/constants":212}],91:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib/to_log_range");t.exports=function(e,t,n,o){t=t||{};var a="log"===n&&"linear"===t.type,s="linear"===n&&"log"===t.type;if(a||s)for(var l,c,u=e._fullLayout.images,d=t._id.charAt(0),f=0;f<u.length;f++)if(c="images["+f+"].",(l=u[f])[d+"ref"]===t._id){var p=l[d],h=l["size"+d],g=null,v=null;if(a){g=i(p,t.range);var m=h/Math.pow(10,g)/2;v=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else v=(g=Math.pow(10,p))*(Math.pow(10,h/2)-Math.pow(10,-h/2));r(g)?r(v)||(v=null):(g=null,v=null),o(c+d,g),o(c+"size"+d,v)}}},{"../../lib/to_log_range":185,"fast-isnumeric":10}],92:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/axes"),o=e("../../plots/array_container_defaults"),a=e("./attributes");function s(e,t,n){function o(n,i){return r.coerce(e,t,a,n,i)}if(!o("visible",!!o("source")))return t;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var s={_fullLayout:n},l=["x","y"],c=0;c<2;c++){var u=l[c],d=i.coerceRef(e,t,s,u,"paper");i.coercePosition(t,s,o,d,u,0)}return t}t.exports=function(e,t){o(e,t,{name:"images",handleItemDefaults:s})}},{"../../lib":161,"../../plots/array_container_defaults":202,"../../plots/cartesian/axes":206,"./attributes":90}],93:[function(e,t,n){"use strict";var r=e("d3"),i=e("../drawing"),o=e("../../plots/cartesian/axes"),a=e("../../constants/xmlns_namespaces");t.exports=function(e){var t,n,s=e._fullLayout,l=[],c={},u=[];for(n=0;n<s.images.length;n++){var d=s.images[n];if(d.visible)if("below"===d.layer&&"paper"!==d.xref&&"paper"!==d.yref){t=d.xref+d.yref;var f=s._plots[t];if(!f){u.push(d);continue}f.mainplot&&(t=f.mainplot.id),c[t]||(c[t]=[]),c[t].push(d)}else"above"===d.layer?l.push(d):u.push(d)}var p={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function h(t){var n=r.select(this);if(!this.img||this.img.src!==t.source){n.attr("xmlns",a.svg);var i=new Promise(function(e){var r=new Image;function i(){n.remove(),e()}this.img=r,r.setAttribute("crossOrigin","anonymous"),r.onerror=i,r.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,t.getContext("2d").drawImage(this,0,0);var r=t.toDataURL("image/png");n.attr("xlink:href",r),e()},n.on("error",i),r.src=t.source}.bind(this));e._promises.push(i)}}function g(t){var n=r.select(this),a=o.getFromId(e,t.xref),l=o.getFromId(e,t.yref),c=s._size,u=a?Math.abs(a.l2p(t.sizex)-a.l2p(0)):t.sizex*c.w,d=l?Math.abs(l.l2p(t.sizey)-l.l2p(0)):t.sizey*c.h,f=u*p.x[t.xanchor].offset,h=d*p.y[t.yanchor].offset,g=p.x[t.xanchor].sizing+p.y[t.yanchor].sizing,v=(a?a.r2p(t.x)+a._offset:t.x*c.w+c.l)+f,m=(l?l.r2p(t.y)+l._offset:c.h-t.y*c.h+c.t)+h;switch(t.sizing){case"fill":g+=" slice";break;case"stretch":g="none"}n.attr({x:v,y:m,width:u,height:d,preserveAspectRatio:g,opacity:t.opacity});var b=(a?a._id:"")+(l?l._id:"");n.call(i.setClipUrl,b?"clip"+s._uid+b:null)}var v=s._imageLowerLayer.selectAll("image").data(u),m=s._imageUpperLayer.selectAll("image").data(l);v.enter().append("image"),m.enter().append("image"),v.exit().remove(),m.exit().remove(),v.each(function(e){h.bind(this)(e),g.bind(this)(e)}),m.each(function(e){h.bind(this)(e),g.bind(this)(e)});var b=Object.keys(s._plots);for(n=0;n<b.length;n++){t=b[n];var y=s._plots[t];if(y.imagelayer){var x=y.imagelayer.selectAll("image").data(c[t]||[]);x.enter().append("image"),x.exit().remove(),x.each(function(e){h.bind(this)(e),g.bind(this)(e)})}}}},{"../../constants/xmlns_namespaces":144,"../../plots/cartesian/axes":206,"../drawing":68,d3:8}],94:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":217,"./attributes":90,"./convert_coords":91,"./defaults":92,"./draw":93}],95:[function(e,t,n){"use strict";n.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},n.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},n.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3},n.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3}},{}],96:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":233,"../color/attributes":42}],97:[function(e,t,n){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,textOffsetX:40}},{}],98:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib"),o=e("../../plot_api/plot_template"),a=e("./attributes"),s=e("../../plots/layout_attributes"),l=e("./helpers");t.exports=function(e,t,n){for(var c,u,d,f,p=e.legend||{},h=0,g=!1,v="normal",m=0;m<n.length;m++){var b=n[m];b.visible&&((b.showlegend||b._dfltShowLegend)&&(h++,b.showlegend&&(g=!0,(r.traceIs(b,"pie")||!0===b._input.showlegend)&&h++)),(r.traceIs(b,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(b.fill))&&(v=l.isGrouped({traceorder:v})?"grouped+reversed":"reversed"),void 0!==b.legendgroup&&""!==b.legendgroup&&(v=l.isReversed({traceorder:v})?"reversed+grouped":"grouped"))}if(!1!==i.coerce(e,t,s,"showlegend",g&&h>1)){var y=o.newContainer(t,"legend");if(_("bgcolor",t.paper_bgcolor),_("bordercolor"),_("borderwidth"),i.coerceFont(_,"font",t.font),_("orientation"),"h"===y.orientation){var x=e.xaxis;x&&x.rangeslider&&x.rangeslider.visible?(c=0,d="left",u=1.1,f="bottom"):(c=0,d="left",u=-.1,f="top")}_("traceorder",v),l.isGrouped(t.legend)&&_("tracegroupgap"),_("x",c),_("xanchor",d),_("y",u),_("yanchor",f),i.noneOrAll(p,y,["x","y"])}function _(e,t){return i.coerce(p,y,a,e,t)}}},{"../../lib":161,"../../plot_api/plot_template":196,"../../plots/layout_attributes":237,"../../registry":246,"./attributes":96,"./helpers":102}],99:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../lib"),o=e("../../plots/plots"),a=e("../../registry"),s=e("../../lib/events"),l=e("../dragelement"),c=e("../drawing"),u=e("../color"),d=e("../../lib/svg_text_utils"),f=e("./handle_click"),p=e("./constants"),h=e("../../constants/interactions"),g=e("../../constants/alignment"),v=g.LINE_SPACING,m=g.FROM_TL,b=g.FROM_BR,y=e("./get_legend_data"),x=e("./style"),_=e("./helpers"),w=e("./anchor_utils"),k=h.DBLCLICKDELAY;function T(e,t,n,r,i){var o=n.data()[0][0].trace,a={event:i,node:n.node(),curveNumber:o.index,expandedIndex:o._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(o._group&&(a.group=o._group),"pie"===o.type&&(a.label=n.datum()[0].label),!1!==s.triggerHandler(e,"plotly_legendclick",a))if(1===r)t._clickTimeout=setTimeout(function(){f(n,e,r)},k);else if(2===r){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==s.triggerHandler(e,"plotly_legenddoubleclick",a)&&f(n,e,r)}}function A(e,t,n){var r=e.data()[0][0],o=t._fullLayout,s=r.trace,l=a.traceIs(s,"pie"),u=s.index,f=l?r.label:s.name,h=t._context.edits.legendText&&!l,g=i.ensureSingle(e,"text","legendtext");function m(n){d.convertToTspans(n,t,function(){!function(e,t){var n=e.data()[0][0];if(!n.trace.showlegend)return void e.remove();var r,i,o=e.select("g[class*=math-group]"),a=o.node(),s=t._fullLayout.legend.font.size*v;if(a){var l=c.bBox(a);r=l.height,i=l.width,c.setTranslate(o,0,r/4)}else{var u=e.select(".legendtext"),f=d.lineCount(u),h=u.node();r=s*f,i=h?c.bBox(h).width:0;var g=s*(.3+(1-f)/2);d.positionText(u,p.textOffsetX,g)}r=Math.max(r,16)+3,n.height=r,n.width=i}(e,t)})}g.attr("text-anchor","start").classed("user-select-none",!0).call(c.font,o.legend.font).text(h?C(f,n):f),d.positionText(g,p.textOffsetX,0),h?g.call(d.makeEditable,{gd:t,text:f}).call(m).on("edit",function(e){this.text(C(e,n)).call(m);var o=r.trace._fullInput||{},s={};if(a.hasTransform(o,"groupby")){var l=a.getTransformIndices(o,"groupby"),c=l[l.length-1],d=i.keyedContainer(o,"transforms["+c+"].styles","target","value.name");d.set(r.trace._group,e),s=d.constructUpdate()}else s.name=e;return a.call("restyle",t,s,u)}):m(g)}function C(e,t){var n=Math.max(4,t);if(e&&e.trim().length>=n/2)return e;for(var r=n-(e=e||"").length;r>0;r--)e+=" ";return e}function S(e,t){var n,o=1,a=i.ensureSingle(e,"rect","legendtoggle",function(e){e.style("cursor","pointer").attr("pointer-events","all").call(u.fill,"rgba(0,0,0,0)")});a.on("mousedown",function(){(n=(new Date).getTime())-t._legendMouseDownTime<k?o+=1:(o=1,t._legendMouseDownTime=n)}),a.on("mouseup",function(){if(!t._dragged&&!t._editing){var n=t._fullLayout.legend;(new Date).getTime()-t._legendMouseDownTime>k&&(o=Math.max(o-1,1)),T(t,n,e,o,r.event)}})}function M(e,t,n){var i=e._fullLayout,o=i.legend,a=o.borderwidth,s=_.isGrouped(o),l=0;if(o._width=0,o._height=0,_.isVertical(o))s&&t.each(function(e,t){c.setTranslate(this,0,t*o.tracegroupgap)}),n.each(function(e){var t=e[0],n=t.height,r=t.width;c.setTranslate(this,a,5+a+o._height+n/2),o._height+=n,o._width=Math.max(o._width,r)}),o._width+=45+2*a,o._height+=10+2*a,s&&(o._height+=(o._lgroupsLength-1)*o.tracegroupgap),l=40;else if(s){for(var u=[o._width],d=t.data(),f=0,p=d.length;f<p;f++){var h=d[f].map(function(e){return e[0].width}),g=40+Math.max.apply(null,h);o._width+=o.tracegroupgap+g,u.push(o._width)}t.each(function(e,t){c.setTranslate(this,u[t],0)}),t.each(function(){var e=0;r.select(this).selectAll("g.traces").each(function(t){var n=t[0].height;c.setTranslate(this,0,5+a+e+n/2),e+=n}),o._height=Math.max(o._height,e)}),o._height+=10+2*a,o._width+=2*a}else{var v,m=0,b=0,y=0,x=0,w=0,k=o.tracegroupgap||5;n.each(function(e){y=Math.max(40+e[0].width,y),w+=40+e[0].width+k}),v=i._size.w>a+w-k,n.each(function(e){var t=e[0],n=v?40+e[0].width:y;a+x+k+n>i._size.w&&(x=0,m+=b,o._height=o._height+b,b=0),c.setTranslate(this,a+x,5+a+t.height/2+m),o._width+=k+n,o._height=Math.max(o._height,t.height),x+=k+n,b=Math.max(t.height,b)}),o._width+=2*a,o._height+=10+2*a}o._width=Math.ceil(o._width),o._height=Math.ceil(o._height);var T=e._context.edits.legendText||e._context.edits.legendPosition;n.each(function(e){var t=e[0],n=r.select(this).select(".legendtoggle");c.setRect(n,0,-t.height/2,(T?0:o._width)+l,t.height)})}function E(e){var t=e._fullLayout.legend,n="left";w.isRightAnchor(t)?n="right":w.isCenterAnchor(t)&&(n="center");var r="top";w.isBottomAnchor(t)?r="bottom":w.isMiddleAnchor(t)&&(r="middle"),o.autoMargin(e,"legend",{x:t.x,y:t.y,l:t._width*m[n],r:t._width*b[n],b:t._height*b[r],t:t._height*m[r]})}t.exports=function(e){var t=e._fullLayout,n="legend"+t._uid;if(t._infolayer&&e.calcdata){e._legendMouseDownTime||(e._legendMouseDownTime=0);var s=t.legend,d=t.showlegend&&y(e.calcdata,s),f=t.hiddenlabels||[];if(!t.showlegend||!d.length)return t._infolayer.selectAll(".legend").remove(),t._topdefs.select("#"+n).remove(),void o.autoMargin(e,"legend");for(var h=0,g=0;g<d.length;g++)for(var v=0;v<d[g].length;v++){var _=d[g][v][0],k=_.trace,C=a.traceIs(k,"pie")?_.label:k.name;h=Math.max(h,C&&C.length||0)}var O=!1,L=i.ensureSingle(t._infolayer,"g","legend",function(e){e.attr("pointer-events","all"),O=!0}),P=i.ensureSingleById(t._topdefs,"clipPath",n,function(e){e.append("rect")}),D=i.ensureSingle(L,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});D.call(u.stroke,s.bordercolor).call(u.fill,s.bgcolor).style("stroke-width",s.borderwidth+"px");var R=i.ensureSingle(L,"g","scrollbox"),F=i.ensureSingle(L,"rect","scrollbar",function(e){e.attr({rx:20,ry:3,width:0,height:0}).call(u.fill,"#808BA4")}),j=R.selectAll("g.groups").data(d);j.enter().append("g").attr("class","groups"),j.exit().remove();var I=j.selectAll("g.traces").data(i.identity);I.enter().append("g").attr("class","traces"),I.exit().remove(),I.call(x,e).style("opacity",function(e){var t=e[0].trace;return a.traceIs(t,"pie")?-1!==f.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){r.select(this).call(A,e,h).call(S,e)}),i.syncOrAsync([o.previousPromises,function(){O&&(M(e,j,I),E(e));var u=t.width,d=t.height;M(e,j,I),s._height>d?function(e){var t=e._fullLayout.legend,n="left";w.isRightAnchor(t)?n="right":w.isCenterAnchor(t)&&(n="center");o.autoMargin(e,"legend",{x:t.x,y:.5,l:t._width*m[n],r:t._width*b[n],b:0,t:0})}(e):E(e);var f=t._size,h=f.l+f.w*s.x,g=f.t+f.h*(1-s.y);w.isRightAnchor(s)?h-=s._width:w.isCenterAnchor(s)&&(h-=s._width/2),w.isBottomAnchor(s)?g-=s._height:w.isMiddleAnchor(s)&&(g-=s._height/2);var v=s._width,y=f.w;v>y?(h=f.l,v=y):(h+v>u&&(h=u-v),h<0&&(h=0),v=Math.min(u-h,s._width));var x,_,k,A,C=s._height,S=f.h;if(C>S?(g=f.t,C=S):(g+C>d&&(g=d-C),g<0&&(g=0),C=Math.min(d-g,s._height)),c.setTranslate(L,h,g),F.on(".drag",null),L.on("wheel",null),s._height<=C||e._context.staticPlot)D.attr({width:v-s.borderwidth,height:C-s.borderwidth,x:s.borderwidth/2,y:s.borderwidth/2}),c.setTranslate(R,0,0),P.select("rect").attr({width:v-2*s.borderwidth,height:C-2*s.borderwidth,x:s.borderwidth,y:s.borderwidth}),c.setClipUrl(R,n),c.setRect(F,0,0,0,0),delete s._scrollY;else{var N,z,q=Math.max(p.scrollBarMinHeight,C*C/s._height),H=C-q-2*p.scrollBarMargin,B=s._height-C,V=H/B,U=Math.min(s._scrollY||0,B);D.attr({width:v-2*s.borderwidth+p.scrollBarWidth+p.scrollBarMargin,height:C-s.borderwidth,x:s.borderwidth/2,y:s.borderwidth/2}),P.select("rect").attr({width:v-2*s.borderwidth+p.scrollBarWidth+p.scrollBarMargin,height:C-2*s.borderwidth,x:s.borderwidth,y:s.borderwidth+U}),c.setClipUrl(R,n),W(U,q,V),L.on("wheel",function(){W(U=i.constrain(s._scrollY+r.event.deltaY/H*B,0,B),q,V),0!==U&&U!==B&&r.event.preventDefault()});var $=r.behavior.drag().on("dragstart",function(){N=r.event.sourceEvent.clientY,z=U}).on("drag",function(){var e=r.event.sourceEvent;2===e.buttons||e.ctrlKey||W(U=i.constrain((e.clientY-N)/V+z,0,B),q,V)});F.call($)}function W(t,n,r){s._scrollY=e._fullLayout.legend._scrollY=t,c.setTranslate(R,0,-t),c.setRect(F,v,p.scrollBarMargin+t*r,p.scrollBarWidth,n),P.select("rect").attr({y:s.borderwidth+t})}e._context.edits.legendPosition&&(L.classed("cursor-move",!0),l.init({element:L.node(),gd:e,prepFn:function(){var e=c.getTranslate(L);k=e.x,A=e.y},moveFn:function(e,t){var n=k+e,r=A+t;c.setTranslate(L,n,r),x=l.align(n,0,f.l,f.l+f.w,s.xanchor),_=l.align(r,0,f.t+f.h,f.t,s.yanchor)},doneFn:function(){void 0!==x&&void 0!==_&&a.call("relayout",e,{"legend.x":x,"legend.y":_})},clickFn:function(n,r){var i=t._infolayer.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return r.clientX>=e.left&&r.clientX<=e.right&&r.clientY>=e.top&&r.clientY<=e.bottom});i.size()>0&&T(e,L,i,n,r)}}))}],e)}}},{"../../constants/alignment":141,"../../constants/interactions":142,"../../lib":161,"../../lib/events":154,"../../lib/svg_text_utils":183,"../../plots/plots":239,"../../registry":246,"../color":43,"../dragelement":65,"../drawing":68,"./anchor_utils":95,"./constants":97,"./get_legend_data":100,"./handle_click":101,"./helpers":102,"./style":104,d3:8}],100:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("./helpers");t.exports=function(e,t){var n,o,a={},s=[],l=!1,c={},u=0;function d(e,n){if(""!==e&&i.isGrouped(t))-1===s.indexOf(e)?(s.push(e),l=!0,a[e]=[[n]]):a[e].push([n]);else{var r="~~i"+u;s.push(r),a[r]=[[n]],u++}}for(n=0;n<e.length;n++){var f=e[n],p=f[0],h=p.trace,g=h.legendgroup;if(h.visible&&h.showlegend)if(r.traceIs(h,"pie"))for(c[g]||(c[g]={}),o=0;o<f.length;o++){var v=f[o].label;c[g][v]||(d(g,{label:v,color:f[o].color,i:f[o].i,trace:h,pts:f[o].pts}),c[g][v]=!0)}else d(g,p)}if(!s.length)return[];var m,b,y=s.length;if(l&&i.isGrouped(t))for(b=new Array(y),n=0;n<y;n++)m=a[s[n]],b[n]=i.isReversed(t)?m.reverse():m;else{for(b=[new Array(y)],n=0;n<y;n++)m=a[s[n]][0],b[0][i.isReversed(t)?y-n-1:n]=m;y=1}return t._lgroupsLength=y,b}},{"../../registry":246,"./helpers":102}],101:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../registry"),o=!0;t.exports=function(e,t,n){if(!t._dragged&&!t._editing){var a,s,l,c,u,d=t._fullLayout.hiddenlabels?t._fullLayout.hiddenlabels.slice():[],f=e.data()[0][0],p=t._fullData,h=f.trace,g=h.legendgroup,v={},m=[],b=[],y=[];if(1===n&&o&&t.data&&t._context.showTips?(r.notifier(r._(t,"Double-click on legend to isolate one trace"),"long"),o=!1):o=!1,i.traceIs(h,"pie")){var x=f.label,_=d.indexOf(x);1===n?-1===_?d.push(x):d.splice(_,1):2===n&&(d=[],t.calcdata[0].forEach(function(e){x!==e.label&&d.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===d.length&&-1===_&&(d=[])),i.call("relayout",t,"hiddenlabels",d)}else{var w,k=g&&g.length,T=[];if(k)for(a=0;a<p.length;a++)(w=p[a]).visible&&w.legendgroup===g&&T.push(a);if(1===n){var A;switch(h.visible){case!0:A="legendonly";break;case!1:A=!1;break;case"legendonly":A=!0}if(k)for(a=0;a<p.length;a++)!1!==p[a].visible&&p[a].legendgroup===g&&P(p[a],A);else P(h,A)}else if(2===n){var C,S,M=!0;for(a=0;a<p.length;a++)if(!(p[a]===h)&&!(C=k&&p[a].legendgroup===g)&&!0===p[a].visible&&!i.traceIs(p[a],"notLegendIsolatable")){M=!1;break}for(a=0;a<p.length;a++)if(!1!==p[a].visible&&!i.traceIs(p[a],"notLegendIsolatable"))switch(h.visible){case"legendonly":P(p[a],!0);break;case!0:S=!!M||"legendonly",C=p[a]===h||k&&p[a].legendgroup===g,P(p[a],!!C||S)}}for(a=0;a<b.length;a++)if(l=b[a]){var E=l.constructUpdate(),O=Object.keys(E);for(s=0;s<O.length;s++)c=O[s],(v[c]=v[c]||[])[y[a]]=E[c]}for(u=Object.keys(v),a=0;a<u.length;a++)for(c=u[a],s=0;s<m.length;s++)v[c].hasOwnProperty(s)||(v[c][s]=void 0);i.call("restyle",t,v,m)}}function L(e,t,n){var r=m.indexOf(e),i=v[t];return i||(i=v[t]=[]),-1===m.indexOf(e)&&(m.push(e),r=m.length-1),i[r]=n,r}function P(e,t){var n=e._fullInput;if(i.hasTransform(n,"groupby")){var o=b[n.index];if(!o){var a=i.getTransformIndices(n,"groupby"),s=a[a.length-1];o=r.keyedContainer(n,"transforms["+s+"].styles","target","value.visible"),b[n.index]=o}var l=o.get(e._group);void 0===l&&(l=!0),!1!==l&&o.set(e._group,t),y[n.index]=L(n.index,"visible",!1!==n.visible)}else{var c=!1!==n.visible&&t;L(n.index,"visible",c)}}}},{"../../lib":161,"../../registry":246}],102:[function(e,t,n){"use strict";n.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},n.isVertical=function(e){return"h"!==e.orientation},n.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},{}],103:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":96,"./defaults":98,"./draw":99,"./style":104}],104:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../registry"),o=e("../../lib"),a=e("../drawing"),s=e("../color"),l=e("../../traces/scatter/subtypes"),c=e("../../traces/pie/style_one");t.exports=function(e,t){e.each(function(e){var t=r.select(this),n=o.ensureSingle(t,"g","layers");n.style("opacity",e[0].trace.opacity),n.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);var i=n.selectAll("g.legendsymbols").data([e]);i.enter().append("g").classed("legendsymbols",!0),i.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var t=e[0].trace,n=t.marker||{},o=n.line||{},a=r.select(this).select("g.legendpoints").selectAll("path.legendbar").data(i.traceIs(t,"bar")?[e]:[]);a.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),a.exit().remove(),a.each(function(e){var t=r.select(this),i=e[0],a=(i.mlw+1||o.width+1)-1;t.style("stroke-width",a+"px").call(s.fill,i.mc||n.color),a&&t.call(s.stroke,i.mlc||o.color)})}).each(function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(i.traceIs(t,"box-violin")&&t.visible?[e]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(){var e=t.line.width,n=r.select(this);n.style("stroke-width",e+"px").call(s.fill,t.fillcolor),e&&s.stroke(n,t.line.color)})}).each(function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendpie").data(i.traceIs(t,"pie")&&t.visible?[e]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(c,e[0],t)}).each(function(e){var n=e[0].trace,i=n.visible&&n.fill&&"none"!==n.fill,o=l.hasLines(n),s=n.contours,c=!1,u=!1;if(s){var d=s.coloring;"lines"===d?c=!0:o="none"===d||"heatmap"===d||s.showlines,"constraint"===s.type?i="="!==s._operation:"fill"!==d&&"heatmap"!==d||(u=!0)}var f=l.hasMarkers(n)||l.hasText(n)||!i&&!u?"M5,0":o||c?"M5,-2":"M5,-3",p=r.select(this),h=p.select(".legendfill").selectAll("path").data(i||u?[e]:[]);h.enter().append("path").classed("js-fill",!0),h.exit().remove(),h.attr("d",f+"h30v6h-30z").call(i?a.fillGroupStyle:function(e){if(e.size()){var r="legendfill-"+n.uid;a.gradient(e,t,r,"horizontalreversed",n.colorscale,"fill")}});var g=p.select(".legendlines").selectAll("path").data(o||c?[e]:[]);g.enter().append("path").classed("js-line",!0),g.exit().remove(),g.attr("d",f+(c?"l30,0.0001":"h30")).call(o?a.lineGroupStyle:function(e){if(e.size()){var r="legendline-"+n.uid;a.lineGroupStyle(e),a.gradient(e,t,r,"horizontalreversed",n.colorscale,"stroke")}})}).each(function(e){var n,i,s=e[0],c=s.trace,u=l.hasMarkers(c),d=l.hasText(c),f=l.hasLines(c);function p(e,t,n){var r=o.nestedProperty(c,e).get(),i=Array.isArray(r)&&t?t(r):r;if(n){if(i<n[0])return n[0];if(i>n[1])return n[1]}return i}function h(e){return e[0]}if(u||d||f){var g={},v={};if(u){g.mc=p("marker.color",h),g.mx=p("marker.symbol",h),g.mo=p("marker.opacity",o.mean,[.2,1]),g.mlc=p("marker.line.color",h),g.mlw=p("marker.line.width",o.mean,[0,5]),v.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var m=p("marker.size",o.mean,[2,16]);g.ms=m,v.marker.size=m}f&&(v.line={width:p("line.width",h,[0,10])}),d&&(g.tx="Aa",g.tp=p("textposition",h),g.ts=10,g.tc=p("textfont.color",h),g.tf=p("textfont.family",h)),n=[o.minExtend(s,g)],(i=o.minExtend(c,v)).selectedpoints=null}var b=r.select(this).select("g.legendpoints"),y=b.selectAll("path.scatterpts").data(u?n:[]);y.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)"),y.exit().remove(),y.call(a.pointStyle,i,t),u&&(n[0].mrc=3);var x=b.selectAll("g.pointtext").data(d?n:[]);x.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),x.exit().remove(),x.selectAll("text").call(a.textPointStyle,i,t)}).each(function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendcandle").data("candlestick"===t.type&&t.visible?[e,e]:[]);n.enter().append("path").classed("legendcandle",!0).attr("d",function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e,n){var i=t[n?"increasing":"decreasing"],o=i.line.width,a=r.select(this);a.style("stroke-width",o+"px").call(s.fill,i.fillcolor),o&&s.stroke(a,i.line.color)})}).each(function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendohlc").data("ohlc"===t.type&&t.visible?[e,e]:[]);n.enter().append("path").classed("legendohlc",!0).attr("d",function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e,n){var i=t[n?"increasing":"decreasing"],o=i.line.width,l=r.select(this);l.style("fill","none").call(a.dashLine,i.line.dash,o),o&&s.stroke(l,i.line.color)})})}},{"../../lib":161,"../../registry":246,"../../traces/pie/style_one":281,"../../traces/scatter/subtypes":307,"../color":43,"../drawing":68,d3:8}],105:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../plots/plots"),o=e("../../plots/cartesian/axis_ids"),a=e("../../lib"),s=e("../../../build/ploticon"),l=a._,c=t.exports={};function u(e,t){var n,i,a=t.currentTarget,s=a.getAttribute("data-attr"),l=a.getAttribute("data-val")||!0,c=e._fullLayout,u={},d=o.list(e,null,!0),f="on";if("zoom"===s){var p,h="in"===l?.5:2,g=(1+h)/2,v=(1-h)/2;for(i=0;i<d.length;i++)if(!(n=d[i]).fixedrange)if(p=n._name,"auto"===l)u[p+".autorange"]=!0;else if("reset"===l){if(void 0===n._rangeInitial)u[p+".autorange"]=!0;else{var m=n._rangeInitial.slice();u[p+".range[0]"]=m[0],u[p+".range[1]"]=m[1]}void 0!==n._showSpikeInitial&&(u[p+".showspikes"]=n._showSpikeInitial,"on"!==f||n._showSpikeInitial||(f="off"))}else{var b=[n.r2l(n.range[0]),n.r2l(n.range[1])],y=[g*b[0]+v*b[1],g*b[1]+v*b[0]];u[p+".range[0]"]=n.l2r(y[0]),u[p+".range[1]"]=n.l2r(y[1])}c._cartesianSpikesEnabled=f}else{if("hovermode"!==s||"x"!==l&&"y"!==l){if("hovermode"===s&&"closest"===l){for(i=0;i<d.length;i++)n=d[i],"on"!==f||n.showspikes||(f="off");c._cartesianSpikesEnabled=f}}else l=c._isHoriz?"y":"x",a.setAttribute("data-val",l);u[s]=l}r.call("relayout",e,u)}function d(e,t){for(var n=t.currentTarget,i=n.getAttribute("data-attr"),o=n.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d,s={},l=i.split("."),c=0;c<a.length;c++)s[a[c]+"."+l[1]]=o;var u="pan"===o?o:"zoom";s.dragmode=u,r.call("relayout",e,s)}function f(e,t){for(var n=t.currentTarget.getAttribute("data-attr"),i=e._fullLayout,o=i._subplots.gl3d,s={},l=0;l<o.length;l++){var c=o[l],u=c+".camera",d=i[c]._scene;"resetDefault"===n?s[u]=null:"resetLastSave"===n&&(s[u]=a.extendDeep({},d.cameraInitial))}r.call("relayout",e,s)}function p(e,t){var n=t.currentTarget,i=n._previousVal||!1,o=e.layout,s=e._fullLayout,l=s._subplots.gl3d,c=["xaxis","yaxis","zaxis"],u=["showspikes","spikesides","spikethickness","spikecolor"],d={},f={},p={};if(i)p=a.extendDeep(o,i),n._previousVal=null;else{p={"allaxes.showspikes":!1};for(var h=0;h<l.length;h++){var g=l[h],v=s[g],m=d[g]={};m.hovermode=v.hovermode,p[g+".hovermode"]=!1;for(var b=0;b<3;b++){var y=c[b];f=m[y]={};for(var x=0;x<u.length;x++){var _=u[x];f[_]=v[y][_]}}}n._previousVal=a.extendDeep({},d)}r.call("relayout",e,p)}function h(e,t){for(var n=t.currentTarget,i=n.getAttribute("data-attr"),o=n.getAttribute("data-val")||!0,a=e._fullLayout,s=a._subplots.geo,l=0;l<s.length;l++){var c=s[l],u=a[c];if("zoom"===i){var d=u.projection.scale,f="in"===o?2*d:.5*d;r.call("relayout",e,c+".projection.scale",f)}else"reset"===i&&v(e,"geo")}}function g(e){var t,n=e._fullLayout;t=n._has("cartesian")?n._isHoriz?"y":"x":"closest";var i=!e._fullLayout.hovermode&&t;r.call("relayout",e,"hovermode",i)}function v(e,t){for(var n=e._fullLayout,i=n._subplots[t],o={},a=0;a<i.length;a++)for(var s=i[a],l=n[s]._subplot.viewInitial,c=Object.keys(l),u=0;u<c.length;u++){var d=c[u];o[s+"."+d]=l[d]}r.call("relayout",e,o)}c.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return l(e,"png"===t?"Download plot as a png":"Download plot")},icon:s.camera,click:function(e){var t=e._context.toImageButtonOptions,n={format:t.format||"png"};a.notifier(l(e,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==n.format&&a.isIE()&&(a.notifier(l(e,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach(function(e){t[e]&&(n[e]=t[e])}),r.call("downloadImage",e,n).then(function(t){a.notifier(l(e,"Snapshot succeeded")+" - "+t,"long")}).catch(function(){a.notifier(l(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}},c.sendDataToCloud={name:"sendDataToCloud",title:function(e){return l(e,"Edit in Chart Studio")},icon:s.disk,click:function(e){i.sendDataToCloud(e)}},c.zoom2d={name:"zoom2d",title:function(e){return l(e,"Zoom")},attr:"dragmode",val:"zoom",icon:s.zoombox,click:u},c.pan2d={name:"pan2d",title:function(e){return l(e,"Pan")},attr:"dragmode",val:"pan",icon:s.pan,click:u},c.select2d={name:"select2d",title:function(e){return l(e,"Box Select")},attr:"dragmode",val:"select",icon:s.selectbox,click:u},c.lasso2d={name:"lasso2d",title:function(e){return l(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:s.lasso,click:u},c.zoomIn2d={name:"zoomIn2d",title:function(e){return l(e,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:u},c.zoomOut2d={name:"zoomOut2d",title:function(e){return l(e,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:u},c.autoScale2d={name:"autoScale2d",title:function(e){return l(e,"Autoscale")},attr:"zoom",val:"auto",icon:s.autoscale,click:u},c.resetScale2d={name:"resetScale2d",title:function(e){return l(e,"Reset axes")},attr:"zoom",val:"reset",icon:s.home,click:u},c.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(e){return l(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:u},c.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(e){return l(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:s.tooltip_compare,gravity:"ne",click:u},c.zoom3d={name:"zoom3d",title:function(e){return l(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:s.zoombox,click:d},c.pan3d={name:"pan3d",title:function(e){return l(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:s.pan,click:d},c.orbitRotation={name:"orbitRotation",title:function(e){return l(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:s["3d_rotate"],click:d},c.tableRotation={name:"tableRotation",title:function(e){return l(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:s["z-axis"],click:d},c.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(e){return l(e,"Reset camera to default")},attr:"resetDefault",icon:s.home,click:f},c.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(e){return l(e,"Reset camera to last save")},attr:"resetLastSave",icon:s.movie,click:f},c.hoverClosest3d={name:"hoverClosest3d",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:p},c.zoomInGeo={name:"zoomInGeo",title:function(e){return l(e,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:h},c.zoomOutGeo={name:"zoomOutGeo",title:function(e){return l(e,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:h},c.resetGeo={name:"resetGeo",title:function(e){return l(e,"Reset")},attr:"reset",val:null,icon:s.autoscale,click:h},c.hoverClosestGeo={name:"hoverClosestGeo",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:g},c.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:g},c.hoverClosestPie={name:"hoverClosestPie",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:g},c.toggleHover={name:"toggleHover",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:function(e,t){g(e),p(e,t)}},c.resetViews={name:"resetViews",title:function(e){return l(e,"Reset views")},icon:s.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),u(e,t),n.setAttribute("data-attr","resetLastSave"),f(e,t),v(e,"geo"),v(e,"mapbox")}},c.toggleSpikelines={name:"toggleSpikelines",title:function(e){return l(e,"Toggle Spike Lines")},icon:s.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;t._cartesianSpikesEnabled="on"===t._cartesianSpikesEnabled?"off":"on";var n=function(e){for(var t,n,r=e._fullLayout,i=o.list(e,null,!0),a={},s=0;s<i.length;s++)t=i[s],n=t._name,a[n+".showspikes"]="on"===r._cartesianSpikesEnabled||t._showSpikeInitial;return a}(e);r.call("relayout",e,n)}},c.resetViewMapbox={name:"resetViewMapbox",title:function(e){return l(e,"Reset view")},attr:"reset",icon:s.home,click:function(e){v(e,"mapbox")}}},{"../../../build/ploticon":2,"../../lib":161,"../../plots/cartesian/axis_ids":209,"../../plots/plots":239,"../../registry":246}],106:[function(e,t,n){"use strict";n.manage=e("./manage")},{"./manage":107}],107:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axis_ids"),i=e("../../traces/scatter/subtypes"),o=e("../../registry"),a=e("./modebar"),s=e("./buttons");t.exports=function(e){var t=e._fullLayout,n=e._context,l=t._modeBar;if(n.displayModeBar){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var c,u=n.modeBarButtons;c=Array.isArray(u)&&u.length?function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var i=n[r];if("string"==typeof i){if(void 0===s[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=s[i]}}return e}(u):function(e,t,n){var a=e._fullLayout,l=e._fullData,c=a._has("cartesian"),u=a._has("gl3d"),d=a._has("geo"),f=a._has("pie"),p=a._has("gl2d"),h=a._has("ternary"),g=a._has("mapbox"),v=a._has("polar"),m=function(e){for(var t=r.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(a),b=[];function y(e){if(e.length){for(var n=[],r=0;r<e.length;r++){var i=e[r];-1===t.indexOf(i)&&n.push(s[i])}b.push(n)}}y(["toImage","sendDataToCloud"]);var x=[],_=[],w=[],k=[];(c||p||f||h)+d+u+g+v>1?(_=["toggleHover"],w=["resetViews"]):d?(x=["zoomInGeo","zoomOutGeo"],_=["hoverClosestGeo"],w=["resetGeo"]):u?(_=["hoverClosest3d"],w=["resetCameraDefault3d","resetCameraLastSave3d"]):g?(_=["toggleHover"],w=["resetViewMapbox"]):_=p?["hoverClosestGl2d"]:f?["hoverClosestPie"]:["toggleHover"];c&&(_=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);!c&&!p||m||(x=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==w[0]&&(w=["resetScale2d"]));u?k=["zoom3d","pan3d","orbitRotation","tableRotation"]:(c||p)&&!m||h?k=["zoom2d","pan2d"]:g||d?k=["pan2d"]:v&&(k=["zoom2d"]);(function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(o.traceIs(r,"scatter-like")?(i.hasMarkers(r)||i.hasText(r))&&(t=!0):o.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t})(l)&&k.push("select2d","lasso2d");return y(k),y(x.concat(w)),y(_),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(b,n)}(e,n.modeBarButtonsToRemove,n.modeBarButtonsToAdd),l?l.update(e,c):t._modeBar=a(e,c)}else l&&(l.destroy(),delete t._modeBar)}},{"../../plots/cartesian/axis_ids":209,"../../registry":246,"../../traces/scatter/subtypes":307,"./buttons":105,"./modebar":108}],108:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("../../lib"),a=e("../../../build/ploticon"),s=new DOMParser;function l(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var c=l.prototype;c.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,i="modebar-"+r._uid;this.element.setAttribute("id",i),this._uid=i,"hover"===n.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar","v"===r.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse()),o.deleteRelatedStyleRule(i),o.addRelatedStyleRule(i,"#"+i,"background-color: "+r.modebar.bgcolor),o.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+r.modebar.color),o.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+r.modebar.activecolor),o.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+r.modebar.activecolor);var a=!this.hasButtons(t),s=this.hasLogo!==n.displaylogo,l=this.locale!==n.locale;this.locale=n.locale,(a||s||l)&&(this.removeAllButtons(),this.updateButtons(t),n.displaylogo&&("v"===r.modebar.orientation?this.element.prepend(this.getLogo()):this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},c.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=t.createGroup();e.forEach(function(e){var r=e.name;if(!r)throw new Error("must provide button 'name' in button config");if(-1!==t.buttonsNames.indexOf(r))throw new Error("button name '"+r+"' is taken");t.buttonsNames.push(r);var i=t.createButton(e);t.buttonElements.push(i),n.appendChild(i)}),t.element.appendChild(n)})},c.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},c.createButton=function(e){var t=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var i=e.title;void 0===i?i=e.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&n.setAttribute("data-title",i),void 0!==e.attr&&n.setAttribute("data-attr",e.attr);var o=e.val;if(void 0!==o&&("function"==typeof o&&(o=o(this.graphInfo)),n.setAttribute("data-val",o)),"function"!=typeof e.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(n){e.click(t.graphInfo,n),t.updateActiveButton(n.currentTarget)}),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&r.select(n).classed("active",!0);var s=e.icon;return"function"==typeof s?n.appendChild(s()):n.appendChild(this.createIcon(s||a.question)),n.setAttribute("data-gravity",e.gravity||"n"),n},c.createIcon=function(e){var t,n=i(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg";if(e.path){(t=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon");var o=document.createElementNS(r,"path");o.setAttribute("d",e.path),e.transform?o.setAttribute("transform",e.transform):void 0!==e.ascent&&o.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(o)}e.svg&&(t=s.parseFromString(e.svg,"application/xml").childNodes[0]);return t.setAttribute("height","1em"),t.setAttribute("width","1em"),t},c.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var i=e.getAttribute("data-val")||!0,a=e.getAttribute("data-attr"),s="true"===e.getAttribute("data-toggle"),l=r.select(e);if(s)a===n&&l.classed("active",!l.classed("active"));else{var c=null===a?a:o.nestedProperty(t,a).get();l.classed("active",c===i)}})},c.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},c.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plot.ly/",t.target="_blank",t.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly")),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(a.newplotlylogo)),e.appendChild(t),e},c.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},c.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},t.exports=function(e,t){var n=e._fullLayout,i=new l({graphInfo:e,container:n._paperdiv.node(),buttons:t});return n._privateplot&&r.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},{"../../../build/ploticon":2,"../../lib":161,d3:8,"fast-isnumeric":10}],109:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),o=(0,e("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:i.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":196,"../../plots/font_attributes":233,"../color/attributes":42}],110:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],111:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../color"),o=e("../../plot_api/plot_template"),a=e("../../plots/array_container_defaults"),s=e("./attributes"),l=e("./constants");function c(e,t,n,i){var o=i.calendar;function a(n,i){return r.coerce(e,t,s.buttons,n,i)}if(a("visible")){var l=a("step");"all"!==l&&(!o||"gregorian"===o||"month"!==l&&"year"!==l?a("stepmode"):t.stepmode="backward",a("count")),a("label")}}t.exports=function(e,t,n,u,d){var f=e.rangeselector||{},p=o.newContainer(t,"rangeselector");function h(e,t){return r.coerce(f,p,s,e,t)}if(h("visible",a(f,p,{name:"buttons",handleItemDefaults:c,calendar:d}).length>0)){var g=function(e,t,n){for(var r=n.filter(function(n){return t[n].anchor===e._id}),i=0,o=0;o<r.length;o++){var a=t[r[o]].domain;a&&(i=Math.max(a[1],i))}return[e.domain[0],i+l.yPad]}(t,n,u);h("x",g[0]),h("y",g[1]),r.noneOrAll(e,t,["x","y"]),h("xanchor"),h("yanchor"),r.coerceFont(h,"font",n.font);var v=h("bgcolor");h("activecolor",i.contrast(v,l.lightAmount,l.darkAmount)),h("bordercolor"),h("borderwidth")}}},{"../../lib":161,"../../plot_api/plot_template":196,"../../plots/array_container_defaults":202,"../color":43,"./attributes":109,"./constants":110}],112:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../registry"),o=e("../../plots/plots"),a=e("../color"),s=e("../drawing"),l=e("../../lib"),c=e("../../lib/svg_text_utils"),u=e("../../plots/cartesian/axis_ids"),d=e("../legend/anchor_utils"),f=e("../../constants/alignment"),p=f.LINE_SPACING,h=f.FROM_TL,g=f.FROM_BR,v=e("./constants"),m=e("./get_update_object");function b(e){return e._id}function y(e,t,n){var r=l.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});r.attr({rx:v.rx,ry:v.ry}),r.call(a.stroke,t.bordercolor).call(a.fill,function(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}(t,n)).style("stroke-width",t.borderwidth+"px")}function x(e,t,n,r){l.ensureSingle(e,"text","selector-text",function(e){e.classed("user-select-none",!0).attr("text-anchor","middle")}).call(s.font,t.font).text(function(e){return e.label?e.label:"all"===e.step?"all":e.count+e.step.charAt(0)}(n)).call(function(e){c.convertToTspans(e,r)})}t.exports=function(e){var t=e._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=u.list(e,"x",!0),n=[],r=0;r<t.length;r++){var i=t[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(e),b);t.enter().append("g").classed("rangeselector",!0),t.exit().remove(),t.style({cursor:"pointer","pointer-events":"all"}),t.each(function(t){var n=r.select(this),a=t,u=a.rangeselector,f=n.selectAll("g.button").data(l.filterVisible(u.buttons));f.enter().append("g").classed("button",!0),f.exit().remove(),f.each(function(t){var n=r.select(this),o=m(a,t);t._isActive=function(e,t,n){if("all"===t.step)return!0===e.autorange;var r=Object.keys(n);return e.range[0]===n[r[0]]&&e.range[1]===n[r[1]]}(a,t,o),n.call(y,u,t),n.call(x,u,t,e),n.on("click",function(){e._dragged||i.call("relayout",e,o)}),n.on("mouseover",function(){t._isHovered=!0,n.call(y,u,t)}),n.on("mouseout",function(){t._isHovered=!1,n.call(y,u,t)})}),function(e,t,n,i,a){var l=0,u=0,f=n.borderwidth;t.each(function(){var e=r.select(this),t=e.select(".selector-text"),i=n.font.size*p,o=Math.max(i*c.lineCount(t),16)+3;u=Math.max(u,o)}),t.each(function(){var e=r.select(this),t=e.select(".selector-rect"),i=e.select(".selector-text"),o=i.node()&&s.bBox(i.node()).width,a=n.font.size*p,d=c.lineCount(i),h=Math.max(o+10,v.minButtonWidth);e.attr("transform","translate("+(f+l)+","+f+")"),t.attr({x:0,y:0,width:h,height:u}),c.positionText(i,h/2,u/2-(d-1)*a/2+3),l+=h+5});var m=e._fullLayout._size,b=m.l+m.w*n.x,y=m.t+m.h*(1-n.y),x="left";d.isRightAnchor(n)&&(b-=l,x="right");d.isCenterAnchor(n)&&(b-=l/2,x="center");var _="top";d.isBottomAnchor(n)&&(y-=u,_="bottom");d.isMiddleAnchor(n)&&(y-=u/2,_="middle");l=Math.ceil(l),u=Math.ceil(u),b=Math.round(b),y=Math.round(y),o.autoMargin(e,i+"-range-selector",{x:n.x,y:n.y,l:l*h[x],r:l*g[x],b:u*g[_],t:u*h[_]}),a.attr("transform","translate("+b+","+y+")")}(e,f,u,a._name,n)})}},{"../../constants/alignment":141,"../../lib":161,"../../lib/svg_text_utils":183,"../../plots/cartesian/axis_ids":209,"../../plots/plots":239,"../../registry":246,"../color":43,"../drawing":68,"../legend/anchor_utils":95,"./constants":110,"./get_update_object":113,d3:8}],113:[function(e,t,n){"use strict";var r=e("d3");t.exports=function(e,t){var n=e._name,i={};if("all"===t.step)i[n+".autorange"]=!0;else{var o=function(e,t){var n,i=e.range,o=new Date(e.r2l(i[1])),a=t.step,s=t.count;switch(t.stepmode){case"backward":n=e.l2r(+r.time[a].utc.offset(o,-s));break;case"todate":var l=r.time[a].utc.offset(o,-s);n=e.l2r(+r.time[a].utc.ceil(l))}var c=i[1];return[n,c]}(e,t);i[n+".range[0]"]=o[0],i[n+".range[1]"]=o[1]}return i}},{d3:8}],114:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":109,"./defaults":111,"./draw":112}],115:[function(e,t,n){"use strict";var r=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:r.background,editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":42}],116:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axis_ids").list,i=e("../../plots/cartesian/autorange").getAutoRange,o=e("./constants");t.exports=function(e){for(var t=r(e,"x",!0),n=0;n<t.length;n++){var a=t[n],s=a[o.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=i(e,a))}}},{"../../plots/cartesian/autorange":205,"../../plots/cartesian/axis_ids":209,"./constants":117}],117:[function(e,t,n){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],118:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plot_api/plot_template"),o=e("../../plots/cartesian/axis_ids"),a=e("./attributes"),s=e("./oppaxis_attributes");t.exports=function(e,t,n){var l=e[n],c=t[n];if(l.rangeslider||t._requestRangeslider[c._id]){r.isPlainObject(l.rangeslider)||(l.rangeslider={});var u,d,f=l.rangeslider,p=i.newContainer(c,"rangeslider");if(_("visible")){_("bgcolor",t.plot_bgcolor),_("bordercolor"),_("borderwidth"),_("thickness"),_("autorange",!c.isValidRange(f.range)),_("range");var h=t._subplots;if(h)for(var g=h.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===o.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),v=r.simpleMap(g,o.id2name),m=0;m<v.length;m++){var b=v[m];u=f[b]||{},d=i.newContainer(p,b,"yaxis");var y,x=t[b];u.range&&x.isValidRange(u.range)&&(y="fixed"),"match"!==w("rangemode",y)&&w("range",x.range.slice())}p._input=f}}function _(e,t){return r.coerce(f,p,a,e,t)}function w(e,t){return r.coerce(u,d,s,e,t)}}},{"../../lib":161,"../../plot_api/plot_template":196,"../../plots/cartesian/axis_ids":209,"./attributes":115,"./oppaxis_attributes":121}],119:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../registry"),o=e("../../plots/plots"),a=e("../../lib"),s=e("../drawing"),l=e("../color"),c=e("../titles"),u=e("../../plots/cartesian"),d=e("../../plots/cartesian/axes"),f=e("../dragelement"),p=e("../../lib/setcursor"),h=e("./constants");function g(e,t,n,r){var i=a.ensureSingle(e,"rect",h.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),o=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,l=-r._offsetShift,c=s.crispRound(t,r.borderwidth);i.attr({width:r._width+o,height:r._height+o,transform:"translate("+l+","+l+")",fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":c})}function v(e,t,n,r){var i=t._fullLayout;a.ensureSingleById(i._topdefs,"clipPath",r._clipId,function(e){e.append("rect").attr({x:0,y:0})}).select("rect").attr({width:r._width,height:r._height})}function m(e,t,n,i){var l,c=d.getSubplots(t,n),f=t.calcdata,p=e.selectAll("g."+h.rangePlotClassName).data(c,a.identity);p.enter().append("g").attr("class",function(e){return h.rangePlotClassName+" "+e}).call(s.setClipUrl,i._clipId),p.order(),p.exit().remove(),p.each(function(e,a){var s=r.select(this),c=0===a,p=d.getFromId(t,e,"y"),h=p._name,g=i[h],v={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:i.range.slice(),calendar:n.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};v.layout[h]={type:p.type,domain:[0,1],range:"match"!==g.rangemode?g.range.slice():p.range.slice(),calendar:p.calendar},o.supplyDefaults(v);var m={id:e,plotgroup:s,xaxis:v._fullLayout.xaxis,yaxis:v._fullLayout[h],isRangePlot:!0};c?l=m:(m.mainplot="xy",m.mainplotinfo=l),u.rangePlot(t,m,function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=i[0].trace;o.xaxis+o.yaxis===t&&n.push(i)}return n}(f,e))})}function b(e,t,n,r,i){(a.ensureSingle(e,"rect",h.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,h.maskColor),a.ensureSingle(e,"rect",h.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,h.maskColor),"match"!==i.rangemode)&&(a.ensureSingle(e,"rect",h.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).call(l.fill,h.maskOppAxisColor),a.ensureSingle(e,"rect",h.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).style("border-top",h.maskOppBorder).call(l.fill,h.maskOppAxisColor))}function y(e,t,n,r){t._context.staticPlot||a.ensureSingle(e,"rect",h.slideBoxClassName,function(e){e.attr({y:0,cursor:h.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:r._height,fill:h.slideBoxFill})}function x(e,t,n,r){var i=a.ensureSingle(e,"g",h.grabberMinClassName),o=a.ensureSingle(e,"g",h.grabberMaxClassName),s={x:0,width:h.handleWidth,rx:h.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":h.handleStrokeWidth,"shape-rendering":"crispEdges"},c={y:Math.round(r._height/4),height:Math.round(r._height/2)};if(a.ensureSingle(i,"rect",h.handleMinClassName,function(e){e.attr(s)}).attr(c),a.ensureSingle(o,"rect",h.handleMaxClassName,function(e){e.attr(s)}).attr(c),!t._context.staticPlot){var u={width:h.grabAreaWidth,x:0,y:0,fill:h.grabAreaFill,cursor:h.grabAreaCursor};a.ensureSingle(i,"rect",h.grabAreaMinClassName,function(e){e.attr(u)}).attr("height",r._height),a.ensureSingle(o,"rect",h.grabAreaMaxClassName,function(e){e.attr(u)}).attr("height",r._height)}}t.exports=function(e){var t=e._fullLayout,n=function(e){var t=d.list({_fullLayout:e},"x",!0),n=h.name,r=[];if(e._has("gl2d"))return r;for(var i=0;i<t.length;i++){var o=t[i];o[n]&&o[n].visible&&r.push(o)}return r}(t);var s=t._infolayer.selectAll("g."+h.containerClassName).data(n,function(e){return e._name});s.enter().append("g").classed(h.containerClassName,!0).attr("pointer-events","all"),s.exit().each(function(e){var n=e[h.name];t._topdefs.select("#"+n._clipId).remove()}).remove(),0!==n.length&&s.each(function(n){var s=r.select(this),l=n[h.name],u=t[d.id2name(n.anchor)],_=l[d.id2name(n.anchor)];if(l.range){var w=l.range,k=n.range;w[0]=n.l2r(Math.min(n.r2l(w[0]),n.r2l(k[0]))),w[1]=n.l2r(Math.max(n.r2l(w[1]),n.r2l(k[1]))),l._input.range=w.slice()}n.cleanRange("rangeslider.range");for(var T=t.margin,A=t._size,C=n.domain,S=(n._boundingBox||{}).height||0,M=1/0,E=d.getSubplots(e,n),O=0;O<E.length;O++){var L=d.getFromId(e,E[O].substr(E[O].indexOf("y")));M=Math.min(M,L.domain[0])}l._id=h.name+n._id,l._clipId=l._id+"-"+t._uid,l._width=A.w*(C[1]-C[0]),l._height=(t.height-T.b-T.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2);var P=Math.round(T.l+A.w*C[0]),D=Math.round(A.t+A.h*(1-M)+S+l._offsetShift+h.extraPad);s.attr("transform","translate("+P+","+D+")");var R=n.r2l(l.range[0]),F=n.r2l(l.range[1]),j=F-R;if(l.p2d=function(e){return e/l._width*j+R},l.d2p=function(e){return(e-R)/j*l._width},l._rl=[R,F],"match"!==_.rangemode){var I=u.r2l(_.range[0]),N=u.r2l(_.range[1])-I;l.d2pOppAxis=function(e){return(e-I)/N*l._height}}s.call(g,e,n,l).call(v,e,n,l).call(m,e,n,l).call(b,e,n,l,_).call(y,e,n,l).call(x,e,n,l),function(e,t,n,o){var s=e.select("rect."+h.slideBoxClassName).node(),l=e.select("rect."+h.grabAreaMinClassName).node(),c=e.select("rect."+h.grabAreaMaxClassName).node();e.on("mousedown",function(){var u=r.event,d=u.target,h=u.clientX,g=h-e.node().getBoundingClientRect().left,v=o.d2p(n._rl[0]),m=o.d2p(n._rl[1]),b=f.coverSlip();function y(e){var u,f,y,x=+e.clientX-h;switch(d){case s:y="ew-resize",u=v+x,f=m+x;break;case l:y="col-resize",u=v+x,f=m;break;case c:y="col-resize",u=v,f=m+x;break;default:y="ew-resize",u=g,f=g+x}if(f<u){var _=f;f=u,u=_}o._pixelMin=u,o._pixelMax=f,p(r.select(b),y),function(e,t,n,r){function o(e){return n.l2r(a.constrain(e,r._rl[0],r._rl[1]))}var s=o(r.p2d(r._pixelMin)),l=o(r.p2d(r._pixelMax));window.requestAnimationFrame(function(){i.call("relayout",t,n._name+".range",[s,l])})}(0,t,n,o)}b.addEventListener("mousemove",y),b.addEventListener("mouseup",function e(){b.removeEventListener("mousemove",y);b.removeEventListener("mouseup",e);a.removeElement(b)})})}(s,e,n,l),function(e,t,n,r,i,o){var s=h.handleWidth/2;function l(e){return a.constrain(e,0,r._width)}function c(e){return a.constrain(e,0,r._height)}function u(e){return a.constrain(e,-s,r._width+s)}var d=l(r.d2p(n._rl[0])),f=l(r.d2p(n._rl[1]));if(e.select("rect."+h.slideBoxClassName).attr("x",d).attr("width",f-d),e.select("rect."+h.maskMinClassName).attr("width",d),e.select("rect."+h.maskMaxClassName).attr("x",f).attr("width",r._width-f),"match"!==o.rangemode){var p=r._height-c(r.d2pOppAxis(i._rl[1])),g=r._height-c(r.d2pOppAxis(i._rl[0]));e.select("rect."+h.maskMinOppAxisClassName).attr("x",d).attr("height",p).attr("width",f-d),e.select("rect."+h.maskMaxOppAxisClassName).attr("x",d).attr("y",g).attr("height",r._height-g).attr("width",f-d),e.select("rect."+h.slideBoxClassName).attr("y",p).attr("height",g-p)}var v=Math.round(u(d-s))-.5,m=Math.round(u(f-s))+.5;e.select("g."+h.grabberMinClassName).attr("transform","translate("+v+",0.5)"),e.select("g."+h.grabberMaxClassName).attr("transform","translate("+m+",0.5)")}(s,0,n,l,u,_),"bottom"===n.side&&c.draw(e,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:t._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:D+l._height+l._offsetShift+10+1.5*n.titlefont.size,"text-anchor":"middle"}}),o.autoMargin(e,l._id,{x:C[0],y:M,l:0,r:0,t:0,b:l._height+T.b+S,pad:h.extraPad+2*l._offsetShift})})}},{"../../lib":161,"../../lib/setcursor":181,"../../plots/cartesian":218,"../../plots/cartesian/axes":206,"../../plots/plots":239,"../../registry":246,"../color":43,"../dragelement":65,"../drawing":68,"../titles":134,"./constants":117,d3:8}],120:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes"),o=e("./oppaxis_attributes");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},i,{yaxis:o})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw")}},{"../../lib":161,"./attributes":115,"./calc_autorange":116,"./defaults":118,"./draw":119,"./oppaxis_attributes":121}],121:[function(e,t,n){"use strict";t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],122:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),i=e("../../traces/scatter/attributes").line,o=e("../drawing/attributes").dash,a=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray;t.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:a({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:a({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:a({},i.color,{editType:"arraydraw"}),width:a({},i.width,{editType:"calc+arraydraw"}),dash:a({},o,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":155,"../../plot_api/plot_template":196,"../../traces/scatter/attributes":283,"../annotations/attributes":28,"../drawing/attributes":67}],123:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/axes"),o=e("./constants"),a=e("./helpers");function s(e){return c(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function l(e){return c(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function c(e,t,n,i,s,l){var c=e/2,u=l;if("pixel"===t){var d=s?a.extractPathCoords(s,l?o.paramIsY:o.paramIsX):[n,i],f=r.aggNums(Math.max,null,d),p=r.aggNums(Math.min,null,d),h=p<0?Math.abs(p)+c:c,g=f>0?f+c:c;return{ppad:c,ppadplus:u?h:g,ppadminus:u?g:h}}return{ppad:c}}function u(e,t,n,r,i){var s="category"===e.type?e.r2c:e.d2c;if(void 0!==t)return[s(t),s(n)];if(r){var l,c,u,d,f=1/0,p=-1/0,h=r.match(o.segmentRE);for("date"===e.type&&(s=a.decodeDate(s)),l=0;l<h.length;l++)void 0!==(c=i[h[l].charAt(0)].drawn)&&(!(u=h[l].substr(1).match(o.paramRE))||u.length<c||((d=s(u[c]))<f&&(f=d),d>p&&(p=d)));return p>=f?[f,p]:void 0}}t.exports=function(e){var t=e._fullLayout,n=r.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var a=0;a<n.length;a++){var c,d,f=n[a];if(f._extremes={},"paper"!==f.xref){var p="pixel"===f.xsizemode?f.xanchor:f.x0,h="pixel"===f.xsizemode?f.xanchor:f.x1;(d=u(c=i.getFromId(e,f.xref),p,h,f.path,o.paramIsX))&&(f._extremes[c._id]=i.findExtremes(c,d,s(f)))}if("paper"!==f.yref){var g="pixel"===f.ysizemode?f.yanchor:f.y0,v="pixel"===f.ysizemode?f.yanchor:f.y1;(d=u(c=i.getFromId(e,f.yref),g,v,f.path,o.paramIsY))&&(f._extremes[c._id]=i.findExtremes(c,d,l(f)))}}}},{"../../lib":161,"../../plots/cartesian/axes":206,"./constants":124,"./helpers":127}],124:[function(e,t,n){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],125:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/axes"),o=e("../../plots/array_container_defaults"),a=e("./attributes"),s=e("./helpers");function l(e,t,n){function o(n,i){return r.coerce(e,t,a,n,i)}if(o("visible")){o("layer"),o("opacity"),o("fillcolor"),o("line.color"),o("line.width"),o("line.dash");for(var l=o("type",e.path?"path":"rect"),c=o("xsizemode"),u=o("ysizemode"),d=["x","y"],f=0;f<2;f++){var p,h,g,v=d[f],m=v+"anchor",b="x"===v?c:u,y={_fullLayout:n},x=i.coerceRef(e,t,y,v,"","paper");if("paper"!==x?((p=i.getFromId(y,x))._shapeIndices.push(t._index),g=s.rangeToShapePosition(p),h=s.shapePositionToRange(p)):h=g=r.identity,"path"!==l){var _=v+"0",w=v+"1",k=e[_],T=e[w];e[_]=h(e[_],!0),e[w]=h(e[w],!0),"pixel"===b?(o(_,0),o(w,10)):(i.coercePosition(t,y,o,x,_,.25),i.coercePosition(t,y,o,x,w,.75)),t[_]=g(t[_]),t[w]=g(t[w]),e[_]=k,e[w]=T}if("pixel"===b){var A=e[m];e[m]=h(e[m],!0),i.coercePosition(t,y,o,x,m,.25),t[m]=g(t[m]),e[m]=A}}"path"===l?o("path"):r.noneOrAll(e,t,["x0","x1","y0","y1"])}}t.exports=function(e,t){o(e,t,{name:"shapes",handleItemDefaults:l})}},{"../../lib":161,"../../plots/array_container_defaults":202,"../../plots/cartesian/axes":206,"./attributes":122,"./helpers":127}],126:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib"),o=e("../../plots/cartesian/axes"),a=e("../color"),s=e("../drawing"),l=e("../../plot_api/plot_template").arrayEditor,c=e("../dragelement"),u=e("../../lib/setcursor"),d=e("./constants"),f=e("./helpers");function p(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var n=e._fullLayout.shapes[t]||{};if(n._input&&!1!==n.visible)if("below"!==n.layer)m(e._fullLayout._shapeUpperLayer);else if("paper"===n.xref||"paper"===n.yref)m(e._fullLayout._shapeLowerLayer);else{var p=e._fullLayout._plots[n.xref+n.yref];if(p)m((p.mainplotinfo||p).shapelayer);else m(e._fullLayout._shapeLowerLayer)}function m(p){var m={"data-index":t,"fill-rule":"evenodd",d:g(e,n)},b=n.line.width?n.line.color:"rgba(0,0,0,0)",y=p.append("path").attr(m).style("opacity",n.opacity).call(a.stroke,b).call(a.fill,n.fillcolor).call(s.dashLine,n.line.dash,n.line.width);h(y,e,n),e._context.edits.shapePosition&&function(e,t,n,a,p){var m,b,y,x,_,w,k,T,A,C,S,M,E,O,L,P,D=10,R=10,F="pixel"===n.xsizemode,j="pixel"===n.ysizemode,I="line"===n.type,N="path"===n.type,z=l(e.layout,"shapes",n),q=z.modifyItem,H=o.getFromId(e,n.xref),B=o.getFromId(e,n.yref),V=f.getDataToPixel(e,H),U=f.getDataToPixel(e,B,!0),$=f.getPixelToData(e,H),W=f.getPixelToData(e,B,!0),X=I?function(){var e=Math.max(n.line.width,10),r=p.append("g").attr("data-index",a);r.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":e,"stroke-opacity":"0"});var i={"fill-opacity":"0"},o=e/2>10?e/2:10;return r.append("circle").attr({"data-line-point":"start-point",cx:F?V(n.xanchor)+n.x0:V(n.x0),cy:j?U(n.yanchor)-n.y0:U(n.y0),r:o}).style(i).classed("cursor-grab",!0),r.append("circle").attr({"data-line-point":"end-point",cx:F?V(n.xanchor)+n.x1:V(n.x1),cy:j?U(n.yanchor)-n.y1:U(n.y1),r:o}).style(i).classed("cursor-grab",!0),r}():t,G={element:X.node(),gd:e,prepFn:function(r){F&&(_=V(n.xanchor));j&&(w=U(n.yanchor));"path"===n.type?L=n.path:(m=F?n.x0:V(n.x0),b=j?n.y0:U(n.y0),y=F?n.x1:V(n.x1),x=j?n.y1:U(n.y1));m<y?(A=m,E="x0",C=y,O="x1"):(A=y,E="x1",C=m,O="x0");!j&&b<x||j&&b>x?(k=b,S="y0",T=x,M="y1"):(k=x,S="y1",T=b,M="y0");Y(r),K(p,n),function(e,t,n){var r=t.xref,i=t.yref,a=o.getFromId(n,r),l=o.getFromId(n,i),c="";"paper"===r||a.autorange||(c+=r);"paper"===i||l.autorange||(c+=i);e.call(s.setClipUrl,c?"clip"+n._fullLayout._uid+c:null)}(t,n,e),G.moveFn="move"===P?Z:J},doneFn:function(){u(t),Q(p),h(t,e,n),r.call("relayout",e,z.getUpdateObj())},clickFn:function(){Q(p)}};function Y(e){if(I)P="path"===e.target.tagName?"move":"start-point"===e.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var n=G.element.getBoundingClientRect(),r=n.right-n.left,i=n.bottom-n.top,o=e.clientX-n.left,a=e.clientY-n.top,s=!N&&r>D&&i>R&&!e.shiftKey?c.getCursor(o/r,1-a/i):"move";u(t,s),P=s.split("-")[0]}}function Z(r,i){if("path"===n.type){var o=function(e){return e},a=o,s=o;F?q("xanchor",n.xanchor=$(_+r)):(a=function(e){return $(V(e)+r)},H&&"date"===H.type&&(a=f.encodeDate(a))),j?q("yanchor",n.yanchor=W(w+i)):(s=function(e){return W(U(e)+i)},B&&"date"===B.type&&(s=f.encodeDate(s))),q("path",n.path=v(L,a,s))}else F?q("xanchor",n.xanchor=$(_+r)):(q("x0",n.x0=$(m+r)),q("x1",n.x1=$(y+r))),j?q("yanchor",n.yanchor=W(w+i)):(q("y0",n.y0=W(b+i)),q("y1",n.y1=W(x+i)));t.attr("d",g(e,n)),K(p,n)}function J(r,i){if(N){var o=function(e){return e},a=o,s=o;F?q("xanchor",n.xanchor=$(_+r)):(a=function(e){return $(V(e)+r)},H&&"date"===H.type&&(a=f.encodeDate(a))),j?q("yanchor",n.yanchor=W(w+i)):(s=function(e){return W(U(e)+i)},B&&"date"===B.type&&(s=f.encodeDate(s))),q("path",n.path=v(L,a,s))}else if(I){if("resize-over-start-point"===P){var l=m+r,c=j?b-i:b+i;q("x0",n.x0=F?l:$(l)),q("y0",n.y0=j?c:W(c))}else if("resize-over-end-point"===P){var u=y+r,d=j?x-i:x+i;q("x1",n.x1=F?u:$(u)),q("y1",n.y1=j?d:W(d))}}else{var h=~P.indexOf("n")?k+i:k,z=~P.indexOf("s")?T+i:T,X=~P.indexOf("w")?A+r:A,G=~P.indexOf("e")?C+r:C;~P.indexOf("n")&&j&&(h=k-i),~P.indexOf("s")&&j&&(z=T-i),(!j&&z-h>R||j&&h-z>R)&&(q(S,n[S]=j?h:W(h)),q(M,n[M]=j?z:W(z))),G-X>D&&(q(E,n[E]=F?X:$(X)),q(O,n[O]=F?G:$(G)))}t.attr("d",g(e,n)),K(p,n)}function K(e,t){(F||j)&&function(){var n="path"!==t.type,r=e.selectAll(".visual-cue").data([0]);r.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var o=V(F?t.xanchor:i.midRange(n?[t.x0,t.x1]:f.extractPathCoords(t.path,d.paramIsX))),a=U(j?t.yanchor:i.midRange(n?[t.y0,t.y1]:f.extractPathCoords(t.path,d.paramIsY)));if(o=f.roundPositionForSharpStrokeRendering(o,1),a=f.roundPositionForSharpStrokeRendering(a,1),F&&j){var s="M"+(o-1-1)+","+(a-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";r.attr("d",s)}else if(F){var l="M"+(o-1-1)+","+(a-9-1)+"v18 h2 v-18 Z";r.attr("d",l)}else{var c="M"+(o-9-1)+","+(a-1-1)+"h18 v2 h-18 Z";r.attr("d",c)}}()}function Q(e){e.selectAll(".visual-cue").remove()}c.init(G),X.node().onmousemove=Y}(e,y,n,t,p)}}function h(e,t,n){var r=(n.xref+n.yref).replace(/paper/g,"");e.call(s.setClipUrl,r?"clip"+t._fullLayout._uid+r:null)}function g(e,t){var n,r,a,s,l,c,u,p,h=t.type,g=o.getFromId(e,t.xref),v=o.getFromId(e,t.yref),m=e._fullLayout._size;if(g?(n=f.shapePositionToRange(g),r=function(e){return g._offset+g.r2p(n(e,!0))}):r=function(e){return m.l+m.w*e},v?(a=f.shapePositionToRange(v),s=function(e){return v._offset+v.r2p(a(e,!0))}):s=function(e){return m.t+m.h*(1-e)},"path"===h)return g&&"date"===g.type&&(r=f.decodeDate(r)),v&&"date"===v.type&&(s=f.decodeDate(s)),function(e,t,n){var r=e.path,o=e.xsizemode,a=e.ysizemode,s=e.xanchor,l=e.yanchor;return r.replace(d.segmentRE,function(e){var r=0,c=e.charAt(0),u=d.paramIsX[c],f=d.paramIsY[c],p=d.numParams[c],h=e.substr(1).replace(d.paramRE,function(e){return u[r]?e="pixel"===o?t(s)+Number(e):t(e):f[r]&&(e="pixel"===a?n(l)-Number(e):n(e)),++r>p&&(e="X"),e});return r>p&&(h=h.replace(/[\s,]*X.*/,""),i.log("Ignoring extra params in segment "+e)),c+h})}(t,r,s);if("pixel"===t.xsizemode){var b=r(t.xanchor);l=b+t.x0,c=b+t.x1}else l=r(t.x0),c=r(t.x1);if("pixel"===t.ysizemode){var y=s(t.yanchor);u=y-t.y0,p=y-t.y1}else u=s(t.y0),p=s(t.y1);if("line"===h)return"M"+l+","+u+"L"+c+","+p;if("rect"===h)return"M"+l+","+u+"H"+c+"V"+p+"H"+l+"Z";var x=(l+c)/2,_=(u+p)/2,w=Math.abs(x-l),k=Math.abs(_-u),T="A"+w+","+k,A=x+w+","+_;return"M"+A+T+" 0 1,1 "+(x+","+(_-k))+T+" 0 0,1 "+A+"Z"}function v(e,t,n){return e.replace(d.segmentRE,function(e){var r=0,i=e.charAt(0),o=d.paramIsX[i],a=d.paramIsY[i],s=d.numParams[i];return i+e.substr(1).replace(d.paramRE,function(e){return r>=s?e:(o[r]?e=t(e):a[r]&&(e=n(e)),r++,e)})})}t.exports={draw:function(e){var t=e._fullLayout;for(var n in t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._plots){var r=t._plots[n].shapelayer;r&&r.selectAll("path").remove()}for(var i=0;i<t.shapes.length;i++)t.shapes[i].visible&&p(e,i)},drawOne:p}},{"../../lib":161,"../../lib/setcursor":181,"../../plot_api/plot_template":196,"../../plots/cartesian/axes":206,"../../registry":246,"../color":43,"../dragelement":65,"../drawing":68,"./constants":124,"./helpers":127}],127:[function(e,t,n){"use strict";var r=e("./constants"),i=e("../../lib");n.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},n.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},n.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}},n.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}},n.extractPathCoords=function(e,t){var n=[];return e.match(r.segmentRE).forEach(function(e){var o=t[e.charAt(0)].drawn;if(void 0!==o){var a=e.substr(1).match(r.paramRE);!a||a.length<o||n.push(i.cleanNumber(a[o]))}}),n},n.getDataToPixel=function(e,t,r){var i,o=e._fullLayout._size;if(t){var a=n.shapePositionToRange(t);i=function(e){return t._offset+t.r2p(a(e,!0))},"date"===t.type&&(i=n.decodeDate(i))}else i=r?function(e){return o.t+o.h*(1-e)}:function(e){return o.l+o.w*e};return i},n.getPixelToData=function(e,t,r){var i,o=e._fullLayout._size;if(t){var a=n.rangeToShapePosition(t);i=function(e){return a(t.p2r(e-t._offset))}}else i=r?function(e){return 1-(e-o.t)/o.h}:function(e){return(e-o.l)/o.w};return i},n.roundPositionForSharpStrokeRendering=function(e,t){var n=1===Math.round(t%2),r=Math.round(e);return n?r+.5:r}},{"../../lib":161,"./constants":124}],128:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":217,"./attributes":122,"./calc_autorange":123,"./defaults":125,"./draw":126}],129:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../../plots/pad_attributes"),o=e("../../lib/extend").extendDeepAll,a=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/animation_attributes"),l=e("../../plot_api/plot_template").templatedArray,c=e("./constants"),u=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});t.exports=a(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:u,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o({},i,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":155,"../../plot_api/edit_types":189,"../../plot_api/plot_template":196,"../../plots/animation_attributes":201,"../../plots/font_attributes":233,"../../plots/pad_attributes":238,"./constants":130}],130:[function(e,t,n){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],131:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/array_container_defaults"),o=e("./attributes"),a=e("./constants").name,s=o.steps;function l(e,t,n){function a(n,i){return r.coerce(e,t,o,n,i)}for(var s=i(e,t,{name:"steps",handleItemDefaults:c}),l=0,u=0;u<s.length;u++)s[u].visible&&l++;if(l<2?t.visible=!1:a("visible")){t._stepCount=l;var d=t._visibleSteps=r.filterVisible(s);(s[a("active")]||{}).visible||(t.active=d[0]._index),a("x"),a("y"),r.noneOrAll(e,t,["x","y"]),a("xanchor"),a("yanchor"),a("len"),a("lenmode"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),r.coerceFont(a,"font",n.font),a("currentvalue.visible")&&(a("currentvalue.xanchor"),a("currentvalue.prefix"),a("currentvalue.suffix"),a("currentvalue.offset"),r.coerceFont(a,"currentvalue.font",t.font)),a("transition.duration"),a("transition.easing"),a("bgcolor"),a("activebgcolor"),a("bordercolor"),a("borderwidth"),a("ticklen"),a("tickwidth"),a("tickcolor"),a("minorticklen")}}function c(e,t){function n(n,i){return r.coerce(e,t,s,n,i)}("skip"===e.method||Array.isArray(e.args)?n("visible"):t.visible=!1)&&(n("method"),n("args"),n("value",n("label","step-"+t._index)),n("execute"))}t.exports=function(e,t){i(e,t,{name:a,handleItemDefaults:l})}},{"../../lib":161,"../../plots/array_container_defaults":202,"./attributes":129,"./constants":130}],132:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../plots/plots"),o=e("../color"),a=e("../drawing"),s=e("../../lib"),l=e("../../lib/svg_text_utils"),c=e("../legend/anchor_utils"),u=e("../../plot_api/plot_template").arrayEditor,d=e("./constants"),f=e("../../constants/alignment"),p=f.LINE_SPACING,h=f.FROM_TL,g=f.FROM_BR;function v(e){return d.autoMarginIdRoot+e._index}function m(e){return e._index}function b(e,t){var n=a.tester.selectAll("g."+d.labelGroupClass).data(t._visibleSteps);n.enter().append("g").classed(d.labelGroupClass,!0);var o=0,s=0;n.each(function(e){var n=_(r.select(this),{step:e},t).node();if(n){var i=a.bBox(n);s=Math.max(s,i.height),o=Math.max(o,i.width)}}),n.remove();var u=t._dims={};u.inputAreaWidth=Math.max(d.railWidth,d.gripHeight);var f=e._fullLayout._size;u.lx=f.l+f.w*t.x,u.ly=f.t+f.h*(1-t.y),"fraction"===t.lenmode?u.outerLength=Math.round(f.w*t.len):u.outerLength=t.len,u.inputAreaStart=0,u.inputAreaLength=Math.round(u.outerLength-t.pad.l-t.pad.r);var p=(u.inputAreaLength-2*d.stepInset)/(t._stepCount-1),m=o+d.labelPadding;if(u.labelStride=Math.max(1,Math.ceil(m/p)),u.labelHeight=s,u.currentValueMaxWidth=0,u.currentValueHeight=0,u.currentValueTotalHeight=0,u.currentValueMaxLines=1,t.currentvalue.visible){var b=a.tester.append("g");n.each(function(e){var n=y(b,t,e.label),r=n.node()&&a.bBox(n.node())||{width:0,height:0},i=l.lineCount(n);u.currentValueMaxWidth=Math.max(u.currentValueMaxWidth,Math.ceil(r.width)),u.currentValueHeight=Math.max(u.currentValueHeight,Math.ceil(r.height)),u.currentValueMaxLines=Math.max(u.currentValueMaxLines,i)}),u.currentValueTotalHeight=u.currentValueHeight+t.currentvalue.offset,b.remove()}u.height=u.currentValueTotalHeight+d.tickOffset+t.ticklen+d.labelOffset+u.labelHeight+t.pad.t+t.pad.b;var x="left";c.isRightAnchor(t)&&(u.lx-=u.outerLength,x="right"),c.isCenterAnchor(t)&&(u.lx-=u.outerLength/2,x="center");var w="top";c.isBottomAnchor(t)&&(u.ly-=u.height,w="bottom"),c.isMiddleAnchor(t)&&(u.ly-=u.height/2,w="middle"),u.outerLength=Math.ceil(u.outerLength),u.height=Math.ceil(u.height),u.lx=Math.round(u.lx),u.ly=Math.round(u.ly);var k={y:t.y,b:u.height*g[w],t:u.height*h[w]};"fraction"===t.lenmode?(k.l=0,k.xl=t.x-t.len*h[x],k.r=0,k.xr=t.x+t.len*g[x]):(k.x=t.x,k.l=u.outerLength*h[x],k.r=u.outerLength*g[x]),i.autoMargin(e,v(t),k)}function y(e,t,n){if(t.currentvalue.visible){var r,i,o=t._dims;switch(t.currentvalue.xanchor){case"right":r=o.inputAreaLength-d.currentValueInset-o.currentValueMaxWidth,i="left";break;case"center":r=.5*o.inputAreaLength,i="middle";break;default:r=d.currentValueInset,i="left"}var c=s.ensureSingle(e,"text",d.labelClass,function(e){e.classed("user-select-none",!0).attr({"text-anchor":i,"data-notex":1})}),u=t.currentvalue.prefix?t.currentvalue.prefix:"";if("string"==typeof n)u+=n;else u+=t.steps[t.active].label;t.currentvalue.suffix&&(u+=t.currentvalue.suffix),c.call(a.font,t.currentvalue.font).text(u).call(l.convertToTspans,t._gd);var f=l.lineCount(c),h=(o.currentValueMaxLines+1-f)*t.currentvalue.font.size*p;return l.positionText(c,r,h),c}}function x(e,t,n){s.ensureSingle(e,"rect",d.gripRectClass,function(r){r.call(A,t,e,n).style("pointer-events","all")}).attr({width:d.gripWidth,height:d.gripHeight,rx:d.gripRadius,ry:d.gripRadius}).call(o.stroke,n.bordercolor).call(o.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function _(e,t,n){var r=s.ensureSingle(e,"text",d.labelClass,function(e){e.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})});return r.call(a.font,n.font).text(t.step.label).call(l.convertToTspans,n._gd),r}function w(e,t){var n=s.ensureSingle(e,"g",d.labelsClass),i=t._dims,o=n.selectAll("g."+d.labelGroupClass).data(i.labelSteps);o.enter().append("g").classed(d.labelGroupClass,!0),o.exit().remove(),o.each(function(e){var n=r.select(this);n.call(_,e,t),a.setTranslate(n,M(t,e.fraction),d.tickOffset+t.ticklen+t.font.size*p+d.labelOffset+i.currentValueTotalHeight)})}function k(e,t,n,r,i){var o=Math.round(r*(n._stepCount-1)),a=n._visibleSteps[o]._index;a!==n.active&&T(e,t,n,a,!0,i)}function T(e,t,n,r,o,a){var s=n.active;n.active=r,u(e.layout,d.name,n).applyUpdate("active",r);var l=n.steps[n.active];t.call(S,n,a),t.call(y,n),e.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:o,previousActive:s}),l&&l.method&&o&&(t._nextMethod?(t._nextMethod.step=l,t._nextMethod.doCallback=o,t._nextMethod.doTransition=a):(t._nextMethod={step:l,doCallback:o,doTransition:a},t._nextMethodRaf=window.requestAnimationFrame(function(){var n=t._nextMethod.step;n.method&&(n.execute&&i.executeAPICommand(e,n.method,n.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function A(e,t,n){var i=n.node(),a=r.select(t);function s(){return n.data()[0]}e.on("mousedown",function(){var e=s();t.emit("plotly_sliderstart",{slider:e});var l=n.select("."+d.gripRectClass);r.event.stopPropagation(),r.event.preventDefault(),l.call(o.fill,e.activebgcolor);var c=E(e,r.mouse(i)[0]);k(t,n,e,c,!0),e._dragging=!0,a.on("mousemove",function(){var e=s(),o=E(e,r.mouse(i)[0]);k(t,n,e,o,!1)}),a.on("mouseup",function(){var e=s();e._dragging=!1,l.call(o.fill,e.bgcolor),a.on("mouseup",null),a.on("mousemove",null),t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function C(e,t){var n=e.selectAll("rect."+d.tickRectClass).data(t._visibleSteps),i=t._dims;n.enter().append("rect").classed(d.tickRectClass,!0),n.exit().remove(),n.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(e,n){var s=n%i.labelStride==0,l=r.select(this);l.attr({height:s?t.ticklen:t.minorticklen}).call(o.fill,t.tickcolor),a.setTranslate(l,M(t,n/(t._stepCount-1))-.5*t.tickwidth,(s?d.tickOffset:d.minorTickOffset)+i.currentValueTotalHeight)})}function S(e,t,n){for(var r=e.select("rect."+d.gripRectClass),i=0,o=0;o<t._stepCount;o++)if(t._visibleSteps[o]._index===t.active){i=o;break}var a=M(t,i/(t._stepCount-1));if(!t._invokingCommand){var s=r;n&&t.transition.duration>0&&(s=s.transition().duration(t.transition.duration).ease(t.transition.easing)),s.attr("transform","translate("+(a-.5*d.gripWidth)+","+t._dims.currentValueTotalHeight+")")}}function M(e,t){var n=e._dims;return n.inputAreaStart+d.stepInset+(n.inputAreaLength-2*d.stepInset)*Math.min(1,Math.max(0,t))}function E(e,t){var n=e._dims;return Math.min(1,Math.max(0,(t-d.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*d.stepInset-2*n.inputAreaStart)))}function O(e,t,n){var r=n._dims,i=s.ensureSingle(e,"rect",d.railTouchRectClass,function(r){r.call(A,t,e,n).style("pointer-events","all")});i.attr({width:r.inputAreaLength,height:Math.max(r.inputAreaWidth,d.tickOffset+n.ticklen+r.labelHeight)}).call(o.fill,n.bgcolor).attr("opacity",0),a.setTranslate(i,0,r.currentValueTotalHeight)}function L(e,t){var n=t._dims,r=n.inputAreaLength-2*d.railInset,i=s.ensureSingle(e,"rect",d.railRectClass);i.attr({width:r,height:d.railWidth,rx:d.railRadius,ry:d.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,t.bordercolor).call(o.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),a.setTranslate(i,d.railInset,.5*(n.inputAreaWidth-d.railWidth)+n.currentValueTotalHeight)}t.exports=function(e){var t=e._fullLayout,n=function(e,t){for(var n=e[d.name],r=[],i=0;i<n.length;i++){var o=n[i];o.visible&&(o._gd=t,r.push(o))}return r}(t,e),o=t._infolayer.selectAll("g."+d.containerClassName).data(n.length>0?[0]:[]);function s(t){t._commandObserver&&(t._commandObserver.remove(),delete t._commandObserver),i.autoMargin(e,v(t))}if(o.enter().append("g").classed(d.containerClassName,!0).style("cursor","ew-resize"),o.exit().each(function(){r.select(this).selectAll("g."+d.groupClassName).each(s)}).remove(),0!==n.length){var l=o.selectAll("g."+d.groupClassName).data(n,m);l.enter().append("g").classed(d.groupClassName,!0),l.exit().each(s).remove();for(var c=0;c<n.length;c++){var u=n[c];b(e,u)}l.each(function(t){var n=r.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e._stepCount,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e._visibleSteps[r]})}(t),i.manageCommandObserver(e,t,t._visibleSteps,function(t){var r=n.data()[0];r.active!==t.index&&(r._dragging||T(e,n,r,t.index,!1,!0))}),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index);t.call(y,n).call(L,n).call(w,n).call(C,n).call(O,e,n).call(x,e,n);var r=n._dims;a.setTranslate(t,r.lx+n.pad.l,r.ly+n.pad.t),t.call(S,n,!1),t.call(y,n)}(e,r.select(this),t)})}}},{"../../constants/alignment":141,"../../lib":161,"../../lib/svg_text_utils":183,"../../plot_api/plot_template":196,"../../plots/plots":239,"../color":43,"../drawing":68,"../legend/anchor_utils":95,"./constants":130,d3:8}],133:[function(e,t,n){"use strict";var r=e("./constants");t.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":129,"./constants":130,"./defaults":131,"./draw":132}],134:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("../../plots/plots"),a=e("../../registry"),s=e("../../lib"),l=e("../drawing"),c=e("../color"),u=e("../../lib/svg_text_utils"),d=e("../../constants/interactions");t.exports={draw:function(e,t,n){var p,h=n.propContainer,g=n.propName,v=n.placeholder,m=n.traceIndex,b=n.avoid||{},y=n.attributes,x=n.transform,_=n.containerGroup,w=e._fullLayout,k=h.titlefont||{},T=k.family,A=k.size,C=k.color,S=1,M=!1,E=(h.title||"").trim();"title"===g?p="titleText":-1!==g.indexOf("axis")?p="axisTitleText":g.indexOf(!0)&&(p="colorbarTitleText");var O=e._context.edits[p];""===E?S=0:E.replace(f," % ")===v.replace(f," % ")&&(S=.2,M=!0,O||(E=""));var L=E||O;_||(_=s.ensureSingle(w._infolayer,"g","g-"+t));var P=_.selectAll("text").data(L?[0]:[]);if(P.enter().append("text"),P.text(E).attr("class",t),P.exit().remove(),!L)return _;function D(e){s.syncOrAsync([R,F],e)}function R(t){var n;return x?(n="",x.rotate&&(n+="rotate("+[x.rotate,y.x,y.y]+")"),x.offset&&(n+="translate(0, "+x.offset+")")):n=null,t.attr("transform",n),t.style({"font-family":T,"font-size":r.round(A,2)+"px",fill:c.rgb(C),opacity:S*c.opacity(C),"font-weight":o.fontWeight}).attr(y).call(u.convertToTspans,e),o.previousPromises(e)}function F(e){var t=r.select(e.node().parentNode);if(b&&b.selection&&b.side&&E){t.attr("transform",null);var n=0,o={left:"right",right:"left",top:"bottom",bottom:"top"}[b.side],a=-1!==["left","top"].indexOf(b.side)?-1:1,c=i(b.pad)?b.pad:2,u=l.bBox(t.node()),d={left:0,top:0,right:w.width,bottom:w.height},f=b.maxShift||(d[b.side]-u[b.side])*("left"===b.side||"top"===b.side?-1:1);if(f<0)n=f;else{var p=b.offsetLeft||0,h=b.offsetTop||0;u.left-=p,u.right-=p,u.top-=h,u.bottom-=h,b.selection.each(function(){var e=l.bBox(this);s.bBoxIntersect(u,e,c)&&(n=Math.max(n,a*(e[b.side]-u[o])+c))}),n=Math.min(f,n)}if(n>0||f<0){var g={left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[b.side];t.attr("transform","translate("+g+")")}}}P.call(D),O&&(E?P.on(".opacity",null):(S=0,M=!0,P.text(v).on("mouseover.opacity",function(){r.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})),P.call(u.makeEditable,{gd:e}).on("edit",function(t){void 0!==m?a.call("restyle",e,g,t,m):a.call("relayout",e,g,t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(D)}).on("input",function(e){this.text(e||" ").call(u.positionText,y.x,y.y)}));return P.classed("js-placeholder",M),_}};var f=/ [XY][0-9]* /},{"../../constants/interactions":142,"../../lib":161,"../../lib/svg_text_utils":183,"../../plots/plots":239,"../../registry":246,"../color":43,"../drawing":68,d3:8,"fast-isnumeric":10}],135:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),o=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/pad_attributes"),l=e("../../plot_api/plot_template").templatedArray,c=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});t.exports=a(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:c,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o({},s,{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":155,"../../plot_api/edit_types":189,"../../plot_api/plot_template":196,"../../plots/font_attributes":233,"../../plots/pad_attributes":238,"../color/attributes":42}],136:[function(e,t,n){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"â",right:"âº",up:"â²",down:"â¼"}}},{}],137:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/array_container_defaults"),o=e("./attributes"),a=e("./constants").name,s=o.buttons;function l(e,t,n){function a(n,i){return r.coerce(e,t,o,n,i)}a("visible",i(e,t,{name:"buttons",handleItemDefaults:c}).length>0)&&(a("active"),a("direction"),a("type"),a("showactive"),a("x"),a("y"),r.noneOrAll(e,t,["x","y"]),a("xanchor"),a("yanchor"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),r.coerceFont(a,"font",n.font),a("bgcolor",n.paper_bgcolor),a("bordercolor"),a("borderwidth"))}function c(e,t){function n(n,i){return r.coerce(e,t,s,n,i)}n("visible","skip"===e.method||Array.isArray(e.args))&&(n("method"),n("args"),n("label"),n("execute"))}t.exports=function(e,t){i(e,t,{name:a,handleItemDefaults:l})}},{"../../lib":161,"../../plots/array_container_defaults":202,"./attributes":135,"./constants":136}],138:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../plots/plots"),o=e("../color"),a=e("../drawing"),s=e("../../lib"),l=e("../../lib/svg_text_utils"),c=e("../legend/anchor_utils"),u=e("../../plot_api/plot_template").arrayEditor,d=e("../../constants/alignment").LINE_SPACING,f=e("./constants"),p=e("./scrollbox");function h(e){return e._index}function g(e,t){return+e.attr(f.menuIndexAttrName)===t._index}function v(e,t,n,r,i,o,a,s){t.active=a,u(e.layout,f.name,t).applyUpdate("active",a),"buttons"===t.type?b(e,r,null,null,t):"dropdown"===t.type&&(i.attr(f.menuIndexAttrName,"-1"),m(e,r,i,o,t),s||b(e,r,i,o,t))}function m(e,t,n,r,i){var o=s.ensureSingle(t,"g",f.headerClassName,function(e){e.style("pointer-events","all")}),l=i._dims,c=i.active,u=i.buttons[c]||f.blankHeaderOpts,d={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},p={width:l.headerWidth,height:l.headerHeight};o.call(y,i,u,e).call(S,i,d,p),s.ensureSingle(t,"text",f.headerArrowClassName,function(e){e.classed("user-select-none",!0).attr("text-anchor","end").call(a.font,i.font).text(f.arrowSymbol[i.direction])}).attr({x:l.headerWidth-f.arrowOffsetX+i.pad.l,y:l.headerHeight/2+f.textOffsetY+i.pad.t}),o.on("click",function(){n.call(M,String(g(n,i)?-1:i._index)),b(e,t,n,r,i)}),o.on("mouseover",function(){o.call(k)}),o.on("mouseout",function(){o.call(T,i)}),a.setTranslate(t,l.lx,l.ly)}function b(e,t,n,o,a){n||(n=t).attr("pointer-events","all");var l=function(e){return-1==+e.attr(f.menuIndexAttrName)}(n)&&"buttons"!==a.type?[]:a.buttons,c="dropdown"===a.type?f.dropdownButtonClassName:f.buttonClassName,u=n.selectAll("g."+c).data(s.filterVisible(l)),d=u.enter().append("g").classed(c,!0),p=u.exit();"dropdown"===a.type?(d.attr("opacity","0").transition().attr("opacity","1"),p.transition().attr("opacity","0").remove()):p.remove();var h=0,g=0,m=a._dims,b=-1!==["up","down"].indexOf(a.direction);"dropdown"===a.type&&(b?g=m.headerHeight+f.gapButtonHeader:h=m.headerWidth+f.gapButtonHeader),"dropdown"===a.type&&"up"===a.direction&&(g=-f.gapButtonHeader+f.gapButton-m.openHeight),"dropdown"===a.type&&"left"===a.direction&&(h=-f.gapButtonHeader+f.gapButton-m.openWidth);var x={x:m.lx+h+a.pad.l,y:m.ly+g+a.pad.t,yPad:f.gapButton,xPad:f.gapButton,index:0},_={l:x.x+a.borderwidth,t:x.y+a.borderwidth};u.each(function(s,l){var c=r.select(this);c.call(y,a,s,e).call(S,a,x),c.on("click",function(){r.event.defaultPrevented||(v(e,a,0,t,n,o,l),s.execute&&i.executeAPICommand(e,s.method,s.args),e.emit("plotly_buttonclicked",{menu:a,button:s,active:a.active}))}),c.on("mouseover",function(){c.call(k)}),c.on("mouseout",function(){c.call(T,a),u.call(w,a)})}),u.call(w,a),b?(_.w=Math.max(m.openWidth,m.headerWidth),_.h=x.y-_.t):(_.w=x.x-_.l,_.h=Math.max(m.openHeight,m.headerHeight)),_.direction=a.direction,o&&(u.size()?function(e,t,n,r,i,o){var a,s,l,c=i.direction,u="up"===c||"down"===c,d=i._dims,p=i.active;if(u)for(s=0,l=0;l<p;l++)s+=d.heights[l]+f.gapButton;else for(a=0,l=0;l<p;l++)a+=d.widths[l]+f.gapButton;r.enable(o,a,s),r.hbar&&r.hbar.attr("opacity","0").transition().attr("opacity","1");r.vbar&&r.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,o,a,_):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,n||e.disable()});n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,t||e.disable()})}(o))}function y(e,t,n,r){e.call(x,t).call(_,t,n,r)}function x(e,t){s.ensureSingle(e,"rect",f.itemRectClassName,function(e){e.attr({rx:f.rx,ry:f.ry,"shape-rendering":"crispEdges"})}).call(o.stroke,t.bordercolor).call(o.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function _(e,t,n,r){s.ensureSingle(e,"text",f.itemTextClassName,function(e){e.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})}).call(a.font,t.font).text(n.label).call(l.convertToTspans,r)}function w(e,t){var n=t.active;e.each(function(e,i){var a=r.select(this);i===n&&t.showactive&&a.select("rect."+f.itemRectClassName).call(o.fill,f.activeColor)})}function k(e){e.select("rect."+f.itemRectClassName).call(o.fill,f.hoverColor)}function T(e,t){e.select("rect."+f.itemRectClassName).call(o.fill,t.bgcolor)}function A(e,t){var n=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},o=a.tester.selectAll("g."+f.dropdownButtonClassName).data(s.filterVisible(t.buttons));o.enter().append("g").classed(f.dropdownButtonClassName,!0);var u=-1!==["up","down"].indexOf(t.direction);o.each(function(i,o){var s=r.select(this);s.call(y,t,i,e);var c=s.select("."+f.itemTextClassName),p=c.node()&&a.bBox(c.node()).width,h=Math.max(p+f.textPadX,f.minWidth),g=t.font.size*d,v=l.lineCount(c),m=Math.max(g*v,f.minHeight)+f.textOffsetY;m=Math.ceil(m),h=Math.ceil(h),n.widths[o]=h,n.heights[o]=m,n.height1=Math.max(n.height1,m),n.width1=Math.max(n.width1,h),u?(n.totalWidth=Math.max(n.totalWidth,h),n.openWidth=n.totalWidth,n.totalHeight+=m+f.gapButton,n.openHeight+=m+f.gapButton):(n.totalWidth+=h+f.gapButton,n.openWidth+=h+f.gapButton,n.totalHeight=Math.max(n.totalHeight,m),n.openHeight=n.totalHeight)}),u?n.totalHeight-=f.gapButton:n.totalWidth-=f.gapButton,n.headerWidth=n.width1+f.arrowPadX,n.headerHeight=n.height1,"dropdown"===t.type&&(u?(n.width1+=f.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=f.arrowPadX),o.remove();var p=n.totalWidth+t.pad.l+t.pad.r,h=n.totalHeight+t.pad.t+t.pad.b,g=e._fullLayout._size;n.lx=g.l+g.w*t.x,n.ly=g.t+g.h*(1-t.y);var v="left";c.isRightAnchor(t)&&(n.lx-=p,v="right"),c.isCenterAnchor(t)&&(n.lx-=p/2,v="center");var m="top";c.isBottomAnchor(t)&&(n.ly-=h,m="bottom"),c.isMiddleAnchor(t)&&(n.ly-=h/2,m="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),i.autoMargin(e,C(t),{x:t.x,y:t.y,l:p*({right:1,center:.5}[v]||0),r:p*({left:1,center:.5}[v]||0),b:h*({top:1,middle:.5}[m]||0),t:h*({bottom:1,middle:.5}[m]||0)})}function C(e){return f.autoMarginIdRoot+e._index}function S(e,t,n,r){r=r||{};var i=e.select("."+f.itemRectClassName),o=e.select("."+f.itemTextClassName),s=t.borderwidth,c=n.index,u=t._dims;a.setTranslate(e,s+n.x,s+n.y);var p=-1!==["up","down"].indexOf(t.direction),h=r.height||(p?u.heights[c]:u.height1);i.attr({x:0,y:0,width:r.width||(p?u.width1:u.widths[c]),height:h});var g=t.font.size*d,v=(l.lineCount(o)-1)*g/2;l.positionText(o,f.textOffsetX,h/2-v+f.textOffsetY),p?n.y+=u.heights[c]+n.yPad:n.x+=u.widths[c]+n.xPad,n.index++}function M(e,t){e.attr(f.menuIndexAttrName,t||"-1").selectAll("g."+f.dropdownButtonClassName).remove()}t.exports=function(e){var t=e._fullLayout,n=s.filterVisible(t[f.name]);function o(t){i.autoMargin(e,C(t))}var a=t._menulayer.selectAll("g."+f.containerClassName).data(n.length>0?[0]:[]);if(a.enter().append("g").classed(f.containerClassName,!0).style("cursor","pointer"),a.exit().each(function(){r.select(this).selectAll("g."+f.headerGroupClassName).each(o)}).remove(),0!==n.length){var l=a.selectAll("g."+f.headerGroupClassName).data(n,h);l.enter().append("g").classed(f.headerGroupClassName,!0);for(var c=s.ensureSingle(a,"g",f.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")}),u=0;u<n.length;u++){var d=n[u];A(e,d)}var y="updatemenus"+t._uid,x=new p(e,c,y);l.enter().size()&&(c.node().parentNode.appendChild(c.node()),c.call(M)),l.exit().each(function(e){c.call(M),o(e)}).remove(),l.each(function(t){var n=r.select(this),o="dropdown"===t.type?c:null;i.manageCommandObserver(e,t,t.buttons,function(r){v(e,t,t.buttons[r.index],n,o,x,r.index,!0)}),"dropdown"===t.type?(m(e,n,c,x,t),g(c,t)&&b(e,n,c,x,t)):b(e,n,null,null,t)})}}},{"../../constants/alignment":141,"../../lib":161,"../../lib/svg_text_utils":183,"../../plot_api/plot_template":196,"../../plots/plots":239,"../color":43,"../drawing":68,"../legend/anchor_utils":95,"./constants":136,"./scrollbox":140,d3:8}],139:[function(e,t,n){arguments[4][133][0].apply(n,arguments)},{"./attributes":135,"./constants":136,"./defaults":137,"./draw":138,dup:133}],140:[function(e,t,n){"use strict";t.exports=s;var r=e("d3"),i=e("../color"),o=e("../drawing"),a=e("../../lib");function s(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(e,t,n){var a=this.gd._fullLayout,l=a.width,c=a.height;this.position=e;var u,d,f,p,h=this.position.l,g=this.position.w,v=this.position.t,m=this.position.h,b=this.position.direction,y="down"===b,x="left"===b,_="up"===b,w=g,k=m;y||x||"right"===b||_||(this.position.direction="down",y=!0),y||_?(d=(u=h)+w,y?(f=v,k=(p=Math.min(f+k,c))-f):k=(p=v+k)-(f=Math.max(p-k,0))):(p=(f=v)+k,x?w=(d=h+w)-(u=Math.max(d-w,0)):(u=h,w=(d=Math.min(u+w,l))-u)),this._box={l:u,t:f,w:w,h:k};var T=g>w,A=s.barLength+2*s.barPad,C=s.barWidth+2*s.barPad,S=h,M=v+m;M+C>c&&(M=c-C);var E=this.container.selectAll("rect.scrollbar-horizontal").data(T?[0]:[]);E.exit().on(".drag",null).remove(),E.enter().append("rect").classed("scrollbar-horizontal",!0).call(i.fill,s.barColor),T?(this.hbar=E.attr({rx:s.barRadius,ry:s.barRadius,x:S,y:M,width:A,height:C}),this._hbarXMin=S+A/2,this._hbarTranslateMax=w-A):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var O=m>k,L=s.barWidth+2*s.barPad,P=s.barLength+2*s.barPad,D=h+g,R=v;D+L>l&&(D=l-L);var F=this.container.selectAll("rect.scrollbar-vertical").data(O?[0]:[]);F.exit().on(".drag",null).remove(),F.enter().append("rect").classed("scrollbar-vertical",!0).call(i.fill,s.barColor),O?(this.vbar=F.attr({rx:s.barRadius,ry:s.barRadius,x:D,y:R,width:L,height:P}),this._vbarYMin=R+P/2,this._vbarTranslateMax=k-P):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var j=this.id,I=u-.5,N=O?d+L+.5:d+.5,z=f-.5,q=T?p+C+.5:p+.5,H=a._topdefs.selectAll("#"+j).data(T||O?[0]:[]);if(H.exit().remove(),H.enter().append("clipPath").attr("id",j).append("rect"),T||O?(this._clipRect=H.select("rect").attr({x:Math.floor(I),y:Math.floor(z),width:Math.ceil(N)-Math.floor(I),height:Math.ceil(q)-Math.floor(z)}),this.container.call(o.setClipUrl,j),this.bg.attr({x:h,y:v,width:g,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),T||O){var B=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(B);var V=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault(),r.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));T&&this.hbar.on(".drag",null).call(V),O&&this.vbar.on(".drag",null).call(V)}this.setTranslate(t,n)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=r.event.dx),this.vbar&&(t-=r.event.dy),this.setTranslate(e,t)},s.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=r.event.deltaY),this.vbar&&(t+=r.event.deltaY),this.setTranslate(e,t)},s.prototype._onBarDrag=function(){var e=this.translateX,t=this.translateY;if(this.hbar){var n=e+this._hbarXMin,i=n+this._hbarTranslateMax;e=(a.constrain(r.event.x,n,i)-n)/(i-n)*(this.position.w-this._box.w)}if(this.vbar){var o=t+this._vbarYMin,s=o+this._vbarTranslateMax;t=(a.constrain(r.event.y,o,s)-o)/(s-o)*(this.position.h-this._box.h)}this.setTranslate(e,t)},s.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;if(e=a.constrain(e||0,0,n),t=a.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(o.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar){var i=e/n;this.hbar.call(o.setTranslate,e+i*this._hbarTranslateMax,t)}if(this.vbar){var s=t/r;this.vbar.call(o.setTranslate,e,t+s*this._vbarTranslateMax)}}},{"../../lib":161,"../color":43,"../drawing":68,d3:8}],141:[function(e,t,n){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],142:[function(e,t,n){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],143:[function(e,t,n){"use strict";t.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"â"}},{}],144:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],145:[function(e,t,n){"use strict";n.version="1.42.0",e("es6-promise").polyfill(),e("../build/plotcss"),e("./fonts/mathjax_config");for(var r=e("./registry"),i=n.register=r.register,o=e("./plot_api"),a=Object.keys(o),s=0;s<a.length;s++){var l=a[s];n[l]=o[l],i({moduleType:"apiMethod",name:l,fn:o[l]})}i(e("./traces/scatter")),i([e("./components/fx"),e("./components/legend"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars")]),i([e("./locale-en"),e("./locale-en-us")]),n.Icons=e("../build/ploticon"),n.Plots=e("./plots/plots"),n.Fx=e("./components/fx"),n.Snapshot=e("./snapshot"),n.PlotSchema=e("./plot_api/plot_schema"),n.Queue=e("./lib/queue"),n.d3=e("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":36,"./components/annotations3d":41,"./components/errorbars":74,"./components/fx":85,"./components/grid":89,"./components/images":94,"./components/legend":103,"./components/rangeselector":114,"./components/rangeslider":120,"./components/shapes":128,"./components/sliders":133,"./components/updatemenus":139,"./fonts/mathjax_config":146,"./lib/queue":176,"./locale-en":187,"./locale-en-us":186,"./plot_api":191,"./plot_api/plot_schema":195,"./plots/plots":239,"./registry":246,"./snapshot":251,"./traces/scatter":295,d3:8,"es6-promise":9}],146:[function(e,t,n){"use strict";"undefined"!=typeof MathJax?(n.MathJax=!0,"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())):n.MathJax=!1},{}],147:[function(e,t,n){"use strict";var r=e("./mod"),i=r.mod,o=r.modHalf,a=Math.PI,s=2*a;function l(e){return Math.abs(e[1]-e[0])>s-1e-15}function c(e,t){return o(t-e,s)}function u(e,t){if(l(t))return!0;var n,r;t[0]<t[1]?(n=t[0],r=t[1]):(n=t[1],r=t[0]),(n=i(n,s))>(r=i(r,s))&&(r+=s);var o=i(e,s),a=o+s;return o>=n&&o<=r||a>=n&&a<=r}function d(e,t,n,r,i,o,c){i=i||0,o=o||0;var u,d,f,p,h,g=l([n,r]);function v(e,t){return[e*Math.cos(t)+i,o-e*Math.sin(t)]}g?(u=0,d=a,f=s):n<r?(u=n,f=r):(u=r,f=n),e<t?(p=e,h=t):(p=t,h=e);var m,b=Math.abs(f-u)<=a?0:1;function y(e,t,n){return"A"+[e,e]+" "+[0,b,n]+" "+v(e,t)}return g?m=null===p?"M"+v(h,u)+y(h,d,0)+y(h,f,0)+"Z":"M"+v(p,u)+y(p,d,0)+y(p,f,0)+"ZM"+v(h,u)+y(h,d,1)+y(h,f,1)+"Z":null===p?(m="M"+v(h,u)+y(h,f,0),c&&(m+="L0,0Z")):m="M"+v(p,u)+"L"+v(h,u)+y(h,f,0)+"L"+v(p,f)+y(p,u,1)+"Z",m}t.exports={deg2rad:function(e){return e/180*a},rad2deg:function(e){return e/a*180},angleDelta:c,angleDist:function(e,t){return Math.abs(c(e,t))},isFullCircle:l,isAngleInsideSector:u,isPtInsideSector:function(e,t,n,r){return!!u(t,r)&&(n[0]<n[1]?(i=n[0],o=n[1]):(i=n[1],o=n[0]),e>=i&&e<=o);var i,o},pathArc:function(e,t,n,r,i){return d(null,e,t,n,r,i,0)},pathSector:function(e,t,n,r,i){return d(null,e,t,n,r,i,1)},pathAnnulus:function(e,t,n,r,i,o){return d(e,t,n,r,i,o,1)}}},{"./mod":169}],148:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../constants/numerical").BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(e){return"string"==typeof e&&(e=e.replace(o,"")),r(e)?Number(e):i}},{"../constants/numerical":143,"fast-isnumeric":10}],149:[function(e,t,n){"use strict";t.exports=function(e){var t=e._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0,depth:!0})})}},{}],150:[function(e,t,n){"use strict";t.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},{}],151:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("tinycolor2"),o=e("../plots/attributes"),a=e("../components/colorscale/get_scale"),s=(Object.keys(e("../components/colorscale/scales")),e("./nested_property")),l=e("./regex").counter,c=e("../constants/interactions").DESELECTDIM,u=e("./mod").modHalf,d=e("./is_array").isArrayOrTypedArray;function f(e,t){var r=n.valObjectMeta[t.valType];if(t.arrayOk&&d(e))return!0;if(r.validateFunction)return r.validateFunction(e,t);var i={},o=i,a={set:function(e){o=e}};return r.coerceFunction(e,a,i,t),o!==i}n.valObjectMeta={data_array:{coerceFunction:function(e,t,n){d(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,i){!r(e)||void 0!==i.min&&e<i.min||void 0!==i.max&&e>i.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,i){e%1||!r(e)||void 0!==i.min&&e<i.min||void 0!==i.max&&e>i.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){if("string"!=typeof e){var i="number"==typeof e;!0!==r.strict&&i?t.set(String(e)):t.set(n)}else r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){i(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every(function(e){return i(e).isValid()})?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(a(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):r(e)?t.set(u(+e,360)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n,r){var i=r.regex||l(n);"string"==typeof e&&i.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){var n=t.dflt;return e===n||"string"==typeof e&&!!l(n).test(e)}},flaglist:{coerceFunction:function(e,t,n,r){if("string"==typeof e)if(-1===(r.extras||[]).indexOf(e)){for(var i=e.split("+"),o=0;o<i.length;){var a=i[o];-1===r.flags.indexOf(a)||i.indexOf(a)<o?i.splice(o,1):o++}i.length?t.set(i.join("+")):t.set(n)}else t.set(e);else t.set(n)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,r,i){function o(e,t,r){var i,o={set:function(e){i=e}};return void 0===r&&(r=t.dflt),n.valObjectMeta[t.valType].coerceFunction(e,o,r,t),i}var a=2===i.dimensions||"1-2"===i.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){var s,l,c,u,d,f,p=i.items,h=[],g=Array.isArray(p),v=g&&a&&Array.isArray(p[0]),m=a&&g&&!v,b=g&&!m?p.length:e.length;if(r=Array.isArray(r)?r:[],a)for(s=0;s<b;s++)for(h[s]=[],c=Array.isArray(e[s])?e[s]:[],d=m?p.length:g?p[s].length:c.length,l=0;l<d;l++)u=m?p[l]:g?p[s][l]:p,void 0!==(f=o(c[l],u,(r[s]||[])[l]))&&(h[s][l]=f);else for(s=0;s<b;s++)void 0!==(f=o(e[s],g?p[s]:p,r[s]))&&(h[s]=f);t.set(h)}else t.set(r)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),i=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var o=0;o<e.length;o++)if(i){if(!Array.isArray(e[o])||!t.freeLength&&e[o].length!==n[o].length)return!1;for(var a=0;a<e[o].length;a++)if(!f(e[o][a],r?n[o][a]:n))return!1}else if(!f(e[o],r?n[o]:n))return!1;return!0}}},n.coerce=function(e,t,r,i,o){var a=s(r,i).get(),l=s(e,i),c=s(t,i),u=l.get(),p=t._template;if(void 0===u&&p&&(u=s(p,i).get(),p=0),void 0===o&&(o=a.dflt),a.arrayOk&&d(u))return c.set(u),u;var h=n.valObjectMeta[a.valType].coerceFunction;h(u,c,o,a);var g=c.get();return p&&g===o&&!f(u,a)&&(h(u=s(p,i).get(),c,o,a),g=c.get()),g},n.coerce2=function(e,t,r,i,o){var a=s(e,i),l=n.coerce(e,t,r,i,o),c=a.get();return void 0!==c&&null!==c&&l},n.coerceFont=function(e,t,n){var r={};return n=n||{},r.family=e(t+".family",n.family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},n.coerceHoverinfo=function(e,t,r){var i,a=t._module.attributes,s=a.hoverinfo?a:o,l=s.hoverinfo;if(1===r._dataLength){var c="all"===l.dflt?l.flags.slice():l.dflt.split("+");c.splice(c.indexOf("name"),1),i=c.join("+")}return n.coerce(e,t,s,"hoverinfo",i)},n.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var n,r,i=e.marker.opacity;if(void 0!==i)d(i)||e.selected||e.unselected||(n=i,r=c*i),t("selected.marker.opacity",n),t("unselected.marker.opacity",r)}},n.validate=f},{"../components/colorscale/get_scale":56,"../components/colorscale/scales":62,"../constants/interactions":142,"../plots/attributes":203,"./is_array":162,"./mod":169,"./nested_property":170,"./regex":177,"fast-isnumeric":10,tinycolor2:26}],152:[function(e,t,n){"use strict";var r,i,o=e("d3"),a=e("fast-isnumeric"),s=e("./loggers"),l=e("./mod").mod,c=e("../constants/numerical"),u=c.BADNUM,d=c.ONEDAY,f=c.ONEHOUR,p=c.ONEMIN,h=c.ONESEC,g=c.EPOCHJD,v=e("../registry"),m=o.time.format.utc,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,x=(new Date).getFullYear()-70;function _(e){return e&&v.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function w(e,t){return String(e+Math.pow(10,t)).substr(1)}n.dateTick0=function(e,t){return _(e)?t?v.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:v.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"},n.dfltRange=function(e){return _(e)?v.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},n.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},n.dateTime2ms=function(e,t){if(n.isJSDate(e)){var o=e.getTimezoneOffset()*p,a=(e.getUTCMinutes()-e.getMinutes())*p+(e.getUTCSeconds()-e.getSeconds())*h+(e.getUTCMilliseconds()-e.getMilliseconds());if(a){var s=3*p;o=o-s/2+l(a-o+s/2,s)}return(e=Number(e)-o)>=r&&e<=i?e:u}if("string"!=typeof e&&"number"!=typeof e)return u;e=String(e);var c=_(t),m=e.charAt(0);!c||"G"!==m&&"g"!==m||(e=e.substr(1),t="");var w=c&&"chinese"===t.substr(0,7),k=e.match(w?y:b);if(!k)return u;var T=k[1],A=k[3]||"1",C=Number(k[5]||1),S=Number(k[7]||0),M=Number(k[9]||0),E=Number(k[11]||0);if(c){if(2===T.length)return u;var O;T=Number(T);try{var L=v.getComponentMethod("calendars","getCal")(t);if(w){var P="i"===A.charAt(A.length-1);A=parseInt(A,10),O=L.newDate(T,L.toMonthIndex(T,A,P),C)}else O=L.newDate(T,Number(A),C)}catch(e){return u}return O?(O.toJD()-g)*d+S*f+M*p+E*h:u}T=2===T.length?(Number(T)+2e3-x)%100+x:Number(T),A-=1;var D=new Date(Date.UTC(2e3,A,C,S,M));return D.setUTCFullYear(T),D.getUTCMonth()!==A?u:D.getUTCDate()!==C?u:D.getTime()+E*h},r=n.MIN_MS=n.dateTime2ms("-9999"),i=n.MAX_MS=n.dateTime2ms("9999-12-31 23:59:59.9999"),n.isDateTime=function(e,t){return n.dateTime2ms(e,t)!==u};var k=90*d,T=3*f,A=5*p;function C(e,t,n,r,i){if((t||n||r||i)&&(e+=" "+w(t,2)+":"+w(n,2),(r||i)&&(e+=":"+w(r,2),i))){for(var o=4;i%10==0;)o-=1,i/=10;e+="."+w(i,o)}return e}n.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(e>=r&&e<=i))return u;t||(t=0);var o,a,s,c,b,y,x=Math.floor(10*l(e+.05,1)),w=Math.round(e-x/10);if(_(n)){var S=Math.floor(w/d)+g,M=Math.floor(l(e,d));try{o=v.getComponentMethod("calendars","getCal")(n).fromJD(S).formatDate("yyyy-mm-dd")}catch(e){o=m("G%Y-%m-%d")(new Date(w))}if("-"===o.charAt(0))for(;o.length<11;)o="-0"+o.substr(1);else for(;o.length<10;)o="0"+o;a=t<k?Math.floor(M/f):0,s=t<k?Math.floor(M%f/p):0,c=t<T?Math.floor(M%p/h):0,b=t<A?M%h*10+x:0}else y=new Date(w),o=m("%Y-%m-%d")(y),a=t<k?y.getUTCHours():0,s=t<k?y.getUTCMinutes():0,c=t<T?y.getUTCSeconds():0,b=t<A?10*y.getUTCMilliseconds()+x:0;return C(o,a,s,c,b)},n.ms2DateTimeLocal=function(e){if(!(e>=r+d&&e<=i-d))return u;var t=Math.floor(10*l(e+.05,1)),n=new Date(Math.round(e-t/10));return C(o.time.format("%Y-%m-%d")(n),n.getHours(),n.getMinutes(),n.getSeconds(),10*n.getUTCMilliseconds()+t)},n.cleanDate=function(e,t,r){if(e===u)return t;if(n.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(_(r))return s.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(!(e=n.ms2DateTimeLocal(+e))&&void 0!==t)return t}else if(!n.isDateTime(e,r))return s.error("unrecognized date",e),t;return e};var S=/%\d?f/g;function M(e,t,n,r){e=e.replace(S,function(e){var n=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0"});var i=new Date(Math.floor(t+.05));if(_(r))try{e=v.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(i)}var E=[59,59.9,59.99,59.999,59.9999];n.formatDate=function(e,t,n,r,i,o){if(i=_(i)&&i,!t)if("y"===n)t=o.year;else if("m"===n)t=o.month;else{if("d"!==n)return function(e,t){var n=l(e+.05,d),r=w(Math.floor(n/f),2)+":"+w(l(Math.floor(n/p),60),2);if("M"!==t){a(t)||(t=0);var i=(100+Math.min(l(e/h,60),E[t])).toFixed(t).substr(1);t>0&&(i=i.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+i}return r}(e,n)+"\n"+M(o.dayMonthYear,e,r,i);t=o.dayMonth+"\n"+o.year}return M(t,e,r,i)};var O=3*d;n.incrementMonth=function(e,t,n){n=_(n)&&n;var r=l(e,d);if(e=Math.round(e-r),n)try{var i=Math.round(e/d)+g,o=v.getComponentMethod("calendars","getCal")(n),a=o.fromJD(i);return t%12?o.add(a,t,"m"):o.add(a,t/12,"y"),(a.toJD()-g)*d+r}catch(t){s.error("invalid ms "+e+" in calendar "+n)}var c=new Date(e+O);return c.setUTCMonth(c.getUTCMonth()+t)+r-O},n.findExactDates=function(e,t){for(var n,r,i=0,o=0,s=0,l=0,c=_(t)&&v.getComponentMethod("calendars","getCal")(t),u=0;u<e.length;u++)if(r=e[u],a(r)){if(!(r%d))if(c)try{1===(n=c.fromJD(r/d+g)).day()?1===n.month()?i++:o++:s++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?i++:o++:s++}else l++;s+=o+=i;var f=e.length-l;return{exactYears:i/f,exactMonths:o/f,exactDays:s/f}}},{"../constants/numerical":143,"../registry":246,"./loggers":166,"./mod":169,d3:8,"fast-isnumeric":10}],153:[function(e,t,n){"use strict";t.exports=function(e,t){return Array.isArray(e)||(e=[]),e.length=t,e}},{}],154:[function(e,t,r){"use strict";var i=e("events").EventEmitter,o={init:function(e){if(e._ev instanceof i)return e;var t=new i,r=new i;return e._ev=t,e._internalEv=r,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=r.on.bind(r),e._internalOnce=r.once.bind(r),e._removeInternalListener=r.removeListener.bind(r),e._removeAllInternalListeners=r.removeAllListeners.bind(r),e.emit=function(i,o){void 0!==n&&n(e).trigger(i,o),t.emit(i,o),r.emit(i,o)},e},triggerHandler:function(e,t,r){var i,o;void 0!==n&&(i=n(e).triggerHandler(t,r));var a=e._ev;if(!a)return i;var s,l=a._events[t];if(!l)return i;function c(e){return e.listener?(a.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(a,[r]))):e.apply(a,[r])}for(l=Array.isArray(l)?l:[l],s=0;s<l.length-1;s++)c(l[s]);return o=c(l[s]),void 0!==i?i:o},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};t.exports=o},{events:7}],155:[function(e,t,n){"use strict";var r=e("./is_plain_object.js"),i=Array.isArray;function o(e,t,n,a){var s,l,c,u,d,f,p=e[0],h=e.length;if(2===h&&i(p)&&i(e[1])&&0===p.length){if(function(e,t){var n,r;for(n=0;n<e.length;n++){if(null!==(r=e[n])&&"object"==typeof r)return!1;void 0!==r&&(t[n]=r)}return!0}(e[1],p))return p;p.splice(0,p.length)}for(var g=1;g<h;g++)for(l in s=e[g])c=p[l],u=s[l],a&&i(u)?p[l]=u:t&&u&&(r(u)||(d=i(u)))?(d?(d=!1,f=c&&i(c)?c:[]):f=c&&r(c)?c:{},p[l]=o([f,u],t,n,a)):(void 0!==u||n)&&(p[l]=u);return p}n.extendFlat=function(){return o(arguments,!1,!1,!1)},n.extendDeep=function(){return o(arguments,!0,!1,!1)},n.extendDeepAll=function(){return o(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},{"./is_plain_object.js":163}],156:[function(e,t,n){"use strict";t.exports=function(e){for(var t={},n=[],r=0,i=0;i<e.length;i++){var o=e[i];1!==t[o]&&(t[o]=1,n[r++]=o)}return n}},{}],157:[function(e,t,n){"use strict";function r(e){return!0===e.visible}function i(e){return!0===e[0].trace.visible}t.exports=function(e){for(var t=function(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}(e)?i:r,n=[],o=0;o<e.length;o++){var a=e[o];t(a)&&n.push(a)}return n}},{}],158:[function(e,t,n){"use strict";var r,i,o,a=e("./mod").mod;function s(e,t,n,r,i,o,a,s){var l=n-e,c=i-e,u=a-i,d=r-t,f=o-t,p=s-o,h=l*p-u*d;if(0===h)return null;var g=(c*p-u*f)/h,v=(c*d-l*f)/h;return v<0||v>1||g<0||g>1?null:{x:e+l*g,y:t+d*g}}function l(e,t,n,r,i){var o=r*e+i*t;if(o<0)return r*r+i*i;if(o>n){var a=r-e,s=i-t;return a*a+s*s}var l=r*t-i*e;return l*l/n}n.segmentsIntersect=s,n.segmentDistance=function(e,t,n,r,i,o,a,c){if(s(e,t,n,r,i,o,a,c))return 0;var u=n-e,d=r-t,f=a-i,p=c-o,h=u*u+d*d,g=f*f+p*p,v=Math.min(l(u,d,h,i-e,o-t),l(u,d,h,a-e,c-t),l(f,p,g,e-i,t-o),l(f,p,g,n-i,r-o));return Math.sqrt(v)},n.getTextLocation=function(e,t,n,s){if(e===i&&s===o||(r={},i=e,o=s),r[n])return r[n];var l=e.getPointAtLength(a(n-s/2,t)),c=e.getPointAtLength(a(n+s/2,t)),u=Math.atan((c.y-l.y)/(c.x-l.x)),d=e.getPointAtLength(a(n,t)),f={x:(4*d.x+l.x+c.x)/6,y:(4*d.y+l.y+c.y)/6,theta:u};return r[n]=f,f},n.clearLocationCache=function(){i=null},n.getVisibleSegment=function(e,t,n){var r,i,o=t.left,a=t.right,s=t.top,l=t.bottom,c=0,u=e.getTotalLength(),d=u;function f(t){var n=e.getPointAtLength(t);0===t?r=n:t===u&&(i=n);var c=n.x<o?o-n.x:n.x>a?n.x-a:0,d=n.y<s?s-n.y:n.y>l?n.y-l:0;return Math.sqrt(c*c+d*d)}for(var p=f(c);p;){if((c+=p+n)>d)return;p=f(c)}for(p=f(d);p;){if(c>(d-=p+n))return;p=f(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},n.findPointOnPath=function(e,t,n,r){for(var i,o,a,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,d=0,f=0,p=s;d<c;){if(i=(f+p)/2,a=(o=e.getPointAtLength(i))[n]-t,Math.abs(a)<l)return o;u*a>0?p=i:f=i,d++}return o}},{"./mod":169}],159:[function(e,t,n){"use strict";t.exports=function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null===e||void 0===e)throw new Error("DOM element provided is null or undefined");return e}},{}],160:[function(e,t,n){"use strict";t.exports=function(e){return e}},{}],161:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("../constants/numerical"),a=o.FP_SAFE,s=o.BADNUM,l=t.exports={};l.nestedProperty=e("./nested_property"),l.keyedContainer=e("./keyed_container"),l.relativeAttr=e("./relative_attr"),l.isPlainObject=e("./is_plain_object"),l.toLogRange=e("./to_log_range"),l.relinkPrivateKeys=e("./relink_private"),l.ensureArray=e("./ensure_array");var c=e("./mod");l.mod=c.mod,l.modHalf=c.modHalf;var u=e("./is_array");l.isTypedArray=u.isTypedArray,l.isArrayOrTypedArray=u.isArrayOrTypedArray,l.isArray1D=u.isArray1D;var d=e("./coerce");l.valObjectMeta=d.valObjectMeta,l.coerce=d.coerce,l.coerce2=d.coerce2,l.coerceFont=d.coerceFont,l.coerceHoverinfo=d.coerceHoverinfo,l.coerceSelectionMarkerOpacity=d.coerceSelectionMarkerOpacity,l.validate=d.validate;var f=e("./dates");l.dateTime2ms=f.dateTime2ms,l.isDateTime=f.isDateTime,l.ms2DateTime=f.ms2DateTime,l.ms2DateTimeLocal=f.ms2DateTimeLocal,l.cleanDate=f.cleanDate,l.isJSDate=f.isJSDate,l.formatDate=f.formatDate,l.incrementMonth=f.incrementMonth,l.dateTick0=f.dateTick0,l.dfltRange=f.dfltRange,l.findExactDates=f.findExactDates,l.MIN_MS=f.MIN_MS,l.MAX_MS=f.MAX_MS;var p=e("./search");l.findBin=p.findBin,l.sorterAsc=p.sorterAsc,l.sorterDes=p.sorterDes,l.distinctVals=p.distinctVals,l.roundUp=p.roundUp,l.sort=p.sort,l.findIndexOfMin=p.findIndexOfMin;var h=e("./stats");l.aggNums=h.aggNums,l.len=h.len,l.mean=h.mean,l.midRange=h.midRange,l.variance=h.variance,l.stdev=h.stdev,l.interp=h.interp;var g=e("./matrix");l.init2dArray=g.init2dArray,l.transposeRagged=g.transposeRagged,l.dot=g.dot,l.translationMatrix=g.translationMatrix,l.rotationMatrix=g.rotationMatrix,l.rotationXYMatrix=g.rotationXYMatrix,l.apply2DTransform=g.apply2DTransform,l.apply2DTransform2=g.apply2DTransform2;var v=e("./angles");l.deg2rad=v.deg2rad,l.rad2deg=v.rad2deg,l.angleDelta=v.angleDelta,l.angleDist=v.angleDist,l.isFullCircle=v.isFullCircle,l.isAngleInsideSector=v.isAngleInsideSector,l.isPtInsideSector=v.isPtInsideSector,l.pathArc=v.pathArc,l.pathSector=v.pathSector,l.pathAnnulus=v.pathAnnulus;var m=e("./geometry2d");l.segmentsIntersect=m.segmentsIntersect,l.segmentDistance=m.segmentDistance,l.getTextLocation=m.getTextLocation,l.clearLocationCache=m.clearLocationCache,l.getVisibleSegment=m.getVisibleSegment,l.findPointOnPath=m.findPointOnPath;var b=e("./extend");l.extendFlat=b.extendFlat,l.extendDeep=b.extendDeep,l.extendDeepAll=b.extendDeepAll,l.extendDeepNoArrays=b.extendDeepNoArrays;var y=e("./loggers");l.log=y.log,l.warn=y.warn,l.error=y.error;var x=e("./regex");l.counterRegex=x.counter;var _=e("./throttle");function w(e){var t={};for(var n in e)for(var r=e[n],i=0;i<r.length;i++)t[r[i]]=+n;return t}l.throttle=_.throttle,l.throttleDone=_.done,l.clearThrottle=_.clear,l.getGraphDiv=e("./get_graph_div"),l.clearResponsive=e("./clear_responsive"),l.makeTraceGroups=e("./make_trace_groups"),l._=e("./localize"),l.notifier=e("./notifier"),l.filterUnique=e("./filter_unique"),l.filterVisible=e("./filter_visible"),l.pushUnique=e("./push_unique"),l.cleanNumber=e("./clean_number"),l.ensureNumber=function(e){return i(e)?(e=Number(e))<-a||e>a?s:i(e)?Number(e):s:s},l.isIndex=function(e,t){return!(void 0!==t&&e>=t)&&(i(e)&&e>=0&&e%1==0)},l.noop=e("./noop"),l.identity=e("./identity"),l.repeat=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},l.swapAttrs=function(e,t,n,r){n||(n="x"),r||(r="y");for(var i=0;i<t.length;i++){var o=t[i],a=l.nestedProperty(e,o.replace("?",n)),s=l.nestedProperty(e,o.replace("?",r)),c=a.get();a.set(s.get()),s.set(c)}},l.raiseToTop=function(e){e.parentNode.appendChild(e)},l.cancelTransition=function(e){return e.transition().duration(0)},l.constrain=function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},l.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},l.simpleMap=function(e,t,n,r){for(var i=e.length,o=new Array(i),a=0;a<i;a++)o[a]=t(e[a],n,r);return o},l.randstr=function e(t,n,r,i){if(r||(r=16),void 0===n&&(n=24),n<=0)return"0";var o,a,s=Math.log(Math.pow(2,n))/Math.log(r),c="";for(o=2;s===1/0;o*=2)s=Math.log(Math.pow(2,n/o))/Math.log(r)*o;var u=s-Math.floor(s);for(o=0;o<Math.floor(s);o++)c=Math.floor(Math.random()*r).toString(r)+c;u&&(a=Math.pow(r,u),c=Math.floor(Math.random()*a).toString(r)+c);var d=parseInt(c,r);return t&&t[c]||d!==1/0&&d>=Math.pow(2,n)?i>10?(l.warn("randstr failed uniqueness"),c):e(t,n,r,(i||0)+1):c},l.OptionControl=function(e,t){e||(e={}),t||(t="opt");var n={optionList:[],_newoption:function(r){r[t]=e,n[r.name]=r,n.optionList.push(r)}};return n["_"+t]=e,n},l.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;var n,r,i,o,a=e.length,s=2*a,l=2*t-1,c=new Array(l),u=new Array(a);for(n=0;n<l;n++)c[n]=(1-Math.cos(Math.PI*(n+1)/t))/(2*t);for(n=0;n<a;n++){for(o=0,r=0;r<l;r++)(i=n+r+1-t)<-a?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=a&&(i=s-1-i),o+=e[i]*c[r];u[n]=o}return u},l.syncOrAsync=function(e,t,n){var r;function i(){return l.syncOrAsync(e,t,n)}for(;e.length;)if((r=(0,e.splice(0,1)[0])(t))&&r.then)return r.then(i).then(void 0,l.promiseError);return n&&n(t)},l.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},l.noneOrAll=function(e,t,n){if(e){var r,i,o=!1,a=!0;for(r=0;r<n.length;r++)void 0!==(i=e[n[r]])&&null!==i?o=!0:a=!1;if(o&&!a)for(r=0;r<n.length;r++)e[n[r]]=t[n[r]]}},l.mergeArray=function(e,t,n){if(l.isArrayOrTypedArray(e))for(var r=Math.min(e.length,t.length),i=0;i<r;i++)t[i][n]=e[i]},l.fillArray=function(e,t,n,r){if(r=r||l.identity,l.isArrayOrTypedArray(e))for(var i=0;i<t.length;i++)t[i][n]=r(e[i])},l.castOption=function(e,t,n,r){r=r||l.identity;var i=l.nestedProperty(e,n).get();return l.isArrayOrTypedArray(i)?Array.isArray(t)&&l.isArrayOrTypedArray(i[t[0]])?r(i[t[0]][t[1]]):r(i[t]):i},l.extractOption=function(e,t,n,r){if(n in e)return e[n];var i=l.nestedProperty(t,r).get();return Array.isArray(i)?void 0:i},l.tagSelected=function(e,t,n){var r,i=t.selectedpoints,o=t._indexToPoints;function a(t){return void 0!==t&&t<e.length}o&&(r=w(o));for(var s=0;s<i.length;s++){var c=i[s];if(l.isIndex(c)){var u=r?r[c]:c,d=n?n[u]:u;a(d)&&(e[d].selected=1)}}},l.selIndices2selPoints=function(e){var t=e.selectedpoints,n=e._indexToPoints;if(n){for(var r=w(n),i=[],o=0;o<t.length;o++){var a=t[o];if(l.isIndex(a)){var s=r[a];l.isIndex(s)&&i.push(s)}}return i}return t},l.getTargetArray=function(e,t){var n=t.target;if("string"==typeof n&&n){var r=l.nestedProperty(e,n).get();return!!Array.isArray(r)&&r}return!!Array.isArray(n)&&n},l.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});var r,i,o,a=Object.keys(e);for(r=0;r<a.length;r++)o=e[i=a[r]],"_"!==i.charAt(0)&&"function"!=typeof o&&("module"===i?n[i]=o:Array.isArray(o)?n[i]=o.slice(0,3):n[i]=o&&"object"==typeof o?l.minExtend(e[i],t[i]):o);for(a=Object.keys(t),r=0;r<a.length;r++)"object"==typeof(o=t[i=a[r]])&&i in n&&"object"==typeof n[i]||(n[i]=o);return n},l.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},l.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},l.isPlotDiv=function(e){var t=r.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")},l.removeElement=function(e){var t=e&&e.parentNode;t&&t.removeChild(e)},l.addStyleRule=function(e,t){l.addRelatedStyleRule("global",e,t)},l.addRelatedStyleRule=function(e,t,n){var r="plotly.js-style-"+e,i=document.getElementById(r);i||((i=document.createElement("style")).setAttribute("id",r),i.appendChild(document.createTextNode("")),document.head.appendChild(i));var o=i.sheet;o.insertRule?o.insertRule(t+"{"+n+"}",0):o.addRule?o.addRule(t,n,0):l.warn("addStyleRule failed")},l.deleteRelatedStyleRule=function(e){var t="plotly.js-style-"+e,n=document.getElementById(t);n&&n.remove()},l.isIE=function(){return void 0!==window.navigator.msSaveBlob},l.isD3Selection=function(e){return e&&"function"==typeof e.classed},l.ensureSingle=function(e,t,n,r){var i=e.select(t+(n?"."+n:""));if(i.size())return i;var o=e.append(t);return n&&o.classed(n,!0),r&&o.call(r),o},l.ensureSingleById=function(e,t,n,r){var i=e.select(t+"#"+n);if(i.size())return i;var o=e.append(t).attr("id",n);return r&&o.call(r),o},l.objectFromPath=function(e,t){for(var n,r=e.split("."),i=n={},o=0;o<r.length;o++){var a=r[o],s=null,l=r[o].match(/(.*)\[([0-9]+)\]/);l?(a=l[1],s=l[2],n=n[a]=[],o===r.length-1?n[s]=t:n[s]={},n=n[s]):(o===r.length-1?n[a]=t:n[a]={},n=n[a])}return i};var k=/^([^\[\.]+)\.(.+)?/,T=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;l.expandObjectPaths=function(e){var t,n,r,i,o,a,s;if("object"==typeof e&&!Array.isArray(e))for(n in e)e.hasOwnProperty(n)&&((t=n.match(k))?(i=e[n],r=t[1],delete e[n],e[r]=l.extendDeepNoArrays(e[r]||{},l.objectFromPath(n,l.expandObjectPaths(i))[r])):(t=n.match(T))?(i=e[n],r=t[1],o=parseInt(t[2]),delete e[n],e[r]=e[r]||[],"."===t[3]?(s=t[4],a=e[r][o]=e[r][o]||{},l.extendDeepNoArrays(a,l.objectFromPath(s,l.expandObjectPaths(i)))):e[r][o]=l.expandObjectPaths(i)):e[n]=l.expandObjectPaths(e[n]));return e},l.numSeparate=function(e,t,n){if(n||(n=!1),"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,i=t.charAt(0),o=t.charAt(1),a=e.split("."),s=a[0],l=a.length>1?i+a[1]:"";if(o&&(a.length>1||s.length>4||n))for(;r.test(s);)s=s.replace(r,"$1"+o+"$2");return s+l};var A=/%{([^\s%{}]*)}/g,C=/^\w*$/;l.templateString=function(e,t){var n={};return e.replace(A,function(e,r){return C.test(r)?t[r]||"":(n[r]=n[r]||l.nestedProperty(t,r).get,n[r]()||"")})};l.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,i=0,o=0;o<n;o++){var a=e.charCodeAt(o)||0,s=t.charCodeAt(o)||0,l=a>=48&&a<=57,c=s>=48&&s<=57;if(l&&(r=10*r+a-48),c&&(i=10*i+s-48),!l||!c){if(r!==i)return r-i;if(a!==s)return a-s}}return i-r};var S=2e9;l.seedPseudoRandom=function(){S=2e9},l.pseudoRandom=function(){var e=S;return S=(69069*S+1)%4294967296,Math.abs(S-e)<429496729?l.pseudoRandom():S/4294967296}},{"../constants/numerical":143,"./angles":147,"./clean_number":148,"./clear_responsive":150,"./coerce":151,"./dates":152,"./ensure_array":153,"./extend":155,"./filter_unique":156,"./filter_visible":157,"./geometry2d":158,"./get_graph_div":159,"./identity":160,"./is_array":162,"./is_plain_object":163,"./keyed_container":164,"./localize":165,"./loggers":166,"./make_trace_groups":167,"./matrix":168,"./mod":169,"./nested_property":170,"./noop":171,"./notifier":172,"./push_unique":175,"./regex":177,"./relative_attr":178,"./relink_private":179,"./search":180,"./stats":182,"./throttle":184,"./to_log_range":185,d3:8,"fast-isnumeric":10}],162:[function(e,t,n){"use strict";var r="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},i="undefined"==typeof DataView?function(){}:DataView;function o(e){return r.isView(e)&&!(e instanceof i)}function a(e){return Array.isArray(e)||o(e)}t.exports={isTypedArray:o,isArrayOrTypedArray:a,isArray1D:function(e){return!a(e[0])}}},{}],163:[function(e,t,n){"use strict";t.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e)===Object.prototype}},{}],164:[function(e,t,n){"use strict";var r=e("./nested_property"),i=/^\w*$/;t.exports=function(e,t,n,o){var a,s,l;n=n||"name",o=o||"value";var c={};t&&t.length?(l=r(e,t),s=l.get()):s=e,t=t||"";var u={};if(s)for(a=0;a<s.length;a++)u[s[a][n]]=a;var d=i.test(o),f={set:function(e,t){var i=null===t?4:0;if(!s){if(!l||4===i)return;s=[],l.set(s)}var a=u[e];if(void 0===a){if(4===i)return;i|=3,a=s.length,u[e]=a}else t!==(d?s[a][o]:r(s[a],o).get())&&(i|=2);var p=s[a]=s[a]||{};return p[n]=e,d?p[o]=t:r(p,o).set(t),null!==t&&(i&=-5),c[a]=c[a]|i,f},get:function(e){if(s){var t=u[e];return void 0===t?void 0:d?s[t][o]:r(s[t],o).get()}},rename:function(e,t){var r=u[e];return void 0===r?f:(c[r]=1|c[r],u[t]=r,delete u[e],s[r][n]=t,f)},remove:function(e){var t=u[e];if(void 0===t)return f;var i=s[t];if(Object.keys(i).length>2)return c[t]=2|c[t],f.set(e,null);if(d){for(a=t;a<s.length;a++)c[a]=3|c[a];for(a=t;a<s.length;a++)u[s[a][n]]--;s.splice(t,1),delete u[e]}else r(i,o).set(null),c[t]=6|c[t];return f},constructUpdate:function(){for(var e,i,a={},l=Object.keys(c),u=0;u<l.length;u++)i=l[u],e=t+"["+i+"]",s[i]?(1&c[i]&&(a[e+"."+n]=s[i][n]),2&c[i]&&(a[e+"."+o]=d?4&c[i]?null:s[i][o]:4&c[i]?null:r(s[i],o).get())):a[e]=null;return a}};return f}},{"./nested_property":170}],165:[function(e,t,n){"use strict";var r=e("../registry");t.exports=function(e,t){for(var n=e._context.locale,i=0;i<2;i++){for(var o=e._context.locales,a=0;a<2;a++){var s=(o[n]||{}).dictionary;if(s){var l=s[t];if(l)return l}o=r.localeRegistry}var c=n.split("-")[0];if(c===n)break;n=c}return t}},{"../registry":246}],166:[function(e,t,n){"use strict";var r=e("../plot_api/plot_config"),i=t.exports={};function o(e,t){if(e&&e.apply)try{return void e.apply(console,t)}catch(e){}for(var n=0;n<t.length;n++)try{e(t[n])}catch(e){console.log(t[n])}}i.log=function(){if(r.logging>1){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.trace||console.log,e)}},i.warn=function(){if(r.logging>0){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.trace||console.log,e)}},i.error=function(){if(r.logging>0){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.error,e)}}},{"../plot_api/plot_config":194}],167:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=e.selectAll("g."+n.replace(/\s/g,".")).data(t,function(e){return e[0].trace.uid});return r.exit().remove(),r.enter().append("g").attr("class",n),r.order(),r}},{}],168:[function(e,t,n){"use strict";n.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},n.transposeRagged=function(e){var t,n,r=0,i=e.length;for(t=0;t<i;t++)r=Math.max(r,e[t].length);var o=new Array(r);for(t=0;t<r;t++)for(o[t]=new Array(i),n=0;n<i;n++)o[t][n]=e[n][t];return o},n.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var r,i,o=e.length;if(e[0].length)for(r=new Array(o),i=0;i<o;i++)r[i]=n.dot(e[i],t);else if(t[0].length){var a=n.transposeRagged(t);for(r=new Array(a.length),i=0;i<a.length;i++)r[i]=n.dot(e,a[i])}else for(r=0,i=0;i<o;i++)r+=e[i]*t[i];return r},n.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},n.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},n.rotationXYMatrix=function(e,t,r){return n.dot(n.dot(n.translationMatrix(t,r),n.rotationMatrix(e)),n.translationMatrix(-t,-r))},n.apply2DTransform=function(e){return function(){var t=arguments;3===t.length&&(t=t[0]);var r=1===arguments.length?t[0]:[t[0],t[1]];return n.dot(e,[r[0],r[1],1]).slice(0,2)}},n.apply2DTransform2=function(e){var t=n.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}}},{}],169:[function(e,t,n){"use strict";t.exports={mod:function(e,t){var n=e%t;return n<0?n+t:n},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},{}],170:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("./is_array").isArrayOrTypedArray;t.exports=function(e,t){if(r(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,o,a,l=0,c=t.split(".");l<c.length;){if(n=String(c[l]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])c[l]=n[1];else{if(0!==l)throw"bad property string";c.splice(0,1)}for(o=n[2].substr(1,n[2].length-2).split("]["),a=0;a<o.length;a++)l++,c.splice(l,0,Number(o[a]))}l++}return"object"!=typeof e?function(e,t,n){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:n,obj:e}}(e,t,c):{set:s(e,c,t),get:function e(t,n){return function(){var r,o,a,s,l,c=t;for(s=0;s<n.length-1;s++){if(-1===(r=n[s])){for(o=!0,a=[],l=0;l<c.length;l++)a[l]=e(c[l],n.slice(s+1))(),a[l]!==a[0]&&(o=!1);return o?a[0]:a}if("number"==typeof r&&!i(c))return;if("object"!=typeof(c=c[r])||null===c)return}if("object"==typeof c&&null!==c&&null!==(a=c[n[s]]))return a}}(e,c),astr:t,parts:c,obj:e}};var o=/(^|\.)args\[/;function a(e,t){return void 0===e||null===e&&!t.match(o)}function s(e,t,n){return function(r){var o,s,d=e,f="",p=[[e,f]],h=a(r,n);for(s=0;s<t.length-1;s++){if("number"==typeof(o=t[s])&&!i(d))throw"array index but container is not an array";if(-1===o){if(h=!c(d,t.slice(s+1),r,n))break;return}if(!u(d,o,t[s+1],h))break;if("object"!=typeof(d=d[o])||null===d)throw"container is not an object";f=l(f,o),p.push([d,f])}if(h){if(s===t.length-1&&(delete d[t[s]],Array.isArray(d)&&+t[s]==d.length-1))for(;d.length&&void 0===d[d.length-1];)d.pop()}else d[t[s]]=r}}function l(e,t){var n=t;return r(t)?n="["+t+"]":e&&(n="."+t),e+n}function c(e,t,n,r){var o,l=i(n),c=!0,d=n,f=r.replace("-1",0),p=!l&&a(n,f),h=t[0];for(o=0;o<e.length;o++)f=r.replace("-1",o),l&&(p=a(d=n[o%n.length],f)),p&&(c=!1),u(e,o,h,p)&&s(e[o],t,r.replace("-1",o))(d);return c}function u(e,t,n,r){if(void 0===e[t]){if(r)return!1;e[t]="number"==typeof n?[]:{}}return!0}},{"./is_array":162,"fast-isnumeric":10}],171:[function(e,t,n){"use strict";t.exports=function(){}},{}],172:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=[];t.exports=function(e,t){if(-1===o.indexOf(e)){o.push(e);var n=1e3;i(t)?n=t:"long"===t&&(n=3e3);var a=r.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0),a.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=r.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(s)});for(var i=t.append("p"),o=e.split(/<br\s*\/?>/g),a=0;a<o.length;a++)a&&i.append("br"),i.append("span").text(o[a]);t.transition().duration(700).style("opacity",1).transition().delay(n).call(s)})}function s(e){e.duration(700).style("opacity",0).each("end",function(e){var t=o.indexOf(e);-1!==t&&o.splice(t,1),r.select(this).remove()})}}},{d3:8,"fast-isnumeric":10}],173:[function(e,t,n){"use strict";var r=e("./setcursor"),i="data-savedcursor";t.exports=function(e,t){var n=e.attr(i);if(t){if(!n){for(var o=(e.attr("class")||"").split(" "),a=0;a<o.length;a++){var s=o[a];0===s.indexOf("cursor-")&&e.attr(i,s.substr(7)).classed(s,!1)}e.attr(i)||e.attr(i,"!!")}r(e,t)}else n&&(e.attr(i,null),"!!"===n?r(e):r(e,n))}},{"./setcursor":181}],174:[function(e,t,n){"use strict";var r=e("./matrix").dot,i=e("../constants/numerical").BADNUM,o=t.exports={};o.tester=function(e){var t,n=e.slice(),r=n[0][0],o=r,a=n[0][1],s=a;for(n.push(n[0]),t=1;t<n.length;t++)r=Math.min(r,n[t][0]),o=Math.max(o,n[t][0]),a=Math.min(a,n[t][1]),s=Math.max(s,n[t][1]);var l,c=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(c=!0,l=function(e){return e[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(c=!0,l=function(e){return e[1]===n[0][1]}));var u=!0,d=n[0];for(t=1;t<n.length;t++)if(d[0]!==n[t][0]||d[1]!==n[t][1]){u=!1;break}return{xmin:r,xmax:o,ymin:a,ymax:s,pts:n,contains:c?function(e,t){var n=e[0],c=e[1];return!(n===i||n<r||n>o||c===i||c<a||c>s||t&&l(e))}:function(e,t){var l=e[0],c=e[1];if(l===i||l<r||l>o||c===i||c<a||c>s)return!1;var u,d,f,p,h,g=n.length,v=n[0][0],m=n[0][1],b=0;for(u=1;u<g;u++)if(d=v,f=m,v=n[u][0],m=n[u][1],!(l<(p=Math.min(d,v))||l>Math.max(d,v)||c>Math.max(f,m)))if(c<Math.min(f,m))l!==p&&b++;else{if(c===(h=v===d?c:f+(l-d)*(m-f)/(v-d)))return 1!==u||!t;c<=h&&l!==p&&b++}return b%2==1},isRect:c,degenerate:u}};var a=o.isSegmentBent=function(e,t,n,i){var o,a,s,l=e[t],c=[e[n][0]-l[0],e[n][1]-l[1]],u=r(c,c),d=Math.sqrt(u),f=[-c[1]/d,c[0]/d];for(o=t+1;o<n;o++)if(a=[e[o][0]-l[0],e[o][1]-l[1]],(s=r(a,c))<0||s>u||Math.abs(r(a,f))>i)return!0;return!1};o.filter=function(e,t){var n=[e[0]],r=0,i=0;function o(o){e.push(o);var s=n.length,l=r;n.splice(i+1);for(var c=l+1;c<e.length;c++)(c===e.length-1||a(e,l,c+1,t))&&(n.push(e[c]),n.length<s-2&&(r=c,i=n.length-1),l=c)}e.length>1&&o(e.pop());return{addPt:o,raw:e,filtered:n}}},{"../constants/numerical":143,"./matrix":168}],175:[function(e,t,n){"use strict";t.exports=function(e,t){if(t instanceof RegExp){var n,r=t.toString();for(n=0;n<e.length;n++)if(e[n]instanceof RegExp&&e[n].toString()===r)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},{}],176:[function(e,t,n){"use strict";var r=e("../lib"),i=e("../plot_api/plot_config");var o={add:function(e,t,n,r,o){var a,s;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,a),e.undoQueue.index+=1):a=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(n),a.redo.calls.push(r),a.redo.args.push(o)),e.undoQueue.queue.length>i.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(e.framework&&e.framework.isPolar)e.framework.undo();else if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)o.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(e.framework&&e.framework.isPolar)e.framework.redo();else if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)o.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}}};o.plotDo=function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,i=[],o=0;o<t.length;o++)n=t[o],i[o]=n===e?n:"object"==typeof n?Array.isArray(n)?r.extendDeep([],n):r.extendDeepAll({},n):n;return i}(e,n),t.apply(null,n)},t.exports=o},{"../lib":161,"../plot_api/plot_config":194}],177:[function(e,t,n){"use strict";n.counter=function(e,t,n){var r=(t||"")+(n?"":"$");return"xy"===e?new RegExp("^x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+r):new RegExp("^"+e+"([2-9]|[1-9][0-9]+)?"+r)}},{}],178:[function(e,t,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;t.exports=function(e,t){for(;t;){var n=e.match(r);if(n)e=n[1];else{if(!e.match(i))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t}},{}],179:[function(e,t,n){"use strict";var r=e("./is_array").isArrayOrTypedArray,i=e("./is_plain_object");t.exports=function e(t,n){for(var o in n){var a=n[o],s=t[o];if(s!==a)if("_"===o.charAt(0)||"function"==typeof a){if(o in t)continue;t[o]=a}else if(r(a)&&r(s)&&i(a[0])){if("customdata"===o||"ids"===o)continue;for(var l=Math.min(a.length,s.length),c=0;c<l;c++)s[c]!==a[c]&&i(a[c])&&i(s[c])&&e(s[c],a[c])}else i(a)&&i(s)&&(e(s,a),Object.keys(s).length||delete t[o])}}},{"./is_array":162,"./is_plain_object":163}],180:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("./loggers"),o=e("./identity");function a(e,t){return e<t}function s(e,t){return e<=t}function l(e,t){return e>t}function c(e,t){return e>=t}n.findBin=function(e,t,n){if(r(t.start))return n?Math.ceil((e-t.start)/t.size-1e-9)-1:Math.floor((e-t.start)/t.size+1e-9);var o,u,d=0,f=t.length,p=0,h=f>1?(t[f-1]-t[0])/(f-1):1;for(u=h>=0?n?a:s:n?c:l,e+=1e-9*h*(n?-1:1)*(h>=0?1:-1);d<f&&p++<100;)u(t[o=Math.floor((d+f)/2)],e)?d=o+1:f=o;return p>90&&i.log("Long binary search..."),d-1},n.sorterAsc=function(e,t){return e-t},n.sorterDes=function(e,t){return t-e},n.distinctVals=function(e){var t=e.slice();t.sort(n.sorterAsc);for(var r=t.length-1,i=t[r]-t[0]||1,o=i/(r||1)/1e4,a=[t[0]],s=0;s<r;s++)t[s+1]>t[s]+o&&(i=Math.min(i,t[s+1]-t[s]),a.push(t[s+1]));return{vals:a,minDiff:i}},n.roundUp=function(e,t,n){for(var r,i=0,o=t.length-1,a=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;i<o&&a++<100;)t[r=c((i+o)/2)]<=e?i=r+s:o=r-l;return t[i]},n.sort=function(e,t){for(var n=0,r=0,i=1;i<e.length;i++){var o=t(e[i],e[i-1]);if(o<0?n=1:o>0&&(r=1),n&&r)return e.sort(t)}return r?e:e.reverse()},n.findIndexOfMin=function(e,t){t=t||o;for(var n,r=1/0,i=0;i<e.length;i++){var a=t(e[i]);a<r&&(r=a,n=i)}return n}},{"./identity":160,"./loggers":166,"fast-isnumeric":10}],181:[function(e,t,n){"use strict";t.exports=function(e,t){(e.attr("class")||"").split(" ").forEach(function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)}),t&&e.classed("cursor-"+t,!0)}},{}],182:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("./is_array").isArrayOrTypedArray;n.aggNums=function(e,t,o,a){var s,l;if((!a||a>o.length)&&(a=o.length),r(t)||(t=!1),i(o[0])){for(l=new Array(a),s=0;s<a;s++)l[s]=n.aggNums(e,t,o[s]);o=l}for(s=0;s<a;s++)r(t)?r(o[s])&&(t=e(+t,+o[s])):t=o[s];return t},n.len=function(e){return n.aggNums(function(e){return e+1},0,e)},n.mean=function(e,t){return t||(t=n.len(e)),n.aggNums(function(e,t){return e+t},0,e)/t},n.midRange=function(e){if(void 0!==e&&0!==e.length)return(n.aggNums(Math.max,null,e)+n.aggNums(Math.min,null,e))/2},n.variance=function(e,t,i){return t||(t=n.len(e)),r(i)||(i=n.mean(e,t)),n.aggNums(function(e,t){return e+Math.pow(t-i,2)},0,e)/t},n.stdev=function(e,t,r){return Math.sqrt(n.variance(e,t,r))},n.interp=function(e,t){if(!r(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"./is_array":162,"fast-isnumeric":10}],183:[function(e,t,n){"use strict";var r=e("d3"),i=e("../lib"),o=e("../constants/xmlns_namespaces"),a=e("../constants/alignment").LINE_SPACING;function s(e,t){return e.node().getBoundingClientRect()[t]}var l=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(e,t,v){var S=e.text(),M=!e.attr("data-notex")&&"undefined"!=typeof MathJax&&S.match(l),O=r.select(e.node().parentNode);if(!O.empty()){var L=e.attr("class")?e.attr("class").split(" ")[0]:"text";return L+="-math",O.selectAll("svg."+L).remove(),O.selectAll("g."+L+"-group").remove(),e.style("display",null).attr({"data-unformatted":S,"data-math":"N"}),M?(t&&t._promises||[]).push(new Promise(function(t){e.style("display","none");var n=parseInt(e.node().style.fontSize,10),o={fontSize:n};!function(e,t,n){var o,a,s,l;MathJax.Hub.Queue(function(){return a=i.extendDeepAll({},MathJax.Hub.config),s=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(o=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var n="math-output-"+i.randstr({},64);return l=r.select("body").append("div").attr({id:n}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(function(e){return e.replace(c,"\\lt ").replace(u,"\\gt ")}(e)),MathJax.Hub.Typeset(l.node())},function(){var t=r.select("body").select("#MathJax_SVG_glyphs");if(l.select(".MathJax_SVG").empty()||!l.select("svg").node())i.log("There was an error in the tex syntax.",e),n();else{var a=l.select("svg").node().getBoundingClientRect();n(l.select(".MathJax_SVG"),t,a)}if(l.remove(),"SVG"!==o)return MathJax.Hub.setRenderer(o)},function(){return void 0!==s&&(MathJax.Hub.processSectionDelay=s),MathJax.Hub.Config(a)})}(M[2],o,function(r,i,o){O.selectAll("svg."+L).remove(),O.selectAll("g."+L+"-group").remove();var a=r&&r.select("svg");if(!a||!a.node())return P(),void t();var l=O.append("g").classed(L+"-group",!0).attr({"pointer-events":"none","data-unformatted":S,"data-math":"Y"});l.node().appendChild(a.node()),i&&i.node()&&a.node().insertBefore(i.node().cloneNode(!0),a.node().firstChild),a.attr({class:L,height:o.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var c=e.node().style.fill||"black";a.select("g").attr({fill:c,stroke:c});var u=s(a,"width"),d=s(a,"height"),f=+e.attr("x")-u*{start:0,middle:.5,end:1}[e.attr("text-anchor")||"start"],p=-(n||s(e,"height"))/4;"y"===L[0]?(l.attr({transform:"rotate("+[-90,+e.attr("x"),+e.attr("y")]+") translate("+[-u/2,p-d/2]+")"}),a.attr({x:+e.attr("x"),y:+e.attr("y")})):"l"===L[0]?a.attr({x:e.attr("x"),y:p-d/2}):"a"===L[0]?a.attr({x:0,y:p}):a.attr({x:f,y:+e.attr("y")+p-d/2}),v&&v.call(e,l),t(l)})})):P(),e}function P(){O.empty()||(L=e.attr("class")+"-math",O.select("svg."+L).remove()),e.text("").style("white-space","pre"),function(e,t){t=t.replace(m," ");var n,s=!1,l=[],c=-1;function u(){c++;var t=document.createElementNS(o.svg,"tspan");r.select(t).attr({class:"line",dy:c*a+"em"}),e.appendChild(t),n=t;var i=l;if(l=[{node:t}],i.length>1)for(var s=1;s<i.length;s++)v(i[s])}function v(e){var t,i=e.type,a={};if("a"===i){t="a";var s=e.target,c=e.href,u=e.popup;c&&(a={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":c},u&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else t="tspan";e.style&&(a.style=e.style);var d=document.createElementNS(o.svg,t);if("sup"===i||"sub"===i){S(n,h),n.appendChild(d);var g=document.createElementNS(o.svg,"tspan");S(g,h),r.select(g).attr("dy",p[i]),a.dy=f[i],n.appendChild(d),n.appendChild(g)}else n.appendChild(d);r.select(d).attr(a),n=e.node=d,l.push(e)}function S(e,t){e.appendChild(document.createTextNode(t))}function M(e){if(1!==l.length){var r=l.pop();e!==r.type&&i.log("Start tag <"+r.type+"> doesnt match end tag <"+e+">. Pretending it did match.",t),n=l[l.length-1].node}else i.log("Ignoring unexpected end tag </"+e+">.",t)}x.test(t)?u():(n=e,l=[{node:e}]);for(var O=t.split(b),L=0;L<O.length;L++){var P=O[L],D=P.match(y),R=D&&D[2].toLowerCase(),F=d[R];if("br"===R)u();else if(void 0===F)S(n,E(P));else if(D[1])M(R);else{var j=D[4],I={type:R},N=A(j,_);if(N?(N=N.replace(C,"$1 fill:"),F&&(N+=";"+F)):F&&(N=F),N&&(I.style=N),"a"===R){s=!0;var z=A(j,w);if(z){var q=document.createElement("a");q.href=z,-1!==g.indexOf(q.protocol)&&(I.href=encodeURI(decodeURI(z)),I.target=A(j,k)||"_blank",I.popup=A(j,T))}}v(I)}}return s}(e.node(),S)&&e.style("pointer-events","all"),n.positionText(e),v&&v.call(e)}};var c=/(<|&lt;|&#60;)/g,u=/(>|&gt;|&#62;)/g;var d={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},f={sub:"0.3em",sup:"-0.6em"},p={sub:"-0.21em",sup:"0.42em"},h="â",g=["http:","https:","mailto:","",void 0,":"],v=new RegExp("</?("+Object.keys(d).join("|")+")( [^>]*)?/?>","g"),m=/(\r\n?|\n)/g,b=/(<[^<>]*>)/,y=/<(\/?)([^ >]*)(\s+(.*))?>/i,x=/<br(\s+.*)?>/i,_=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,k=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,T=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function A(e,t){if(!e)return null;var n=e.match(t),r=n&&(n[3]||n[4]);return r&&E(r)}var C=/(^|;)\s*color:/;n.plainText=function(e){return(e||"").replace(v," ")};var S={mu:"Î¼",amp:"&",lt:"<",gt:">",nbsp:"Â ",times:"Ã",plusmn:"Â±",deg:"Â°"},M=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(e){return e.replace(M,function(e,t){return("#"===t.charAt(0)?function(e){if(e>1114111)return;var t=String.fromCodePoint;if(t)return t(e);var n=String.fromCharCode;return e<=65535?n(e):n(55232+(e>>10),e%1024+56320)}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):S[t])||e})}function O(e,t,n){var r,i,o,a=n.horizontalAlign,s=n.verticalAlign||"top",l=e.node().getBoundingClientRect(),c=t.node().getBoundingClientRect();return i="bottom"===s?function(){return l.bottom-r.height}:"middle"===s?function(){return l.top+(l.height-r.height)/2}:function(){return l.top},o="right"===a?function(){return l.right-r.width}:"center"===a?function(){return l.left+(l.width-r.width)/2}:function(){return l.left},function(){return r=this.node().getBoundingClientRect(),this.style({top:i()-c.top+"px",left:o()-c.left+"px","z-index":1e3}),this}}n.convertEntities=E,n.lineCount=function(e){return e.selectAll("tspan.line").size()||1},n.positionText=function(e,t,n){return e.each(function(){var e=r.select(this);function i(t,n){return void 0===n?null===(n=e.attr(t))&&(e.attr(t,0),n=0):e.attr(t,n),n}var o=i("x",t),a=i("y",n);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:o,y:a})})},n.makeEditable=function(e,t){var n=t.gd,i=t.delegate,o=r.dispatch("edit","input","cancel"),a=i||e;if(e.style({"pointer-events":i?"none":"all"}),1!==e.size())throw new Error("boo");function s(){!function(){var i=r.select(n).select(".svg-container"),a=i.append("div"),s=e.node().style,c=parseFloat(s.fontSize||12),u=t.text;void 0===u&&(u=e.attr("data-unformatted"));a.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.fontFamily||"Arial","font-size":c,color:t.fill||s.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(u).call(O(e,i,t)).on("blur",function(){n._editing=!1,e.text(this.textContent).style({opacity:1});var t,i=r.select(this).attr("class");(t=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(e.node().parentNode).select(t).style({opacity:0});var a=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),o.edit.call(e,a)}).on("focus",function(){var e=this;n._editing=!0,r.select(document).on("mouseup",function(){if(r.event.target===e)return!1;document.activeElement===a.node()&&a.node().blur()})}).on("keyup",function(){27===r.event.which?(n._editing=!1,e.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),o.cancel.call(e,this.textContent)):(o.input.call(e,this.textContent),r.select(this).call(O(e,i,t)))}).on("keydown",function(){13===r.event.which&&this.blur()}).call(l)}(),e.style({opacity:0});var i,s=a.attr("class");(i=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(e.node().parentNode).select(i).style({opacity:0})}function l(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.focus()}return t.immediate?s():a.on("click",s),r.rebind(e,o,"on")}},{"../constants/alignment":141,"../constants/xmlns_namespaces":144,"../lib":161,d3:8}],184:[function(e,t,n){"use strict";var r={};function i(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}n.throttle=function(e,t,n){var o=r[e],a=Date.now();if(!o){for(var s in r)r[s].ts<a-6e4&&delete r[s];o=r[e]={ts:0,timer:null}}function l(){n(),o.ts=Date.now(),o.onDone&&(o.onDone(),o.onDone=null)}i(o),a>o.ts+t?l():o.timer=setTimeout(function(){l(),o.timer=null},t)},n.done=function(e){var t=r[e];return t&&t.timer?new Promise(function(e){var n=t.onDone;t.onDone=function(){n&&n(),e(),t.onDone=null}}):Promise.resolve()},n.clear=function(e){if(e)i(r[e]),delete r[e];else for(var t in r)n.clear(t)}},{}],185:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){if(e>0)return Math.log(e)/Math.LN10;var n=Math.log(Math.min(t[0],t[1]))/Math.LN10;return r(n)||(n=Math.log(Math.max(t[0],t[1]))/Math.LN10-6),n}},{"fast-isnumeric":10}],186:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],187:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],188:[function(e,t,n){"use strict";var r=e("../registry");t.exports=function(e){for(var t,n,i=r.layoutArrayContainers,o=r.layoutArrayRegexes,a=e.split("[")[0],s=0;s<o.length;s++)if((n=e.match(o[s]))&&0===n.index){t=n[0];break}if(t||(t=i[i.indexOf(a)]),!t)return!1;var l=e.substr(t.length);return l?!!(n=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},{"../registry":246}],189:[function(e,t,n){"use strict";var r=e("../lib"),i=r.extendFlat,o=r.isPlainObject,a={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},s={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw"]},l=a.flags.slice().concat(["fullReplot"]),c=s.flags.slice().concat("layoutReplot");function u(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function d(e,t,n){var r=i({},e);for(var a in r){var s=r[a];o(s)&&(r[a]=f(s,t,n,a))}return"from-root"===n&&(r.editType=t),r}function f(e,t,n,r){if(e.valType){var o=i({},e);if(o.editType=t,Array.isArray(e.items)){o.items=new Array(e.items.length);for(var a=0;a<e.items.length;a++)o.items[a]=f(e.items[a],t,"from-root")}return o}return d(e,t,"_"===r.charAt(0)?"nested":"from-root")}t.exports={traces:a,layout:s,traceFlags:function(){return u(l)},layoutFlags:function(){return u(c)},update:function(e,t){var n=t.editType;if(n&&"none"!==n)for(var r=n.split("+"),i=0;i<r.length;i++)e[r[i]]=!0},overrideAll:d}},{"../lib":161}],190:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("gl-mat4/fromQuat"),o=e("../registry"),a=e("../lib"),s=e("../plots/plots"),l=e("../plots/cartesian/axis_ids"),c=l.cleanId,u=l.getFromTrace,d=e("../components/color");function f(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=c(n,r))}function p(e){if(!a.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function h(e,t,n,r){if(n&&!r)return e;if(r&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var i,o=Math.min(e.length,t.length);for(i=0;i<o&&e.charAt(i)===t.charAt(i);i++);return e.substr(0,i).trim()}function g(e){var t="middle",n="center";return-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right"),t+" "+n}function v(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}n.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&a.log("Clearing previous rejected promises from queue."),e._promises=[]},n.cleanLayout=function(e){var t,n;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var r=(s.subplotsRegistry.cartesian||{}).attrRegex,o=(s.subplotsRegistry.gl3d||{}).attrRegex,l=Object.keys(e);for(t=0;t<l.length;t++){var u=l[t];if(r&&r.test(u)){var p=e[u];p.anchor&&"free"!==p.anchor&&(p.anchor=c(p.anchor)),p.overlaying&&(p.overlaying=c(p.overlaying)),p.type||(p.isdate?p.type="date":p.islog?p.type="log":!1===p.isdate&&!1===p.islog&&(p.type="linear")),"withzero"!==p.autorange&&"tozero"!==p.autorange||(p.autorange=!0,p.rangemode="tozero"),delete p.islog,delete p.isdate,delete p.categories,v(p,"domain")&&delete p.domain,void 0!==p.autotick&&(void 0===p.tickmode&&(p.tickmode=p.autotick?"auto":"linear"),delete p.autotick)}else if(o&&o.test(u)){var h=e[u],g=h.cameraposition;if(Array.isArray(g)&&4===g[0].length){var m=g[0],b=g[1],y=g[2],x=i([],m),_=[];for(n=0;n<3;++n)_[n]=b[n]+y*x[2+4*n];h.camera={eye:{x:_[0],y:_[1],z:_[2]},center:{x:b[0],y:b[1],z:b[2]},up:{x:x[1],y:x[5],z:x[9]}},delete h.cameraposition}}}var w=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<w;t++){var k=e.annotations[t];a.isPlainObject(k)&&(k.ref&&("paper"===k.ref?(k.xref="paper",k.yref="paper"):"data"===k.ref&&(k.xref="x",k.yref="y"),delete k.ref),f(k,"xref"),f(k,"yref"))}var T=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<T;t++){var A=e.shapes[t];a.isPlainObject(A)&&(f(A,"xref"),f(A,"yref"))}var C=e.legend;return C&&(C.x>3?(C.x=1.02,C.xanchor="left"):C.x<-2&&(C.x=-.02,C.xanchor="right"),C.y>3?(C.y=1.02,C.yanchor="bottom"):C.y<-2&&(C.y=-.02,C.yanchor="top")),"rotate"===e.dragmode&&(e.dragmode="orbit"),d.clean(e),e},n.cleanData=function(e){for(var t=0;t<e.length;t++){var r,i=e[t];if("histogramy"===i.type&&"xbins"in i&&!("ybins"in i)&&(i.ybins=i.xbins,delete i.xbins),i.error_y&&"opacity"in i.error_y){var l=d.defaults,u=i.error_y.color||(o.traceIs(i,"bar")?d.defaultLine:l[t%l.length]);i.error_y.color=d.addOpacity(d.rgb(u),d.opacity(u)*i.error_y.opacity),delete i.error_y.opacity}if("bardir"in i&&("h"!==i.bardir||!o.traceIs(i,"bar")&&"histogram"!==i.type.substr(0,9)||(i.orientation="h",n.swapXYData(i)),delete i.bardir),"histogramy"===i.type&&n.swapXYData(i),"histogramx"!==i.type&&"histogramy"!==i.type||(i.type="histogram"),"scl"in i&&(i.colorscale=i.scl,delete i.scl),"reversescl"in i&&(i.reversescale=i.reversescl,delete i.reversescl),i.xaxis&&(i.xaxis=c(i.xaxis,"x")),i.yaxis&&(i.yaxis=c(i.yaxis,"y")),o.traceIs(i,"gl3d")&&i.scene&&(i.scene=s.subplotsRegistry.gl3d.cleanId(i.scene)),!o.traceIs(i,"pie")&&!o.traceIs(i,"bar"))if(Array.isArray(i.textposition))for(r=0;r<i.textposition.length;r++)i.textposition[r]=g(i.textposition[r]);else i.textposition&&(i.textposition=g(i.textposition));var f=o.getModule(i);if(f&&f.colorbar){var m=f.colorbar.container,b=m?i[m]:i;b&&b.colorscale&&("YIGnBu"===b.colorscale&&(b.colorscale="YlGnBu"),"YIOrRd"===b.colorscale&&(b.colorscale="YlOrRd"))}if("surface"===i.type&&a.isPlainObject(i.contours)){var y=["x","y","z"];for(r=0;r<y.length;r++){var x=i.contours[y[r]];a.isPlainObject(x)&&(x.highlightColor&&(x.highlightcolor=x.highlightColor,delete x.highlightColor),x.highlightWidth&&(x.highlightwidth=x.highlightWidth,delete x.highlightWidth))}}if("candlestick"===i.type||"ohlc"===i.type){var _=!1!==(i.increasing||{}).showlegend,w=!1!==(i.decreasing||{}).showlegend,k=p(i.increasing),T=p(i.decreasing);if(!1!==k&&!1!==T){var A=h(k,T,_,w);A&&(i.name=A)}else!k&&!T||i.name||(i.name=k||T)}if(Array.isArray(i.transforms)){var C=i.transforms;for(r=0;r<C.length;r++){var S=C[r];if(a.isPlainObject(S))switch(S.type){case"filter":S.filtersrc&&(S.target=S.filtersrc,delete S.filtersrc),S.calendar&&(S.valuecalendar||(S.valuecalendar=S.calendar),delete S.calendar);break;case"groupby":if(S.styles=S.styles||S.style,S.styles&&!Array.isArray(S.styles)){var M=S.styles,E=Object.keys(M);S.styles=[];for(var O=0;O<E.length;O++)S.styles.push({target:E[O],value:M[E[O]]})}}}}v(i,"line")&&delete i.line,"marker"in i&&(v(i.marker,"line")&&delete i.marker.line,v(i,"marker")&&delete i.marker),d.clean(i),i.autobinx&&(delete i.autobinx,delete i.xbins),i.autobiny&&(delete i.autobiny,delete i.ybins)}},n.swapXYData=function(e){var t;if(a.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var n=e.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);a.swapAttrs(e,["error_?.copy_ystyle"]),r&&a.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof e.hoverinfo){var i=e.hoverinfo.split("+");for(t=0;t<i.length;t++)"x"===i[t]?i[t]="y":"y"===i[t]&&(i[t]="x");e.hoverinfo=i.join("+")}},n.coerceTraceIndices=function(e,t){if(r(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(e,t){return t});if(Array.isArray(t)){for(var n=[],i=0;i<t.length;i++)a.isIndex(t[i],e.data.length)?n.push(t[i]):a.warn("trace index (",t[i],") is not a number or is out of bounds");return n}return t},n.manageArrayContainers=function(e,t,n){var i=e.obj,o=e.parts,s=o.length,l=o[s-1],c=r(l);if(c&&null===t){var u=o.slice(0,s-1).join(".");a.nestedProperty(i,u).get().splice(l,1)}else c&&void 0===e.get()?(void 0===e.get()&&(n[e.astr]=null),e.set(t)):e.set(t)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function b(e){var t=e.search(m);if(t>0)return e.substr(0,t)}n.hasParent=function(e,t){for(var n=b(t);n;){if(n in e)return!0;n=b(n)}return!1};var y=["x","y","z"];n.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var i=e._fullData[r],o=0;o<3;o++){var s=u(e,i,y[o]);if(s&&"log"!==s.type){var l=s._name,c=s._id.substr(1);if("scene"===c.substr(0,5)){if(void 0!==n[c])continue;l=c+"."+l}var d=l+".type";void 0===n[l]&&void 0===n[d]&&a.nestedProperty(e.layout,d).set(null)}}}},{"../components/color":43,"../lib":161,"../plots/cartesian/axis_ids":209,"../plots/plots":239,"../registry":246,"fast-isnumeric":10,"gl-mat4/fromQuat":11}],191:[function(e,t,n){"use strict";var r=e("./plot_api");n.plot=r.plot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=e("./to_image"),n.validate=e("./validate"),n.downloadImage=e("../snapshot/download");var i=e("./template_api");n.makeTemplate=i.makeTemplate,n.validateTemplate=i.validateTemplate},{"../snapshot/download":248,"./plot_api":193,"./template_api":198,"./to_image":199,"./validate":200}],192:[function(e,t,n){"use strict";var r=e("../lib/nested_property"),i=e("../lib/is_plain_object"),o=e("../lib/noop"),a=e("../lib/loggers"),s=e("../lib/search").sorterAsc,l=e("../registry");n.containerArrayMatch=e("./container_array_match");var c=n.isAddVal=function(e){return"add"===e||i(e)},u=n.isRemoveVal=function(e){return null===e||"remove"===e};n.applyContainerArrayChanges=function(e,t,n,i){var d=t.astr,f=l.getComponentMethod(d,"supplyLayoutDefaults"),p=l.getComponentMethod(d,"draw"),h=l.getComponentMethod(d,"drawOne"),g=i.replot||i.recalc||f===o||p===o,v=e.layout,m=e._fullLayout;if(n[""]){Object.keys(n).length>1&&a.warn("Full array edits are incompatible with other edits",d);var b=n[""][""];if(u(b))t.set(null);else{if(!Array.isArray(b))return a.warn("Unrecognized full array edit value",d,b),!0;t.set(b)}return!g&&(f(v,m),p(e),!0)}var y,x,_,w,k,T,A,C=Object.keys(n).map(Number).sort(s),S=t.get(),M=S||[],E=r(m,d).get(),O=[],L=-1,P=M.length;for(y=0;y<C.length;y++)if(w=n[_=C[y]],k=Object.keys(w),T=w[""],A=c(T),_<0||_>M.length-(A?0:1))a.warn("index out of range",d,_);else if(void 0!==T)k.length>1&&a.warn("Insertion & removal are incompatible with edits to the same index.",d,_),u(T)?O.push(_):A?("add"===T&&(T={}),M.splice(_,0,T),E&&E.splice(_,0,{})):a.warn("Unrecognized full object edit value",d,_,T),-1===L&&(L=_);else for(x=0;x<k.length;x++)r(M[_],k[x]).set(w[k[x]]);for(y=O.length-1;y>=0;y--)M.splice(O[y],1),E&&E.splice(O[y],1);if(M.length?S||t.set(M):t.set(null),g)return!1;if(f(v,m),h!==o){var D;if(-1===L)D=C;else{for(P=Math.max(M.length,P),D=[],y=0;y<C.length&&!((_=C[y])>=L);y++)D.push(_);for(y=L;y<P;y++)D.push(y)}for(y=0;y<D.length;y++)h(e,D[y])}else p(e);return!0}},{"../lib/is_plain_object":163,"../lib/loggers":166,"../lib/nested_property":170,"../lib/noop":171,"../lib/search":180,"../registry":246,"./container_array_match":188}],193:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("has-hover"),a=e("../lib"),s=e("../lib/events"),l=e("../lib/queue"),c=e("../registry"),u=e("./plot_schema"),d=e("../plots/plots"),f=e("../plots/polar/legacy"),p=e("../plots/cartesian/axes"),h=e("../components/drawing"),g=e("../components/color"),v=e("../components/colorbar/connect"),m=e("../plots/cartesian/graph_interact").initInteractions,b=e("../constants/xmlns_namespaces"),y=e("../lib/svg_text_utils"),x=e("./plot_config"),_=e("./manage_arrays"),w=e("./helpers"),k=e("./subroutines"),T=e("./edit_types"),A=e("../plots/cartesian/constants").AX_NAME_PATTERN,C=0;function S(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function M(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){a.error(e)}}function E(e,t){M(e,g.combine(t,"white"))}function O(e,t){e._context||(e._context=a.extendDeep({},x));var n,r,i,s=e._context;if(t){for(r=Object.keys(t),n=0;n<r.length;n++)"editable"!==(i=r[n])&&"edits"!==i&&i in s&&("setBackground"===i&&"opaque"===t[i]?s[i]=E:s[i]=t[i]);t.plot3dPixelRatio&&!s.plotGlPixelRatio&&(s.plotGlPixelRatio=s.plot3dPixelRatio);var l=t.editable;if(void 0!==l)for(s.editable=l,r=Object.keys(s.edits),n=0;n<r.length;n++)s.edits[r[n]]=l;if(t.edits)for(r=Object.keys(t.edits),n=0;n<r.length;n++)(i=r[n])in s.edits&&(s.edits[i]=t.edits[i])}s.staticPlot&&(s.editable=!1,s.edits={},s.autosizable=!1,s.scrollZoom=!1,s.doubleClick=!1,s.showTips=!1,s.showLink=!1,s.displayModeBar=!1),"hover"!==s.displayModeBar||o||(s.displayModeBar=!0),"transparent"!==s.setBackground&&"function"==typeof s.setBackground||(s.setBackground=M),s._hasZeroHeight=s._hasZeroHeight||0===e.clientHeight,s._hasZeroWidth=s._hasZeroWidth||0===e.clientWidth}function L(e,t){var n,r,i=t+1,o=[];for(n=0;n<e.length;n++)(r=e[n])<0?o.push(i+r):o.push(r);return o}function P(e,t,n){var r,i;for(r=0;r<t.length;r++){if((i=t[r])!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=e.data.length||i<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(t.indexOf(i,r+1)>-1||i>=0&&t.indexOf(-e.data.length+i)>-1||i<0&&t.indexOf(e.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function D(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),P(e,t,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&P(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function R(e,t,n,r,o){!function(e,t,n,r){var i=a.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!a.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(var o in P(e,n,"indices"),t){if(!Array.isArray(t[o])||t[o].length!==n.length)throw new Error("attribute "+o+" must be an array of length equal to indices array length");if(i&&(!(o in r)||!Array.isArray(r[o])||r[o].length!==t[o].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,r);for(var s=function(e,t,n,r){var o,s,l,c,u,d=a.isPlainObject(r),f=[];for(var p in Array.isArray(n)||(n=[n]),n=L(n,e.data.length-1),t)for(var h=0;h<n.length;h++){if(o=e.data[n[h]],s=(l=a.nestedProperty(o,p)).get(),c=t[p][h],!a.isArrayOrTypedArray(c))throw new Error("attribute: "+p+" index: "+h+" must be an array");if(!a.isArrayOrTypedArray(s))throw new Error("cannot extend missing or non-array attribute: "+p);if(s.constructor!==c.constructor)throw new Error("cannot extend array with an array of a different type: "+p);u=d?r[p][h]:r,i(u)||(u=-1),f.push({prop:l,target:s,insert:c,maxp:Math.floor(u)})}return f}(e,t,n,r),l={},c={},u=0;u<s.length;u++){var d=s[u].prop,f=s[u].maxp,p=o(s[u].target,s[u].insert,f);d.set(p[0]),Array.isArray(l[d.astr])||(l[d.astr]=[]),l[d.astr].push(p[1]),Array.isArray(c[d.astr])||(c[d.astr]=[]),c[d.astr].push(s[u].target.length)}return{update:l,maxPoints:c}}function F(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function j(e){return void 0===e?null:e}function I(e,t,n){var r,i,o=e._fullLayout,s=e._fullData,l=e.data,f=T.traceFlags(),h={},g={};function v(){return n.map(function(){})}function m(e){var t=p.id2name(e);-1===i.indexOf(t)&&i.push(t)}function b(e){return"LAYOUT"+e+".autorange"}function y(e){return"LAYOUT"+e+".range"}function x(r,i,o){var s;Array.isArray(r)?r.forEach(function(e){x(e,i,o)}):r in t||w.hasParent(t,r)||(s="LAYOUT"===r.substr(0,6)?a.nestedProperty(e.layout,r.replace("LAYOUT","")):a.nestedProperty(l[n[o]],r),r in g||(g[r]=v()),void 0===g[r][o]&&(g[r][o]=j(s.get())),void 0!==i&&s.set(i))}function _(e){return function(t){return s[t][e]}}function k(e){return function(t,r){return!1===t?s[n[r]][e]:null}}for(var A in t){if(w.hasParent(t,A))throw new Error("cannot set "+A+"and a parent attribute simultaneously");var C,S,M,E,O,L,P=t[A];if("autobinx"!==A&&"autobiny"!==A||(A=A.charAt(A.length-1)+"bins",P=Array.isArray(P)?P.map(k(A)):!1===P?n.map(_(A)):null),h[A]=P,"LAYOUT"!==A.substr(0,6)){for(g[A]=v(),r=0;r<n.length;r++)if(C=l[n[r]],S=s[n[r]],E=(M=a.nestedProperty(C,A)).get(),void 0!==(O=Array.isArray(P)?P[r%P.length]:P)){var D=M.parts[M.parts.length-1],R=A.substr(0,A.length-D.length-1),F=R?R+".":"",I=R?a.nestedProperty(S,R).get():S;if((L=u.getTraceValObject(S,M.parts))&&L.impliedEdits&&null!==O)for(var N in L.impliedEdits)x(a.relativeAttr(A,N),L.impliedEdits[N],r);else if("thicknessmode"!==D&&"lenmode"!==D||E===O||"fraction"!==O&&"pixels"!==O||!I){if("type"===A&&"pie"===O!=("pie"===E)){var z="x",q="y";"bar"!==O&&"bar"!==E||"h"!==C.orientation||(z="y",q="x"),a.swapAttrs(C,["?","?src"],"labels",z),a.swapAttrs(C,["d?","?0"],"label",z),a.swapAttrs(C,["?","?src"],"values",q),"pie"===E?(a.nestedProperty(C,"marker.color").set(a.nestedProperty(C,"marker.colors").get()),o._pielayer.selectAll("g.trace").remove()):c.traceIs(C,"cartesian")&&a.nestedProperty(C,"marker.colors").set(a.nestedProperty(C,"marker.color").get())}}else{var H=o._size,B=I.orient,V="top"===B||"bottom"===B;if("thicknessmode"===D){var U=V?H.h:H.w;x(F+"thickness",I.thickness*("fraction"===O?1/U:U),r)}else{var $=V?H.w:H.h;x(F+"len",I.len*("fraction"===O?1/$:$),r)}}g[A][r]=j(E);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(A)){if("orientation"===A){M.set(O);var W=C.x&&!C.y?"h":"v";if((M.get()||W)===S.orientation)continue}else"orientationaxes"===A&&(C.orientation={v:"h",h:"v"}[S.orientation]);w.swapXYData(C),f.calc=f.clearAxisTypes=!0}else-1!==d.dataArrayContainers.indexOf(M.parts[0])?(w.manageArrayContainers(M,O,g),f.calc=!0):(L?L.arrayOk&&!c.traceIs(S,"regl")&&(a.isArrayOrTypedArray(O)||a.isArrayOrTypedArray(E))?f.calc=!0:T.update(f,L):f.calc=!0,M.set(O))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(A)&&p.swap(e,n),"orientationaxes"===A){var X=a.nestedProperty(e.layout,"hovermode");"x"===X.get()?X.set("y"):"y"===X.get()&&X.set("x")}if(-1!==["orientation","type"].indexOf(A)){for(i=[],r=0;r<n.length;r++){var G=l[n[r]];c.traceIs(G,"cartesian")&&(m(G.xaxis||"x"),m(G.yaxis||"y"))}x(i.map(b),!0,0),x(i.map(y),[0,1],0)}}else M=a.nestedProperty(e.layout,A.replace("LAYOUT","")),g[A]=[j(M.get())],M.set(Array.isArray(P)?P[0]:P),f.calc=!0}return(f.calc||f.plot)&&(f.fullReplot=!0),{flags:f,undoit:g,redoit:h,traces:n,eventData:a.extendDeepNoArrays([],[h,n])}}function N(e,t,n){var r;if(!t.axrange)return!1;for(r in t)if("axrange"!==r&&t[r])return!1;for(r in n.rangesAltered){var i=p.id2name(r),o=e.layout[i],a=e._fullLayout[i];a.autorange=o.autorange,a.range=o.range.slice(),a.cleanRange()}return!0}function z(e,t){var n=t?function(e){return p.doTicks(e,Object.keys(t),!0)}:function(e){return p.doTicks(e,"redraw")};e.push(k.doAutoRangeAndConstraints,n,k.drawData,k.finalDraw)}n.plot=function(e,t,i,o){var l;if(e=a.getGraphDiv(e),s.init(e),a.isPlainObject(t)){var u=t;t=u.data,i=u.layout,o=u.config,l=u.frames}if(!1===s.triggerHandler(e,"plotly_beforeplot",[t,i,o]))return Promise.reject();t||i||a.isPlotDiv(e)||a.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",e),O(e,o),i||(i={}),r.select(e).classed("js-plotly-plot",!0),h.makeTester(),delete h.baseUrl,Array.isArray(e._promises)||(e._promises=[]);var g=0===(e.data||[]).length&&Array.isArray(t);if(Array.isArray(t)&&(w.cleanData(t),g?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),e.layout&&!g||(e.layout=w.cleanLayout(i)),e._dragging&&!e._transitioning)return e._replotPending=!0,Promise.reject();e._replotPending=!1,d.supplyDefaults(e);var b=e._fullLayout,x=b._has("cartesian");if(!b._has("polar")&&t&&t[0]&&t[0].r)return a.log("Legacy polar charts are deprecated!"),function(e,t,n){var i=r.select(e).selectAll(".plot-container").data([0]);i.enter().insert("div",":first-child").classed("plot-container plotly",!0);var o=i.selectAll(".svg-container").data([0]);o.enter().append("div").classed("svg-container",!0).style("position","relative"),o.html(""),t&&(e.data=t);n&&(e.layout=n);f.manager.fillLayout(e),o.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"}),e.framework=f.manager.framework(e),e.framework({data:e.data,layout:e.layout},o.node()),e.framework.setUndoPoint();var s=e.framework.svg(),l=1,c=e._fullLayout.title;""!==c&&c||(l=0);var u=function(){this.call(y.convertToTspans,e)},p=s.select(".title-group text").call(u);if(e._context.edits.titleText){var h=a._(e,"Click to enter Plot title");c&&c!==h||(l=.2,p.attr({"data-unformatted":h}).text(h).style({opacity:l}).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)}));var g=function(){this.call(y.makeEditable,{gd:e}).on("edit",function(t){e.framework({layout:{title:t}}),this.text(t).call(u),this.call(g)}).on("cancel",function(){var e=this.attr("data-unformatted");this.text(e).call(u)})};p.call(g)}return e._context.setBackground(e,e._fullLayout.paper_bgcolor),d.addLinks(e),Promise.resolve()}(e,t,i);b._replotting=!0,g&&W(e),e.framework!==W&&(e.framework=W,W(e)),h.initGradients(e),g&&p.saveShowSpikeInitial(e);var _=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;_&&d.doCalcdata(e);for(var T=0;T<e.calcdata.length;T++)e.calcdata[T][0].trace=e._fullData[T];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){d.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):a.clearResponsive(e);var A=JSON.stringify(b._size),C=0;function M(){var t,n,r,i=e.calcdata;for(d.clearAutoMarginIds(e),k.drawMarginPushers(e),p.allowAutoMargin(e),t=0;t<i.length;t++){var o=(r=(n=i[t])[0].trace)._module.colorbar;!0===r.visible&&o?v(e,n,o):d.autoMargin(e,"cb"+r.uid)}return d.doAutoMargin(e),d.previousPromises(e)}function E(){e._transitioning||(k.doAutoRangeAndConstraints(e),g&&p.saveRangeInitial(e))}var L=[d.previousPromises,function(){if(l)return n.addFrames(e,l)},function t(){for(var n=b._basePlotModules,r=0;r<n.length;r++)n[r].drawFramework&&n[r].drawFramework(e);if(!b._glcanvas&&b._has("gl")&&(b._glcanvas=b._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),b._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})),b._glcanvas){b._glcanvas.attr("width",b.width).attr("height",b.height);var i=b._glcanvas.data()[0].regl;if(i&&(Math.floor(b.width)!==i._gl.drawingBufferWidth||Math.floor(b.height)!==i._gl.drawingBufferHeight)){var o="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!C)return a.log(o+" Clearing graph and plotting again."),d.cleanPlot([],{},e._fullData,b),d.supplyDefaults(e),b=e._fullLayout,d.doCalcdata(e),C++,t();a.error(o)}}return d.previousPromises(e)},M,function(){if(JSON.stringify(b._size)!==A)return a.syncOrAsync([M,k.layoutStyles],e)}];x&&L.push(function(){if(_)return a.syncOrAsync([c.getComponentMethod("shapes","calcAutorange"),c.getComponentMethod("annotations","calcAutorange"),E,c.getComponentMethod("rangeslider","calcAutorange")],e);E()}),L.push(k.layoutStyles),x&&L.push(function(){return p.doTicks(e,g?"":"redraw")}),L.push(k.drawData,k.finalDraw,m,d.addLinks,d.rehover,d.doAutoMargin,d.previousPromises);var P=a.syncOrAsync(L,e);return P&&P.then||(P=Promise.resolve()),P.then(function(){return S(e),e})},n.setPlotConfig=function(e){return a.extendFlat(x,e)},n.redraw=function(e){if(e=a.getGraphDiv(e),!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return w.cleanData(e.data),w.cleanLayout(e.layout),e.calcdata=void 0,n.plot(e).then(function(){return e.emit("plotly_redraw"),e})},n.newPlot=function(e,t,r,i){return e=a.getGraphDiv(e),d.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),d.purge(e),n.plot(e,t,r,i)},n.extendTraces=function e(t,r,i,o){var s=R(t=a.getGraphDiv(t),r,i,o,function(e,t,n){var r,i;if(a.isTypedArray(e))if(n<0){var o=new e.constructor(0),s=F(e,t);n<0?(r=s,i=o):(r=o,i=s)}else if(r=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),i.set(e);else if(n<t.length){var l=t.length-n;r.set(t.subarray(l)),i.set(e),i.set(t.subarray(0,l),e.length)}else{var c=n-t.length,u=e.length-c;r.set(e.subarray(u)),r.set(t,c),i.set(e.subarray(0,u))}else r=e.concat(t),i=n>=0&&n<r.length?r.splice(0,r.length-n):[];return[r,i]}),c=n.redraw(t),u=[t,s.update,i,s.maxPoints];return l.add(t,n.prependTraces,u,e,arguments),c},n.prependTraces=function e(t,r,i,o){var s=R(t=a.getGraphDiv(t),r,i,o,function(e,t,n){var r,i;if(a.isTypedArray(e))if(n<=0){var o=new e.constructor(0),s=F(t,e);n<0?(r=s,i=o):(r=o,i=s)}else if(r=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),i.set(e);else if(n<t.length){var l=t.length-n;r.set(t.subarray(0,l)),i.set(t.subarray(l)),i.set(e,l)}else{var c=n-t.length;r.set(t),r.set(e.subarray(0,c),t.length),i.set(e.subarray(c))}else r=t.concat(e),i=n>=0&&n<r.length?r.splice(n,r.length):[];return[r,i]}),c=n.redraw(t),u=[t,s.update,i,s.maxPoints];return l.add(t,n.extendTraces,u,e,arguments),c},n.addTraces=function e(t,r,i){t=a.getGraphDiv(t);var o,s,c=[],u=n.deleteTraces,d=e,f=[t,c],p=[t,r];for(function(e,t,n){var r,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!=typeof(i=t[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(t,r,i),Array.isArray(r)||(r=[r]),r=r.map(function(e){return a.extendFlat({},e)}),w.cleanData(r),o=0;o<r.length;o++)t.data.push(r[o]);for(o=0;o<r.length;o++)c.push(-r.length+o);if(void 0===i)return s=n.redraw(t),l.add(t,u,f,d,p),s;Array.isArray(i)||(i=[i]);try{D(t,c,i)}catch(e){throw t.data.splice(t.data.length-r.length,r.length),e}return l.startSequence(t),l.add(t,u,f,d,p),s=n.moveTraces(t,c,i),l.stopSequence(t),s},n.deleteTraces=function e(t,r){t=a.getGraphDiv(t);var i,o,s=[],c=n.addTraces,u=e,d=[t,s,r],f=[t,r];if(void 0===r)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(r)||(r=[r]),P(t,r,"indices"),(r=L(r,t.data.length-1)).sort(a.sorterDes),i=0;i<r.length;i+=1)o=t.data.splice(r[i],1)[0],s.push(o);var p=n.redraw(t);return l.add(t,c,d,u,f),p},n.moveTraces=function e(t,r,i){var o,s=[],c=[],u=e,d=e,f=[t=a.getGraphDiv(t),i,r],p=[t,r,i];if(D(t,r,i),r=Array.isArray(r)?r:[r],void 0===i)for(i=[],o=0;o<r.length;o++)i.push(-r.length+o);for(i=Array.isArray(i)?i:[i],r=L(r,t.data.length-1),i=L(i,t.data.length-1),o=0;o<t.data.length;o++)-1===r.indexOf(o)&&s.push(t.data[o]);for(o=0;o<r.length;o++)c.push({newIndex:i[o],trace:t.data[r[o]]});for(c.sort(function(e,t){return e.newIndex-t.newIndex}),o=0;o<c.length;o+=1)s.splice(c[o].newIndex,0,c[o].trace);t.data=s;var h=n.redraw(t);return l.add(t,u,f,d,p),h},n.restyle=function e(t,r,i,o){t=a.getGraphDiv(t),w.clearPromiseQueue(t);var s={};if("string"==typeof r)s[r]=i;else{if(!a.isPlainObject(r))return a.warn("Restyle fail.",r,i,o),Promise.reject();s=a.extendFlat({},r),void 0===o&&(o=i)}Object.keys(s).length&&(t.changed=!0);var c=w.coerceTraceIndices(t,o),u=I(t,s,c),f=u.flags;f.calc&&(t.calcdata=void 0),f.clearAxisTypes&&w.clearAxisTypes(t,c,{});var p=[];f.fullReplot?p.push(n.plot):(p.push(d.previousPromises),d.supplyDefaults(t),f.markerSize&&(d.doCalcdata(t),z(p)),f.style&&p.push(k.doTraceStyle),f.colorbars&&p.push(k.doColorBars),p.push(S)),p.push(d.rehover),l.add(t,e,[t,u.undoit,u.traces],e,[t,u.redoit,u.traces]);var h=a.syncOrAsync(p,t);return h&&h.then||(h=Promise.resolve()),h.then(function(){return t.emit("plotly_restyle",u.eventData),t})},n.relayout=function e(t,n,r){if(t=a.getGraphDiv(t),w.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);var i={};if("string"==typeof n)i[n]=r;else{if(!a.isPlainObject(n))return a.warn("Relayout fail.",n,r),Promise.reject();i=a.extendFlat({},n)}Object.keys(i).length&&(t.changed=!0);var o=V(t,i),s=o.flags;s.calc&&(t.calcdata=void 0);var c=[d.previousPromises];s.layoutReplot?c.push(k.layoutReplot):Object.keys(i).length&&(N(t,s,o)||d.supplyDefaults(t),s.legend&&c.push(k.doLegend),s.layoutstyle&&c.push(k.layoutStyles),s.axrange&&z(c,o.rangesAltered),s.ticks&&c.push(k.doTicksRelayout),s.modebar&&c.push(k.doModeBar),s.camera&&c.push(k.doCamera),c.push(S)),c.push(d.rehover),l.add(t,e,[t,o.undoit],e,[t,o.redoit]);var u=a.syncOrAsync(c,t);return u&&u.then||(u=Promise.resolve(t)),u.then(function(){return t.emit("plotly_relayout",o.eventData),t})};var q=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,H=/^[xyz]axis[0-9]*\.autorange$/,B=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function V(e,t){var n,r,i,o=e.layout,s=e._fullLayout,l=Object.keys(t),d=p.list(e),f={};for(r=0;r<l.length;r++)if(0===l[r].indexOf("allaxes")){for(i=0;i<d.length;i++){var h=d[i]._id.substr(1),g=-1!==h.indexOf("scene")?h+".":"",v=l[r].replace("allaxes",g+d[i]._name);t[v]||(t[v]=t[l[r]])}delete t[l[r]]}var m=T.layoutFlags(),b={},y={};function x(e,n){if(Array.isArray(e))e.forEach(function(e){x(e,n)});else if(!(e in t||w.hasParent(t,e))){var r=a.nestedProperty(o,e);e in y||(y[e]=j(r.get())),void 0!==n&&r.set(n)}}var k,C={};function S(e){var t=p.name2id(e.split(".")[0]);return C[t]=1,t}for(var M in t){if(w.hasParent(t,M))throw new Error("cannot set "+M+"and a parent attribute simultaneously");for(var E=a.nestedProperty(o,M),O=t[M],L=E.parts.length-1;L>0&&"string"!=typeof E.parts[L];)L--;var P=E.parts[L],D=E.parts[L-1]+"."+P,R=E.parts.slice(0,L).join("."),F=a.nestedProperty(e.layout,R).get(),I=a.nestedProperty(s,R).get(),N=E.get();if(void 0!==O){b[M]=O,y[M]="reverse"===P?O:j(N);var z=u.getLayoutValObject(s,E.parts);if(z&&z.impliedEdits&&null!==O)for(var V in z.impliedEdits)x(a.relativeAttr(M,V),z.impliedEdits[V]);if(-1!==["width","height"].indexOf(M))if(O){x("autosize",null);var $="height"===M?"width":"height";x($,s[$])}else s[M]=e._initialAutoSize[M];else if("autosize"===M)x("width",O?null:s.width),x("height",O?null:s.height);else if(D.match(q))S(D),a.nestedProperty(s,R+"._inputRange").set(null);else if(D.match(H)){S(D),a.nestedProperty(s,R+"._inputRange").set(null);var W=a.nestedProperty(s,R).get();W._inputDomain&&(W._input.domain=W._inputDomain.slice())}else D.match(B)&&a.nestedProperty(s,R+"._inputDomain").set(null);if("type"===P){var X=F,G="linear"===I.type&&"log"===O,Y="log"===I.type&&"linear"===O;if(G||Y){if(X&&X.range)if(I.autorange)G&&(X.range=X.range[1]>X.range[0]?[1,2]:[2,1]);else{var Z=X.range[0],J=X.range[1];G?(Z<=0&&J<=0&&x(R+".autorange",!0),Z<=0?Z=J/1e6:J<=0&&(J=Z/1e6),x(R+".range[0]",Math.log(Z)/Math.LN10),x(R+".range[1]",Math.log(J)/Math.LN10)):(x(R+".range[0]",Math.pow(10,Z)),x(R+".range[1]",Math.pow(10,J)))}else x(R+".autorange",!0);Array.isArray(s._subplots.polar)&&s._subplots.polar.length&&s[E.parts[0]]&&"radialaxis"===E.parts[1]&&delete s[E.parts[0]]._subplot.viewInitial["radialaxis.range"],c.getComponentMethod("annotations","convertCoords")(e,I,O,x),c.getComponentMethod("images","convertCoords")(e,I,O,x)}else x(R+".autorange",!0),x(R+".range",null);a.nestedProperty(s,R+"._inputRange").set(null)}else if(P.match(A)){var K=a.nestedProperty(s,M).get(),Q=(O||{}).type;Q&&"-"!==Q||(Q="linear"),c.getComponentMethod("annotations","convertCoords")(e,K,Q,x),c.getComponentMethod("images","convertCoords")(e,K,Q,x)}var ee=_.containerArrayMatch(M);if(ee){n=ee.array,r=ee.index;var te=ee.property,ne=(a.nestedProperty(o,n)||[])[r]||{},re=z||{editType:"calc"};""!==r&&""===te&&(_.isAddVal(O)?y[M]=null:_.isRemoveVal(O)?y[M]=ne:a.warn("unrecognized full object value",t)),T.update(m,re),f[n]||(f[n]={});var ie=f[n][r];ie||(ie=f[n][r]={}),ie[te]=O,delete t[M]}else"reverse"===P?(F.range?F.range.reverse():(x(R+".autorange",!0),F.range=[1,0]),I.autorange?m.calc=!0:m.plot=!0):(s._has("scatter-like")&&s._has("regl")&&"dragmode"===M&&("lasso"===O||"select"===O)&&"lasso"!==N&&"select"!==N?m.plot=!0:z?T.update(m,z):m.calc=!0,E.set(O))}}for(n in f){_.applyContainerArrayChanges(e,a.nestedProperty(o,n),f[n],m)||(m.plot=!0)}var oe=s._axisConstraintGroups||[];for(k in C)for(r=0;r<oe.length;r++){var ae=oe[r];if(ae[k])for(var se in m.calc=!0,ae)C[se]||(p.getFromId(e,se)._constraintShrinkable=!0)}return(U(e)||t.height||t.width)&&(m.plot=!0),(m.plot||m.calc)&&(m.layoutReplot=!0),{flags:m,rangesAltered:C,undoit:y,redoit:b,eventData:a.extendDeep({},b)}}function U(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&d.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function $(e,t,n,r){var i,o,s=r.getValObject,l=r.flags,c=r.immutable,u=r.inArray,d=r.arrayIndex;function f(){var e=i.editType;u&&-1!==e.indexOf("arraydraw")?a.pushUnique(l.arrays[u],d):T.update(l,i)}function p(e){return"data_array"===e.valType||e.arrayOk}for(o in e){if(l.calc)return;var h=e[o],g=t[o];if("_"!==o.charAt(0)&&"function"!=typeof h&&h!==g){if(("tick0"===o||"dtick"===o)&&"geo"!==n[0]){var v=t.tickmode;if("auto"===v||"array"===v||!v)continue}if(("range"!==o||!t.autorange)&&("zmin"!==o&&"zmax"!==o||"contourcarpet"!==t.type)){var m=n.concat(o);if((i=s(m))&&(!i._compareAsJSON||JSON.stringify(h)!==JSON.stringify(g))){var b,y=i.valType,x=p(i),_=Array.isArray(h),w=Array.isArray(g);if(_&&w){var k="_input_"+o,A=e[k],C=t[k];if(Array.isArray(A)&&A===C)continue}if(void 0===g)x&&_?l.calc=!0:f();else if(i._isLinkedToArray){var S=[],M=!1;u||(l.arrays[o]=S);var E=Math.min(h.length,g.length),O=Math.max(h.length,g.length);if(E!==O){if("arraydraw"!==i.editType){f();continue}M=!0}for(b=0;b<E;b++)$(h[b],g[b],m.concat(b),a.extendFlat({inArray:o,arrayIndex:b},r));if(M)for(b=E;b<O;b++)S.push(b)}else!y&&a.isPlainObject(h)?$(h,g,m,r):x?_&&w?c&&(l.calc=!0):_!==w?l.calc=!0:f():_&&w&&h.length===g.length&&String(h)===String(g)||f()}}}}for(o in t)if(!(o in e||"_"===o.charAt(0)||"function"==typeof t[o])){if(p(i=s(n.concat(o)))&&Array.isArray(t[o]))return void(l.calc=!0);f()}}function W(e){var t=r.select(e),n=e._fullLayout;if(n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var i={};r.selectAll("defs").each(function(){this.id&&(i[this.id.split("-")[1]]=1)}),n._uid=a.randstr(i)}n._paperdiv.selectAll(".main-svg").attr(b.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var o=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=o.append("g").classed("imagelayer",!0),n._shapeLowerLayer=o.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var s=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=s.append("g").classed("imagelayer",!0),n._shapeUpperLayer=s.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),e.emit("plotly_framework")}n.update=function e(t,r,i,o){if(t=a.getGraphDiv(t),w.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);a.isPlainObject(r)||(r={}),a.isPlainObject(i)||(i={}),Object.keys(r).length&&(t.changed=!0),Object.keys(i).length&&(t.changed=!0);var s=w.coerceTraceIndices(t,o),c=I(t,a.extendFlat({},r),s),u=c.flags,f=V(t,a.extendFlat({},i)),p=f.flags;(u.calc||p.calc)&&(t.calcdata=void 0),u.clearAxisTypes&&w.clearAxisTypes(t,s,i);var h=[];if(u.fullReplot&&p.layoutReplot){var g=t.data,v=t.layout;t.data=void 0,t.layout=void 0,h.push(function(){return n.plot(t,g,v)})}else u.fullReplot?h.push(n.plot):p.layoutReplot?h.push(k.layoutReplot):(h.push(d.previousPromises),N(t,p,f)||d.supplyDefaults(t),u.style&&h.push(k.doTraceStyle),u.colorbars&&h.push(k.doColorBars),p.legend&&h.push(k.doLegend),p.layoutstyle&&h.push(k.layoutStyles),p.axrange&&z(h,f.rangesAltered),p.ticks&&h.push(k.doTicksRelayout),p.modebar&&h.push(k.doModeBar),p.camera&&h.push(k.doCamera),h.push(S));h.push(d.rehover),l.add(t,e,[t,c.undoit,f.undoit,c.traces],e,[t,c.redoit,f.redoit,c.traces]);var m=a.syncOrAsync(h,t);return m&&m.then||(m=Promise.resolve(t)),m.then(function(){return t.emit("plotly_update",{data:c.eventData,layout:f.eventData}),t})},n.react=function(e,t,r,i){var o,s;var l=(e=a.getGraphDiv(e))._fullData,f=e._fullLayout;if(a.isPlotDiv(e)&&l&&f){if(a.isPlainObject(t)){var p=t;t=p.data,r=p.layout,i=p.config,o=p.frames}var h=!1;if(i){var g=a.extendDeep({},e._context);e._context=void 0,O(e,i),h=function e(t,n){var r;for(r in t)if("_"!==r.charAt(0)){var i=t[r],o=n[r];if(i!==o)if(a.isPlainObject(i)&&a.isPlainObject(o)){if(e(i,o))return!0}else{if(!Array.isArray(i)||!Array.isArray(o))return!0;if(i.length!==o.length)return!0;for(var s=0;s<i.length;s++)if(i[s]!==o[s]){if(!a.isPlainObject(i[s])||!a.isPlainObject(o[s]))return!0;if(e(i[s],o[s]))return!0}}}}(g,e._context)}e.data=t||[],w.cleanData(e.data),e.layout=r||{},w.cleanLayout(e.layout),d.supplyDefaults(e,{skipUpdateCalc:!0});var v=e._fullData,m=e._fullLayout,b=void 0===m.datarevision,y=function(e,t,n,r){if(t.length!==n.length)return{fullReplot:!0,calc:!0};var i,o,a=T.traceFlags();a.arrays={};var s={getValObject:function(e){return u.getTraceValObject(o,e)},flags:a,immutable:r,gd:e},l={};for(i=0;i<t.length;i++)o=n[i]._fullInput,d.hasMakesDataTransform(o)&&(o=n[i]),l[o.uid]||(l[o.uid]=1,$(t[i]._fullInput,o,[],s));(a.calc||a.plot)&&(a.fullReplot=!0);return a}(e,l,v,b),x=function(e,t,n,r){var i=T.layoutFlags();i.arrays={},$(t,n,[],{getValObject:function(e){return u.getLayoutValObject(n,e)},flags:i,immutable:r,gd:e}),(i.plot||i.calc)&&(i.layoutReplot=!0);return i}(e,f,m,b);U(e)&&(x.layoutReplot=!0),y.calc||x.calc?e.calcdata=void 0:d.supplyDefaultsUpdateCalc(e.calcdata,v);var _=[];if(o&&(e._transitionData={},d.createTransitionData(e),_.push(function(){return n.addFrames(e,o)})),y.fullReplot||x.layoutReplot||h)e._fullLayout._skipDefaults=!0,_.push(n.plot);else{for(var A in x.arrays){var C=x.arrays[A];if(C.length){var M=c.getComponentMethod(A,"drawOne");if(M!==a.noop)for(var E=0;E<C.length;E++)M(e,C[E]);else{var L=c.getComponentMethod(A,"draw");if(L===a.noop)throw new Error("cannot draw components: "+A);L(e)}}}_.push(d.previousPromises),y.style&&_.push(k.doTraceStyle),y.colorbars&&_.push(k.doColorBars),x.legend&&_.push(k.doLegend),x.layoutstyle&&_.push(k.layoutStyles),x.axrange&&z(_),x.ticks&&_.push(k.doTicksRelayout),x.modebar&&_.push(k.doModeBar),x.camera&&_.push(k.doCamera),_.push(S)}_.push(d.rehover),(s=a.syncOrAsync(_,e))&&s.then||(s=Promise.resolve(e))}else s=n.newPlot(e,t,r,i);return s.then(function(){return e.emit("plotly_react",{data:t,layout:r}),e})},n.animate=function(e,t,n){if(e=a.getGraphDiv(e),!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var r=e._transitionData;r._frameQueue||(r._frameQueue=[]);var i=(n=d.supplyAnimationDefaults(n)).transition,o=n.frame;function s(e){return Array.isArray(i)?e>=i.length?i[0]:i[e]:i}function l(e){return Array.isArray(o)?e>=o.length?o[0]:o[e]:o}function c(e,t){var n=0;return function(){if(e&&++n===t)return e()}}return void 0===r._frameWaitingCnt&&(r._frameWaitingCnt=0),new Promise(function(o,u){function f(){r._currentFrame&&r._currentFrame.onComplete&&r._currentFrame.onComplete();var t=r._currentFrame=r._frameQueue.shift();if(t){var n=t.name?t.name.toString():null;e._fullLayout._currentFrame=n,r._lastFrameAt=Date.now(),r._timeToNext=t.frameOpts.duration,d.transition(e,t.frame.data,t.frame.layout,w.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then(function(){t.onComplete&&t.onComplete()}),e.emit("plotly_animatingframe",{name:n,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else e.emit("plotly_animated"),window.cancelAnimationFrame(r._animationRaf),r._animationRaf=null}function p(){e.emit("plotly_animating"),r._lastFrameAt=-1/0,r._timeToNext=0,r._runningTransitions=0,r._currentFrame=null;var t=function(){r._animationRaf=window.requestAnimationFrame(t),Date.now()-r._lastFrameAt>r._timeToNext&&f()};t()}var h,g,v=0;function m(e){return Array.isArray(i)?v>=i.length?e.transitionOpts=i[v]:e.transitionOpts=i[0]:e.transitionOpts=i,v++,e}var b=[],y=void 0===t||null===t,x=Array.isArray(t);if(!y&&!x&&a.isPlainObject(t))b.push({type:"object",data:m(a.extendFlat({},t))});else if(y||-1!==["string","number"].indexOf(typeof t))for(h=0;h<r._frames.length;h++)(g=r._frames[h])&&(y||String(g.group)===String(t))&&b.push({type:"byname",name:String(g.name),data:m({name:g.name})});else if(x)for(h=0;h<t.length;h++){var _=t[h];-1!==["number","string"].indexOf(typeof _)?(_=String(_),b.push({type:"byname",name:_,data:m({name:_})})):a.isPlainObject(_)&&b.push({type:"object",data:m(a.extendFlat({},_))})}for(h=0;h<b.length;h++)if("byname"===(g=b[h]).type&&!r._frameHash[g.data.name])return a.warn('animate failure: frame not found: "'+g.data.name+'"'),void u();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==r._frameQueue.length){for(;r._frameQueue.length;){var t=r._frameQueue.pop();t.onInterrupt&&t.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&b.reverse();var k=e._fullLayout._currentFrame;if(k&&n.fromcurrent){var T=-1;for(h=0;h<b.length;h++)if("byname"===(g=b[h]).type&&g.name===k){T=h;break}if(T>0&&T<b.length-1){var A=[];for(h=0;h<b.length;h++)g=b[h],("byname"!==b[h].type||h>T)&&A.push(g);b=A}}b.length>0?function(t){if(0!==t.length){for(var i=0;i<t.length;i++){var a;a="byname"===t[i].type?d.computeFrame(e,t[i].name):t[i].data;var f=l(i),h=s(i);h.duration=Math.min(h.duration,f.duration);var g={frame:a,name:t[i].name,frameOpts:f,transitionOpts:h};i===t.length-1&&(g.onComplete=c(o,2),g.onInterrupt=u),r._frameQueue.push(g)}"immediate"===n.mode&&(r._lastFrameAt=-1/0),r._animationRaf||p()}}(b):(e.emit("plotly_animated"),o())})},n.addFrames=function(e,t,n){if(e=a.getGraphDiv(e),null===t||void 0===t)return Promise.resolve();if(!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var r,i,o,s,c=e._transitionData._frames,u=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var f=c.length+2*t.length,p=[],h={};for(r=t.length-1;r>=0;r--)if(a.isPlainObject(t[r])){var g=t[r].name,v=(u[g]||h[g]||{}).name,m=t[r].name,b=u[v]||h[v];v&&m&&"number"==typeof m&&b&&C<5&&(C++,a.warn('addFrames: overwriting frame "'+(u[v]||h[v]).name+'" with a frame whose name of type "number" also equates to "'+v+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===C&&a.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),h[g]={name:g},p.push({frame:d.supplyFrameDefaults(t[r]),index:n&&void 0!==n[r]&&null!==n[r]?n[r]:f+r})}p.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var y=[],x=[],_=c.length;for(r=p.length-1;r>=0;r--){if("number"==typeof(i=p[r].frame).name&&a.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!i.name)for(;u[i.name="frame "+e._transitionData._counter++];);if(u[i.name]){for(o=0;o<c.length&&(c[o]||{}).name!==i.name;o++);y.push({type:"replace",index:o,value:i}),x.unshift({type:"replace",index:o,value:c[o]})}else s=Math.max(0,Math.min(p[r].index,_)),y.push({type:"insert",index:s,value:i}),x.unshift({type:"delete",index:s}),_++}var w=d.modifyFrames,k=d.modifyFrames,T=[e,x],A=[e,y];return l&&l.add(e,w,T,k,A),d.modifyFrames(e,y)},n.deleteFrames=function(e,t){if(e=a.getGraphDiv(e),!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,i=e._transitionData._frames,o=[],s=[];if(!t)for(t=[],n=0;n<i.length;n++)t.push(n);for((t=t.slice(0)).sort(),n=t.length-1;n>=0;n--)r=t[n],o.push({type:"delete",index:r}),s.unshift({type:"insert",index:r,value:i[r]});var c=d.modifyFrames,u=d.modifyFrames,f=[e,s],p=[e,o];return l&&l.add(e,c,f,u,p),d.modifyFrames(e,o)},n.purge=function(e){var t=(e=a.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return d.cleanPlot([],{},n,t),d.purge(e),s.purge(e),t._container&&t._container.remove(),delete e._context,e}},{"../components/color":43,"../components/colorbar/connect":45,"../components/drawing":68,"../constants/xmlns_namespaces":144,"../lib":161,"../lib/events":154,"../lib/queue":176,"../lib/svg_text_utils":183,"../plots/cartesian/axes":206,"../plots/cartesian/constants":212,"../plots/cartesian/graph_interact":216,"../plots/plots":239,"../plots/polar/legacy":242,"../registry":246,"./edit_types":189,"./helpers":190,"./manage_arrays":192,"./plot_config":194,"./plot_schema":195,"./subroutines":197,d3:8,"fast-isnumeric":10,"has-hover":12}],194:[function(e,t,n){"use strict";t.exports={staticPlot:!1,plotlyServerURL:"https://plot.ly",editable:!1,edits:{annotationPosition:!1,annotationTail:!1,annotationText:!1,axisTitleText:!1,colorbarPosition:!1,colorbarTitleText:!1,legendPosition:!1,legendText:!1,shapePosition:!1,titleText:!1},autosizable:!1,responsive:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showAxisDragHandles:!0,showAxisRangeEntryBoxes:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,toImageButtonOptions:{},displaylogo:!0,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}}},{}],195:[function(e,t,n){"use strict";var r=e("../registry"),i=e("../lib"),o=e("../plots/attributes"),a=e("../plots/layout_attributes"),s=e("../plots/frame_attributes"),l=e("../plots/animation_attributes"),c=e("../plots/polar/legacy/area_attributes"),u=e("../plots/polar/legacy/axis_attributes"),d=e("./edit_types"),f=i.extendFlat,p=i.extendDeepAll,h=i.isPlainObject,g="_isSubplotObj",v="_isLinkedToArray",m=[g,v,"_arrayAttrRegexps","_deprecated"];function b(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(y(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!h(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!y(t[++n]))return!1}else if("info_array"===e.valType){var i=t[++n];if(!y(i))return!1;var o=e.items;if(Array.isArray(o)){if(i>=o.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;var a=t[n];if(!y(a))return!1;e=o[i][a]}else e=o[i]}else e=o}}return e}function y(e){return e===Math.round(e)&&e>=0}function x(e){return function(e){n.crawl(e,function(e,t,r){n.isValObject(e)?"data_array"===e.valType?(e.role="data",r[t+"src"]={valType:"string",editType:"none"}):!0===e.arrayOk&&(r[t+"src"]={valType:"string",editType:"none"}):h(e)&&(e.role="object")})}(e),function(e){n.crawl(e,function(e,t,n){if(!e)return;var r=e[v];if(!r)return;delete e[v],n[t]={items:{}},n[t].items[r]=e,n[t].role="object"})}(e),function(e){!function e(t){for(var n in t)if(h(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e(t[n][r]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}(e)}(e),e}function _(e,t,n){var r=i.nestedProperty(e,n),o=p({},t.layoutAttributes);o[g]=!0,r.set(o)}function w(e,t,n){var r=i.nestedProperty(e,n);r.set(p(r.get()||{},t))}n.IS_SUBPLOT_OBJ=g,n.IS_LINKED_TO_ARRAY=v,n.DEPRECATED="_deprecated",n.UNDERSCORE_ATTRS=m,n.get=function(){var e={};r.allTypes.concat("area").forEach(function(t){e[t]=function(e){var t,n;"area"===e?(t={attributes:c},n={}):(t=r.modules[e]._module,n=t.basePlotModule);var i={type:null};p(i,o),p(i,t.attributes),n.attributes&&p(i,n.attributes);i.type=e;var a={meta:t.meta||{},attributes:x(i)};if(t.layoutAttributes){var s={};p(s,t.layoutAttributes),a.layoutAttributes=x(s)}return a}(t)});var t={};return Object.keys(r.transformsRegistry).forEach(function(e){t[e]=function(e){var t=r.transformsRegistry[e],n=p({},t.attributes);return Object.keys(r.componentsRegistry).forEach(function(t){var i=r.componentsRegistry[t];i.schema&&i.schema.transforms&&i.schema.transforms[e]&&Object.keys(i.schema.transforms[e]).forEach(function(t){w(n,i.schema.transforms[e][t],t)})}),{attributes:x(n)}}(e)}),{defs:{valObjects:i.valObjectMeta,metaKeys:m.concat(["description","role","editType","impliedEdits"]),editType:{traces:d.traces,layout:d.layout},impliedEdits:{}},traces:e,layout:function(){var e,t,n={};for(e in p(n,a),r.subplotsRegistry)if((t=r.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(t.attr))for(var i=0;i<t.attr.length;i++)_(n,t,t.attr[i]);else{var o="subplot"===t.attr?t.name:t.attr;_(n,t,o)}for(e in n=function(e){return f(e,{radialaxis:u.radialaxis,angularaxis:u.angularaxis}),f(e,u.layout),e}(n),r.componentsRegistry){var s=(t=r.componentsRegistry[e]).schema;if(s&&(s.subplots||s.layout)){var l=s.subplots;if(l&&l.xaxis&&!l.yaxis)for(var c in l.xaxis)delete n.yaxis[c]}else t.layoutAttributes&&w(n,t.layoutAttributes,t.name)}return{layoutAttributes:x(n)}}(),transforms:t,frames:function(){var e={frames:i.extendDeepAll({},s)};return x(e),e.frames}(),animation:x(l)}},n.crawl=function(e,t,r,i){var o=r||0;i=i||"",Object.keys(e).forEach(function(r){var a=e[r];if(-1===m.indexOf(r)){var s=(i?i+".":"")+r;t(a,r,e,o,s),n.isValObject(a)||h(a)&&"impliedEdits"!==r&&n.crawl(a,t,o+1,s)}})},n.isValObject=function(e){return e&&void 0!==e.valType},n.findArrayAttributes=function(e){var t,r,a=[],s=[],l=[];function c(e,n,o,c){s=s.slice(0,c).concat([n]),l=l.slice(0,c).concat([e&&e._isLinkedToArray]),e&&("data_array"===e.valType||!0===e.arrayOk)&&!("colorbar"===s[c-1]&&("ticktext"===n||"tickvals"===n))&&function e(t,n,o){var c=t[s[n]];var u=o+s[n];if(n===s.length-1)i.isArrayOrTypedArray(c)&&a.push(r+u);else if(l[n]){if(Array.isArray(c))for(var d=0;d<c.length;d++)i.isPlainObject(c[d])&&e(c[d],n+1,u+"["+d+"].")}else i.isPlainObject(c)&&e(c,n+1,u+".")}(t,0,"")}t=e,r="",n.crawl(o,c),e._module&&e._module.attributes&&n.crawl(e._module.attributes,c);var u=e.transforms;if(u)for(var d=0;d<u.length;d++){var f=u[d],p=f._module;p&&(r="transforms["+d+"].",t=f,n.crawl(p.attributes,c))}return a},n.getTraceValObject=function(e,t){var n,i,a=t[0],s=1;if("transforms"===a){if(1===t.length)return o.transforms;var l=e.transforms;if(!Array.isArray(l)||!l.length)return!1;var u=t[1];if(!y(u)||u>=l.length)return!1;i=(n=(r.transformsRegistry[l[u].type]||{}).attributes)&&n[t[2]],s=3}else if("area"===e.type)i=c[a];else{var d=e._module;if(d||(d=(r.modules[e.type||o.type.dflt]||{})._module),!d)return!1;if(!(i=(n=d.attributes)&&n[a])){var f=d.basePlotModule;f&&f.attributes&&(i=f.attributes[a])}i||(i=o[a])}return b(i,t,s)},n.getLayoutValObject=function(e,t){return b(function(e,t){var n,i,o,s,l=e._basePlotModules;if(l){var c;for(n=0;n<l.length;n++){if((o=l[n]).attrRegex&&o.attrRegex.test(t)){if(o.layoutAttrOverrides)return o.layoutAttrOverrides;!c&&o.layoutAttributes&&(c=o.layoutAttributes)}var d=o.baseLayoutAttrOverrides;if(d&&t in d)return d[t]}if(c)return c}var f=e._modules;if(f)for(n=0;n<f.length;n++)if((s=f[n].layoutAttributes)&&t in s)return s[t];for(i in r.componentsRegistry)if(!(o=r.componentsRegistry[i]).schema&&t===o.name)return o.layoutAttributes;if(t in a)return a[t];if("radialaxis"===t||"angularaxis"===t)return u[t];return u.layout[t]||!1}(e,t[0]),t,1)}},{"../lib":161,"../plots/animation_attributes":201,"../plots/attributes":203,"../plots/frame_attributes":234,"../plots/layout_attributes":237,"../plots/polar/legacy/area_attributes":240,"../plots/polar/legacy/axis_attributes":241,"../registry":246,"./edit_types":189}],196:[function(e,t,n){"use strict";var r=e("../lib"),i=e("../plots/attributes"),o="templateitemname",a={name:{valType:"string",editType:"none"}};function s(e){return e&&"string"==typeof e}function l(e){var t=e.length-1;return"s"!==e.charAt(t)&&r.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}a[o]={valType:"string",editType:"calc"},n.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=a.name,t[o]=a[o],t},n.traceTemplater=function(e){var t,n,o={};for(t in e)n=e[t],Array.isArray(n)&&n.length&&(o[t]=0);return{newTrace:function(a){var s={type:t=r.coerce(a,{},i,"type"),_template:null};if(t in o){n=e[t];var l=o[t]%n.length;o[t]++,s._template=n[l]}return s}}},n.newContainer=function(e,t,n){var i=e._template,o=i&&(i[t]||n&&i[n]);return r.isPlainObject(o)||(o=null),e[t]={_template:o}},n.arrayTemplater=function(e,t,n){var r=e._template,i=r&&r[l(t)],a=r&&r[t];Array.isArray(a)&&a.length||(a=[]);var c={};return{newItem:function(e){var t={name:e.name,_input:e},r=t[o]=e[o];if(!s(r))return t._template=i,t;for(var l=0;l<a.length;l++){var u=a[l];if(u.name===r)return c[r]=1,t._template=u,t}return t[n]=e[n]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<a.length;t++){var n=a[t],r=n.name;if(s(r)&&!c[r]){var i={_template:n,name:r,_input:{_templateitemname:r}};i[o]=n[o],e.push(i),c[r]=1}}return e}}},n.arrayDefaultKey=l,n.arrayEditor=function(e,t,n){var i=(r.nestedProperty(e,t).get()||[]).length,a=n._index,s=a>=i&&(n._input||{})._templateitemname;s&&(a=i);var l,c=t+"["+a+"]";function u(){l={},s&&(l[c]={},l[c][o]=s)}function d(e,t){s?r.nestedProperty(l[c],e).set(t):l[c+"."+e]=t}function f(){var e=l;return u(),e}return u(),{modifyBase:function(e,t){l[e]=t},modifyItem:d,getUpdateObj:f,applyUpdate:function(t,n){t&&d(t,n);var i=f();for(var o in i)r.nestedProperty(e,o).set(i[o])}}}},{"../lib":161,"../plots/attributes":203}],197:[function(e,t,n){"use strict";var r=e("d3"),i=e("../registry"),o=e("../plots/plots"),a=e("../lib"),s=e("../lib/clear_gl_canvases"),l=e("../components/color"),c=e("../components/drawing"),u=e("../components/titles"),d=e("../components/modebar"),f=e("../plots/cartesian/axes"),p=e("../constants/alignment"),h=e("../plots/cartesian/constraints"),g=h.enforce,v=h.clean,m=e("../plots/cartesian/autorange").doAutoRange;function b(e,t,n){for(var r=0;r<n.length;r++){var i=n[r][0],o=n[r][1];if(!(i[0]>=e[1]||i[1]<=e[0])&&(o[0]<t[1]&&o[1]>t[0]))return!0}return!1}function y(e){var t,i,o,s,u,h=e._fullLayout,g=h._size,v=g.p,m=f.list(e,"",!0);if(h._paperdiv.style({width:e._context.responsive&&h.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":h.width+"px",height:e._context.responsive&&h.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":h.height+"px"}).selectAll(".main-svg").call(c.setSize,h.width,h.height),e._context.setBackground(e,h.paper_bgcolor),n.drawMainTitle(e),d.manage(e),!h._has("cartesian"))return e._promises.length&&Promise.all(e._promises);function y(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-v-r:t._offset+t._length+v+r:g.t+g.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+v+r:t._offset-v-r:g.l+g.w*(e.position||0)+r%1}for(t=0;t<m.length;t++){var w=m[t];w.setScale();var T=w._anchorAxis;w._linepositions={},w._lw=c.crispRound(e,w.linewidth,1),w._mainLinePosition=y(w,T,w.side),w._mainMirrorPosition=w.mirror&&T?y(w,T,p.OPPOSITE_SIDE[w.side]):null,w._mainSubplot=x(w,h)}var A=[],C=[],S=[],M=1===l.opacity(h.paper_bgcolor)&&1===l.opacity(h.plot_bgcolor)&&h.paper_bgcolor===h.plot_bgcolor;for(i in h._plots)if((o=h._plots[i]).mainplot)o.bg&&o.bg.remove(),o.bg=void 0;else{var E=o.xaxis.domain,O=o.yaxis.domain,L=o.plotgroup;if(b(E,O,S)){var P=L.node(),D=o.bg=a.ensureSingle(L,"rect","bg");P.insertBefore(D.node(),P.childNodes[0]),C.push(i)}else L.select("rect.bg").remove(),S.push([E,O]),M||(A.push(i),C.push(i))}var R,F,j,I,N,z,q,H,B,V,U,$,W,X=h._bgLayer.selectAll(".bg").data(A);for(X.enter().append("rect").classed("bg",!0),X.exit().remove(),X.each(function(e){h._plots[e].bg=r.select(this)}),t=0;t<C.length;t++)o=h._plots[C[t]],s=o.xaxis,u=o.yaxis,o.bg&&o.bg.call(c.setRect,s._offset-v,u._offset-v,s._length+2*v,u._length+2*v).call(l.fill,h.plot_bgcolor).style("stroke-width",0);if(!h._hasOnlyLargeSploms)for(i in h._plots){o=h._plots[i],s=o.xaxis,u=o.yaxis;var G,Y,Z=o.clipId="clip"+h._uid+i+"plot",J=a.ensureSingleById(h._clips,"clipPath",Z,function(e){e.classed("plotclip",!0).append("rect")});o.clipRect=J.select("rect").attr({width:s._length,height:u._length}),c.setTranslate(o.plot,s._offset,u._offset),o._hasClipOnAxisFalse?(G=null,Y=Z):(G=Z,Y=null),c.setClipUrl(o.plot,G),o.layerClipId=Y}function K(e){return"M"+R+","+e+"H"+F}function Q(e){return"M"+s._offset+","+e+"h"+s._length}function ee(e){return"M"+e+","+H+"V"+q}function te(e){return"M"+e+","+u._offset+"v"+u._length}function ne(e,t,n){if(!e.showline||i!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);var r=t(e._mainLinePosition);return e.mirror&&(r+=t(e._mainMirrorPosition)),r}for(i in h._plots){o=h._plots[i],s=o.xaxis,u=o.yaxis;var re="M0,0";_(s,i)&&(N=k(s,"left",u,m),R=s._offset-(N?v+N:0),z=k(s,"right",u,m),F=s._offset+s._length+(z?v+z:0),j=y(s,u,"bottom"),I=y(s,u,"top"),!(W=!s._anchorAxis||i!==s._mainSubplot)||"allticks"!==s.mirror&&"all"!==s.mirror||(s._linepositions[i]=[j,I]),re=ne(s,K,Q),W&&s.showline&&("all"===s.mirror||"allticks"===s.mirror)&&(re+=K(j)+K(I)),o.xlines.style("stroke-width",s._lw+"px").call(l.stroke,s.showline?s.linecolor:"rgba(0,0,0,0)")),o.xlines.attr("d",re);var ie="M0,0";_(u,i)&&(U=k(u,"bottom",s,m),q=u._offset+u._length+(U?v:0),$=k(u,"top",s,m),H=u._offset-($?v:0),B=y(u,s,"left"),V=y(u,s,"right"),!(W=!u._anchorAxis||i!==u._mainSubplot)||"allticks"!==u.mirror&&"all"!==u.mirror||(u._linepositions[i]=[B,V]),ie=ne(u,ee,te),W&&u.showline&&("all"===u.mirror||"allticks"===u.mirror)&&(ie+=ee(B)+ee(V)),o.ylines.style("stroke-width",u._lw+"px").call(l.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")),o.ylines.attr("d",ie)}return f.makeClipPaths(e),e._promises.length&&Promise.all(e._promises)}function x(e,t){var n=t._subplots,r=n.cartesian.concat(n.gl2d||[]),i={_fullLayout:t},o="x"===e._id.charAt(0),a=e._mainAxis._anchorAxis,s="",l="",c="";if(a&&(c=a._mainAxis._id,s=o?e._id+c:c+e._id),!s||!t._plots[s]){s="";for(var u=0;u<r.length;u++){var d=r[u],p=d.indexOf("y"),h=o?d.substr(0,p):d.substr(p),g=o?d.substr(p):d.substr(0,p);if(h===e._id){l||(l=d);var v=f.getFromId(i,g);if(c&&v.overlaying===c){s=d;break}}}}return s||l}function _(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function w(e,t,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var r=n._anchorAxis;if(!r)return!1;var i=p.FROM_BL[t];return n.side===t?r.domain[i]===e.domain[i]:n.mirror&&r.domain[1-i]===e.domain[1-i]}function k(e,t,n,r){if(w(e,t,n))return n._lw;for(var i=0;i<r.length;i++){var o=r[i];if(o._mainAxis===n._mainAxis&&w(e,t,o))return o._lw}return 0}n.layoutStyles=function(e){return a.syncOrAsync([o.doAutoMargin,y],e)},n.drawMainTitle=function(e){var t=e._fullLayout;u.draw(e,"gtitle",{propContainer:t,propName:"title",placeholder:t._dfltTitle.plot,attributes:{x:t.width/2,y:t._size.t/2,"text-anchor":"middle"}})},n.doTraceStyle=function(e){var t,r=e.calcdata,a=[];for(t=0;t<r.length;t++){var l=r[t],c=l[0]||{},u=c.trace||{},d=u._module||{},f=d.arraysToCalcdata;f&&f(l,u);var p=d.editStyle;p&&a.push({fn:p,cd0:c})}if(a.length){for(t=0;t<a.length;t++){var h=a[t];h.fn(e,h.cd0)}s(e),n.redrawReglTraces(e)}return o.style(e),i.getComponentMethod("legend","draw")(e),o.previousPromises(e)},n.doColorBars=function(e){for(var t=0;t<e.calcdata.length;t++){var n=e.calcdata[t][0];if((n.t||{}).cb){var r=n.trace,a=n.t.cb;i.traceIs(r,"contour")&&a.line({width:!1!==r.contours.showlines?r.line.width:0,dash:r.line.dash,color:"line"===r.contours.coloring?a._opts.line.color:r.line.color});var s=r._module.colorbar.container,l=(s?r[s]:r).colorbar;a.options(l)()}}return o.previousPromises(e)},n.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,i.call("plot",e,"",t)},n.doLegend=function(e){return i.getComponentMethod("legend","draw")(e),o.previousPromises(e)},n.doTicksRelayout=function(e){return f.doTicks(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(i.subplotsRegistry.splom.updateGrid(e),s(e),n.redrawReglTraces(e)),n.drawMainTitle(e),o.previousPromises(e)},n.doModeBar=function(e){var t=e._fullLayout;d.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return o.previousPromises(e)},n.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var i=t[n[r]];i._scene.setCamera(i.camera)}},n.drawData=function(e){var t,r=e._fullLayout,a=e.calcdata;for(t=0;t<a.length;t++){var l=a[t][0].trace;!0===l.visible&&l._module.colorbar||r._infolayer.select(".cb"+l.uid).remove()}s(e);var c=r._basePlotModules;for(t=0;t<c.length;t++)c[t].plot(e);return n.redrawReglTraces(e),o.style(e),i.getComponentMethod("shapes","draw")(e),i.getComponentMethod("annotations","draw")(e),r._replotting=!1,o.previousPromises(e)},n.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,r,i=e._fullData,o=[],s=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<i.length;n++){var l=i[n];!0===l.visible&&("splom"===l.type?t._splomScenes[l.uid].draw():"scattergl"===l.type?a.pushUnique(o,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&a.pushUnique(s,l.subplot))}for(n=0;n<o.length;n++)(r=t._plots[o[n]])._scene&&r._scene.draw();for(n=0;n<s.length;n++)(r=t[s[n]]._subplot)._scene&&r._scene.draw()}},n.doAutoRangeAndConstraints=function(e){for(var t=f.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];v(e,r),m(e,r)}g(e)},n.finalDraw=function(e){i.getComponentMethod("shapes","draw")(e),i.getComponentMethod("images","draw")(e),i.getComponentMethod("annotations","draw")(e),i.getComponentMethod("rangeslider","draw")(e),i.getComponentMethod("rangeselector","draw")(e)},n.drawMarginPushers=function(e){i.getComponentMethod("legend","draw")(e),i.getComponentMethod("rangeselector","draw")(e),i.getComponentMethod("sliders","draw")(e),i.getComponentMethod("updatemenus","draw")(e)}},{"../components/color":43,"../components/drawing":68,"../components/modebar":106,"../components/titles":134,"../constants/alignment":141,"../lib":161,"../lib/clear_gl_canvases":149,"../plots/cartesian/autorange":205,"../plots/cartesian/axes":206,"../plots/cartesian/constraints":214,"../plots/plots":239,"../registry":246,d3:8}],198:[function(e,t,n){"use strict";var r=e("../lib"),i=r.isPlainObject,o=e("./plot_schema"),a=e("../plots/plots"),s=e("../plots/attributes"),l=e("./plot_template"),c=e("./plot_config");function u(e,t){e=r.extendDeep({},e);var n,o,a=Object.keys(e).sort();function s(t,n,r){if(i(n)&&i(t))u(t,n);else if(Array.isArray(n)&&Array.isArray(t)){var a=l.arrayTemplater({_template:e},r);for(o=0;o<n.length;o++){var s=n[o],c=a.newItem(s)._template;c&&u(c,s)}var d=a.defaultItems();for(o=0;o<d.length;o++)n.push(d[o]._template);for(o=0;o<n.length;o++)delete n[o].templateitemname}}for(n=0;n<a.length;n++){var c=a[n],f=e[c];if(c in t?s(f,t[c],c):t[c]=f,d(c)===c)for(var p in t){var h=d(p);p===h||h!==c||p in e||s(f,t[p],c)}}}function d(e){return e.replace(/[0-9]+$/,"")}function f(e,t,n,o,a){var s=a&&n(a);for(var c in e){var u=e[c],h=p(e,c,o),g=p(e,c,a),v=n(g);if(!v){var m=d(c);m!==c&&(v=n(g=p(e,m,a)))}if((!s||s!==v)&&!(!v||v._noTemplating||"data_array"===v.valType||v.arrayOk&&Array.isArray(u)))if(!v.valType&&i(u))f(u,t,n,h,g);else if(v._isLinkedToArray&&Array.isArray(u))for(var b=!1,y=0,x={},_=0;_<u.length;_++){var w=u[_];if(i(w)){var k=w.name;if(k)x[k]||(f(w,t,n,p(u,y,h),p(u,y,g)),y++,x[k]=1);else if(!b){var T=p(e,l.arrayDefaultKey(c),o),A=p(u,y,h);f(w,t,n,A,p(u,y,g));var C=r.nestedProperty(t,A);r.nestedProperty(t,T).set(C.get()),C.set(null),b=!0}}}else{r.nestedProperty(t,h).set(u)}}}function p(e,t,n){return n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t}function h(e){for(var t=0;t<e.length;t++)if(i(e[t]))return!0}function g(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}n.makeTemplate=function(e){e=r.extendDeep({_context:c},{data:e.data,layout:e.layout}),a.supplyDefaults(e);var t=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var l={data:{},layout:{}};t.forEach(function(e){var t={};f(e,t,function(e,t){return o.getTraceValObject(e,r.nestedProperty({},t).parts)}.bind(null,e));var n=r.coerce(e,{},s,"type"),i=l.data[n];i||(i=l.data[n]=[]),i.push(t)}),f(n,l.layout,function(e,t){return o.getLayoutValObject(e,r.nestedProperty({},t).parts)}.bind(null,n)),delete l.layout.template;var d=n.template;if(i(d)){var p,h,g,v,m,b,y=d.layout;i(y)&&u(y,l.layout);var x=d.data;if(i(x)){for(h in l.data)if(g=x[h],Array.isArray(g)){for(b=(m=l.data[h]).length,v=g.length,p=0;p<b;p++)u(g[p%v],m[p]);for(p=b;p<v;p++)m.push(r.extendDeep({},g[p]))}for(h in x)h in l.data||(l.data[h]=r.extendDeep([],x[h]))}}return l},n.validateTemplate=function(e,t){var n=r.extendDeep({},{_context:c,data:e.data,layout:e.layout}),o=n.layout||{};i(t)||(t=o.template||{});var s=t.layout,l=t.data,u=[];n.layout=o,n.layout.template=t,a.supplyDefaults(n);var f=n._fullLayout,v=n._fullData,m={};if(i(s)?(!function e(t,n){for(var r in t)if("_"!==r.charAt(0)&&i(t[r])){var o,a=d(r),s=[];for(o=0;o<n.length;o++)s.push(p(t,r,n[o])),a!==r&&s.push(p(t,a,n[o]));for(o=0;o<s.length;o++)m[s[o]]=1;e(t[r],s)}}(f,["layout"]),function e(t,n){for(var r in t)if(-1===r.indexOf("defaults")&&i(t[r])){var o=p(t,r,n);m[o]?e(t[r],o):u.push({code:"unused",path:o})}}(s,"layout")):u.push({code:"layout"}),i(l)){for(var b,y={},x=0;x<v.length;x++){var _=v[x];y[b=_.type]=(y[b]||0)+1,_._fullInput._template||u.push({code:"missing",index:_._fullInput.index,traceType:b})}for(b in l){var w=l[b].length,k=y[b]||0;w>k?u.push({code:"unused",traceType:b,templateCount:w,dataCount:k}):k>w&&u.push({code:"reused",traceType:b,templateCount:w,dataCount:k})}}else u.push({code:"data"});if(function e(t,n){for(var r in t)if("_"!==r.charAt(0)){var o=t[r],a=p(t,r,n);i(o)?(Array.isArray(t)&&!1===o._template&&o.templateitemname&&u.push({code:"missing",path:a,templateitemname:o.templateitemname}),e(o,a)):Array.isArray(o)&&h(o)&&e(o,a)}}({data:v,layout:f},""),u.length)return u.map(g)}},{"../lib":161,"../plots/attributes":203,"../plots/plots":239,"./plot_config":194,"./plot_schema":195,"./plot_template":196}],199:[function(e,t,n){"use strict";var r=e("./plot_api"),i=e("../lib"),o=e("../snapshot/helpers"),a=e("../snapshot/tosvg"),s=e("../snapshot/svgtoimg"),l={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},c=/^data:image\/\w+;base64,/;t.exports=function(e,t){var n,u,d;function f(e){return!(e in t)||i.validate(t[e],l[e])}if(t=t||{},i.isPlainObject(e)?(n=e.data||[],u=e.layout||{},d=e.config||{}):(e=i.getGraphDiv(e),n=i.extendDeep([],e.data),u=i.extendDeep({},e.layout),d=e._context),!f("width")||!f("height"))throw new Error("Height and width should be pixel values.");if(!f("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var p={};function h(e,n){return i.coerce(t,p,l,e,n)}var g=h("format"),v=h("width"),m=h("height"),b=h("scale"),y=h("setBackground"),x=h("imageDataOnly"),_=document.createElement("div");_.style.position="absolute",_.style.left="-5000px",document.body.appendChild(_);var w=i.extendFlat({},u);v&&(w.width=v),m&&(w.height=m);var k=i.extendFlat({},d,{staticPlot:!0,setBackground:y}),T=o.getRedrawFunc(_);function A(){return new Promise(function(e){setTimeout(e,o.getDelay(_._fullLayout))})}function C(){return new Promise(function(e,t){var n=a(_,g,b),o=_._fullLayout.width,l=_._fullLayout.height;if(r.purge(_),document.body.removeChild(_),"svg"===g)return e(x?n:"data:image/svg+xml,"+encodeURIComponent(n));var c=document.createElement("canvas");c.id=i.randstr(),s({format:g,width:o,height:l,scale:b,canvas:c,svg:n,promise:!0}).then(e).catch(t)})}return new Promise(function(e,t){r.plot(_,n,w,k).then(T).then(A).then(C).then(function(t){e(function(e){return x?e.replace(c,""):e}(t))}).catch(function(e){t(e)})})}},{"../lib":161,"../snapshot/helpers":250,"../snapshot/svgtoimg":252,"../snapshot/tosvg":254,"./plot_api":193}],200:[function(e,t,n){"use strict";var r=e("../lib"),i=e("../plots/plots"),o=e("./plot_schema"),a=e("./plot_config"),s=r.isPlainObject,l=Array.isArray,c=r.isArrayOrTypedArray;function u(e,t,n,i,o,a){a=a||[];for(var d=Object.keys(e),f=0;f<d.length;f++){var v=d[f];if("transforms"!==v){var m=a.slice();m.push(v);var b=e[v],y=t[v],x=g(n,v),_="info_array"===(x||{}).valType,w="colorscale"===(x||{}).valType,k=(x||{}).items;if(h(n,v))if(s(b)&&s(y))u(b,y,x,i,o,m);else if(_&&l(b)){b.length>y.length&&i.push(p("unused",o,m.concat(y.length)));var T,A,C,S,M,E=y.length,O=Array.isArray(k);if(O&&(E=Math.min(E,k.length)),2===x.dimensions)for(A=0;A<E;A++)if(l(b[A])){b[A].length>y[A].length&&i.push(p("unused",o,m.concat(A,y[A].length)));var L=y[A].length;for(T=0;T<(O?Math.min(L,k[A].length):L);T++)C=O?k[A][T]:k,S=b[A][T],M=y[A][T],r.validate(S,C)?M!==S&&M!==+S&&i.push(p("dynamic",o,m.concat(A,T),S,M)):i.push(p("value",o,m.concat(A,T),S))}else i.push(p("array",o,m.concat(A),b[A]));else for(A=0;A<E;A++)C=O?k[A]:k,S=b[A],M=y[A],r.validate(S,C)?M!==S&&M!==+S&&i.push(p("dynamic",o,m.concat(A),S,M)):i.push(p("value",o,m.concat(A),S))}else if(x.items&&!_&&l(b)){var P,D,R=k[Object.keys(k)[0]],F=[];for(P=0;P<y.length;P++){var j=y[P]._index||P;if((D=m.slice()).push(j),s(b[j])&&s(y[P])){F.push(j);var I=b[j],N=y[P];s(I)&&!1!==I.visible&&!1===N.visible?i.push(p("invisible",o,D)):u(I,N,R,i,o,D)}}for(P=0;P<b.length;P++)(D=m.slice()).push(P),s(b[P])?-1===F.indexOf(P)&&i.push(p("unused",o,D)):i.push(p("object",o,D,b[P]))}else!s(b)&&s(y)?i.push(p("object",o,m,b)):c(b)||!c(y)||_||w?v in t?r.validate(b,x)?"enumerated"===x.valType&&(x.coerceNumber&&b!==+y||b!==y)&&i.push(p("dynamic",o,m,b,y)):i.push(p("value",o,m,b)):i.push(p("unused",o,m,b)):i.push(p("array",o,m,b));else i.push(p("schema",o,m))}}return i}t.exports=function(e,t){var n,c,d=o.get(),f=[],h={_context:r.extendFlat({},a)};l(e)?(h.data=r.extendDeep([],e),n=e):(h.data=[],n=[],f.push(p("array","data"))),s(t)?(h.layout=r.extendDeep({},t),c=t):(h.layout={},c={},arguments.length>1&&f.push(p("object","layout"))),i.supplyDefaults(h);for(var g=h._fullData,v=n.length,m=0;m<v;m++){var b=n[m],y=["data",m];if(s(b)){var x=g[m],_=x.type,w=d.traces[_].attributes;w.type={valType:"enumerated",values:[_]},!1===x.visible&&!1!==b.visible&&f.push(p("invisible",y)),u(b,x,w,f,y);var k=b.transforms,T=x.transforms;if(k){l(k)||f.push(p("array",y,["transforms"])),y.push("transforms");for(var A=0;A<k.length;A++){var C=["transforms",A],S=k[A].type;if(s(k[A])){var M=d.transforms[S]?d.transforms[S].attributes:{};M.type={valType:"enumerated",values:Object.keys(d.transforms)},u(k[A],T[A],M,f,y,C)}else f.push(p("object",y,C))}}}else f.push(p("object",y))}return u(c,h._fullLayout,function(e,t){for(var n=e.layout.layoutAttributes,i=0;i<t.length;i++){var o=t[i],a=e.traces[o.type],s=a.layoutAttributes;s&&(o.subplot?r.extendFlat(n[a.attributes.subplot.dflt],s):r.extendFlat(n,s))}return n}(d,g),f,"layout"),0===f.length?void 0:f};var d={object:function(e,t){return("layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":f(e)+"key "+t)+" must be linked to an object container"},array:function(e,t){return("data"===e?"The data argument":f(e)+"key "+t)+" must be linked to an array container"},schema:function(e,t){return f(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){var r=s(n)?"container":"key";return f(e)+r+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[f(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?f(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[f(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function f(e){return l(e)?"In data trace "+e[1]+", ":"In "+e+", "}function p(e,t,n,i,o){var a,s;n=n||"",l(t)?(a=t[0],s=t[1]):(a=t,s=null);var c=function(e){if(!l(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),u=d[e](t,c,i,o);return r.log(u),{code:e,container:a,trace:s,path:n,astr:c,msg:u}}function h(e,t){var n=m(t),r=n.keyMinusId,i=n.id;return!!(r in e&&e[r]._isSubplotObj&&i)||t in e}function g(e,t){return t in e?e[t]:e[m(t).keyMinusId]}var v=r.counterRegex("([a-z]+)");function m(e){var t=e.match(v);return{keyMinusId:t&&t[1],id:t&&t[2]}}},{"../lib":161,"../plots/plots":239,"./plot_config":194,"./plot_schema":195}],201:[function(e,t,n){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}}},{}],202:[function(e,t,n){"use strict";var r=e("../lib"),i=e("../plot_api/plot_template");t.exports=function(e,t,n){var o,a,s=n.name,l=n.inclusionAttr||"visible",c=t[s],u=r.isArrayOrTypedArray(e[s])?e[s]:[],d=t[s]=[],f=i.arrayTemplater(t,s,l);for(o=0;o<u.length;o++){var p=u[o];r.isPlainObject(p)?a=f.newItem(p):(a=f.newItem({}))[l]=!1,a._index=o,!1!==a[l]&&n.handleItemDefaults(p,a,t,n),d.push(a)}var h=f.defaultItems();for(o=0;o<h.length;o++)(a=h[o])._index=d.length,n.handleItemDefaults({},a,t,n,{}),d.push(a);if(r.isArrayOrTypedArray(c)){var g=Math.min(c.length,d.length);for(o=0;o<g;o++)r.relinkPrivateKeys(d[o],c[o])}return d}},{"../lib":161,"../plot_api/plot_template":196}],203:[function(e,t,n){"use strict";var r=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:r.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"}}},{"../components/fx/attributes":77}],204:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],205:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),o=e("../../constants/numerical").FP_SAFE;function a(e,t){var n,r,o=[],a=s(t),c=l(e,t),u=c.min,d=c.max;if(0===u.length||0===d.length)return i.simpleMap(t.range,t.r2l);var f=u[0].val,p=d[0].val;for(n=1;n<u.length&&f===p;n++)f=Math.min(f,u[n].val);for(n=1;n<d.length&&f===p;n++)p=Math.max(p,d[n].val);var h=!1;if(t.range){var g=i.simpleMap(t.range,t.r2l);h=g[1]<g[0]}"reversed"===t.autorange&&(h=!0,t.autorange=!0);var v,m,b,y,x,_,w=t.rangemode,k="tozero"===w,T="nonnegative"===w,A=t._length,C=A/10,S=0;for(n=0;n<u.length;n++)for(v=u[n],r=0;r<d.length;r++)(_=(m=d[r]).val-v.val)>0&&((x=A-a(v)-a(m))>C?_/x>S&&(b=v,y=m,S=_/x):_/A>S&&(b={val:v.val,pad:0},y={val:m.val,pad:0},S=_/A));if(f===p){var M=f-1,E=f+1;if(k)if(0===f)o=[0,1];else{var O=(f>0?d:u).reduce(function(e,t){return Math.max(e,a(t))},0),L=f/(1-Math.min(.5,O/A));o=f>0?[0,L]:[L,0]}else o=T?[Math.max(0,M),Math.max(1,E)]:[M,E]}else k?(b.val>=0&&(b={val:0,pad:0}),y.val<=0&&(y={val:0,pad:0})):T&&(b.val-S*a(b)<0&&(b={val:0,pad:0}),y.val<=0&&(y={val:1,pad:0})),S=(y.val-b.val)/(A-a(b)-a(y)),o=[b.val-S*a(b),y.val+S*a(y)];return h&&o.reverse(),i.simpleMap(o,t.l2r||Number)}function s(e){var t=e._length/20;return"domain"===e.constrain&&e._inputDomain&&(t*=(e._inputDomain[1]-e._inputDomain[0])/(e.domain[1]-e.domain[0])),function(e){return e.pad+(e.extrapad?t:0)}}function l(e,t){var n,r,i,o=t._id,a=e._fullData,s=e._fullLayout,l=[],d=[];function f(e,t){for(n=0;n<t.length;n++){var a=e[t[n]],s=(a._extremes||{})[o];if(!0===a.visible&&s){for(r=0;r<s.min.length;r++)i=s.min[r],c(l,i.val,i.pad,{extrapad:i.extrapad});for(r=0;r<s.max.length;r++)i=s.max[r],u(d,i.val,i.pad,{extrapad:i.extrapad})}}}return f(a,t._traceIndices),f(s.annotations||[],t._annIndices||[]),f(s.shapes||[],t._shapeIndices||[]),{min:l,max:d}}function c(e,t,n,r){d(e,t,n,r,p)}function u(e,t,n,r){d(e,t,n,r,h)}function d(e,t,n,r,i){for(var o=r.tozero,a=r.extrapad,s=!0,l=0;l<e.length&&s;l++){var c=e[l];if(i(c.val,t)&&c.pad>=n&&(c.extrapad||!a)){s=!1;break}i(t,c.val)&&c.pad<=n&&(a||!c.extrapad)&&(e.splice(l,1),l--)}if(s){var u=o&&0===t;e.push({val:t,pad:u?0:n,extrapad:!u&&a})}}function f(e){return r(e)&&Math.abs(e)<o}function p(e,t){return e<=t}function h(e,t){return e>=t}t.exports={getAutoRange:a,makePadFn:s,doAutoRange:function(e,t){t._length||t.setScale();var n;t.autorange&&(t.range=a(e,t),t._r=t.range.slice(),t._rl=i.simpleMap(t._r,t.r2l),(n=t._input).range=t.range.slice(),n.autorange=t.autorange);if(t._anchorAxis&&t._anchorAxis.rangeslider){var r=t._anchorAxis.rangeslider[t._name];r&&"auto"===r.rangemode&&(r.range=a(e,t)),(n=t._anchorAxis._input).rangeslider[t._name]=i.extendFlat({},r)}},findExtremes:function(e,t,n){n||(n={});e._m||e.setScale();var i,a,s,l,d,p,h,g,v,m=[],b=[],y=t.length,x=n.padded||!1,_=n.tozero&&("linear"===e.type||"-"===e.type),w="log"===e.type,k=!1;function T(e){if(Array.isArray(e))return k=!0,function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}var A=T((e._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),C=T((e._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),S=T(n.vpadplus||n.vpad),M=T(n.vpadminus||n.vpad);if(!k){if(g=1/0,v=-1/0,w)for(i=0;i<y;i++)(a=t[i])<g&&a>0&&(g=a),a>v&&a<o&&(v=a);else for(i=0;i<y;i++)(a=t[i])<g&&a>-o&&(g=a),a>v&&a<o&&(v=a);t=[g,v],y=2}var E={tozero:_,extrapad:x};function O(n){s=t[n],r(s)&&(p=A(n),h=C(n),g=s-M(n),v=s+S(n),w&&g<v/10&&(g=v/10),l=e.c2l(g),d=e.c2l(v),_&&(l=Math.min(0,l),d=Math.max(0,d)),f(l)&&c(m,l,h,E),f(d)&&u(b,d,p,E))}var L=Math.min(6,y);for(i=0;i<L;i++)O(i);for(i=y-1;i>=L;i--)O(i);return{min:m,max:b}},concatExtremes:l}},{"../../constants/numerical":143,"../../lib":161,"fast-isnumeric":10}],206:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("../../plots/plots"),a=e("../../registry"),s=e("../../lib"),l=e("../../lib/svg_text_utils"),c=e("../../components/titles"),u=e("../../components/color"),d=e("../../components/drawing"),f=e("./layout_attributes"),p=e("./clean_ticks"),h=e("../../constants/numerical"),g=h.ONEAVGYEAR,v=h.ONEAVGMONTH,m=h.ONEDAY,b=h.ONEHOUR,y=h.ONEMIN,x=h.ONESEC,_=h.MINUS_SIGN,w=h.BADNUM,k=e("../../constants/alignment").MID_SHIFT,T=e("../../constants/alignment").LINE_SPACING,A=t.exports={};A.setConvert=e("./set_convert");var C=e("./axis_autotype"),S=e("./axis_ids");A.id2name=S.id2name,A.name2id=S.name2id,A.cleanId=S.cleanId,A.list=S.list,A.listIds=S.listIds,A.getFromId=S.getFromId,A.getFromTrace=S.getFromTrace;var M=e("./autorange");A.getAutoRange=M.getAutoRange,A.findExtremes=M.findExtremes,A.coerceRef=function(e,t,n,r,i,o){var a=r.charAt(r.length-1),l=n._fullLayout._subplots[a+"axis"],c=r+"ref",u={};return i||(i=l[0]||o),o||(o=i),u[c]={valType:"enumerated",values:l.concat(o?[o]:[]),dflt:i},s.coerce(e,t,u,c)},A.coercePosition=function(e,t,n,r,i,o){var a,l;if("paper"===r||"pixel"===r)a=s.ensureNumber,l=n(i,o);else{var c=A.getFromId(t,r);l=n(i,o=c.fraction2r(o)),a=c.cleanPos}e[i]=a(l)},A.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?s.ensureNumber:A.getFromId(t,n).cleanPos)(e)};var E=A.getDataConversions=function(e,t,n,r){var i,o="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(o)){if(i={type:C(r),_categories:[]},A.setConvert(i),"category"===i.type)for(var a=0;a<r.length;a++)i.d2c(r[a])}else i=A.getFromTrace(e,t,o);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===o?{d2c:L,c2d:L}:{d2c:O,c2d:O}};function O(e){return+e}function L(e){return String(e)}A.getDataToCoordFunc=function(e,t,n,r){return E(e,t,n,r).d2c},A.counterLetter=function(e){var t=e.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},A.minDtick=function(e,t,n,r){-1===["log","category"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):((t/e._minDtick+1e-6)%1>2e-6||((n-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0)):e._minDtick=0},A.saveRangeInitial=function(e,t){for(var n=A.list(e,"",!0),r=!1,i=0;i<n.length;i++){var o=n[i],a=void 0===o._rangeInitial,s=a||!(o.range[0]===o._rangeInitial[0]&&o.range[1]===o._rangeInitial[1]);(a&&!1===o.autorange||t&&s)&&(o._rangeInitial=o.range.slice(),r=!0)}return r},A.saveShowSpikeInitial=function(e,t){for(var n=A.list(e,"",!0),r=!1,i="on",o=0;o<n.length;o++){var a=n[o],s=void 0===a._showSpikeInitial,l=s||!(a.showspikes===a._showspikes);(s||t&&l)&&(a._showSpikeInitial=a.showspikes,r=!0),"on"!==i||a.showspikes||(i="off")}return e._fullLayout._cartesianSpikesEnabled=i,r},A.autoBin=function(e,t,n,r,o,a){var l,c=s.aggNums(Math.min,null,e),u=s.aggNums(Math.max,null,e);if("category"===t.type)return{start:c-.5,end:u+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:u-c};if(o||(o=t.calendar),l="log"===t.type?{type:"linear",range:[c,u]}:{type:t.type,range:s.simpleMap([c,u],t.c2r,0,o),calendar:o},A.setConvert(l),a=a&&p.dtick(a,l.type))l.dtick=a,l.tick0=p.tick0(void 0,l.type,o);else{var d;if(n)d=(u-c)/n;else{var f=s.distinctVals(e),h=Math.pow(10,Math.floor(Math.log(f.minDiff)/Math.LN10)),g=h*s.roundUp(f.minDiff/h,[.9,1.9,4.9,9.9],!0);d=Math.max(g,2*s.stdev(e)/Math.pow(e.length,r?.25:.4)),i(d)||(d=1)}A.autoTicks(l,d)}var v,b=l.dtick,y=A.tickIncrement(A.tickFirst(l),b,"reverse",o);if("number"==typeof b)v=(y=function(e,t,n,r,o){var a=0,s=0,l=0,c=0;function u(t){return(1+100*(t-e)/n.dtick)%100<2}for(var d=0;d<t.length;d++)t[d]%1==0?l++:i(t[d])||c++,u(t[d])&&a++,u(t[d]+n.dtick/2)&&s++;var f=t.length-c;if(l===f&&"date"!==n.type)n.dtick<1?e=r-.5*n.dtick:(e-=.5)+n.dtick<r&&(e+=n.dtick);else if(s<.1*f&&(a>.3*f||u(r)||u(o))){var p=n.dtick/2;e+=e+p<r?p:-p}return e}(y,e,l,c,u))+(1+Math.floor((u-y)/b))*b;else for("M"===l.dtick.charAt(0)&&(y=function(e,t,n,r,i){var o=s.findExactDates(t,i);if(o.exactDays>.8){var a=Number(n.substr(1));o.exactYears>.8&&a%12==0?e=A.tickIncrement(e,"M6","reverse")+1.5*m:o.exactMonths>.8?e=A.tickIncrement(e,"M1","reverse")+15.5*m:e-=m/2;var l=A.tickIncrement(e,n);if(l<=r)return l}return e}(y,e,b,c,o)),v=y,0;v<=u;)v=A.tickIncrement(v,b,!1,o),0;return{start:t.c2r(y,0,o),end:t.c2r(v,0,o),size:b,_dataSpan:u-c}},A.prepTicks=function(e){var t=s.simpleMap(e.range,e.r2l);if("auto"===e.tickmode||!e.dtick){var n,r=e.nticks;r||("category"===e.type?(n=e.tickfont?1.2*(e.tickfont.size||12):15,r=e._length/n):(n="y"===e._id.charAt(0)?40:80,r=s.constrain(e._length/n,4,9)+1),"radialaxis"===e._name&&(r*=2)),"array"===e.tickmode&&(r*=100),A.autoTicks(e,Math.abs(t[1]-t[0])/r),e._minDtick>0&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),q(e)},A.calcTicks=function(e){A.prepTicks(e);var t=s.simpleMap(e.range,e.r2l);if("array"===e.tickmode)return function(e){var t,n,r=e.tickvals,i=e.ticktext,o=new Array(r.length),a=s.simpleMap(e.range,e.r2l),l=1.0001*a[0]-1e-4*a[1],c=1.0001*a[1]-1e-4*a[0],u=Math.min(l,c),d=Math.max(l,c),f=0;Array.isArray(i)||(i=[]);var p="category"===e.type?e.d2l_noadd:e.d2l;"log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(n=0;n<r.length;n++)(t=p(r[n]))>u&&t<d&&(void 0===i[n]?o[f]=A.tickText(e,t):o[f]=H(e,t,String(i[n])),f++);f<r.length&&o.splice(f,r.length-f);return o}(e);e._tmin=A.tickFirst(e);var n=1.0001*t[0]-1e-4*t[1],r=1.0001*t[1]-1e-4*t[0],i=t[1]<t[0];if(e._tmin<n!==i)return[];var o=[];"category"===e.type&&(r=i?Math.max(-.5,r):Math.min(e._categories.length-.5,r));for(var a=null,l=Math.max(1e3,e._length||0),c=e._tmin;(i?c>=r:c<=r)&&!(o.length>l||c===a);c=A.tickIncrement(c,e.dtick,i,e.calendar))a=c,o.push(c);Z(e)&&360===Math.abs(t[1]-t[0])&&o.pop(),e._tmax=o[o.length-1],e._prevDateHead="",e._inCalcTicks=!0;for(var u=new Array(o.length),d=0;d<o.length;d++)u[d]=A.tickText(e,o[d]);return e._inCalcTicks=!1,u};var P=[2,5,10],D=[1,2,3,6,12],R=[1,2,5,10,15,30],F=[1,2,3,7,14],j=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],I=[-.301,0,.301,.699,1],N=[15,30,45,90,180];function z(e,t,n){return t*s.roundUp(e/t,n)}function q(e){var t=e.dtick;if(e._tickexponent=0,i(t)||"string"==typeof t||(t=1),"category"===e.type&&(e._tickround=null),"date"===e.type){var n=e.r2l(e.tick0),r=e.l2r(n).replace(/(^-|i)/g,""),o=r.length;if("M"===String(t).charAt(0))o>10||"01-01"!==r.substr(5)?e._tickround="d":e._tickround=+t.substr(1)%12==0?"y":"m";else if(t>=m&&o<=10||t>=15*m)e._tickround="d";else if(t>=y&&o<=16||t>=b)e._tickround="M";else if(t>=x&&o<=19||t>=y)e._tickround="S";else{var a=e.l2r(n+t).replace(/^-/,"").length;e._tickround=Math.max(o,a)-20,e._tickround<0&&(e._tickround=4)}}else if(i(t)||"L"===t.charAt(0)){var s=e.range.map(e.r2d||Number);i(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1])),c=Math.floor(Math.log(l)/Math.LN10+.01);Math.abs(c)>3&&(V(e.exponentformat)&&!U(c)?e._tickexponent=3*Math.round((c-1)/3):e._tickexponent=c)}else e._tickround=null}function H(e,t,n){var r=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}A.autoTicks=function(e,t){var n;function r(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type){e.tick0=s.dateTick0(e.calendar);var o=2*t;o>g?(t/=g,n=r(10),e.dtick="M"+12*z(t,n,P)):o>v?(t/=v,e.dtick="M"+z(t,1,D)):o>m?(e.dtick=z(t,m,F),e.tick0=s.dateTick0(e.calendar,!0)):o>b?e.dtick=z(t,b,D):o>y?e.dtick=z(t,y,R):o>x?e.dtick=z(t,x,R):(n=r(10),e.dtick=z(t,n,P))}else if("log"===e.type){e.tick0=0;var a=s.simpleMap(e.range,e.r2l);if(t>.7)e.dtick=Math.ceil(t);else if(Math.abs(a[1]-a[0])<1){var l=1.5*Math.abs((a[1]-a[0])/t);t=Math.abs(Math.pow(10,a[1])-Math.pow(10,a[0]))/l,n=r(10),e.dtick="L"+z(t,n,P)}else e.dtick=t>.3?"D2":"D1"}else"category"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):Z(e)?(e.tick0=0,n=1,e.dtick=z(t,n,N)):(e.tick0=0,n=r(10),e.dtick=z(t,n,P));if(0===e.dtick&&(e.dtick=1),!i(e.dtick)&&"string"!=typeof e.dtick){var c=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(c)}},A.tickIncrement=function(e,t,n,o){var a=n?-1:1;if(i(t))return e+a*t;var l=t.charAt(0),c=a*Number(t.substr(1));if("M"===l)return s.incrementMonth(e,c,o);if("L"===l)return Math.log(Math.pow(10,e)+c)/Math.LN10;if("D"===l){var u="D2"===t?I:j,d=e+.01*a,f=s.roundUp(s.mod(d,1),u,n);return Math.floor(d)+Math.log(r.round(Math.pow(10,f),1))/Math.LN10}throw"unrecognized dtick "+String(t)},A.tickFirst=function(e){var t=e.r2l||Number,n=s.simpleMap(e.range,t),o=n[1]<n[0],a=o?Math.floor:Math.ceil,l=1.0001*n[0]-1e-4*n[1],c=e.dtick,u=t(e.tick0);if(i(c)){var d=a((l-u)/c)*c+u;return"category"===e.type&&(d=s.constrain(d,0,e._categories.length-1)),d}var f=c.charAt(0),p=Number(c.substr(1));if("M"===f){for(var h,g,v,m=0,b=u;m<10;){if(((h=A.tickIncrement(b,c,o,e.calendar))-l)*(b-l)<=0)return o?Math.min(b,h):Math.max(b,h);g=(l-(b+h)/2)/(h-b),v=f+(Math.abs(Math.round(g))||1)*p,b=A.tickIncrement(b,v,g<0?!o:o,e.calendar),m++}return s.error("tickFirst did not converge",e),b}if("L"===f)return Math.log(a((Math.pow(10,l)-u)/p)*p+u)/Math.LN10;if("D"===f){var y="D2"===c?I:j,x=s.roundUp(s.mod(l,1),y,o);return Math.floor(l)+Math.log(r.round(Math.pow(10,x),1))/Math.LN10}throw"unrecognized dtick "+String(c)},A.tickText=function(e,t,n){var r,o,a=H(e,t),l="array"===e.tickmode,c=n||l,u="category"===e.type?e.d2l_noadd:e.d2l;if(l&&Array.isArray(e.ticktext)){var d=s.simpleMap(e.range,e.r2l),f=Math.abs(d[1]-d[0])/1e4;for(o=0;o<e.ticktext.length&&!(Math.abs(t-u(e.tickvals[o]))<f);o++);if(o<e.ticktext.length)return a.text=String(e.ticktext[o]),a}function p(r){var i;return void 0===r||(n?"none"===r:(i={first:e._tmin,last:e._tmax}[r],"all"!==r&&t!==i))}return r=n?"never":"none"!==e.exponentformat&&p(e.showexponent)?"hide":"","date"===e.type?function(e,t,n,r){var o=e._tickround,a=n&&e.hoverformat||A.getTickFormat(e);r&&(o=i(o)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[o]);var l,c=s.formatDate(t.x,a,o,e._dateFormat,e.calendar,e._extraFormat),u=c.indexOf("\n");-1!==u&&(l=c.substr(u+1),c=c.substr(0,u));r&&("00:00:00"===c||"00:00"===c?(c=l,l=""):8===c.length&&(c=c.replace(/:00$/,"")));l&&(n?"d"===o?c+=", "+l:c=l+(c?", "+c:""):e._inCalcTicks&&l===e._prevDateHead||(c+="<br>"+l,e._prevDateHead=l));t.text=c}(e,a,n,c):"log"===e.type?function(e,t,n,r,o){var a=e.dtick,l=t.x,c=e.tickformat,u="string"==typeof a&&a.charAt(0);"never"===o&&(o="");r&&"L"!==u&&(a="L3",u="L");if(c||"L"===u)t.text=$(Math.pow(10,l),e,o,r);else if(i(a)||"D"===u&&s.mod(l+.01,1)<.1){var d=Math.round(l),f=Math.abs(d),p=e.exponentformat;"power"===p||V(p)&&U(d)?(t.text=0===d?1:1===d?"10":"10<sup>"+(d>1?"":_)+f+"</sup>",t.fontSize*=1.25):("e"===p||"E"===p)&&f>2?t.text="1"+p+(d>0?"+":_)+f:(t.text=$(Math.pow(10,l),e,"","fakehover"),"D1"===a&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==u)throw"unrecognized dtick "+String(a);t.text=String(Math.round(Math.pow(10,s.mod(l,1)))),t.fontSize*=.75}if("D1"===e.dtick){var h=String(t.text).charAt(0);"0"!==h&&"1"!==h||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(l<0?.5:.25)))}}(e,a,0,c,r):"category"===e.type?function(e,t){var n=e._categories[Math.round(t.x)];void 0===n&&(n="");t.text=String(n)}(e,a):Z(e)?function(e,t,n,r,i){if("radians"!==e.thetaunit||n)t.text=$(t.x,e,i,r);else{var o=t.x/180;if(0===o)t.text="0";else{var a=function(e){function t(e,t){return Math.abs(e-t)<=1e-6}var n=function(e){var n=1;for(;!t(Math.round(e*n)/n,e);)n*=10;return n}(e),r=e*n,i=Math.abs(function e(n,r){return t(r,0)?n:e(r,n%r)}(r,n));return[Math.round(r/i),Math.round(n/i)]}(o);if(a[1]>=100)t.text=$(s.deg2rad(t.x),e,i,r);else{var l=t.x<0;1===a[1]?1===a[0]?t.text="Ï":t.text=a[0]+"Ï":t.text=["<sup>",a[0],"</sup>","â","<sub>",a[1],"</sub>","Ï"].join(""),l&&(t.text=_+t.text)}}}}(e,a,n,c,r):function(e,t,n,r,i){"never"===i?i="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(i="hide");t.text=$(t.x,e,i,r)}(e,a,0,c,r),e.tickprefix&&!p(e.showtickprefix)&&(a.text=e.tickprefix+a.text),e.ticksuffix&&!p(e.showticksuffix)&&(a.text+=e.ticksuffix),a},A.hoverLabelText=function(e,t,n){if(n!==w&&n!==t)return A.hoverLabelText(e,t)+" - "+A.hoverLabelText(e,n);var r="log"===e.type&&t<=0,i=A.tickText(e,e.c2l(r?-t:t),"hover").text;return r?0===t?"0":_+i:i};var B=["f","p","n","Î¼","m","","k","M","G","T"];function V(e){return"SI"===e||"B"===e}function U(e){return e>14||e<-15}function $(e,t,n,r){var o=e<0,a=t._tickround,l=n||t.exponentformat||"B",c=t._tickexponent,u=A.getTickFormat(t),d=t.separatethousands;if(r){var f={exponentformat:l,dtick:"none"===t.showexponent?t.dtick:i(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]};q(f),a=(Number(f._tickround)||0)+4,c=f._tickexponent,t.hoverformat&&(u=t.hoverformat)}if(u)return t._numFormat(u)(e).replace(/-/g,_);var p,h=Math.pow(10,-a)/2;if("none"===l&&(c=0),(e=Math.abs(e))<h)e="0",o=!1;else{if(e+=h,c&&(e*=Math.pow(10,-c),a+=c),0===a)e=String(Math.floor(e));else if(a<0){e=(e=String(Math.round(e))).substr(0,e.length+a);for(var g=a;g<0;g++)e+="0"}else{var v=(e=String(e)).indexOf(".")+1;v&&(e=e.substr(0,v+a).replace(/\.?0+$/,""))}e=s.numSeparate(e,t._separators,d)}c&&"hide"!==l&&(V(l)&&U(c)&&(l="power"),p=c<0?_+-c:"power"!==l?"+"+c:String(c),"e"===l||"E"===l?e+=l+p:"power"===l?e+="Ã10<sup>"+p+"</sup>":"B"===l&&9===c?e+="B":V(l)&&(e+=B[c/3+5]));return o?_+e:e}function W(e,t){var n=e.l2p(t);return n>1&&n<e._length-1}function X(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function G(e,t,n){var r,i,o=[],a=[],l=e.layout;for(r=0;r<t.length;r++)o.push(A.getFromId(e,t[r]));for(r=0;r<n.length;r++)a.push(A.getFromId(e,n[r]));var c=Object.keys(f),u=["anchor","domain","overlaying","position","side","tickangle","editType"],d=["linear","log"];for(r=0;r<c.length;r++){var p=c[r],h=o[0][p],g=a[0][p],v=!0,m=!1,b=!1;if("_"!==p.charAt(0)&&"function"!=typeof h&&-1===u.indexOf(p)){for(i=1;i<o.length&&v;i++){var y=o[i][p];"type"===p&&-1!==d.indexOf(h)&&-1!==d.indexOf(y)&&h!==y?m=!0:y!==h&&(v=!1)}for(i=1;i<a.length&&v;i++){var x=a[i][p];"type"===p&&-1!==d.indexOf(g)&&-1!==d.indexOf(x)&&g!==x?b=!0:a[i][p]!==g&&(v=!1)}v&&(m&&(l[o[0]._name].type="linear"),b&&(l[a[0]._name].type="linear"),Y(l,p,o,a,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var _=e._fullLayout.annotations[r];-1!==t.indexOf(_.xref)&&-1!==n.indexOf(_.yref)&&s.swapAttrs(l.annotations[r],["?"])}}function Y(e,t,n,r,i){var o,a=s.nestedProperty,l=a(e[n[0]._name],t).get(),c=a(e[r[0]._name],t).get();for("title"===t&&(l===i.x&&(l=i.y),c===i.y&&(c=i.x)),o=0;o<n.length;o++)a(e,n[o]._name+"."+t).set(c);for(o=0;o<r.length;o++)a(e,r[o]._name+"."+t).set(l)}function Z(e){return"angularaxis"===e._id}A.getTickFormat=function(e){var t,n,r;function i(e){return"string"!=typeof e?e:Number(e.replace("M",""))*v}function o(e,t){var n=["L","D"];if(typeof e==typeof t){if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),i=n.indexOf(t.charAt(0));return r===i?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-i}return"number"==typeof e?1:-1}function a(e,t,n){var r=n||function(e){return e},i=t[0],o=t[1];return(!i&&"number"!=typeof i||r(i)<=r(e))&&(!o&&"number"!=typeof o||r(o)>=r(e))}function s(e,t){var n=null===t[0],r=null===t[1],i=o(e,t[0])>=0,a=o(e,t[1])<=0;return(n||i)&&(r||a)}if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&a(e.dtick,r.dtickrange,i)){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&s(e.dtick,r.dtickrange)){n=r;break}}return n?n.value:e.tickformat},A.getSubplots=function(e,t){var n=e._fullLayout._subplots,r=n.cartesian.concat(n.gl2d||[]),i=t?A.findSubplotsWithAxis(r,t):r;return i.sort(function(e,t){var n=e.substr(1).split("y"),r=t.substr(1).split("y");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]}),i},A.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],i=0;i<e.length;i++){var o=e[i];n.test(o)&&r.push(o)}return r},A.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var n,i,o={_offset:0,_length:t.width,_id:""},a={_offset:0,_length:t.height,_id:""},s=A.list(e,"x",!0),l=A.list(e,"y",!0),c=[];for(n=0;n<s.length;n++)for(c.push({x:s[n],y:a}),i=0;i<l.length;i++)0===n&&c.push({x:o,y:l[i]}),c.push({x:s[n],y:l[i]});var u=t._clips.selectAll(".axesclip").data(c,function(e){return e.x._id+e.y._id});u.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect"),u.exit().remove(),u.each(function(e){r.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})}},A.doTicks=function(e,t,n){var r=e._fullLayout;"redraw"===t&&r._paper.selectAll("g.subplot").each(function(e){var t=e[0],n=r._plots[t],i=n.xaxis,o=n.yaxis;n.xaxislayer.selectAll("."+i._id+"tick").remove(),n.yaxislayer.selectAll("."+o._id+"tick").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),r._infolayer.select(".g-"+i._id+"title").remove(),r._infolayer.select(".g-"+o._id+"title").remove()});var i=t&&"redraw"!==t?t:A.listIds(e);s.syncOrAsync(i.map(function(t){return function(){if(t){var r=A.doTicksSingle(e,t,n),i=A.getFromId(e,t);return i._r=i.range.slice(),i._rl=s.simpleMap(i._r,i.r2l),r}}}))},A.doTicksSingle=function(e,t,n){var a,f=e._fullLayout,p=!1;s.isPlainObject(t)?(a=t,p=!0):a=A.getFromId(e,t),a.setScale();var h,g,v,m,b,y,x=a._id,_=x.charAt(0),w=A.counterLetter(x),C=a._vals=A.calcTicks(a),M=function(e){return[e.text,e.x,a.mirror,e.font,e.fontSize,e.fontColor].join("_")},E=x+"tick",O=x+"grid",L=x+"zl",P=(a.linewidth||1)/2,D="outside"===a.ticks?a.ticklen:0,R=0,F=d.crispRound(e,a.gridwidth,1),j=d.crispRound(e,a.zerolinewidth,F),I=d.crispRound(e,a.tickwidth,1);if(a._counterangle&&"outside"===a.ticks){var N=a._counterangle*Math.PI/180;D=a.ticklen*Math.cos(N)+1,R=a.ticklen*Math.sin(N)}if(a.showticklabels&&("outside"===a.ticks||a.showline)&&(D+=.2*a.tickfont.size),"x"===_)h=["bottom","top"],g=a._transfn||function(e){return"translate("+(a._offset+a.l2p(e.x))+",0)"},v=function(e,t){if(a._counterangle){var n=a._counterangle*Math.PI/180;return"M0,"+e+"l"+Math.sin(n)*t+","+Math.cos(n)*t}return"M0,"+e+"v"+t};else if("y"===_)h=["left","right"],g=a._transfn||function(e){return"translate(0,"+(a._offset+a.l2p(e.x))+")"},v=function(e,t){if(a._counterangle){var n=a._counterangle*Math.PI/180;return"M"+e+",0l"+Math.cos(n)*t+","+-Math.sin(n)*t}return"M"+e+",0h"+t};else{if(!Z(a))return void s.warn("Unrecognized doTicks axis:",x);h=["left","right"],g=a._transfn,v=function(e,t){return"M"+e+",0h"+t}}var z=a.side||h[0],q=[-1,1,z===h[1]?1:-1];if("inside"!==a.ticks==("x"===_)&&(q=q.map(function(e){return-e})),a.visible){a._tickFilter&&(C=C.filter(a._tickFilter));var H=a._valsClipped=Z(a)?C:C.filter(function(e){return W(a,e.x)});if(p){if(Y(a._axislayer,v(a._pos+P*q[2],q[2]*a.ticklen)),a._counteraxis)Q({gridlayer:a._gridlayer,zerolinelayer:a._zerolinelayer},a._counteraxis);return J(a._axislayer,a._pos)}if(f._has("cartesian")){var B={};(m=A.getSubplots(e,a)).map(function(e){var t=f._plots[e],n=t[w+"axis"],r=n._mainAxis._id;B[r]||(B[r]=1,Q(t,n))});var V=a._mainSubplot,U=f._plots[V],$=[];if(a.ticks){var X=q[2],G=v(a._mainLinePosition+P*X,X*a.ticklen);a._anchorAxis&&a.mirror&&!0!==a.mirror&&(G+=v(a._mainMirrorPosition-P*X,-X*a.ticklen)),Y(U[_+"axislayer"],G),$=Object.keys(a._linepositions||{})}return $.map(function(e){var t=f._plots[e][_+"axislayer"],n=a._linepositions[e]||[];function r(e){var t=q[e];return v(n[e]+P*t,t*a.ticklen)}Y(t,r(0)+r(1))}),J(U[_+"axislayer"],a._mainLinePosition)}}function Y(e,t){var n=e.selectAll("path."+E).data("inside"===a.ticks?H:C,M);t&&a.ticks?(n.enter().append("path").classed(E,1).classed("ticks",1).classed("crisp",1).call(u.stroke,a.tickcolor).style("stroke-width",I+"px").attr("d",t),n.attr("transform",g),n.exit().remove()):n.remove()}function J(t,n){if(b=t.selectAll("g."+E).data(C,M),!i(n))return b.remove(),void K();if(!a.showticklabels)return b.remove(),K(),void L();var c,u,p,h,v;"x"===_?(c=function(e){return e.dx+R*v},h=n+(D+P)*(v="bottom"===z?1:-1),u=function(e){return e.dy+h+e.fontSize*("bottom"===z?1:-.2)},p=function(e){return i(e)&&0!==e&&180!==e?e*v<0?"end":"start":"middle"}):"y"===_?(v="right"===z?1:-1,u=function(e){return e.dy+e.fontSize*k-R*v},c=function(e){return e.dx+n+(D+P+(90===Math.abs(a.tickangle)?e.fontSize/2:0))*v},p=function(e){return i(e)&&90===Math.abs(e)?"middle":"right"===z?"start":"end"}):Z(a)&&(a._labelShift=R,a._labelStandoff=D,a._pad=P,c=a._labelx,u=a._labely,p=a._labelanchor);var w=0,A=0,S=[];function O(e,t){e.each(function(e){var n=p(t,e),o=r.select(this),a=o.select(".text-math-group"),s=g.call(o.node(),e)+(i(t)&&0!=+t?" rotate("+t+","+c(e)+","+(u(e)-e.fontSize/2)+")":""),f=function(e,t,n){var r=(e-1)*t;if("x"===_){if(n<-60||60<n)return-.5*r;if("top"===z)return-r}else{if((n*="left"===z?1:-1)<-30)return-r;if(n<30)return-.5*r}return 0}(l.lineCount(o),T*e.fontSize,i(t)?+t:0);if(f&&(s+=" translate(0, "+f+")"),a.empty())o.select("text").attr({transform:s,"text-anchor":n});else{var h=d.bBox(a.node()).width*{end:-.5,start:.5}[n];a.attr("transform",s+(h?"translate("+h+",0)":""))}})}function L(){if(a.showticklabels){var n=e.getBoundingClientRect(),r=t.node().getBoundingClientRect();a._boundingBox={width:r.width,height:r.height,left:r.left-n.left,right:r.right-n.left,top:r.top-n.top,bottom:r.bottom-n.top}}else{var i,o=f._size;"x"===_?(i="free"===a.anchor?o.t+o.h*(1-a.position):o.t+o.h*(1-a._anchorAxis.domain[{bottom:0,top:1}[a.side]]),a._boundingBox={top:i,bottom:i,left:a._offset,right:a._offset+a._length,width:a._length,height:0}):(i="free"===a.anchor?o.l+o.w*a.position:o.l+o.w*a._anchorAxis.domain[{left:0,right:1}[a.side]],a._boundingBox={left:i,right:i,bottom:a._offset+a._length,top:a._offset,height:a._length,width:0})}if(m){var s=a._counterSpan=[1/0,-1/0];for(y=0;y<m.length;y++){var l=f._plots[m[y]]["x"===_?"yaxis":"xaxis"];c(s,[l._offset,l._offset+l._length])}"free"===a.anchor&&c(s,"x"===_?[a._boundingBox.bottom,a._boundingBox.top]:[a._boundingBox.right,a._boundingBox.left])}function c(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.max(e[1],t[1])}}b.enter().append("g").classed(E,1).append("text").attr("text-anchor","middle").each(function(t){var n=r.select(this),i=e._promises.length;n.call(l.positionText,c(t),u(t)).call(d.font,t.font,t.fontSize,t.fontColor).text(t.text).call(l.convertToTspans,e),(i=e._promises[i])?S.push(e._promises.pop().then(function(){O(n,a.tickangle)})):O(n,a.tickangle)}),b.exit().remove(),b.each(function(e){w=Math.max(w,e.fontSize)}),Z(a)&&b.each(function(e){r.select(this).select("text").call(l.positionText,c(e),u(e))}),O(b,a._lastangle||a.tickangle);var F=s.syncOrAsync([function(){return S.length&&Promise.all(S)},function(){if(O(b,a.tickangle),"x"===_&&!i(a.tickangle)&&("log"!==a.type||"D"!==String(a.dtick).charAt(0))){var e=[];for(b.each(function(t){var n=r.select(this),i=n.select(".text-math-group"),o=a.l2p(t.x);i.empty()&&(i=n.select("text"));var s=d.bBox(i.node());e.push({top:0,bottom:10,height:10,left:o-s.width/2,right:o+s.width/2+2,width:s.width+2})}),y=0;y<e.length-1;y++)if(s.bBoxIntersect(e[y],e[y+1])){A=30;break}A&&(Math.abs((C[C.length-1].x-C[0].x)*a._m)/(C.length-1)<2.5*w&&(A=90),O(b,A)),a._lastangle=A}return K(),x+" done"},L,function(){var t=a._name+".automargin";if("x"===_||"y"===_)if(a.automargin){var n=a.side[0],r={x:0,y:0,r:0,l:0,t:0,b:0};"x"===_?(r.y="free"===a.anchor?a.position:a._anchorAxis.domain["t"===n?1:0],r[n]+=a._boundingBox.height):(r.x="free"===a.anchor?a.position:a._anchorAxis.domain["r"===n?1:0],r[n]+=a._boundingBox.width),a.title!==f._dfltTitle[_]&&(r[n]+=a.titlefont.size),o.autoMargin(e,t,r)}else o.autoMargin(e,t)}]);return F&&F.then&&e._promises.push(F),F}function K(){if(!(n||a.rangeslider&&a.rangeslider.visible&&a._boundingBox&&"bottom"===a.side)){var t,r,i,o,s={selection:b,side:a.side},l=x.charAt(0),u=e._fullLayout._size,p=a.titlefont.size;if(b.size()){var h=d.getTranslate(b.node().parentNode);s.offsetLeft=h.x,s.offsetTop=h.y}var g=10+1.5*p+(a.linewidth?a.linewidth-1:0);"x"===l?(r="free"===a.anchor?{_offset:u.t+(1-(a.position||0))*u.h,_length:0}:S.getFromId(e,a.anchor),i=a._offset+a._length/2,o="top"===a.side?-g-p*(a.showticklabels?1:0):r._length+g+p*(a.showticklabels?1.5:.5),o+=r._offset,s.side||(s.side="bottom")):(r="free"===a.anchor?{_offset:u.l+(a.position||0)*u.w,_length:0}:S.getFromId(e,a.anchor),o=a._offset+a._length/2,i="right"===a.side?r._length+g+p*(a.showticklabels?1:.5):-g-p*(a.showticklabels?.5:0),i+=r._offset,t={rotate:"-90",offset:0},s.side||(s.side="left")),c.draw(e,x+"title",{propContainer:a,propName:a._name+".title",placeholder:f._dfltTitle[l],avoid:s,transform:t,attributes:{x:i,y:o,"text-anchor":"middle"}})}}function Q(t,n){if(!f._hasOnlyLargeSploms){var i=t.gridlayer.selectAll("."+x),o=t.zerolinelayer,s=a._gridpath||("x"===_?"M0,"+n._offset+"v":"M"+n._offset+",0h")+n._length,l=i.selectAll("path."+O).data(!1===a.showgrid?[]:H,M);if(l.enter().append("path").classed(O,1).classed("crisp",1).attr("d",s).each(function(e){a.zeroline&&("linear"===a.type||"-"===a.type)&&Math.abs(e.x)<a.dtick/100&&r.select(this).remove()}),l.attr("transform",g).call(u.stroke,a.gridcolor||"#ddd").style("stroke-width",F+"px"),"function"==typeof s&&l.attr("d",s),l.exit().remove(),o){var c={x:0,id:x},d=A.shouldShowZeroLine(e,a,n),p=o.selectAll("path."+L).data(d?[c]:[]);p.enter().append("path").classed(L,1).classed("zl",1).classed("crisp",1).attr("d",s).each(function(){o.selectAll("path").sort(function(e,t){return S.idSort(e.id,t.id)})}),p.attr("transform",g).call(u.stroke,a.zerolinecolor||u.defaultLine).style("stroke-width",j+"px"),p.exit().remove()}}}},A.shouldShowZeroLine=function(e,t,n){var r=s.simpleMap(t.range,t.r2l);return r[0]*r[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&t._valsClipped.length&&(W(t,0)||!function(e,t,n,r){var i=n._mainAxis;if(!i)return;var o=e._fullLayout,a=t._id.charAt(0),s=A.counterLetter(t._id),l=t._offset+(Math.abs(r[0])<Math.abs(r[1])==("x"===a)?0:t._length);function c(e){if(!e.showline||!e.linewidth)return!1;var n=Math.max((e.linewidth+t.zerolinewidth)/2,1);function r(e){return"number"==typeof e&&Math.abs(e-l)<n}if(r(e._mainLinePosition)||r(e._mainMirrorPosition))return!0;var i=e._linepositions||{};for(var o in i)if(r(i[o][0])||r(i[o][1]))return!0}var u=o._plots[n._mainSubplot];if(!(u.mainplotinfo||u).overlays.length)return c(n);for(var d=A.list(e,s),f=0;f<d.length;f++){var p=d[f];if(p._mainAxis===i&&c(p))return!0}}(e,t,n,r)||function(e,t){for(var n=e._fullData,r=t._mainSubplot,i=t._id.charAt(0),o=0;o<n.length;o++){var s=n[o];if(!0===s.visible&&s.xaxis+s.yaxis===r&&(a.traceIs(s,"bar")&&s.orientation==={x:"h",y:"v"}[i]||s.fill&&s.fill.charAt(s.fill.length-1)===i))return!0}return!1}(e,t))},A.allowAutoMargin=function(e){for(var t=A.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];r.automargin&&o.allowAutoMargin(e,r._name+".automargin"),r.rangeslider&&r.rangeslider.visible&&o.allowAutoMargin(e,"rangeslider"+r._id)}},A.swap=function(e,t){for(var n=function(e,t){var n,r,i=[];for(n=0;n<t.length;n++){var o=[],a=e._fullData[t[n]].xaxis,s=e._fullData[t[n]].yaxis;if(a&&s){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(a)&&-1===i[r].y.indexOf(s)||o.push(r);if(o.length){var l,c=i[o[0]];if(o.length>1)for(r=1;r<o.length;r++)l=i[o[r]],X(c.x,l.x),X(c.y,l.y);X(c.x,[a]),X(c.y,[s])}else i.push({x:[a],y:[s]})}}return i}(e,t),r=0;r<n.length;r++)G(e,n[r].x,n[r].y)}},{"../../components/color":43,"../../components/drawing":68,"../../components/titles":134,"../../constants/alignment":141,"../../constants/numerical":143,"../../lib":161,"../../lib/svg_text_utils":183,"../../plots/plots":239,"../../registry":246,"./autorange":205,"./axis_autotype":207,"./axis_ids":209,"./clean_ticks":211,"./layout_attributes":219,"./set_convert":225,d3:8,"fast-isnumeric":10}],207:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),o=e("../../constants/numerical").BADNUM;t.exports=function(e,t){return function(e,t){for(var n=Math.max(1,(e.length-1)/1e3),o=0,a=0,s={},l=0;l<e.length;l+=n){var c=e[Math.round(l)],u=String(c);s[u]||(s[u]=1,i.isDateTime(c,t)&&(o+=1),r(c)&&(a+=1))}return o>2*a}(e,t)?"date":function(e){for(var t=Math.max(1,(e.length-1)/1e3),n=0,r=0,a={},s=0;s<e.length;s+=t){var l=e[Math.round(s)],c=String(l);a[c]||(a[c]=1,"boolean"==typeof l?r++:i.cleanNumber(l)!==o?n++:"string"==typeof l&&r++)}return r>2*n}(e)?"category":function(e){if(!e)return!1;for(var t=0;t<e.length;t++)if(r(e[t]))return!0;return!1}(e)?"linear":"-"}},{"../../constants/numerical":143,"../../lib":161,"fast-isnumeric":10}],208:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib"),o=e("./layout_attributes"),a=e("./tick_value_defaults"),s=e("./tick_mark_defaults"),l=e("./tick_label_defaults"),c=e("./category_order_defaults"),u=e("./line_grid_defaults"),d=e("./set_convert");t.exports=function(e,t,n,f,p){var h=f.letter,g=f.font||{},v=f.splomStash||{},m=n("visible",!f.cheateronly),b=t.type;"date"===b&&r.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",f.calendar);if(d(t,p),!n("autorange",!t.isValidRange(e.range))||"linear"!==b&&"-"!==b||n("rangemode"),n("range"),t.cleanRange(),c(e,t,n,f),"category"===b||f.noHover||n("hoverformat"),!m)return t;var y=n("color"),x=y!==o.color.dflt?y:g.color;return n("title",v.label||p._dfltTitle[h]),i.coerceFont(n,"titlefont",{family:g.family,size:Math.round(1.2*g.size),color:x}),a(e,t,n,b),l(e,t,n,b,f),s(e,t,n,f),u(e,t,n,{dfltColor:y,bgColor:f.bgColor,showGrid:f.showGrid,attributes:o}),(t.showline||t.ticks)&&n("mirror"),f.automargin&&n("automargin"),t}},{"../../lib":161,"../../registry":246,"./category_order_defaults":210,"./layout_attributes":219,"./line_grid_defaults":221,"./set_convert":225,"./tick_label_defaults":226,"./tick_mark_defaults":227,"./tick_value_defaults":228}],209:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("./constants");n.id2name=function(e){if("string"==typeof e&&e.match(i.AX_ID_PATTERN)){var t=e.substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},n.name2id=function(e){if(e.match(i.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},n.cleanId=function(e,t){if(e.match(i.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)){var n=e.substr(1).replace(/^0+/,"");return"1"===n&&(n=""),e.charAt(0)+n}},n.list=function(e,t,r){var i=e._fullLayout;if(!i)return[];var o,a=n.listIds(e,t),s=new Array(a.length);for(o=0;o<a.length;o++){var l=a[o];s[o]=i[l.charAt(0)+"axis"+l.substr(1)]}if(!r){var c=i._subplots.gl3d||[];for(o=0;o<c.length;o++){var u=i[c[o]];t?s.push(u[t+"axis"]):s.push(u.xaxis,u.yaxis,u.zaxis)}}return s},n.listIds=function(e,t){var n=e._fullLayout;if(!n)return[];var r=n._subplots;return t?r[t+"axis"]:r.xaxis.concat(r.yaxis)},n.getFromId=function(e,t,r){var i=e._fullLayout;return"x"===r?t=t.replace(/y[0-9]*/,""):"y"===r&&(t=t.replace(/x[0-9]*/,"")),i[n.id2name(t)]},n.getFromTrace=function(e,t,i){var o=e._fullLayout,a=null;if(r.traceIs(t,"gl3d")){var s=t.scene;"scene"===s.substr(0,5)&&(a=o[s][i+"axis"])}else a=n.getFromId(e,t[i+"axis"]||i);return a},n.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?n>r?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)}},{"../../registry":246,"./constants":212}],210:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){if("category"===t.type){var i,o=e.categoryarray,a=Array.isArray(o)&&o.length>0;a&&(i="array");var s,l=n("categoryorder",i);"array"===l&&(s=n("categoryarray")),a||"array"!==l||(l=t.categoryorder="trace"),"trace"===l?t._initialCategories=[]:"array"===l?t._initialCategories=s.slice():(s=function(e,t){var n,r,i,o=t.dataAttr||e._id.charAt(0),a={};if(t.axData)n=t.axData;else for(n=[],r=0;r<t.data.length;r++){var s=t.data[r];s[o+"axis"]===e._id&&n.push(s)}for(r=0;r<n.length;r++){var l=n[r][o];for(i=0;i<l.length;i++){var c=l[i];null!==c&&void 0!==c&&(a[c]=1)}}return Object.keys(a)}(t,r).sort(),"category ascending"===l?t._initialCategories=s:"category descending"===l&&(t._initialCategories=s.reverse()))}}},{}],211:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),o=e("../../constants/numerical").ONEDAY;n.dtick=function(e,t){var n="log"===t,i="date"===t,a="category"===t,s=i?o:1;if(!e)return s;if(r(e))return(e=Number(e))<=0?s:a?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if("string"!=typeof e||!i&&!n)return s;var l=e.charAt(0),c=e.substr(1);return(c=r(c)?Number(c):0)<=0||!(i&&"M"===l&&c===Math.round(c)||n&&"L"===l||n&&"D"===l&&(1===c||2===c))?s:e},n.tick0=function(e,t,n,o){return"date"===t?i.cleanDate(e,i.dateTick0(n)):"D1"!==o&&"D2"!==o?r(e)?Number(e):0:void 0}},{"../../constants/numerical":143,"../../lib":161,"fast-isnumeric":10}],212:[function(e,t,n){"use strict";var r=e("../../lib/regex").counter;t.exports={idRegex:{x:r("x"),y:r("y")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["heatmaplayer","contourcarpetlayer","contourlayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":177}],213:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./axis_ids").id2name;t.exports=function(e,t,n,o,a){var s=a._axisConstraintGroups,l=t._id,c=l.charAt(0);if(!t.fixedrange&&(n("constrain"),r.coerce(e,t,{constraintoward:{valType:"enumerated",values:"x"===c?["left","center","right"]:["bottom","middle","top"],dflt:"x"===c?"center":"middle"}},"constraintoward"),e.scaleanchor)){var u=function(e,t,n,r){var o,a,s,l,c=r[i(t)].type,u=[];for(a=0;a<n.length;a++)(s=n[a])!==t&&((l=r[i(s)]).type!==c||l.fixedrange||u.push(s));for(o=0;o<e.length;o++)if(e[o][t]){var d=e[o],f=[];for(a=0;a<u.length;a++)s=u[a],d[s]||f.push(s);return{linkableAxes:f,thisGroup:d}}return{linkableAxes:u,thisGroup:null}}(s,l,o,a),d=r.coerce(e,t,{scaleanchor:{valType:"enumerated",values:u.linkableAxes}},"scaleanchor");if(d){var f=n("scaleratio");f||(f=t.scaleratio=1),function(e,t,n,r,i){var o,a,s,l,c;null===t?((t={})[n]=1,c=e.length,e.push(t)):c=e.indexOf(t);var u=Object.keys(t);for(o=0;o<e.length;o++)if(s=e[o],o!==c&&s[r]){var d=s[r];for(a=0;a<u.length;a++)l=u[a],s[l]=d*i*t[l];return void e.splice(c,1)}if(1!==i)for(a=0;a<u.length;a++)t[u[a]]*=i;t[r]=1}(s,u.thisGroup,l,d,f)}else-1!==o.indexOf(e.scaleanchor)&&r.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the targetaxis has fixed range.')}}},{"../../lib":161,"./axis_ids":209}],214:[function(e,t,n){"use strict";var r=e("./axis_ids").id2name,i=e("./scale_zoom"),o=e("./autorange").makePadFn,a=e("./autorange").concatExtremes,s=e("../../constants/numerical").ALMOST_EQUAL,l=e("../../constants/alignment").FROM_BL;function c(e,t){var n=e._inputDomain,r=l[e.constraintoward],i=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[i+(n[0]-i)/t,i+(n[1]-i)/t]}n.enforce=function(e){var t,n,l,u,d,f,p,h=e._fullLayout,g=h._axisConstraintGroups||[];for(t=0;t<g.length;t++){var v=g[t],m=Object.keys(v),b=1/0,y=0,x=1/0,_={},w={},k=!1;for(n=0;n<m.length;n++)w[l=m[n]]=u=h[r(l)],u._inputDomain?u.domain=u._inputDomain.slice():u._inputDomain=u.domain.slice(),u._inputRange||(u._inputRange=u.range.slice()),u.setScale(),_[l]=d=Math.abs(u._m)/v[l],b=Math.min(b,d),"domain"!==u.constrain&&u._constraintShrinkable||(x=Math.min(x,d)),delete u._constraintShrinkable,y=Math.max(y,d),"domain"===u.constrain&&(k=!0);if(!(b>s*y)||k)for(n=0;n<m.length;n++)if(d=_[l=m[n]],f=(u=w[l]).constrain,d!==x||"domain"===f)if(p=d/x,"range"===f)i(u,p);else{var T=u._inputDomain,A=(u.domain[1]-u.domain[0])/(T[1]-T[0]),C=(u.r2l(u.range[1])-u.r2l(u.range[0]))/(u.r2l(u._inputRange[1])-u.r2l(u._inputRange[0]));if((p/=A)*C<1){u.domain=u._input.domain=T.slice(),i(u,p);continue}if(C<1&&(u.range=u._input.range=u._inputRange.slice(),p*=C),u.autorange){var S=u.r2l(u.range[0]),M=u.r2l(u.range[1]),E=(S+M)/2,O=E,L=E,P=Math.abs(M-E),D=E-P*p*1.0001,R=E+P*p*1.0001,F=o(u);c(u,p),u.setScale();var j,I,N=Math.abs(u._m),z=a(e,u),q=z.min,H=z.max;for(I=0;I<q.length;I++)(j=q[I].val-F(q[I])/N)>D&&j<O&&(O=j);for(I=0;I<H.length;I++)(j=H[I].val+F(H[I])/N)<R&&j>L&&(L=j);p/=(L-O)/(2*P),O=u.l2r(O),L=u.l2r(L),u.range=u._input.range=S<M?[O,L]:[L,O]}c(u,p)}}},n.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,i=e._fullLayout._axisConstraintGroups,o=0;o<i.length;o++)if(i[o][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},{"../../constants/alignment":141,"../../constants/numerical":143,"./autorange":205,"./axis_ids":209,"./scale_zoom":223}],215:[function(e,t,n){"use strict";var r=e("d3"),i=e("tinycolor2"),o=e("has-passive-events"),a=e("../../registry"),s=e("../../lib"),l=e("../../lib/svg_text_utils"),c=e("../../components/color"),u=e("../../components/drawing"),d=e("../../components/fx"),f=e("../../lib/setcursor"),p=e("../../components/dragelement"),h=e("../../constants/alignment").FROM_TL,g=e("../../lib/clear_gl_canvases"),v=e("../../plot_api/subroutines").redrawReglTraces,m=e("../plots"),b=e("./axes").doTicksSingle,y=e("./axis_ids").getFromId,x=e("./select").prepSelect,_=e("./select").clearSelect,w=e("./select").selectOnClick,k=e("./scale_zoom"),T=e("./constants"),A=T.MINDRAG,C=T.MINZOOM,S=!0;function M(e,t,n,r){var i=s.ensureSingle(e.draglayer,t,n,function(t){t.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return i.call(f,r),i.node()}function E(e,t,n,i,o,a,s){var l=M(e,"rect",t,n);return r.select(l).call(u.setRect,i,o,a,s),l}function O(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function L(e,t,n,r,i){var o,a,s,l;for(o=0;o<e.length;o++)(a=e[o]).fixedrange||(s=a._rl[0],l=a._rl[1]-s,a.range=[a.l2r(s+l*t),a.l2r(s+l*n)],r[a._name+".range[0]"]=a.range[0],r[a._name+".range[1]"]=a.range[1]);if(i&&i.length){var c=(t+(1-n))/2;L(i,c,1-c,r)}}function P(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.fixedrange||(r.range=[r.l2r(r._rl[0]-t/r._m),r.l2r(r._rl[1]-t/r._m)])}}function D(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function R(e,t,n,r,i){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+n+", "+r+")").attr("d",i+"Z")}function F(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+t+", "+n+")").attr("d","M0,0Z")}function j(e,t,n,r,i,o){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),I(e,t,i,o)}function I(e,t,n,r){n||(e.transition().style("fill",r>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function N(e){r.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function z(e){S&&e.data&&e._context.showTips&&(s.notifier(s._(e,"Double-click to zoom back out"),"long"),S=!1)}function q(e){return"lasso"===e||"select"===e}function H(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,C)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function B(e,t){if(o){var n=void 0!==e.onwheel?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})}else void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel&&(e.onmousewheel=t)}function V(e){var t=[];for(var n in e)t.push(e[n]);return t}t.exports={makeDragBox:function(e,t,n,o,c,f,S,M){var I,U,$,W,X,G,Y,Z,J,K,Q,ee,te,ne,re,ie,oe,ae,se,le,ce,ue=e._fullLayout._zoomlayer,de=S+M==="nsew",fe=1===(S+M).length;function pe(){if(I=t.xaxis,U=t.yaxis,J=I._length,K=U._length,Y=I._offset,Z=U._offset,($={})[I._id]=I,(W={})[U._id]=U,S&&M)for(var n=t.overlays,r=0;r<n.length;r++){var i=n[r].xaxis;$[i._id]=i;var o=n[r].yaxis;W[o._id]=o}X=V($),G=V(W),ee=O(X,M),te=O(G,S),ne=!te&&!ee,Q=function(e,t,n){for(var r,i,o,a,l=e._fullLayout._axisConstraintGroups,c=!1,u={},d={},f=0;f<l.length;f++){var p=l[f];for(r in t)if(p[r]){for(o in p)("x"===o.charAt(0)?t:n)[o]||(u[o]=1);for(i in n)p[i]&&(c=!0)}for(i in n)if(p[i])for(a in p)("x"===a.charAt(0)?t:n)[a]||(d[a]=1)}c&&(s.extendFlat(u,d),d={});var h={},g=[];for(o in u){var v=y(e,o);g.push(v),h[v._id]=v}var m={},b=[];for(a in d){var x=y(e,a);b.push(x),m[x._id]=x}return{xaHash:h,yaHash:m,xaxes:g,yaxes:b,isSubplotConstrained:c}}(e,$,W),re=Q.isSubplotConstrained,ie=M||re,oe=S||re;var a=e._fullLayout;ae=a._has("scattergl"),se=a._has("splom"),le=a._has("svg")}pe();var he=function(e,t,n){return e?"nsew"===e?n?"":"pan"===t?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}(te+ee,e._fullLayout.dragmode,de),ge=E(t,S+M+"drag",he,n,o,c,f);if(ne&&!de)return ge.onmousedown=null,ge.style.pointerEvents="none",ge;var ve,me,be,ye,xe,_e,we,ke,Te,Ae,Ce={element:ge,gd:e,plotinfo:t};function Se(){Ce.plotinfo.selection=!1,_(ue)}function Me(n,i){var o=e._fullLayout.clickmode;if(N(e),2!==n||fe||function(){if(!e._transitioningWithDuration){var t,n,r,i=e._context.doubleClick,o=(ee?X:[]).concat(te?G:[]),s={};if("reset+autosize"===i)for(i="autosize",n=0;n<o.length;n++)if((t=o[n])._rangeInitial&&(t.range[0]!==t._rangeInitial[0]||t.range[1]!==t._rangeInitial[1])||!t._rangeInitial&&!t.autorange){i="reset";break}if("autosize"===i)for(n=0;n<o.length;n++)(t=o[n]).fixedrange||(s[t._name+".autorange"]=!0);else if("reset"===i)for((ee||re)&&(o=o.concat(Q.xaxes)),te&&!re&&(o=o.concat(Q.yaxes)),re&&(ee?te||(o=o.concat(G)):o=o.concat(X)),n=0;n<o.length;n++)(t=o[n])._rangeInitial?(r=t._rangeInitial,s[t._name+".range[0]"]=r[0],s[t._name+".range[1]"]=r[1]):s[t._name+".autorange"]=!0;e.emit("plotly_doubleclick",null),a.call("relayout",e,s)}}(),de)o.indexOf("select")>-1&&w(i,e,X,G,t.id,Ce),o.indexOf("event")>-1&&d.click(e,i,t.id);else if(1===n&&fe){var s=S?U:I,c="s"===S||"w"===M?0:1,u=s._name+".range["+c+"]",f=function(e,t){var n,i=e.range[t],o=Math.abs(i-e.range[1-t]);return"date"===e.type?i:"log"===e.type?(n=Math.ceil(Math.max(0,-Math.log(o)/Math.LN10))+3,r.format("."+n+"g")(Math.pow(10,i))):(n=Math.floor(Math.log(Math.abs(i))/Math.LN10)-Math.floor(Math.log(o)/Math.LN10)+4,r.format("."+String(n)+"g")(i))}(s,c),p="left",h="middle";if(s.fixedrange)return;S?(h="n"===S?"top":"bottom","right"===s.side&&(p="right")):"e"===M&&(p="right"),e._context.showAxisRangeEntryBoxes&&r.select(ge).call(l.makeEditable,{gd:e,immediate:!0,background:e._fullLayout.paper_bgcolor,text:String(f),fill:s.tickfont?s.tickfont.color:"#444",horizontalAlign:p,verticalAlign:h}).on("edit",function(t){var n=s.d2r(t);void 0!==n&&a.call("relayout",e,u,n)})}}function Ee(t,n){if(e._transitioningWithDuration)return!1;var r=Math.max(0,Math.min(J,t+ve)),i=Math.max(0,Math.min(K,n+me)),o=Math.abs(r-ve),a=Math.abs(i-me);function s(){we="",be.r=be.l,be.t=be.b,Te.attr("d","M0,0Z")}be.l=Math.min(ve,r),be.r=Math.max(ve,r),be.t=Math.min(me,i),be.b=Math.max(me,i),re?o>C||a>C?(we="xy",o/J>a/K?(a=o*K/J,me>i?be.t=me-a:be.b=me+a):(o=a*J/K,ve>r?be.l=ve-o:be.r=ve+o),Te.attr("d",H(be))):s():!te||a<Math.min(Math.max(.6*o,A),C)?o<A||!ee?s():(be.t=0,be.b=K,we="x",Te.attr("d",function(e,t){return"M"+(e.l-.5)+","+(t-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(e.r+.5)+","+(t-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(be,me))):!ee||o<Math.min(.6*a,C)?(be.l=0,be.r=J,we="y",Te.attr("d",function(e,t){return"M"+(t-C-.5)+","+(e.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(t-C-.5)+","+(e.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(be,ve))):(we="xy",Te.attr("d",H(be))),be.w=be.r-be.l,be.h=be.b-be.t,we&&(Ae=!0),e._dragged=Ae,j(ke,Te,be,xe,_e,ye),_e=!0}function Oe(){if(ce={},Math.min(be.h,be.w)<2*A)return N(e);"xy"!==we&&"x"!==we||L(X,be.l/J,be.r/J,ce,Q.xaxes),"xy"!==we&&"y"!==we||L(G,(K-be.b)/K,(K-be.t)/K,ce,Q.yaxes),N(e),ze(),z(e)}Ce.prepFn=function(t,n,r){var o=Ce.dragmode,a=e._fullLayout.dragmode;a!==o&&(Ce.dragmode=a),pe(),ne||(de?t.shiftKey?"pan"===a?a="zoom":q(a)||(a="pan"):t.ctrlKey&&(a="pan"):a="pan"),Ce.minDrag="lasso"===a?1:void 0,q(a)?(Ce.xaxes=X,Ce.yaxes=G,x(t,n,r,Ce,a)):(Ce.clickFn=Me,q(o)&&Se(),ne||("zoom"===a?(Ce.moveFn=Ee,Ce.doneFn=Oe,Ce.minDrag=1,function(t,n,r){var o=ge.getBoundingClientRect();ve=n-o.left,me=r-o.top,be={l:ve,r:ve,w:0,t:me,b:me,h:0},ye=e._hmpixcount?e._hmlumcount/e._hmpixcount:i(e._fullLayout.plot_bgcolor).getLuminance(),_e=!1,we="xy",Ae=!1,ke=R(ue,ye,Y,Z,xe="M0,0H"+J+"V"+K+"H0V0"),Te=F(ue,Y,Z)}(0,n,r)):"pan"===a&&(Ce.moveFn=Ie,Ce.doneFn=ze)))},p.init(Ce);var Le,Pe,De=[0,0,J,K],Re=null,Fe=T.REDRAWDELAY,je=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function Ie(t,n){if(!e._transitioningWithDuration){if("ew"===ee||"ns"===te)return ee&&P(X,t),te&&P(G,n),qe([ee?-t:0,te?-n:0,J,K]),void Ne(te,ee);if(re&&ee&&te){var r="w"===ee==("n"===te)?1:-1,i=(t/J+r*n/K)/2;t=i*J,n=r*i*K}"w"===ee?t=l(X,0,t):"e"===ee?t=l(X,1,-t):ee||(t=0),"n"===te?n=l(G,1,n):"s"===te?n=l(G,0,-n):te||(n=0);var o="w"===ee?t:0,a="n"===te?n:0;if(re){var s;if(!ee&&1===te.length){for(s=0;s<X.length;s++)X[s].range=X[s]._r.slice(),k(X[s],1-n/K);o=(t=n*J/K)/2}if(!te&&1===ee.length){for(s=0;s<G.length;s++)G[s].range=G[s]._r.slice(),k(G[s],1-t/J);a=(n=t*K/J)/2}}qe([o,a,J-t,K-n]),Ne(te,ee)}function l(e,t,n){for(var r,i,o=1-t,a=0;a<e.length;a++){var s=e[a];if(!s.fixedrange){r=s,i=s._rl[o]+(s._rl[t]-s._rl[o])/D(n/s._length);var l=s.l2r(i);!1!==l&&void 0!==l&&(s.range[t]=l)}}return r._length*(r._rl[t]-i)/(r._rl[t]-r._rl[o])}}function Ne(t,n){var r,i=[];function o(e){for(r=0;r<e.length;r++)e[r].fixedrange||i.push(e[r]._id)}for(ie&&(o(X),o(Q.xaxes)),oe&&(o(G),o(Q.yaxes)),ce={},r=0;r<i.length;r++){var s=i[r];b(e,s,!0);var l=y(e,s);ce[l._name+".range[0]"]=l.range[0],ce[l._name+".range[1]"]=l.range[1]}function c(o,a,s){for(r=0;r<o.length;r++){var l=o[r];if((n&&-1!==i.indexOf(l.xref)||t&&-1!==i.indexOf(l.yref))&&(a(e,r),s))return}}c(e._fullLayout.annotations||[],a.getComponentMethod("annotations","drawOne")),c(e._fullLayout.shapes||[],a.getComponentMethod("shapes","drawOne")),c(e._fullLayout.images||[],a.getComponentMethod("images","draw"),!0)}function ze(){qe([0,0,J,K]),s.syncOrAsync([m.previousPromises,function(){a.call("relayout",e,ce)}],e)}function qe(t){var n,r,i,o,l=e._fullLayout,c=l._plots,d=l._subplots.cartesian;if(se&&a.subplotsRegistry.splom.drag(e),ae)for(n=0;n<d.length;n++)if(i=(r=c[d[n]]).xaxis,o=r.yaxis,r._scene){var f=s.simpleMap(i.range,i.r2l),p=s.simpleMap(o.range,o.r2l);r._scene.update({range:[f[0],p[0],f[1],p[1]]})}if((se||ae)&&(g(e),v(e)),le){var h=t[2]/I._length,m=t[3]/U._length;for(n=0;n<d.length;n++){i=(r=c[d[n]]).xaxis,o=r.yaxis;var b,y,x,_,w=ie&&!i.fixedrange&&$[i._id],k=oe&&!o.fixedrange&&W[o._id];if(w?(b=h,x=M?t[0]:Ve(i,b)):x=Be(i,b=He(i,h,m)),k?(y=m,_=S?t[1]:Ve(o,y)):_=Be(o,y=He(o,h,m)),b||y){b||(b=1),y||(y=1);var T=i._offset-x/b,A=o._offset-_/y;r.clipRect.call(u.setTranslate,x,_).call(u.setScale,b,y),r.plot.call(u.setTranslate,T,A).call(u.setScale,1/b,1/y),b===Le&&y===Pe||(u.setPointGroupScale(r.zoomScalePts,b,y),u.setTextPointsScale(r.zoomScaleTxt,b,y)),u.hideOutsideRangePoints(r.clipOnAxisFalseTraces,r),Le=b,Pe=y}}}}function He(e,t,n){return e.fixedrange?0:ie&&Q.xaHash[e._id]?t:oe&&(re?Q.xaHash:Q.yaHash)[e._id]?n:0}function Be(e,t){return t?(e.range=e._r.slice(),k(e,t),Ve(e,t)):0}function Ve(e,t){return e._length*(1-t)*h[e.constraintoward||"middle"]}return S.length*M.length!=1&&B(ge,function(t){if(e._context.scrollZoom||e._fullLayout._enablescrollzoom){if(Se(),e._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();var n=e.querySelector(".plotly");if(pe(),!(n.scrollHeight-n.clientHeight>10||n.scrollWidth-n.clientWidth>10)){clearTimeout(Re);var r=-t.deltaY;if(isFinite(r)||(r=t.wheelDelta/10),isFinite(r)){var i,o=Math.exp(-Math.min(Math.max(r,-20),20)/200),a=je.draglayer.select(".nsewdrag").node().getBoundingClientRect(),l=(t.clientX-a.left)/a.width,c=(a.bottom-t.clientY)/a.height;if(ie){for(M||(l=.5),i=0;i<X.length;i++)u(X[i],l,o);De[2]*=o,De[0]+=De[2]*l*(1/o-1)}if(oe){for(S||(c=.5),i=0;i<G.length;i++)u(G[i],c,o);De[3]*=o,De[1]+=De[3]*(1-c)*(1/o-1)}qe(De),Ne(S,M),Re=setTimeout(function(){De=[0,0,J,K],ze()},Fe),t.preventDefault()}else s.log("Did not find wheel motion attributes: ",t)}}function u(e,t,n){if(!e.fixedrange){var r=s.simpleMap(e.range,e.r2l),i=r[0]+(r[1]-r[0])*t;e.range=r.map(function(t){return e.l2r(i+(t-i)*n)})}}}),ge},makeDragger:M,makeRectDragger:E,makeZoombox:R,makeCorners:F,updateZoombox:j,xyCorners:H,transitionZoombox:I,removeZoombox:N,showDoubleClickNotifier:z,attachWheelEventHandler:B}},{"../../components/color":43,"../../components/dragelement":65,"../../components/drawing":68,"../../components/fx":85,"../../constants/alignment":141,"../../lib":161,"../../lib/clear_gl_canvases":149,"../../lib/setcursor":181,"../../lib/svg_text_utils":183,"../../plot_api/subroutines":197,"../../registry":246,"../plots":239,"./axes":206,"./axis_ids":209,"./constants":212,"./scale_zoom":223,"./select":224,d3:8,"has-passive-events":13,tinycolor2:26}],216:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/fx"),o=e("../../components/dragelement"),a=e("../../lib/setcursor"),s=e("./dragbox").makeDragBox,l=e("./constants").DRAGGERSIZE;n.initInteractions=function(e){var t=e._fullLayout;if(e._context.staticPlot)r.select(e).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(e,n){if((t._plots[e].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var r=e.split("y"),i=n.split("y");return r[0]===i[0]?Number(r[1]||1)-Number(i[1]||1):Number(r[0]||1)-Number(i[0]||1)}return t._plots[e].mainplot?1:-1}).forEach(function(n){var r=t._plots[n],a=r.xaxis,c=r.yaxis;if(!r.mainplot){var u=s(e,r,a._offset,c._offset,a._length,c._length,"ns","ew");u.onmousemove=function(t){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===n&&i.hover(e,t,n)},i.hover(e,t,n),e._fullLayout._lasthover=u,e._fullLayout._hoversubplot=n},u.onmouseout=function(t){e._dragging||(e._fullLayout._hoversubplot=null,o.unhover(e,t))},e._context.showAxisDragHandles&&(s(e,r,a._offset-l,c._offset-l,l,l,"n","w"),s(e,r,a._offset+a._length,c._offset-l,l,l,"n","e"),s(e,r,a._offset-l,c._offset+c._length,l,l,"s","w"),s(e,r,a._offset+a._length,c._offset+c._length,l,l,"s","e"))}if(e._context.showAxisDragHandles){if(n===a._mainSubplot){var d=a._mainLinePosition;"top"===a.side&&(d-=l),s(e,r,a._offset+.1*a._length,d,.8*a._length,l,"","ew"),s(e,r,a._offset,d,.1*a._length,l,"","w"),s(e,r,a._offset+.9*a._length,d,.1*a._length,l,"","e")}if(n===c._mainSubplot){var f=c._mainLinePosition;"right"!==c.side&&(f-=l),s(e,r,f,c._offset+.1*c._length,l,.8*c._length,"ns",""),s(e,r,f,c._offset+.9*c._length,l,.1*c._length,"s",""),s(e,r,f,c._offset,l,.1*c._length,"n","")}}});var a=t._hoverlayer.node();a.onmousemove=function(n){n.target=e._fullLayout._lasthover,i.hover(e,n,t._hoversubplot)},a.onclick=function(t){t.target=e._fullLayout._lasthover,i.click(e,t)},a.onmousedown=function(t){e._fullLayout._lasthover.onmousedown(t)},n.updateFx(e)}},n.updateFx=function(e){var t=e._fullLayout,n="pan"===t.dragmode?"move":"crosshair";a(t._draggers,n)}},{"../../components/dragelement":65,"../../components/fx":85,"../../lib/setcursor":181,"./constants":212,"./dragbox":215,d3:8}],217:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib");t.exports=function(e){return function(t,n){var o=t[e];if(Array.isArray(o))for(var a=r.subplotsRegistry.cartesian,s=a.idRegex,l=n._subplots,c=l.xaxis,u=l.yaxis,d=l.cartesian,f=n._has("cartesian")||n._has("gl2d"),p=0;p<o.length;p++){var h=o[p];if(i.isPlainObject(h)){var g=h.xref,v=h.yref,m=s.x.test(g),b=s.y.test(v);if(m||b){f||i.pushUnique(n._basePlotModules,a);var y=!1;m&&-1===c.indexOf(g)&&(c.push(g),y=!0),b&&-1===u.indexOf(v)&&(u.push(v),y=!0),y&&m&&b&&d.push(g+v)}}}}}},{"../../lib":161,"../../registry":246}],218:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../registry"),o=e("../../lib"),a=e("../plots"),s=e("../../components/drawing"),l=e("../get_data").getModuleCalcData,c=e("./axis_ids"),u=e("./constants"),d=e("../../constants/xmlns_namespaces"),f=o.ensureSingle;function p(e,t,n){return o.ensureSingle(e,t,n,function(e){e.datum(n)})}function h(e,t,n,o,a){for(var c,d,f,p=u.traceLayerClasses,h=e._fullLayout,g=h._modules,v=[],m=[],b=0;b<g.length;b++){var y=(c=g[b]).name,x=i.modules[y].categories;if(x.svg){var _=c.layerName||y+"layer",w=c.plot;f=(d=l(n,w))[0],n=d[1],f.length&&v.push({i:p.indexOf(_),className:_,plotMethod:w,cdModule:f}),x.zoomScale&&m.push("."+_)}}v.sort(function(e,t){return e.i-t.i});var k=t.plot.selectAll("g.mlayer").data(v,function(e){return e.className});if(k.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",!0),k.exit().remove(),k.order(),k.each(function(n){var i=r.select(this),l=n.className;n.plotMethod(e,t,n.cdModule,i,o,a),"scatterlayer"!==l&&"barlayer"!==l&&s.setClipUrl(i,t.layerClipId)}),h._has("scattergl")&&(c=i.getModule("scattergl"),f=l(n,c)[0],c.plot(e,t,f)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(".scatterlayer, .barlayer").selectAll(".trace")),m.length)){var T=t.plot.selectAll(m.join(",")).selectAll(".trace");t.zoomScalePts=T.selectAll("path.point"),t.zoomScaleTxt=T.selectAll(".textpoint")}}function g(e,t){var n=t.plotgroup,r=t.id,i=u.layerValue2layerClass[t.xaxis.layer],o=u.layerValue2layerClass[t.yaxis.layer],a=e._fullLayout._hasOnlyLargeSploms;if(t.mainplot){var s=t.mainplotinfo,l=s.plotgroup,d=r+"-x",h=r+"-y";t.gridlayer=s.gridlayer,t.zerolinelayer=s.zerolinelayer,f(s.overlinesBelow,"path",d),f(s.overlinesBelow,"path",h),f(s.overaxesBelow,"g",d),f(s.overaxesBelow,"g",h),t.plot=f(s.overplot,"g",r),f(s.overlinesAbove,"path",d),f(s.overlinesAbove,"path",h),f(s.overaxesAbove,"g",d),f(s.overaxesAbove,"g",h),t.xlines=l.select(".overlines-"+i).select("."+d),t.ylines=l.select(".overlines-"+o).select("."+h),t.xaxislayer=l.select(".overaxes-"+i).select("."+d),t.yaxislayer=l.select(".overaxes-"+o).select("."+h)}else if(a)t.xlines=f(n,"path","xlines-above"),t.ylines=f(n,"path","ylines-above"),t.xaxislayer=f(n,"g","xaxislayer-above"),t.yaxislayer=f(n,"g","yaxislayer-above");else{var g=f(n,"g","layer-subplot");t.shapelayer=f(g,"g","shapelayer"),t.imagelayer=f(g,"g","imagelayer"),t.gridlayer=f(n,"g","gridlayer"),t.zerolinelayer=f(n,"g","zerolinelayer"),f(n,"path","xlines-below"),f(n,"path","ylines-below"),t.overlinesBelow=f(n,"g","overlines-below"),f(n,"g","xaxislayer-below"),f(n,"g","yaxislayer-below"),t.overaxesBelow=f(n,"g","overaxes-below"),t.plot=f(n,"g","plot"),t.overplot=f(n,"g","overplot"),t.xlines=f(n,"path","xlines-above"),t.ylines=f(n,"path","ylines-above"),t.overlinesAbove=f(n,"g","overlines-above"),f(n,"g","xaxislayer-above"),f(n,"g","yaxislayer-above"),t.overaxesAbove=f(n,"g","overaxes-above"),t.xlines=n.select(".xlines-"+i),t.ylines=n.select(".ylines-"+o),t.xaxislayer=n.select(".xaxislayer-"+i),t.yaxislayer=n.select(".yaxislayer-"+o)}a||(p(t.gridlayer,"g",t.xaxis._id),p(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(c.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function v(e,t){if(e){var n={};for(var i in e.each(function(e){var i=e[0];r.select(this).remove(),m(i,t),n[i]=!0}),t._plots)for(var o=t._plots[i].overlays||[],a=0;a<o.length;a++){var s=o[a];n[s.id]&&s.plot.selectAll(".trace").remove()}}}function m(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=u.idRegex,n.attrRegex=u.attrRegex,n.attributes=e("./attributes"),n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.transitionAxes=e("./transition_axes"),n.finalizeSubplots=function(e,t){var n,r,i,a=t._subplots,s=a.xaxis,l=a.yaxis,d=a.cartesian,f=d.concat(a.gl2d||[]),p={},h={};for(n=0;n<f.length;n++){var g=f[n].split("y");p[g[0]]=1,h["y"+g[1]]=1}for(n=0;n<s.length;n++)p[r=s[n]]||(i=(e[c.id2name(r)]||{}).anchor,u.idRegex.y.test(i)||(i="y"),d.push(r+i),f.push(r+i),h[i]||(h[i]=1,o.pushUnique(l,i)));for(n=0;n<l.length;n++)h[i=l[n]]||(r=(e[c.id2name(i)]||{}).anchor,u.idRegex.x.test(r)||(r="x"),d.push(r+i),f.push(r+i),p[r]||(p[r]=1,o.pushUnique(s,r)));if(!f.length){for(var v in r="",i="",e){if(u.attrRegex.test(v))"x"===v.charAt(0)?(!r||+v.substr(5)<+r.substr(5))&&(r=v):(!i||+v.substr(5)<+i.substr(5))&&(i=v)}r=r?c.name2id(r):"x",i=i?c.name2id(i):"y",s.push(r),l.push(i),d.push(r+i)}},n.plot=function(e,t,n,r){var i,o=e._fullLayout,a=o._subplots.cartesian,s=e.calcdata;if(null!==t){if(!Array.isArray(t))for(t=[],i=0;i<s.length;i++)t.push(i);for(i=0;i<a.length;i++){for(var l,c=a[i],u=o._plots[c],d=[],f=0;f<s.length;f++){var p=s[f],g=p[0].trace;g.xaxis+g.yaxis===c&&((-1!==t.indexOf(g.index)||g.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(g.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(p)),l=p)}h(e,u,d,n,r)}}},n.clean=function(e,t,n,r){var i,o,a,s=r._plots||{},l=t._plots||{},u=r._subplots||{};if(r._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(a in s)(i=s[a]).plotgroup&&i.plotgroup.remove();var d=r._has&&r._has("gl"),f=t._has&&t._has("gl");if(d&&!f)for(a in s)(i=s[a])._scene&&i._scene.destroy();if(u.xaxis&&u.yaxis){var p=c.listIds({_fullLayout:r});for(o=0;o<p.length;o++){var h=p[o];t[c.id2name(h)]||r._infolayer.selectAll(".g-"+h+"title").remove()}}var g=r._has&&r._has("cartesian"),b=t._has&&t._has("cartesian");if(g&&!b)v(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups;else if(u.cartesian)for(o=0;o<u.cartesian.length;o++){var y=u.cartesian[o];if(!l[y]){var x="."+y+",."+y+"-x,."+y+"-y";r._cartesianlayer.selectAll(x).remove(),m(y,r)}}},n.drawFramework=function(e){var t=e._fullLayout,n=function(e){var t,n,r,i,o,a,s=e._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(t=0;t<c;t++){r=l[t],i=s._plots[r],o=i.xaxis,a=i.yaxis;var f=o._mainAxis,p=a._mainAxis,h=f._id+p._id,g=s._plots[h];i.overlays=[],h!==r&&g?(i.mainplot=h,i.mainplotinfo=g,d.push(r)):(i.mainplot=void 0,i.mainPlotinfo=void 0,u.push(r))}for(t=0;t<d.length;t++)r=d[t],(i=s._plots[r]).mainplotinfo.overlays.push(i);var v=u.concat(d),m=new Array(c);for(t=0;t<c;t++){r=v[t],i=s._plots[r],o=i.xaxis,a=i.yaxis;var b=[r,o.layer,a.layer,o.overlaying||"",a.overlaying||""];for(n=0;n<i.overlays.length;n++)b.push(i.overlays[n].id);m[t]=b}return m}(e),i=t._cartesianlayer.selectAll(".subplot").data(n,String);i.enter().append("g").attr("class",function(e){return"subplot "+e[0]}),i.order(),i.exit().call(v,t),i.each(function(n){var i=n[0],o=t._plots[i];o.plotgroup=r.select(this),g(e,o),o.draglayer=f(t._draggers,"g",i)})},n.rangePlot=function(e,t,n){g(e,t),h(e,t,n),a.style(e)},n.toSVG=function(e){var t=e._fullLayout._glimages,n=r.select(e).selectAll(".svg-container");n.filter(function(e,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:d.svg,"xlink:href":e,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},n.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":68,"../../constants/xmlns_namespaces":144,"../../lib":161,"../../registry":246,"../get_data":235,"../plots":239,"./attributes":204,"./axis_ids":209,"./constants":212,"./graph_interact":216,"./layout_attributes":219,"./layout_defaults":220,"./transition_axes":229,d3:8}],219:[function(e,t,n){"use strict";var r=e("../font_attributes"),i=e("../../components/color/attributes"),o=e("../../components/drawing/attributes").dash,a=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray,l=e("./constants");t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:i.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1}}],editType:"axrange",impliedEdits:{autorange:!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:a({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:i.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:i.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"}}}},{"../../components/color/attributes":42,"../../components/drawing/attributes":67,"../../lib/extend":155,"../../plot_api/plot_template":196,"../font_attributes":233,"./constants":212}],220:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/color"),o=e("../../plot_api/plot_template"),a=e("../layout_attributes"),s=e("./layout_attributes"),l=e("./type_defaults"),c=e("./axis_defaults"),u=e("./constraint_defaults"),d=e("./position_defaults"),f=e("./axis_ids"),p=f.id2name,h=f.name2id,g=e("../../registry"),v=g.traceIs,m=g.getComponentMethod;function b(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}t.exports=function(e,t,n){var f,g,y={},x={},_={},w={},k={};for(f=0;f<n.length;f++){var T=n[f];if(v(T,"cartesian")||v(T,"gl2d")){var A,C;if(T.xaxis)b(y,A=p(T.xaxis),T);else if(T.xaxes)for(g=0;g<T.xaxes.length;g++)b(y,p(T.xaxes[g]),T);if(T.yaxis)b(y,C=p(T.yaxis),T);else if(T.yaxes)for(g=0;g<T.yaxes.length;g++)b(y,p(T.yaxes[g]),T);if(v(T,"carpet")&&("carpet"!==T.type||T._cheater)||A&&(_[A]=1),"carpet"===T.type&&T._cheater&&A&&(x[A]=1),v(T,"2dMap")&&(w[A]=1,w[C]=1),v(T,"oriented"))k["h"===T.orientation?C:A]=1}}var S=t._subplots,M=S.xaxis,E=S.yaxis,O=r.simpleMap(M,p),L=r.simpleMap(E,p),P=O.concat(L),D=i.background;M.length&&E.length&&(D=r.coerce(e,t,a,"plot_bgcolor"));var R,F,j,I,N=i.combine(D,t.paper_bgcolor);function z(e,t){return r.coerce(j,I,s,e,t)}function q(e,t){return r.coerce2(j,I,s,e,t)}function H(e){return"x"===e?E:M}var B={x:H("x"),y:H("y")};function V(t,n){for(var r="x"===t?O:L,i=[],o=0;o<r.length;o++){var a=r[o];a===n||(e[a]||{}).overlaying||i.push(h(a))}return i}for(f=0;f<P.length;f++){F=(R=P[f]).charAt(0),r.isPlainObject(e[R])||(e[R]={}),j=e[R],I=o.newContainer(t,R,F+"axis");var U=y[R]||[];I._traceIndices=U.map(function(e){return e._expandedIndex}),I._annIndices=[],I._shapeIndices=[],I._name=R;var $=I._id=h(R),W=V(F,R),X={letter:F,font:t.font,outerTicks:w[R],showGrid:!k[R],data:U,bgColor:N,calendar:t.calendar,automargin:!0,cheateronly:"x"===F&&x[R]&&!_[R],splomStash:((t._splomAxes||{})[F]||{})[$]};l(j,I,z,X),c(j,I,z,X,t);var G=q("spikecolor"),Y=q("spikethickness"),Z=q("spikedash"),J=q("spikemode"),K=q("spikesnap");z("showspikes",!!(G||Y||Z||J||K))||(delete I.spikecolor,delete I.spikethickness,delete I.spikedash,delete I.spikemode,delete I.spikesnap);var Q={letter:F,counterAxes:B[F],overlayableAxes:W,grid:t.grid};d(j,I,z,Q),I._input=j}var ee=m("rangeslider","handleDefaults"),te=m("rangeselector","handleDefaults");for(f=0;f<O.length;f++)R=O[f],j=e[R],I=t[R],ee(e,t,R),"date"===I.type&&te(j,I,t,L,I.calendar),z("fixedrange");for(f=0;f<L.length;f++){R=L[f],j=e[R],I=t[R];var ne=t[p(I.anchor)];z("fixedrange",ne&&ne.rangeslider&&ne.rangeslider.visible)}t._axisConstraintGroups=[];var re=B.x.concat(B.y);for(f=0;f<P.length;f++)F=(R=P[f]).charAt(0),j=e[R],I=t[R],u(j,I,z,re,t)}},{"../../components/color":43,"../../lib":161,"../../plot_api/plot_template":196,"../../registry":246,"../layout_attributes":237,"./axis_defaults":208,"./axis_ids":209,"./constraint_defaults":213,"./layout_attributes":219,"./position_defaults":222,"./type_defaults":230}],221:[function(e,t,n){"use strict";var r=e("tinycolor2").mix,i=e("../../components/color/attributes").lightFraction,o=e("../../lib");t.exports=function(e,t,n,a){var s=(a=a||{}).dfltColor;function l(n,r){return o.coerce2(e,t,a.attributes,n,r)}var c=l("linecolor",s),u=l("linewidth");n("showline",a.showLine||!!c||!!u)||(delete t.linecolor,delete t.linewidth);var d=l("gridcolor",r(s,a.bgColor,a.blend||i).toRgbString()),f=l("gridwidth");if(n("showgrid",a.showGrid||!!d||!!f)||(delete t.gridcolor,delete t.gridwidth),!a.noZeroLine){var p=l("zerolinecolor",s),h=l("zerolinewidth");n("zeroline",a.showGrid||!!p||!!h)||(delete t.zerolinecolor,delete t.zerolinewidth)}}},{"../../components/color/attributes":42,"../../lib":161,tinycolor2:26}],222:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib");t.exports=function(e,t,n,o){var a,s,l,c,u=o.counterAxes||[],d=o.overlayableAxes||[],f=o.letter,p=o.grid;p&&(s=p._domains[f][p._axisMap[t._id]],a=p._anchors[t._id],s&&(l=p[f+"side"].split(" ")[0],c=p.domain[f]["right"===l||"top"===l?1:0])),s=s||[0,1],a=a||(r(e.position)?"free":u[0]||"free"),l=l||("x"===f?"bottom":"left"),c=c||0,"free"===i.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:a}},"anchor")&&n("position",c),i.coerce(e,t,{side:{valType:"enumerated",values:"x"===f?["bottom","top"]:["left","right"],dflt:l}},"side");var h=!1;if(d.length&&(h=i.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(d),dflt:!1}},"overlaying")),!h){var g=n("domain",s);g[0]>g[1]-.01&&(t.domain=s),i.noneOrAll(e.domain,t.domain,s)}return n("layer"),t}},{"../../lib":161,"fast-isnumeric":10}],223:[function(e,t,n){"use strict";var r=e("../../constants/alignment").FROM_BL;t.exports=function(e,t,n){void 0===n&&(n=r[e.constraintoward||"center"]);var i=[e.r2l(e.range[0]),e.r2l(e.range[1])],o=i[0]+(i[1]-i[0])*n;e.range=e._input.range=[e.l2r(o+(i[0]-o)*t),e.l2r(o+(i[1]-o)*t)]}},{"../../constants/alignment":141}],224:[function(e,t,n){"use strict";var r=e("polybooljs"),i=e("../../registry"),o=e("../../components/color"),a=e("../../components/fx"),s=e("../../lib/polygon"),l=e("../../lib/throttle"),c=e("../../components/fx/helpers").makeEventData,u=e("./axis_ids").getFromId,d=e("../../lib/clear_gl_canvases"),f=e("../../plot_api/subroutines").redrawReglTraces,p=e("./constants"),h=p.MINSELECT,g=s.filter,v=s.tester;function m(e){return e._id}function b(e,t,n,r,i,o,a){var s,l,c,u,d,f,p,h,g,v=t._hoverdata,m=t._fullLayout.clickmode.indexOf("event")>-1,b=[];if(function(e){return e&&Array.isArray(e)&&!0!==e[0].hoverOnBox}(v)){w(e,t,o);var y=function(e,t){var n,r,i=e[0],o=-1,a=[];for(r=0;r<t.length;r++)if(n=t[r],i.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?o=i.pointNumber:void 0!==i.binNumber&&(o=i.binNumber,a=i.pointNumbers);break}return{pointNumber:o,pointNumbers:a,searchInfo:n}}(v,s=T(t,n,r,i));if(y.pointNumbers.length>0?function(e,t){var n,r,i,o=[];for(i=0;i<e.length;i++)(n=e[i]).cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0&&o.push(n);if(1===o.length&&o[0]===t.searchInfo&&(r=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(i=0;i<t.pointNumbers.length;i++)if(r.selectedpoints.indexOf(t.pointNumbers[i])<0)return!1;return!0}return!1}(s,y):function(e){var t,n,r,i=0;for(r=0;r<e.length;r++)if(t=e[r],(n=t.cd[0].trace).selectedpoints){if(n.selectedpoints.length>1)return!1;if((i+=n.selectedpoints.length)>1)return!1}return 1===i}(s)&&(f=C(y))){for(a&&a.remove(),g=0;g<s.length;g++)(l=s[g])._module.selectPoints(l,!1);S(t,s),k(o),m&&t.emit("plotly_deselect",null)}else{for(p=e.shiftKey&&(void 0!==f?f:C(y)),c=function(e,t,n){return{pointNumber:e,searchInfo:t,subtract:n}}(y.pointNumber,y.searchInfo,p),u=_(o.selectionDefs.concat([c])),g=0;g<s.length;g++)if(d=M(s[g]._module.selectPoints(s[g],u),s[g]),b.length)for(var x=0;x<d.length;x++)b.push(d[x]);else b=d;S(t,s,h={points:b}),c&&o&&o.selectionDefs.push(c),a&&A(o.mergedPolygons,a),m&&t.emit("plotly_selected",h)}}}function y(e){return"pointNumber"in e&&"searchInfo"in e}function x(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,n,r,i){var o=e.searchInfo.cd[0].trace._expandedIndex;return i.cd[0].trace._expandedIndex===o&&r===e.pointNumber},isRect:!1,degenerate:!1,subtract:e.subtract}}function _(e){for(var t=[],n=y(e[0])?0:e[0][0][0],r=n,i=y(e[0])?0:e[0][0][1],o=i,a=0;a<e.length;a++)if(y(e[a]))t.push(x(e[a]));else{var l=s.tester(e[a]);l.subtract=e[a].subtract,t.push(l),n=Math.min(n,l.xmin),r=Math.max(r,l.xmax),i=Math.min(i,l.ymin),o=Math.max(o,l.ymax)}return{xmin:n,xmax:r,ymin:i,ymax:o,pts:[],contains:function(e,n,r,i){for(var o=!1,a=0;a<t.length;a++)t[a].contains(e,n,r,i)&&(o=!1===t[a].subtract);return o},isRect:!1,degenerate:!1}}function w(e,t,n){var r=t._fullLayout,i=r._zoomlayer,o=n.plotinfo,a=r._lastSelectedSubplot&&r._lastSelectedSubplot===o.id,s=e.shiftKey||e.altKey;a&&s&&o.selection&&o.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=o.selection.selectionDefs,n.mergedPolygons=o.selection.mergedPolygons):s&&o.selection||k(n),a||(E(i),r._lastSelectedSubplot=o.id)}function k(e){var t=e.plotinfo;t.selection={},t.selection.selectionDefs=e.selectionDefs=[],t.selection.mergedPolygons=e.mergedPolygons=[]}function T(e,t,n,r){var i,o,a,s=[],l=t.map(m),c=n.map(m);for(a=0;a<e.calcdata.length;a++)if(!0===(o=(i=e.calcdata[a])[0].trace).visible&&o._module&&o._module.selectPoints)if(!r||o.subplot!==r&&o.geo!==r)if("splom"===o.type&&o._xaxes[l[0]]&&o._yaxes[c[0]]){var d=f(o._module,i,t[0],n[0]);d.scene=e._fullLayout._splomScenes[o.uid],s.push(d)}else{if(-1===l.indexOf(o.xaxis))continue;if(-1===c.indexOf(o.yaxis))continue;s.push(f(o._module,i,u(e,o.xaxis),u(e,o.yaxis)))}else s.push(f(o._module,i,t[0],n[0]));return s;function f(e,t,n,r){return{_module:e,cd:t,xaxis:n,yaxis:r}}}function A(e,t){var n,r,i=[];for(n=0;n<e.length;n++){var o=e[n];i.push(o.join("L")+"L"+o[0])}r=e.length>0?"M"+i.join("M")+"Z":"M0,0Z",t.attr("d",r)}function C(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,r=e.pointNumbers,i=r.length>0?r[0]:n;return!!t.selectedpoints&&t.selectedpoints.indexOf(i)>-1}function S(e,t,n){var r,o,a,s;if(n){var l=n.points||[];for(r=0;r<t.length;r++)(s=t[r].cd[0].trace).selectedpoints=[],s._input.selectedpoints=[];for(r=0;r<l.length;r++){var c=l[r],u=c.data,p=c.fullData;c.pointIndices?([].push.apply(u.selectedpoints,c.pointIndices),[].push.apply(p.selectedpoints,c.pointIndices)):(u.selectedpoints.push(c.pointIndex),p.selectedpoints.push(c.pointIndex))}}else for(r=0;r<t.length;r++)delete(s=t[r].cd[0].trace).selectedpoints,delete s._input.selectedpoints;var h=!1;for(r=0;r<t.length;r++){s=(a=(o=t[r]).cd)[0].trace,i.traceIs(s,"regl")&&(h=!0);var g=o._module,v=g.styleOnSelect||g.style;v&&v(e,a)}h&&(d(e),f(e))}function M(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,i=0;i<e.length;i++)e[i]=c(e[i],r,n);return e}function E(e){e.selectAll(".select-outline").remove()}t.exports={prepSelect:function(e,t,n,i,s){var c,u,d,f,m,y,x,C=i.gd,E=C._fullLayout,O=E._zoomlayer,L=i.element.getBoundingClientRect(),P=i.plotinfo,D=P.xaxis._offset,R=P.yaxis._offset,F=t-L.left,j=n-L.top,I=F,N=j,z="M"+F+","+j,q=i.xaxes[0]._length,H=i.yaxes[0]._length,B=i.xaxes.concat(i.yaxes),V=e.altKey;w(e,C,i),"lasso"===s&&(c=g([[F,j]],p.BENDPX));var U=O.selectAll("path.select-outline-"+P.id).data([1,2]);U.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+P.id}).attr("transform","translate("+D+", "+R+")").attr("d",z+"Z");var $,W=O.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1}).attr("transform","translate("+D+", "+R+")").attr("d","M0,0Z"),X=E._uid+p.SELECTID,G=[],Y=T(C,i.xaxes,i.yaxes,i.subplot);function Z(e){var t="y"===e._id.charAt(0)?1:0;return function(n){return e.p2d(n[t])}}function J(e,t){return e-t}$=P.fillRangeItems?P.fillRangeItems:"select"===s?function(e,t){var n=e.range={};for(m=0;m<B.length;m++){var r=B[m],i=r._id.charAt(0);n[r._id]=[r.p2d(t[i+"min"]),r.p2d(t[i+"max"])].sort(J)}}:function(e,t,n){var r=e.lassoPoints={};for(m=0;m<B.length;m++){var i=B[m];r[i._id]=n.filtered.map(Z(i))}},i.moveFn=function(e,t){I=Math.max(0,Math.min(q,e+F)),N=Math.max(0,Math.min(H,t+j));var n=Math.abs(I-F),o=Math.abs(N-j);if("select"===s){var a=E.selectdirection;"h"===(a="any"===E.selectdirection?o<Math.min(.6*n,h)?"h":n<Math.min(.6*o,h)?"v":"d":E.selectdirection)?((f=[[F,0],[F,H],[I,H],[I,0]]).xmin=Math.min(F,I),f.xmax=Math.max(F,I),f.ymin=Math.min(0,H),f.ymax=Math.max(0,H),W.attr("d","M"+f.xmin+","+(j-h)+"h-4v"+2*h+"h4ZM"+(f.xmax-1)+","+(j-h)+"h4v"+2*h+"h-4Z")):"v"===a?((f=[[0,j],[0,N],[q,N],[q,j]]).xmin=Math.min(0,q),f.xmax=Math.max(0,q),f.ymin=Math.min(j,N),f.ymax=Math.max(j,N),W.attr("d","M"+(F-h)+","+f.ymin+"v-4h"+2*h+"v4ZM"+(F-h)+","+(f.ymax-1)+"v4h"+2*h+"v-4Z")):"d"===a&&((f=[[F,j],[F,N],[I,N],[I,j]]).xmin=Math.min(F,I),f.xmax=Math.max(F,I),f.ymin=Math.min(j,N),f.ymax=Math.max(j,N),W.attr("d","M0,0Z"))}else"lasso"===s&&(c.addPt([I,N]),f=c.filtered);i.selectionDefs&&i.selectionDefs.length?(d=function(e,t,n){return n?r.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions:r.union({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions}(i.mergedPolygons,f,V),f.subtract=V,u=_(i.selectionDefs.concat([f]))):(d=[f],u=v(f)),A(d,U),l.throttle(X,p.SELECTDELAY,function(){G=[];var e,t,n=[];for(m=0;m<Y.length;m++)if(t=(y=Y[m])._module.selectPoints(y,u),n.push(t),e=M(t,y),G.length)for(var r=0;r<e.length;r++)G.push(e[r]);else G=e;S(C,Y,x={points:G}),$(x,f,c),i.gd.emit("plotly_selecting",x)})},i.clickFn=function(e,t){var n=E.clickmode;W.remove(),l.done(X).then(function(){if(l.clear(X),2===e){for(U.remove(),m=0;m<Y.length;m++)(y=Y[m])._module.selectPoints(y,!1);S(C,Y),k(i),C.emit("plotly_deselect",null)}else n.indexOf("select")>-1&&b(t,C,i.xaxes,i.yaxes,i.subplot,i,U),"event"===n&&C.emit("plotly_selected",void 0);a.click(C,t)})},i.doneFn=function(){W.remove(),l.done(X).then(function(){l.clear(X),i.gd.emit("plotly_selected",x),f&&i.selectionDefs&&(f.subtract=V,i.selectionDefs.push(f),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,d))})}},clearSelect:E,selectOnClick:b}},{"../../components/color":43,"../../components/fx":85,"../../components/fx/helpers":82,"../../lib/clear_gl_canvases":149,"../../lib/polygon":174,"../../lib/throttle":184,"../../plot_api/subroutines":197,"../../registry":246,"./axis_ids":209,"./constants":212,polybooljs:17}],225:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("../../lib"),a=o.cleanNumber,s=o.ms2DateTime,l=o.dateTime2ms,c=o.ensureNumber,u=e("../../constants/numerical"),d=u.FP_SAFE,f=u.BADNUM,p=u.LOG_CLIP,h=e("./constants"),g=e("./axis_ids");function v(e){return Math.pow(10,e)}t.exports=function(e,t){t=t||{};var n=(e._id||"x").charAt(0);function u(t,n){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&n&&e.range&&2===e.range.length){var r=e.range[0],i=e.range[1];return.5*(r+i-2*p*Math.abs(r-i))}return f}function m(t,n,r){var a=l(t,r||e.calendar);if(a===f){if(!i(t))return f;t=+t;var s=Math.floor(10*o.mod(t+.05,1)),c=Math.round(t-s/10);a=l(new Date(c))+s/10}return a}function b(t,n,r){return s(t,n,r||e.calendar)}function y(t){return e._categories[Math.round(t)]}function x(t){if(e._categoriesMap){var n=e._categoriesMap[t];if(void 0!==n)return n}if(i(t))return+t}function _(t){return i(t)?r.round(e._b+e._m*t,2):f}function w(t){return(t-e._b)/e._m}e.c2l="log"===e.type?u:c,e.l2c="log"===e.type?v:c,e.l2p=_,e.p2l=w,e.c2p="log"===e.type?function(e,t){return _(u(e,t))}:_,e.p2c="log"===e.type?function(e){return v(w(e))}:w,-1!==["linear","-"].indexOf(e.type)?(e.d2r=e.r2d=e.d2c=e.r2c=e.d2l=e.r2l=a,e.c2d=e.c2r=e.l2d=e.l2r=c,e.d2p=e.r2p=function(t){return e.l2p(a(t))},e.p2d=e.p2r=w,e.cleanPos=c):"log"===e.type?(e.d2r=e.d2l=function(e,t){return u(a(e),t)},e.r2d=e.r2c=function(e){return v(a(e))},e.d2c=e.r2l=a,e.c2d=e.l2r=c,e.c2r=u,e.l2d=v,e.d2p=function(t,n){return e.l2p(e.d2r(t,n))},e.p2d=function(e){return v(w(e))},e.r2p=function(t){return e.l2p(a(t))},e.p2r=w,e.cleanPos=c):"date"===e.type?(e.d2r=e.r2d=o.identity,e.d2c=e.r2c=e.d2l=e.r2l=m,e.c2d=e.c2r=e.l2d=e.l2r=b,e.d2p=e.r2p=function(t,n,r){return e.l2p(m(t,0,r))},e.p2d=e.p2r=function(e,t,n){return b(w(e),t,n)},e.cleanPos=function(t){return o.cleanDate(t,f,e.calendar)}):"category"===e.type&&(e.d2c=e.d2l=function(t){if(null!==t&&void 0!==t){if(void 0===e._categoriesMap&&(e._categoriesMap={}),void 0!==e._categoriesMap[t])return e._categoriesMap[t];e._categories.push(t);var n=e._categories.length-1;return e._categoriesMap[t]=n,n}return f},e.r2d=e.c2d=e.l2d=y,e.d2r=e.d2l_noadd=x,e.r2c=function(t){var n=x(t);return void 0!==n?n:e.fraction2r(.5)},e.l2r=e.c2r=c,e.r2l=x,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return y(w(e))},e.r2p=e.d2p,e.p2r=w,e.cleanPos=function(e){return"string"==typeof e&&""!==e?e:c(e)}),e.fraction2r=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return e.l2r(n+t*(r-n))},e.r2fraction=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return(e.r2l(t)-n)/(r-n)},e.cleanRange=function(t,r){r||(r={}),t||(t="range");var a,s,l=o.nestedProperty(e,t).get();if(s=(s="date"===e.type?o.dfltRange(e.calendar):"y"===n?h.DFLTRANGEY:r.dfltRange||h.DFLTRANGEX).slice(),l&&2===l.length)for("date"===e.type&&(l[0]=o.cleanDate(l[0],f,e.calendar),l[1]=o.cleanDate(l[1],f,e.calendar)),a=0;a<2;a++)if("date"===e.type){if(!o.isDateTime(l[a],e.calendar)){e[t]=s;break}if(e.r2l(l[0])===e.r2l(l[1])){var c=o.constrain(e.r2l(l[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);l[0]=e.l2r(c-1e3),l[1]=e.l2r(c+1e3);break}}else{if(!i(l[a])){if(!i(l[1-a])){e[t]=s;break}l[a]=l[1-a]*(a?10:.1)}if(l[a]<-d?l[a]=-d:l[a]>d&&(l[a]=d),l[0]===l[1]){var u=Math.max(1,Math.abs(1e-6*l[0]));l[0]-=u,l[1]+=u}}else o.nestedProperty(e,t).set(s)},e.setScale=function(r){var i=t._size;if(e._categories||(e._categories=[]),e._categoriesMap||(e._categoriesMap={}),e.overlaying){var o=g.getFromId({_fullLayout:t},e.overlaying);e.domain=o.domain}var a=r&&e._r?"_r":"range",s=e.calendar;e.cleanRange(a);var l=e.r2l(e[a][0],s),c=e.r2l(e[a][1],s);if("y"===n?(e._offset=i.t+(1-e.domain[1])*i.h,e._length=i.h*(e.domain[1]-e.domain[0]),e._m=e._length/(l-c),e._b=-e._m*c):(e._offset=i.l+e.domain[0]*i.w,e._length=i.w*(e.domain[1]-e.domain[0]),e._m=e._length/(c-l),e._b=-e._m*l),!isFinite(e._m)||!isFinite(e._b))throw t._replotting=!1,new Error("Something went wrong with axis scaling")},e.makeCalcdata=function(t,n){var r,i,a,s,l=e.type,c="date"===l&&t[n+"calendar"];if(n in t){if(r=t[n],s=t._length||r.length,o.isTypedArray(r)&&("linear"===l||"log"===l)){if(s===r.length)return r;if(r.subarray)return r.subarray(0,s)}for(i=new Array(s),a=0;a<s;a++)i[a]=e.d2c(r[a],0,c)}else{var u=n+"0"in t?e.d2c(t[n+"0"],0,c):0,d=t["d"+n]?Number(t["d"+n]):1;for(r=t[{x:"y",y:"x"}[n]],s=t._length||r.length,i=new Array(s),a=0;a<s;a++)i[a]=u+a*d}return i},e.isValidRange=function(t){return Array.isArray(t)&&2===t.length&&i(e.r2l(t[0]))&&i(e.r2l(t[1]))},e.isPtWithinRange=function(t,r){var i=e.c2l(t[n],null,r),o=e.r2l(e.range[0]),a=e.r2l(e.range[1]);return o<a?o<=i&&i<=a:a<=i&&i<=o},e.clearCalc=function(){e._categories=(e._initialCategories||[]).slice(),e._categoriesMap={};for(var t=0;t<e._categories.length;t++)e._categoriesMap[e._categories[t]]=t};var k=t._d3locale;"date"===e.type&&(e._dateFormat=k?k.timeFormat.utc:r.time.format.utc,e._extraFormat=t._extraFormat),e._separators=t.separators,e._numFormat=k?k.numberFormat:r.format,delete e._minDtick,delete e._forceTick0}},{"../../constants/numerical":143,"../../lib":161,"./axis_ids":209,"./constants":212,d3:8,"fast-isnumeric":10}],226:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./layout_attributes"),o=e("../array_container_defaults");function a(e,t){function n(n,o){return r.coerce(e,t,i.tickformatstops,n,o)}n("enabled")&&(n("dtickrange"),n("value"))}t.exports=function(e,t,n,s,l){var c=function(e){var t=["showexponent","showtickprefix","showticksuffix"].filter(function(t){return void 0!==e[t]});if(t.every(function(n){return e[n]===e[t[0]]})||1===t.length)return e[t[0]]}(e);if(n("tickprefix")&&n("showtickprefix",c),n("ticksuffix",l.tickSuffixDflt)&&n("showticksuffix",c),n("showticklabels")){var u=l.font||{},d=t.color,f=d&&d!==i.color.dflt?d:u.color;if(r.coerceFont(n,"tickfont",{family:u.family,size:u.size,color:f}),n("tickangle"),"category"!==s){var p=n("tickformat"),h=e.tickformatstops;Array.isArray(h)&&h.length&&o(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),p||"date"===s||(n("showexponent",c),n("exponentformat"),n("separatethousands"))}}}},{"../../lib":161,"../array_container_defaults":202,"./layout_attributes":219}],227:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./layout_attributes");t.exports=function(e,t,n,o){var a=r.coerce2(e,t,i,"ticklen"),s=r.coerce2(e,t,i,"tickwidth"),l=r.coerce2(e,t,i,"tickcolor",t.color);n("ticks",o.outerTicks||a||s||l?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":161,"./layout_attributes":219}],228:[function(e,t,n){"use strict";var r=e("./clean_ticks");t.exports=function(e,t,n,i){var o;"array"!==e.tickmode||"log"!==i&&"date"!==i?o=n("tickmode",Array.isArray(e.tickvals)?"array":e.dtick?"linear":"auto"):o=t.tickmode="auto";if("auto"===o)n("nticks");else if("linear"===o){var a=t.dtick=r.dtick(e.dtick,i);t.tick0=r.tick0(e.tick0,i,t.calendar,a)}else{void 0===n("tickvals")?t.tickmode="auto":n("ticktext")}}},{"./clean_ticks":211}],229:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../registry"),o=e("../../components/drawing"),a=e("./axes"),s=e("./constants").attrRegex;t.exports=function(e,t,n,l){var c=e._fullLayout,u=[];var d,f,p,h,g=function(e){var t,n,r,i,o={};for(t in e)if((n=t.split("."))[0].match(s)){var a=t.charAt(0),l=n[0];if(r=c[l],i={},Array.isArray(e[t])?i.to=e[t].slice(0):Array.isArray(e[t].range)&&(i.to=e[t].range.slice(0)),!i.to)continue;i.axisName=l,i.length=r._length,u.push(a),o[a]=i}return o}(t),v=Object.keys(g),m=function(e,t,n){var r,i,o,a=e._plots,s=[];for(r in a){var l=a[r];if(-1===s.indexOf(l)){var c=l.xaxis._id,u=l.yaxis._id,d=l.xaxis.range,f=l.yaxis.range;l.xaxis._r=l.xaxis.range.slice(),l.yaxis._r=l.yaxis.range.slice(),i=n[c]?n[c].to:d,o=n[u]?n[u].to:f,d[0]===i[0]&&d[1]===i[1]&&f[0]===o[0]&&f[1]===o[1]||-1===t.indexOf(c)&&-1===t.indexOf(u)||s.push(l)}}return s}(c,v,g);if(!m.length)return function(){function t(t,n,r){for(var i=0;i<t.length;i++)if(n(e,i),r)return}t(c.annotations||[],i.getComponentMethod("annotations","drawOne")),t(c.shapes||[],i.getComponentMethod("shapes","drawOne")),t(c.images||[],i.getComponentMethod("images","draw"),!0)}(),!1;function b(e){var t=e.xaxis,n=e.yaxis;c._defs.select("#"+e.clipId+"> rect").call(o.setTranslate,0,0).call(o.setScale,1,1),e.plot.call(o.setTranslate,t._offset,n._offset).call(o.setScale,1,1);var r=e.plot.selectAll(".scatterlayer .trace");r.selectAll(".point").call(o.setPointGroupScale,1,1),r.selectAll(".textpoint").call(o.setTextPointsScale,1,1),r.call(o.hideOutsideRangePoints,e)}function y(t,n){var r,s,l,u=g[t.xaxis._id],d=g[t.yaxis._id],f=[];if(u){s=(r=e._fullLayout[u.axisName])._r,l=u.to,f[0]=(s[0]*(1-n)+n*l[0]-s[0])/(s[1]-s[0])*t.xaxis._length;var p=s[1]-s[0],h=l[1]-l[0];r.range[0]=s[0]*(1-n)+n*l[0],r.range[1]=s[1]*(1-n)+n*l[1],f[2]=t.xaxis._length*(1-n+n*h/p)}else f[0]=0,f[2]=t.xaxis._length;if(d){s=(r=e._fullLayout[d.axisName])._r,l=d.to,f[1]=(s[1]*(1-n)+n*l[1]-s[1])/(s[0]-s[1])*t.yaxis._length;var v=s[1]-s[0],m=l[1]-l[0];r.range[0]=s[0]*(1-n)+n*l[0],r.range[1]=s[1]*(1-n)+n*l[1],f[3]=t.yaxis._length*(1-n+n*m/v)}else f[1]=0,f[3]=t.yaxis._length;!function(t,n){var r,o=[];for(o=[t._id,n._id],r=0;r<o.length;r++)a.doTicksSingle(e,o[r],!0);function s(t,n,i){for(r=0;r<t.length;r++){var a=t[r];if(-1===o.indexOf(a.xref)&&-1===o.indexOf(a.yref)||n(e,r),i)return}}s(c.annotations||[],i.getComponentMethod("annotations","drawOne")),s(c.shapes||[],i.getComponentMethod("shapes","drawOne")),s(c.images||[],i.getComponentMethod("images","draw"),!0)}(t.xaxis,t.yaxis);var b=t.xaxis,y=t.yaxis,x=!!u,_=!!d,w=x?b._length/f[2]:1,k=_?y._length/f[3]:1,T=x?f[0]:0,A=_?f[1]:0,C=x?f[0]/f[2]*b._length:0,S=_?f[1]/f[3]*y._length:0,M=b._offset-C,E=y._offset-S;t.clipRect.call(o.setTranslate,T,A).call(o.setScale,1/w,1/k),t.plot.call(o.setTranslate,M,E).call(o.setScale,w,k),o.setPointGroupScale(t.zoomScalePts,1/w,1/k),o.setTextPointsScale(t.zoomScaleTxt,1/w,1/k)}l&&(d=l());var x=r.ease(n.easing);return e._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(h),h=null,function(){for(var t={},n=0;n<v.length;n++){var r=e._fullLayout[v[n]+"axis"];t[r._name+".range[0]"]=r.range[0],t[r._name+".range[1]"]=r.range[1],r.range=r._r.slice()}return i.call("relayout",e,t).then(function(){for(var e=0;e<m.length;e++)b(m[e])})}()}),f=Date.now(),h=window.requestAnimationFrame(function t(){p=Date.now();for(var r=Math.min(1,(p-f)/n.duration),o=x(r),a=0;a<m.length;a++)y(m[a],o);p-f>n.duration?(function(){for(var t={},n=0;n<v.length;n++){var r=e._fullLayout[g[v[n]].axisName],o=g[v[n]].to;t[r._name+".range[0]"]=o[0],t[r._name+".range[1]"]=o[1],r.range=o.slice()}d&&d(),i.call("relayout",e,t).then(function(){for(var e=0;e<m.length;e++)b(m[e])})}(),h=window.cancelAnimationFrame(t)):h=window.requestAnimationFrame(t)}),Promise.resolve()}},{"../../components/drawing":68,"../../registry":246,"./axes":206,"./constants":212,d3:8}],230:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("./axis_autotype");function o(e){return{v:"x",h:"y"}[e.orientation||"v"]}function a(e,t){var n=o(e),i=r.traceIs(e,"box-violin"),a=r.traceIs(e._fullInput||{},"candlestick");return i&&!a&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}t.exports=function(e,t,n,s){"-"===n("type",(s.splomStash||{}).type)&&(!function(e,t){if("-"!==e.type)return;var n=e._id,s=n.charAt(0);-1!==n.indexOf("scene")&&(n=s);var l=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if("splom"===i.type&&i._length>0&&(i["_"+n+"axes"]||{})[t])return i;if((i[n+"axis"]||n)===t){if(a(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}(t,n,s);if(!l)return;if("histogram"===l.type&&s==={v:"y",h:"x"}[l.orientation||"v"])return void(e.type="linear");var c,u=s+"calendar",d=l[u];if(a(l,s)){var f=o(l),p=[];for(c=0;c<t.length;c++){var h=t[c];r.traceIs(h,"box-violin")&&(h[s+"axis"]||s)===n&&(void 0!==h[f]?p.push(h[f][0]):void 0!==h.name?p.push(h.name):p.push("text"),h[u]!==d&&(d=void 0))}e.type=i(p,d)}else if("splom"===l.type){var g=l.dimensions,v=l._diag;for(c=0;c<g.length;c++){var m=g[c];if(m.visible&&(v[c][0]===n||v[c][1]===n)){e.type=i(m.values,d);break}}}else e.type=i(l[s]||[l[s+"0"]],d)}(t,s.data),"-"===t.type?t.type="linear":e.type=t.type)}},{"../../registry":246,"./axis_autotype":207}],231:[function(e,t,n){"use strict";var r=e("../registry"),i=e("../lib");function o(e,t,n){var r,o,a,s=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return o=i.nestedProperty(r,t.prop).get(),(a=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==o&&(s=!0),a[t.prop]=o,{changed:s,value:o}}function a(e,t){var n=[],r=t[0],o={};if("string"==typeof r)o[r]=t[1];else{if(!i.isPlainObject(r))return n;o=r}return l(o,function(e,t,r){n.push({type:"layout",prop:e,value:r})},"",0),n}function s(e,t){var n,r,o,a,s=[];if(r=t[0],o=t[1],n=t[2],a={},"string"==typeof r)a[r]=o;else{if(!i.isPlainObject(r))return s;a=r,void 0===n&&(n=o)}return void 0===n&&(n=null),l(a,function(t,r,i){var o;if(Array.isArray(i)){var a=Math.min(i.length,e.data.length);n&&(a=Math.min(a,n.length)),o=[];for(var l=0;l<a;l++)o[l]=n?n[l]:l}else o=n?n.slice(0):null;if(null===o)Array.isArray(i)&&(i=i[0]);else if(Array.isArray(o)){if(!Array.isArray(i)){var c=i;i=[];for(var u=0;u<o.length;u++)i[u]=c}i.length=Math.min(o.length,i.length)}s.push({type:"data",prop:t,traces:o,value:i})},"",0),s}function l(e,t,n,r){Object.keys(e).forEach(function(o){var a=e[o];if("_"!==o[0]){var s=n+(r>0?".":"")+o;i.isPlainObject(a)?l(a,t,s,r+1):t(s,o,a)}})}n.manageCommandObserver=function(e,t,r,a){var s={},l=!0;t&&t._commandObserver&&(s=t._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var c=n.hasSimpleAPICommandBindings(e,r,s.lookupTable);if(t&&t._commandObserver){if(c)return s;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,s}if(c){o(e,c,s.cache),s.check=function(){if(l){var t=o(e,c,s.cache);return t.changed&&a&&void 0!==s.lookupTable[t.value]&&(s.disable(),Promise.resolve(a({value:t.value,type:c.type,prop:c.prop,traces:c.traces,index:s.lookupTable[t.value]})).then(s.enable,s.enable)),t.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<u.length;d++)e._internalOn(u[d],s.check);s.remove=function(){for(var t=0;t<u.length;t++)e._removeInternalListener(u[t],s.check)}}else i.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},t&&(t._commandObserver=s),s},n.hasSimpleAPICommandBindings=function(e,t,r){var i,o,a=t.length;for(i=0;i<a;i++){var s,l=t[i],c=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!c)return!1;var d=n.computeAPICommandBindings(e,c,u);if(1!==d.length)return!1;if(o){if((s=d[0]).type!==o.type)return!1;if(s.prop!==o.prop)return!1;if(Array.isArray(o.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var f=0;f<o.traces.length;f++)if(o.traces[f]!==s.traces[f])return!1}else if(s.prop!==o.prop)return!1}else o=d[0],Array.isArray(o.traces)&&o.traces.sort();var p=(s=d[0]).value;if(Array.isArray(p)){if(1!==p.length)return!1;p=p[0]}r&&(r[p]=i)}return o},n.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var o=r.apiMethodRegistry[t],a=[e];Array.isArray(n)||(n=[]);for(var s=0;s<n.length;s++)a.push(n[s]);return o.apply(null,a).catch(function(e){return i.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},n.computeAPICommandBindings=function(e,t,n){var r;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=a(e,n);break;case"update":r=s(e,[n[0],n[2]]).concat(a(e,[n[1]]));break;case"animate":r=function(e,t){return Array.isArray(t[0])&&1===t[0].length&&-1!==["string","number"].indexOf(typeof t[0][0])?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}(0,n);break;default:r=[]}return r}},{"../lib":161,"../registry":246}],232:[function(e,t,n){"use strict";var r=e("../lib/extend").extendFlat;n.attributes=function(e,t){e=e||{},t=t||{};var n={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=(e.name&&e.name,e.trace,t.description&&t.description,{x:r({},n,{}),y:r({},n,{}),editType:e.editType});return e.noGridCell||(i.row={valType:"integer",min:0,dflt:0,editType:e.editType},i.column={valType:"integer",min:0,dflt:0,editType:e.editType}),i},n.defaults=function(e,t,n,r){var i=r&&r.x||[0,1],o=r&&r.y||[0,1],a=t.grid;if(a){var s=n("domain.column");void 0!==s&&(s<a.columns?i=a._domains.x[s]:delete e.domain.column);var l=n("domain.row");void 0!==l&&(l<a.rows?o=a._domains.y[l]:delete e.domain.row)}n("domain.x",i),n("domain.y",o)}},{"../lib/extend":155}],233:[function(e,t,n){"use strict";t.exports=function(e){var t=e.editType,n=e.colorEditType;void 0===n&&(n=t);var r={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n},editType:t};return e.arrayOk&&(r.family.arrayOk=!0,r.size.arrayOk=!0,r.color.arrayOk=!0),r}},{}],234:[function(e,t,n){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],235:[function(e,t,n){"use strict";var r=e("../registry"),i=e("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(e,t,n){var i=r.subplotsRegistry[t];if(!i)return[];for(var o=i.attr,a=[],s=0;s<e.length;s++){var l=e[s];l[0].trace[o]===n&&a.push(l)}return a},n.getModuleCalcData=function(e,t){var n,i=[],o=[];if(!(n="string"==typeof t?r.getModule(t).plot:"function"==typeof t?t:t.plot))return[i,e];for(var a=0;a<e.length;a++){var s=e[a],l=s[0].trace;!0===l.visible&&(l._module.plot===n?i.push(s):o.push(s))}return[i,o]},n.getSubplotData=function(e,t,n){if(!r.subplotsRegistry[t])return[];var o,a,s,l=r.subplotsRegistry[t].attr,c=[];if("gl2d"===t){var u=n.match(i);a="x"+u[1],s="y"+u[2]}for(var d=0;d<e.length;d++)o=e[d],"gl2d"===t&&r.traceIs(o,"gl2d")?o[l[0]]===a&&o[l[1]]===s&&c.push(o):o[l]===n&&c.push(o);return c}},{"../registry":246,"./cartesian/constants":212}],236:[function(e,t,n){"use strict";function r(e,t){var n,r,i=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)i[r]+=e[4*n+r]*t[n];return i}t.exports=function(e,t){return r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])))}},{}],237:[function(e,t,n){"use strict";var r=e("./font_attributes"),i=e("../components/color/attributes"),o=r({editType:"calc"});o.family.dflt='"Open Sans", verdana, arial, sans-serif',o.size.dflt=12,o.color.dflt=i.defaultLine,t.exports={font:o,title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},editType:"modebar"}}},{"../components/color/attributes":42,"./font_attributes":233}],238:[function(e,t,n){"use strict";t.exports={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"}},{}],239:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("../registry"),a=e("../plot_api/plot_schema"),s=e("../plot_api/plot_template"),l=e("../lib"),c=e("../components/color"),u=e("../constants/numerical").BADNUM,d=e("../plots/cartesian/axis_ids"),f=e("./animation_attributes"),p=e("./frame_attributes"),h=l.relinkPrivateKeys,g=l._,v=t.exports={};l.extendFlat(v,o),v.attributes=e("./attributes"),v.attributes.type.values=v.allTypes,v.fontAttrs=e("./font_attributes"),v.layoutAttributes=e("./layout_attributes"),v.fontWeight="normal";var m=v.transformsRegistry,b=e("./command");v.executeAPICommand=b.executeAPICommand,v.computeAPICommandBindings=b.computeAPICommandBindings,v.manageCommandObserver=b.manageCommandObserver,v.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings,v.redrawText=function(e){if(!((e=l.getGraphDiv(e)).data&&e.data[0]&&e.data[0].r))return new Promise(function(t){setTimeout(function(){o.getComponentMethod("annotations","draw")(e),o.getComponentMethod("legend","draw")(e),(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()}),t(v.previousPromises(e))},300)})},v.resize=function(e){return e=l.getGraphDiv(e),new Promise(function(t,n){function r(e){var t=window.getComputedStyle(e).display;return!t||"none"===t}e&&!r(e)||n(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||r(e))t(e);else{delete e.layout.width,delete e.layout.height;var n=e.changed;e.autoplay=!0,o.call("relayout",e,{autosize:!0}).then(function(){e.changed=n,t(e)})}},100)})},v.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},v.addLinks=function(e){if(e._context.showLink||e._context.showSources){var t=e._fullLayout,n=l.ensureSingle(t._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:c.defaultLine,"pointer-events":"all"}).each(function(){var e=r.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)})}),i=n.node(),o={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(o["text-anchor"]="start",o.x=5):(o["text-anchor"]="end",o.x=t._paper.attr("width")-7),n.attr(o);var a=n.select(".js-link-to-tool"),s=n.select(".js-link-spacer"),u=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",function(){v.sendDataToCloud(e)});else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}(e,a),s.text(a.text()&&u.text()?" - ":"")}},v.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL,n=r.select(e).append("div").attr("id","hiddenform").style("display","none"),i=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return i.append("input").attr({type:"text",name:"data"}).node().value=v.graphJson(e,!1,"keepdata"),i.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1};var y,x=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function w(e,t){var n=e._context.locale,r=!1,i={};function a(e){for(var n=!0,o=0;o<t.length;o++){var a=t[o];i[a]||(e[a]?i[a]=e[a]:n=!1)}n&&(r=!0)}for(var s=0;s<2;s++){for(var l=e._context.locales,c=0;c<2;c++){var u=(l[n]||{}).format;if(u&&(a(u),r))break;l=o.localeRegistry}var d=n.split("-")[0];if(r||d===n)break;n=d}return r||a(o.localeRegistry.en.format),i}function k(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var r=t[n],i=r._module||m[r.type];if(i&&i.makesData)return!0}return!1}function T(e,t,n,r){for(var i=e.transforms,o=[e],a=0;a<i.length;a++){var s=i[a],l=m[s.type];l&&l.transform&&(o=l.transform(o,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:a}))}return o}function A(e){e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}function C(e){for(var t=0;t<e.length;t++)e[t].clearCalc()}v.supplyDefaults=function(e,t){var n=t&&t.skipUpdateCalc,i=e._fullLayout||{};if(i._skipDefaults)delete i._skipDefaults;else{var a,s=e._fullLayout={},c=e.layout||{},u=e._fullData||[],f=e._fullData=[],p=e.data||[],m=e.calcdata||[],b=e._context||{};e._transitionData||v.createTransitionData(e),s._dfltTitle={plot:g(e,"Click to enter Plot title"),x:g(e,"Click to enter X axis title"),y:g(e,"Click to enter Y axis title"),colorbar:g(e,"Click to enter Colorscale title"),annotation:g(e,"new text")},s._traceWord=g(e,"trace");var k=w(e,x);if(s._mapboxAccessToken=b.mapboxAccessToken,i._initialAutoSizeIsDone){var T=i.width,A=i.height;v.supplyLayoutGlobalDefaults(c,s,k),c.width||(s.width=T),c.height||(s.height=A),v.sanitizeMargins(s)}else{v.supplyLayoutGlobalDefaults(c,s,k);var C=!c.width||!c.height,S=s.autosize,M=b.autosizable;C&&(S||M)?v.plotAutoSize(e,c,s):C&&v.sanitizeMargins(s),!S&&C&&(c.width=s.width,c.height=s.height)}s._d3locale=function(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),r.locale(e)}(k,s.separators),s._extraFormat=w(e,_),s._initialAutoSizeIsDone=!0,s._dataLength=p.length,s._modules=[],s._visibleModules=[],s._basePlotModules=[];var E=s._subplots=function(){var e,t,n={};if(!y){y=[];var r=o.subplotsRegistry;for(var i in r){var a=r[i],s=a.attr;if(s&&(y.push(i),Array.isArray(s)))for(t=0;t<s.length;t++)l.pushUnique(y,s[t])}}for(e=0;e<y.length;e++)n[y[e]]=[];return n}(),O=s._splomAxes={x:{},y:{}},L=s._splomSubplots={};s._splomGridDflt={},s._scatterStackOpts={},s._firstScatter={},s._requestRangeslider={},s._traceUids=function(e,t){var n,r,i=t.length,o=[];for(n=0;n<e.length;n++){var a=e[n]._fullInput;a!==r&&o.push(a),r=a}var s=o.length,c=new Array(i),u={};function d(e,t){c[t]=e,u[e]=1}function f(e,t){if(e&&"string"==typeof e&&!u[e])return d(e,t),!0}for(n=0;n<i;n++)f(t[n].uid,n)||n<s&&f(o[n].uid,n)||d(l.randstr(u),n);return c}(u,p),s._globalTransforms=(e._context||{}).globalTransforms,v.supplyDataDefaults(p,f,c,s);var P=Object.keys(O.x),D=Object.keys(O.y);if(P.length>1&&D.length>1){for(o.getComponentMethod("grid","sizeDefaults")(c,s),a=0;a<P.length;a++)l.pushUnique(E.xaxis,P[a]);for(a=0;a<D.length;a++)l.pushUnique(E.yaxis,D[a]);for(var R in L)l.pushUnique(E.cartesian,R)}if(s._has=v._hasPlotType.bind(s),u.length===f.length)for(a=0;a<f.length;a++)h(f[a],u[a]);v.supplyLayoutModuleDefaults(c,s,f,e._transitionData);var F=s._visibleModules,j=[];for(a=0;a<F.length;a++){var I=F[a].crossTraceDefaults;I&&l.pushUnique(j,I)}for(a=0;a<j.length;a++)j[a](f,s);s._hasOnlyLargeSploms=1===s._basePlotModules.length&&"splom"===s._basePlotModules[0].name&&P.length>15&&D.length>15&&0===s.shapes.length&&0===s.images.length,s._hasCartesian=s._has("cartesian"),s._hasGeo=s._has("geo"),s._hasGL3D=s._has("gl3d"),s._hasGL2D=s._has("gl2d"),s._hasTernary=s._has("ternary"),s._hasPie=s._has("pie"),v.linkSubplots(f,s,u,i),v.cleanPlot(f,s,u,i),h(s,i),v.doAutoMargin(e);var N=d.list(e);for(a=0;a<N.length;a++){N[a].setScale()}n||m.length!==f.length||v.supplyDefaultsUpdateCalc(m,f)}},v.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=e[n][0];if(i&&i.trace){var o=i.trace;if(o._hasCalcTransform){var a,s,c,u=o._arrayAttrs;for(a=0;a<u.length;a++)s=u[a],c=l.nestedProperty(o,s).get().slice(),l.nestedProperty(r,s).set(c)}i.trace=r}}},v.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},v._hasPlotType=function(e){var t,n=this._basePlotModules||[];for(t=0;t<n.length;t++)if(n[t].name===e)return!0;var r=this._modules||[];for(t=0;t<r.length;t++){var i=r[t].name;if(i===e)return!0;var a=o.modules[i];if(a&&a.categories[e])return!0}return!1},v.cleanPlot=function(e,t,n,r){var i,o,a=r._basePlotModules||[];for(i=0;i<a.length;i++){var s=a[i];s.clean&&s.clean(e,t,n,r)}var l=r._has&&r._has("gl"),c=t._has&&t._has("gl");l&&!c&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var u=!!r._infolayer;e:for(i=0;i<n.length;i++){var d=n[i].uid;for(o=0;o<e.length;o++){if(d===e[o].uid)continue e}u&&r._infolayer.select(".cb"+d).remove()}r._zoomlayer&&r._zoomlayer.selectAll(".select-outline").remove()},v.linkSubplots=function(e,t,n,r){var i,o,a=r._plots||{},s=t._plots={},l=t._subplots,c={_fullData:e,_fullLayout:t},u=l.cartesian.concat(l.gl2d||[]);for(i=0;i<u.length;i++){var f,p=u[i],h=a[p],g=d.getFromId(c,p,"x"),v=d.getFromId(c,p,"y");for(h?f=s[p]=h:(f=s[p]={}).id=p,f.xaxis=g,f.yaxis=v,f._hasClipOnAxisFalse=!1,o=0;o<e.length;o++){var m=e[o];if(m.xaxis===f.xaxis._id&&m.yaxis===f.yaxis._id&&!1===m.cliponaxis){f._hasClipOnAxisFalse=!0;break}}}var b=d.list(c,null,!0);for(i=0;i<b.length;i++){var y=b[i],x=null;y.overlaying&&(x=d.getFromId(c,y.overlaying))&&x.overlaying&&(y.overlaying=!1,x=null),y._mainAxis=x||y,x&&(y.domain=x.domain.slice()),y._anchorAxis="free"===y.anchor?null:d.getFromId(c,y.anchor)}},v.clearExpandedTraceDefaultColors=function(e){var t,n,r;for(n=[],(t=e._module._colorAttrs)||(e._module._colorAttrs=t=[],a.crawl(e._module.attributes,function(e,r,i,o){n[o]=r,n.length=o+1,"color"===e.valType&&void 0===e.dflt&&t.push(n.join("."))})),r=0;r<t.length;r++){l.nestedProperty(e,"_input."+t[r]).get()||l.nestedProperty(e,t[r]).set(null)}},v.supplyDataDefaults=function(e,t,n,r){var i,a,c,u=r._modules,d=r._visibleModules,f=r._basePlotModules,p=0,g=0;function m(e){t.push(e);var n=e._module;n&&(l.pushUnique(u,n),!0===e.visible&&l.pushUnique(d,n),l.pushUnique(f,e._module.basePlotModule),p++,!1!==e._input.visible&&g++)}r._transformModules=[];var b={},y=[],x=(n.template||{}).data||{},_=s.traceTemplater(x);for(i=0;i<e.length;i++){if(c=e[i],(a=_.newTrace(c)).uid=r._traceUids[i],v.supplyTraceDefaults(c,a,g,r,i),a.index=i,a._input=c,a._expandedIndex=p,a.transforms&&a.transforms.length)for(var w=!1!==c.visible&&!1===a.visible,k=T(a,t,n,r),A=0;A<k.length;A++){var C=k[A],S={_template:a._template,type:a.type,uid:a.uid+A};w&&!1===C.visible&&delete C.visible,v.supplyTraceDefaults(C,S,p,r,i),h(S,C),S.index=i,S._input=c,S._fullInput=a,S._expandedIndex=p,S._expandedInput=C,m(S)}else a._fullInput=a,a._expandedInput=a,m(a);o.traceIs(a,"carpetAxis")&&(b[a.carpet]=a),o.traceIs(a,"carpetDependent")&&y.push(i)}for(i=0;i<y.length;i++)if((a=t[y[i]]).visible){var M=b[a.carpet];a._carpet=M,M&&M.visible?(a.xaxis=M.xaxis,a.yaxis=M.yaxis):a.visible=!1}},v.supplyAnimationDefaults=function(e){var t;e=e||{};var n={};function r(t,r){return l.coerce(e||{},n,f,t,r)}if(r("mode"),r("direction"),r("fromcurrent"),Array.isArray(e.frame))for(n.frame=[],t=0;t<e.frame.length;t++)n.frame[t]=v.supplyAnimationFrameDefaults(e.frame[t]||{});else n.frame=v.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(n.transition=[],t=0;t<e.transition.length;t++)n.transition[t]=v.supplyAnimationTransitionDefaults(e.transition[t]||{});else n.transition=v.supplyAnimationTransitionDefaults(e.transition||{});return n},v.supplyAnimationFrameDefaults=function(e){var t={};function n(n,r){return l.coerce(e||{},t,f.frame,n,r)}return n("duration"),n("redraw"),t},v.supplyAnimationTransitionDefaults=function(e){var t={};function n(n,r){return l.coerce(e||{},t,f.transition,n,r)}return n("duration"),n("easing"),t},v.supplyFrameDefaults=function(e){var t={};function n(n,r){return l.coerce(e,t,p,n,r)}return n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),t},v.supplyTraceDefaults=function(e,t,n,r,i){var a,s=r.colorway||c.defaults,u=s[n%s.length];function d(n,r){return l.coerce(e,t,v.attributes,n,r)}var f=d("visible");d("type"),d("name",r._traceWord+" "+i);var p=v.getModule(t);if(t._module=p,p){var h=p.basePlotModule,g=h.attr,m=h.attributes;if(g&&m){var b=r._subplots,y="";if("gl2d"!==h.name||f){if(Array.isArray(g))for(a=0;a<g.length;a++){var x=g[a],_=l.coerce(e,t,m,x);b[x]&&l.pushUnique(b[x],_),y+=_}else y=l.coerce(e,t,m,g);b[h.name]&&l.pushUnique(b[h.name],y)}}}return f&&(d("customdata"),d("ids"),o.traceIs(t,"showLegend")?(t._dfltShowLegend=!0,d("showlegend"),d("legendgroup")):t._dfltShowLegend=!1,o.getComponentMethod("fx","supplyDefaults")(e,t,u,r),p&&(p.supplyDefaults(e,t,u,r),l.coerceHoverinfo(e,t,r)),o.traceIs(t,"noOpacity")||d("opacity"),o.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),p&&p.selectPoints&&d("selectedpoints"),v.supplyTransformDefaults(e,t,r)),t},v.hasMakesDataTransform=k,v.supplyTransformDefaults=function(e,t,n){if(t._length||k(e)){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var o=e.transforms||[],a=r.concat(o),s=t.transforms=[],c=0;c<a.length;c++){var u,d=a[c],f=d.type,p=m[f],h=!(d._module&&d._module===p),g=p&&"function"==typeof p.transform;p||l.warn("Unrecognized transform type "+f+"."),p&&p.supplyDefaults&&(h||g)?((u=p.supplyDefaults(d,t,n,e)).type=f,u._module=p,l.pushUnique(i,p)):u=l.extendFlat({},d),s.push(u)}}},v.supplyLayoutGlobalDefaults=function(e,t,n){function r(n,r){return l.coerce(e,t,v.layoutAttributes,n,r)}var i=e.template;l.isPlainObject(i)&&(t.template=i,t._template=i.layout,t._dataTemplate=i.data);var a=l.coerceFont(r,"font");r("title",t._dfltTitle.plot),l.coerceFont(r,"titlefont",{family:a.family,size:Math.round(1.4*a.size),color:a.color}),r("autosize",!(e.width&&e.height)),r("width"),r("height"),r("margin.l"),r("margin.r"),r("margin.t"),r("margin.b"),r("margin.pad"),r("margin.autoexpand"),e.width&&e.height&&v.sanitizeMargins(t),o.getComponentMethod("grid","sizeDefaults")(e,t),r("paper_bgcolor"),r("separators",n.decimal+n.thousands),r("hidesources"),r("colorway"),r("datarevision"),r("modebar.orientation"),r("modebar.bgcolor",c.addOpacity(t.paper_bgcolor,.5));var s=c.contrast(c.rgb(t.modebar.bgcolor));r("modebar.color",c.addOpacity(s,.3)),r("modebar.activecolor",c.addOpacity(s,.7)),o.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),o.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,r)},v.plotAutoSize=function(e,t,n){var r,o,a=e._context||{},s=a.frameMargins,c=l.isPlotDiv(e);if(c&&e.emit("plotly_autosize"),a.fillFrame)r=window.innerWidth,o=window.innerHeight,document.body.style.overflow="hidden";else{var u=c?window.getComputedStyle(e):{};if(r=parseFloat(u.width)||parseFloat(u.maxWidth)||n.width,o=parseFloat(u.height)||parseFloat(u.maxHeight)||n.height,i(s)&&s>0){var d=1-2*s;r=Math.round(d*r),o=Math.round(d*o)}}var f=v.layoutAttributes.width.min,p=v.layoutAttributes.height.min;r<f&&(r=f),o<p&&(o=p);var h=!t.width&&Math.abs(n.width-r)>1,g=!t.height&&Math.abs(n.height-o)>1;(g||h)&&(h&&(n.width=r),g&&(n.height=o)),e._initialAutoSize||(e._initialAutoSize={width:r,height:o}),v.sanitizeMargins(n)},v.supplyLayoutModuleDefaults=function(e,t,n,r){var i,a,s,c=o.componentsRegistry,u=t._basePlotModules,d=o.subplotsRegistry.cartesian;for(i in c)(s=c[i]).includeBasePlot&&s.includeBasePlot(e,t);for(var f in u.length||u.push(d),t._has("cartesian")&&(o.getComponentMethod("grid","contentDefaults")(e,t),d.finalizeSubplots(e,t)),t._subplots)t._subplots[f].sort(l.subplotSort);for(a=0;a<u.length;a++)(s=u[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n);var p=t._modules;for(a=0;a<p.length;a++)(s=p[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n);var h=t._transformModules;for(a=0;a<h.length;a++)(s=h[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n,r);for(i in c)(s=c[i]).supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n)},v.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),void 0!==t._geocontainer&&t._geocontainer.remove(),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.framework,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._replotPending,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},v.style=function(e){var t,n=e._fullLayout._visibleModules,r=[];for(t=0;t<n.length;t++){var i=n[t];i.style&&l.pushUnique(r,i.style)}for(t=0;t<r.length;t++)r[t](e)},v.sanitizeMargins=function(e){if(e&&e.margin){var t,n=e.width,r=e.height,i=e.margin,o=n-(i.l+i.r),a=r-(i.t+i.b);o<0&&(t=(n-1)/(i.l+i.r),i.l=Math.floor(t*i.l),i.r=Math.floor(t*i.r)),a<0&&(t=(r-1)/(i.t+i.b),i.t=Math.floor(t*i.t),i.b=Math.floor(t*i.b))}},v.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},v.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1},v.autoMargin=function(e,t,n){var r=e._fullLayout;A(r);var i=r._pushmargin,o=r._pushmarginIds;if(!1!==r.margin.autoexpand){if(n){var a=n.pad;if(void 0===a){var s=r.margin;a=Math.min(12,s.l,s.r,s.t,s.b)}n.l+n.r>.5*r.width&&(n.l=n.r=0),n.b+n.t>.5*r.height&&(n.b=n.t=0);var l=void 0!==n.xl?n.xl:n.x,c=void 0!==n.xr?n.xr:n.x,u=void 0!==n.yt?n.yt:n.y,d=void 0!==n.yb?n.yb:n.y;i[t]={l:{val:l,size:n.l+a},r:{val:c,size:n.r+a},b:{val:d,size:n.b+a},t:{val:u,size:n.t+a}},o[t]=1}else delete i[t],delete o[t];r._replotting||v.doAutoMargin(e)}},v.doAutoMargin=function(e){var t=e._fullLayout;t._size||(t._size={}),A(t);var n=t._size,r=JSON.stringify(n),a=Math.max(t.margin.l||0,0),s=Math.max(t.margin.r||0,0),l=Math.max(t.margin.t||0,0),c=Math.max(t.margin.b||0,0),u=t._pushmargin,d=t._pushmarginIds;if(!1!==t.margin.autoexpand){for(var f in u)d[f]||delete u[f];for(var p in u.base={l:{val:0,size:a},r:{val:1,size:s},t:{val:1,size:l},b:{val:0,size:c}},u){var h=u[p].l||{},g=u[p].b||{},v=h.val,m=h.size,b=g.val,y=g.size;for(var x in u){if(i(m)&&u[x].r){var _=u[x].r.val,w=u[x].r.size;if(_>v){var k=(m*_+(w-t.width)*v)/(_-v),T=(w*(1-v)+(m-t.width)*(1-_))/(_-v);k>=0&&T>=0&&k+T>a+s&&(a=k,s=T)}}if(i(y)&&u[x].t){var C=u[x].t.val,S=u[x].t.size;if(C>b){var M=(y*C+(S-t.height)*b)/(C-b),E=(S*(1-b)+(y-t.height)*(1-C))/(C-b);M>=0&&E>=0&&M+E>c+l&&(c=M,l=E)}}}}}if(n.l=Math.round(a),n.r=Math.round(s),n.t=Math.round(l),n.b=Math.round(c),n.p=Math.round(t.margin.pad),n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b,!t._replotting&&"{}"!==r&&r!==JSON.stringify(t._size))return"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1,o.call("plot",e)},v.graphJson=function(e,t,n,r,i){(i&&t&&!e._fullData||i&&!t&&!e._fullLayout)&&v.supplyDefaults(e);var o=i?e._fullData:e.data,a=i?e._fullLayout:e.layout,s=(e._transitionData||{})._frames;function c(e){if("function"==typeof e)return null;if(l.isPlainObject(e)){var t,r,i={};for(t in e)if("function"!=typeof e[t]&&-1===["_","["].indexOf(t.charAt(0))){if("keepdata"===n){if("src"===t.substr(t.length-3))continue}else if("keepstream"===n){if("string"==typeof(r=e[t+"src"])&&r.indexOf(":")>0&&!l.isPlainObject(e.stream))continue}else if("keepall"!==n&&"string"==typeof(r=e[t+"src"])&&r.indexOf(":")>0)continue;i[t]=c(e[t])}return i}return Array.isArray(e)?e.map(c):l.isTypedArray(e)?l.simpleMap(e,l.identity):l.isJSDate(e)?l.ms2DateTimeLocal(+e):e}var u={data:(o||[]).map(function(e){var n=c(e);return t&&delete n.fit,n})};return t||(u.layout=c(a)),e.framework&&e.framework.isPolar&&(u=e.framework.getConfig()),s&&(u.frames=c(s)),"object"===r?u:JSON.stringify(u)},v.modifyFrames=function(e,t){var n,r,i,o=e._transitionData._frames,a=e._transitionData._frameHash;for(n=0;n<t.length;n++)switch((r=t[n]).type){case"replace":i=r.value;var s=(o[r.index]||{}).name,l=i.name;o[r.index]=a[l]=i,l!==s&&(delete a[s],a[l]=i);break;case"insert":a[(i=r.value).name]=i,o.splice(r.index,0,i);break;case"delete":delete a[(i=o[r.index]).name],o.splice(r.index,1)}return Promise.resolve()},v.computeFrame=function(e,t){var n,r,i,o,a=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=a[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=a[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=v.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)void 0!==(i=r[n])&&null!==i&&(-1===(o=u.traces.indexOf(i))&&(o=u.data.length,u.traces[o]=i),u.data[o]=v.extendTrace(u.data[o],s.data[n]))}return u},v.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(t[i.name]=i)}},v.extendObjectWithContainers=function(e,t,n){var r,i,o,a,s,c,u,d=l.extendDeepNoArrays({},t||{}),f=l.expandObjectPaths(d),p={};if(n&&n.length)for(o=0;o<n.length;o++)void 0===(i=(r=l.nestedProperty(f,n[o])).get())?l.nestedProperty(p,n[o]).set(null):(r.set(null),l.nestedProperty(p,n[o]).set(i));if(e=l.extendDeepNoArrays(e||{},f),n&&n.length)for(o=0;o<n.length;o++)if(c=l.nestedProperty(p,n[o]).get()){for(u=(s=l.nestedProperty(e,n[o])).get(),Array.isArray(u)||(u=[],s.set(u)),a=0;a<c.length;a++){var h=c[a];u[a]=null===h?null:v.extendObjectWithContainers(u[a],h)}s.set(u)}return e},v.dataArrayContainers=["transforms","dimensions"],v.layoutArrayContainers=o.layoutArrayContainers,v.extendTrace=function(e,t){return v.extendObjectWithContainers(e,t,v.dataArrayContainers)},v.extendLayout=function(e,t){return v.extendObjectWithContainers(e,t,v.layoutArrayContainers)},v.transition=function(e,t,n,r,i,a){var s,c,u=Array.isArray(t)?t.length:0,d=r.slice(0,u),f=[];var p=!1;for(s=0;s<d.length;s++){c=d[s];e._fullData[c]._module}var h=[v.previousPromises,function(){if(e._transitionData)return e._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(e._transitionData._interruptCallbacks)},function(){var r;for(r=0;r<d.length;r++){var i=d[r],o=e._fullData[i]._module;o&&(o.animatable&&f.push(i),e.data[d[r]]=v.extendTrace(e.data[d[r]],t[r]))}var a=l.expandObjectPaths(l.extendDeepNoArrays({},n)),s=/^[xy]axis[0-9]*$/;for(var c in a)s.test(c)&&delete a[c].range;return v.extendLayout(e.layout,a),delete e.calcdata,v.supplyDefaults(e),v.doCalcdata(e),Promise.resolve()},v.rehover,function(){return e.emit("plotly_transitioning",[]),new Promise(function(t){e._transitioning=!0,a.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){p=!0}),i.redraw&&e._transitionData._interruptCallbacks.push(function(){return o.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var r,s,c=0,u=0;function d(){return c++,function(){p||++u!==c||function(t){e._transitionData&&(function(e){if(e)for(;e.length;)e.shift()}(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(i.redraw)return o.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(t))}(t)}}var h=e._fullLayout._basePlotModules,g=!1;if(n)for(s=0;s<h.length;s++)if(h[s].transitionAxes){var v=l.expandObjectPaths(n);g=h[s].transitionAxes(e,v,a,d)||g}for(g?((r=l.extendFlat({},a)).duration=0,f=null):r=a,s=0;s<h.length;s++)h[s].plot(e,f,r,d);setTimeout(d())})}],g=l.syncOrAsync(h,e);return g&&g.then||(g=Promise.resolve()),g.then(function(){return e})},v.doCalcdata=function(e,t){var n,r,i,s,c=d.list(e),f=e._fullData,p=e._fullLayout,h=new Array(f.length),g=(e.calcdata||[]).slice(0);for(e.calcdata=h,p._numBoxes=0,p._numViolins=0,p._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,p._piecolormap={},i=0;i<f.length;i++)Array.isArray(t)&&-1===t.indexOf(i)&&(h[i]=g[i]);for(i=0;i<f.length;i++)(n=f[i])._arrayAttrs=a.findArrayAttributes(n),n._extremes={};var v=p._subplots.polar||[];for(i=0;i<v.length;i++)c.push(p[v[i]].radialaxis,p[v[i]].angularaxis);C(c);var b=!1;for(i=0;i<f.length;i++)if(!0===(n=f[i]).visible&&n.transforms){if((r=n._module)&&r.calc){var y=r.calc(e,n);y[0]&&y[0].t&&y[0].t._scene&&delete y[0].t._scene.dirty}for(s=0;s<n.transforms.length;s++){var x=n.transforms[s];(r=m[x.type])&&r.calcTransform&&(n._hasCalcTransform=!0,b=!0,r.calcTransform(e,n,x))}}function _(t,i){if(n=f[t],!!(r=n._module).isContainer===i){var o=[];if(!0===n.visible){delete n._indexToPoints;var a=n.transforms||[];for(s=a.length-1;s>=0;s--)if(a[s].enabled){n._indexToPoints=a[s]._indexToPoints;break}r&&r.calc&&(o=r.calc(e,n))}Array.isArray(o)&&o[0]||(o=[{x:u,y:u}]),o[0].t||(o[0].t={}),o[0].trace=n,h[t]=o}}for(b&&C(c),i=0;i<f.length;i++)_(i,!0);for(i=0;i<f.length;i++)_(i,!1);!function(e){var t,n,r,i=e._fullLayout,o=i._visibleModules,a={};for(n=0;n<o.length;n++){var s=o[n],c=s.crossTraceCalc;if(c){var u=s.basePlotModule.name;a[u]?l.pushUnique(a[u],c):a[u]=[c]}}for(r in a){var d=a[r],f=i._subplots[r];if(Array.isArray(f))for(t=0;t<f.length;t++){var p=f[t],h="cartesian"===r?i._plots[p]:i[p];for(n=0;n<d.length;n++)d[n](e,h,p)}else for(n=0;n<d.length;n++)d[n](e)}}(e),o.getComponentMethod("fx","calc")(e),o.getComponentMethod("errorbars","calc")(e)},v.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},v.generalUpdatePerTraceModule=function(e,t,n,r){var i,o=t.traceHash,a={};for(i=0;i<n.length;i++){var s=n[i],c=s[0].trace;c.visible&&(a[c.type]=a[c.type]||[],a[c.type].push(s))}for(var u in o)if(!a[u]){var d=o[u][0];d[0].trace.visible=!1,a[u]=[d]}for(var f in a){var p=a[f];p[0][0].trace._module.plot(e,t,l.filterVisible(p),r)}t.traceHash=a}},{"../components/color":43,"../constants/numerical":143,"../lib":161,"../plot_api/plot_schema":195,"../plot_api/plot_template":196,"../plots/cartesian/axis_ids":209,"../registry":246,"./animation_attributes":201,"./attributes":203,"./command":231,"./font_attributes":233,"./frame_attributes":234,"./layout_attributes":237,d3:8,"fast-isnumeric":10}],240:[function(e,t,n){"use strict";var r=e("../../../traces/scatter/attributes"),i=r.marker,o=e("../../../lib/extend").extendFlat;["Area traces are deprecated!","Please switch to the *barpolar* trace type."].join(" ");t.exports={r:o({},r.r,{}),t:o({},r.t,{}),marker:{color:o({},i.color,{}),size:o({},i.size,{}),symbol:o({},i.symbol,{}),opacity:o({},i.opacity,{}),editType:"calc"}}},{"../../../lib/extend":155,"../../../traces/scatter/attributes":283}],241:[function(e,t,n){"use strict";var r=e("../../cartesian/layout_attributes"),i=e("../../../lib/extend").extendFlat,o=e("../../../plot_api/edit_types").overrideAll,a=["Legacy polar charts are deprecated!","Please switch to *polar* subplots."].join(" "),s=i({},r.domain,{});function l(e,t){return i({},t,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:a},visible:{valType:"boolean"}})}t.exports=o({radialaxis:l(0,{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:s,orientation:{valType:"number"}}),angularaxis:l(0,{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:s}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":155,"../../../plot_api/edit_types":189,"../../cartesian/layout_attributes":219}],242:[function(e,t,n){"use strict";(t.exports=e("./micropolar")).manager=e("./micropolar_manager")},{"./micropolar":243,"./micropolar_manager":244}],243:[function(e,t,n){var r=e("d3"),i=e("../../../lib").extendDeepAll,o=e("../../../constants/alignment").MID_SHIFT,a=t.exports={version:"0.2.2"};a.Axis=function(){var e,t,n,s,l={data:[],layout:{}},c={},u={},d=r.dispatch("hover"),f={};return f.render=function(c){return function(c){t=c||t;var d=l.data,f=l.layout;("string"==typeof t||t.nodeName)&&(t=r.select(t)),t.datum(d).each(function(t,l){var c=t.slice();u={data:a.util.cloneJson(c),layout:a.util.cloneJson(f)};var d=0;c.forEach(function(e,t){e.color||(e.color=f.defaultColorRange[d],d=(d+1)%f.defaultColorRange.length),e.strokeColor||(e.strokeColor="LinePlot"===e.geometry?e.color:r.rgb(e.color).darker().toString()),u.data[t].color=e.color,u.data[t].strokeColor=e.strokeColor,u.data[t].strokeDash=e.strokeDash,u.data[t].strokeSize=e.strokeSize});var p=c.filter(function(e,t){var n=e.visible;return void 0===n||!0===n}),h=!1,g=p.map(function(e,t){return h=h||void 0!==e.groupId,e});if(h){var v=[],m=r.nest().key(function(e,t){return void 0!==e.groupId?e.groupId:"unstacked"}).entries(g).map(function(e,t){if("unstacked"===e.key)return e.values;var n=e.values[0].r.map(function(e,t){return 0});return e.values.forEach(function(e,t,r){e.yStack=[n],v.push(n),n=a.util.sumArrays(e.r,n)}),e.values});p=r.merge(m)}p.forEach(function(e,t){e.t=Array.isArray(e.t[0])?e.t:[e.t],e.r=Array.isArray(e.r[0])?e.r:[e.r]});var b=Math.min(f.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2;b=Math.max(10,b);var y,x=[f.margin.left+b,f.margin.top+b];y=h?[0,r.max(a.util.sumArrays(a.util.arrayLast(p).r[0],a.util.arrayLast(v)))]:r.extent(a.util.flattenArray(p.map(function(e,t){return e.r}))),f.radialAxis.domain!=a.DATAEXTENT&&(y[0]=0),n=r.scale.linear().domain(f.radialAxis.domain!=a.DATAEXTENT&&f.radialAxis.domain?f.radialAxis.domain:y).range([0,b]),u.layout.radialAxis.domain=n.domain();var _,w=a.util.flattenArray(p.map(function(e,t){return e.t})),k="string"==typeof w[0];k&&(w=a.util.deduplicate(w),_=w.slice(),w=r.range(w.length),p=p.map(function(e,t){var n=e;return e.t=[w],h&&(n.yStack=e.yStack),n}));var T=p.filter(function(e,t){return"LinePlot"===e.geometry||"DotPlot"===e.geometry}).length===p.length,A=null===f.needsEndSpacing?k||!T:f.needsEndSpacing,C=f.angularAxis.domain&&f.angularAxis.domain!=a.DATAEXTENT&&!k&&f.angularAxis.domain[0]>=0?f.angularAxis.domain:r.extent(w),S=Math.abs(w[1]-w[0]);T&&!k&&(S=0);var M=C.slice();A&&k&&(M[1]+=S);var E=f.angularAxis.ticksCount||4;E>8&&(E=E/(E/8)+E%8),f.angularAxis.ticksStep&&(E=(M[1]-M[0])/E);var O=f.angularAxis.ticksStep||(M[1]-M[0])/(E*(f.minorTicks+1));_&&(O=Math.max(Math.round(O),1)),M[2]||(M[2]=O);var L=r.range.apply(this,M);if(L=L.map(function(e,t){return parseFloat(e.toPrecision(12))}),s=r.scale.linear().domain(M.slice(0,2)).range("clockwise"===f.direction?[0,360]:[360,0]),u.layout.angularAxis.domain=s.domain(),u.layout.angularAxis.endPadding=A?S:0,void 0===(e=r.select(this).select("svg.chart-root"))||e.empty()){var P=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),D=this.appendChild(this.ownerDocument.importNode(P.documentElement,!0));e=r.select(D)}e.select(".guides-group").style({"pointer-events":"none"}),e.select(".angular.axis-group").style({"pointer-events":"none"}),e.select(".radial.axis-group").style({"pointer-events":"none"});var R,F=e.select(".chart-group"),j={fill:"none",stroke:f.tickColor},I={"font-size":f.font.size,"font-family":f.font.family,fill:f.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(e,t){return" "+e+" 0 "+f.font.outlineColor}).join(",")};if(f.showLegend){R=e.select(".legend-group").attr({transform:"translate("+[b,f.margin.top]+")"}).style({display:"block"});var N=p.map(function(e,t){var n=a.util.cloneJson(e);return n.symbol="DotPlot"===e.geometry?e.dotType||"circle":"LinePlot"!=e.geometry?"square":"line",n.visibleInLegend=void 0===e.visibleInLegend||e.visibleInLegend,n.color="LinePlot"===e.geometry?e.strokeColor:e.color,n});a.Legend().config({data:p.map(function(e,t){return e.name||"Element"+t}),legendConfig:i({},a.Legend.defaultConfig().legendConfig,{container:R,elements:N,reverseOrder:f.legend.reverseOrder})})();var z=R.node().getBBox();b=Math.min(f.width-z.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2,b=Math.max(10,b),x=[f.margin.left+b,f.margin.top+b],n.range([0,b]),u.layout.radialAxis.domain=n.domain(),R.attr("transform","translate("+[x[0]+b,x[1]-b]+")")}else R=e.select(".legend-group").style({display:"none"});e.attr({width:f.width,height:f.height}).style({opacity:f.opacity}),F.attr("transform","translate("+x+")").style({cursor:"crosshair"});var q=[(f.width-(f.margin.left+f.margin.right+2*b+(z?z.width:0)))/2,(f.height-(f.margin.top+f.margin.bottom+2*b))/2];if(q[0]=Math.max(0,q[0]),q[1]=Math.max(0,q[1]),e.select(".outer-group").attr("transform","translate("+q+")"),f.title){var H=e.select("g.title-group text").style(I).text(f.title),B=H.node().getBBox();H.attr({x:x[0]-B.width/2,y:x[1]-b-20})}var V=e.select(".radial.axis-group");if(f.radialAxis.gridLinesVisible){var U=V.selectAll("circle.grid-circle").data(n.ticks(5));U.enter().append("circle").attr({class:"grid-circle"}).style(j),U.attr("r",n),U.exit().remove()}V.select("circle.outside-circle").attr({r:b}).style(j);var $=e.select("circle.background-circle").attr({r:b}).style({fill:f.backgroundColor,stroke:f.stroke});function W(e,t){return s(e)%360+f.orientation}if(f.radialAxis.visible){var X=r.svg.axis().scale(n).ticks(5).tickSize(5);V.call(X).attr({transform:"rotate("+f.radialAxis.orientation+")"}),V.selectAll(".domain").style(j),V.selectAll("g>text").text(function(e,t){return this.textContent+f.radialAxis.ticksSuffix}).style(I).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(e,t){return"horizontal"===f.radialAxis.tickOrientation?"rotate("+-f.radialAxis.orientation+") translate("+[0,I["font-size"]]+")":"translate("+[0,I["font-size"]]+")"}}),V.selectAll("g>line").style({stroke:"black"})}var G=e.select(".angular.axis-group").selectAll("g.angular-tick").data(L),Y=G.enter().append("g").classed("angular-tick",!0);G.attr({transform:function(e,t){return"rotate("+W(e)+")"}}).style({display:f.angularAxis.visible?"block":"none"}),G.exit().remove(),Y.append("line").classed("grid-line",!0).classed("major",function(e,t){return t%(f.minorTicks+1)==0}).classed("minor",function(e,t){return!(t%(f.minorTicks+1)==0)}).style(j),Y.selectAll(".minor").style({stroke:f.minorTickColor}),G.select("line.grid-line").attr({x1:f.tickLength?b-f.tickLength:0,x2:b}).style({display:f.angularAxis.gridLinesVisible?"block":"none"}),Y.append("text").classed("axis-text",!0).style(I);var Z=G.select("text.axis-text").attr({x:b+f.labelOffset,dy:o+"em",transform:function(e,t){var n=W(e),r=b+f.labelOffset,i=f.angularAxis.tickOrientation;return"horizontal"==i?"rotate("+-n+" "+r+" 0)":"radial"==i?n<270&&n>90?"rotate(180 "+r+" 0)":null:"rotate("+(n<=180&&n>0?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:f.angularAxis.labelsVisible?"block":"none"}).text(function(e,t){return t%(f.minorTicks+1)!=0?"":_?_[e]+f.angularAxis.ticksSuffix:e+f.angularAxis.ticksSuffix}).style(I);f.angularAxis.rewriteTicks&&Z.text(function(e,t){return t%(f.minorTicks+1)!=0?"":f.angularAxis.rewriteTicks(this.textContent,t)});var J=r.max(F.selectAll(".angular-tick text")[0].map(function(e,t){return e.getCTM().e+e.getBBox().width}));R.attr({transform:"translate("+[b+J,f.margin.top]+")"});var K=e.select("g.geometry-group").selectAll("g").size()>0,Q=e.select("g.geometry-group").selectAll("g.geometry").data(p);if(Q.enter().append("g").attr({class:function(e,t){return"geometry geometry"+t}}),Q.exit().remove(),p[0]||K){var ee=[];p.forEach(function(e,t){var r={};r.radialScale=n,r.angularScale=s,r.container=Q.filter(function(e,n){return n==t}),r.geometry=e.geometry,r.orientation=f.orientation,r.direction=f.direction,r.index=t,ee.push({data:e,geometryConfig:r})});var te=[];r.nest().key(function(e,t){return void 0!==e.data.groupId||"unstacked"}).entries(ee).forEach(function(e,t){"unstacked"===e.key?te=te.concat(e.values.map(function(e,t){return[e]})):te.push(e.values)}),te.forEach(function(e,t){var n;n=Array.isArray(e)?e[0].geometryConfig.geometry:e.geometryConfig.geometry;var r=e.map(function(e,t){return i(a[n].defaultConfig(),e)});a[n]().config(r)()})}var ne,re,ie=e.select(".guides-group"),oe=e.select(".tooltips-group"),ae=a.tooltipPanel().config({container:oe,fontSize:8})(),se=a.tooltipPanel().config({container:oe,fontSize:8})(),le=a.tooltipPanel().config({container:oe,hasTick:!0})();if(!k){var ce=ie.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});F.on("mousemove.angular-guide",function(e,t){var n=a.util.getMousePos($).angle;ce.attr({x2:-b,transform:"rotate("+n+")"}).style({opacity:.5});var r=(n+180+360-f.orientation)%360;ne=s.invert(r);var i=a.util.convertToCartesian(b+12,n+180);ae.text(a.util.round(ne)).move([i[0]+x[0],i[1]+x[1]])}).on("mouseout.angular-guide",function(e,t){ie.select("line").style({opacity:0})})}var ue=ie.select("circle").style({stroke:"grey",fill:"none"});F.on("mousemove.radial-guide",function(e,t){var r=a.util.getMousePos($).radius;ue.attr({r:r}).style({opacity:.5}),re=n.invert(a.util.getMousePos($).radius);var i=a.util.convertToCartesian(r,f.radialAxis.orientation);se.text(a.util.round(re)).move([i[0]+x[0],i[1]+x[1]])}).on("mouseout.radial-guide",function(e,t){ue.style({opacity:0}),le.hide(),ae.hide(),se.hide()}),e.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(t,n){var i=r.select(this),o=this.style.fill,s="black",l=this.style.opacity||1;if(i.attr({"data-opacity":l}),o&&"none"!==o){i.attr({"data-fill":o}),s=r.hsl(o).darker().toString(),i.style({fill:s,opacity:1});var c={t:a.util.round(t[0]),r:a.util.round(t[1])};k&&(c.t=_[t[0]]);var u="t: "+c.t+", r: "+c.r,d=this.getBoundingClientRect(),f=e.node().getBoundingClientRect(),p=[d.left+d.width/2-q[0]-f.left,d.top+d.height/2-q[1]-f.top];le.config({color:s}).text(u),le.move(p)}else o=this.style.stroke||"black",i.attr({"data-stroke":o}),s=r.hsl(o).darker().toString(),i.style({stroke:s,opacity:1})}).on("mousemove.tooltip",function(e,t){if(0!=r.event.which)return!1;r.select(this).attr("data-fill")&&le.show()}).on("mouseout.tooltip",function(e,t){le.hide();var n=r.select(this),i=n.attr("data-fill");i?n.style({fill:i,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})})}(c),this},f.config=function(e){if(!arguments.length)return l;var t=a.util.cloneJson(e);return t.data.forEach(function(e,t){l.data[t]||(l.data[t]={}),i(l.data[t],a.Axis.defaultConfig().data[0]),i(l.data[t],e)}),i(l.layout,a.Axis.defaultConfig().layout),i(l.layout,t.layout),this},f.getLiveConfig=function(){return u},f.getinputConfig=function(){return c},f.radialScale=function(e){return n},f.angularScale=function(e){return s},f.svg=function(){return e},r.rebind(f,d,"on"),f},a.Axis.defaultConfig=function(e,t){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},a.util={},a.DATAEXTENT="dataExtent",a.AREA="AreaChart",a.LINE="LinePlot",a.DOT="DotPlot",a.BAR="BarChart",a.util._override=function(e,t){for(var n in e)n in t&&(t[n]=e[n])},a.util._extend=function(e,t){for(var n in e)t[n]=e[n]},a.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},a.util.dataFromEquation2=function(e,t){var n=t||6;return r.range(0,360+n,n).map(function(t,n){var r=t*Math.PI/180;return[t,e(r)]})},a.util.dataFromEquation=function(e,t,n){var i=t||6,o=[],a=[];r.range(0,360+i,i).forEach(function(t,n){var r=t*Math.PI/180,i=e(r);o.push(t),a.push(i)});var s={t:o,r:a};return n&&(s.name=n),s},a.util.ensureArray=function(e,t){if(void 0===e)return null;var n=[].concat(e);return r.range(t).map(function(e,t){return n[t]||n[0]})},a.util.fillArrays=function(e,t,n){return t.forEach(function(t,r){e[t]=a.util.ensureArray(e[t],n)}),e},a.util.cloneJson=function(e){return JSON.parse(JSON.stringify(e))},a.util.validateKeys=function(e,t){"string"==typeof t&&(t=t.split("."));var n=t.shift();return e[n]&&(!t.length||objHasKeys(e[n],t))},a.util.sumArrays=function(e,t){return r.zip(e,t).map(function(e,t){return r.sum(e)})},a.util.arrayLast=function(e){return e[e.length-1]},a.util.arrayEqual=function(e,t){for(var n=Math.max(e.length,t.length,1);n-- >=0&&e[n]===t[n];);return-2===n},a.util.flattenArray=function(e){for(var t=[];!a.util.arrayEqual(t,e);)t=e,e=[].concat.apply([],e);return e},a.util.deduplicate=function(e){return e.filter(function(e,t,n){return n.indexOf(e)==t})},a.util.convertToCartesian=function(e,t){var n=t*Math.PI/180;return[e*Math.cos(n),e*Math.sin(n)]},a.util.round=function(e,t){var n=t||2,r=Math.pow(10,n);return Math.round(e*r)/r},a.util.getMousePos=function(e){var t=r.mouse(e.node()),n=t[0],i=t[1],o={};return o.x=n,o.y=i,o.pos=t,o.angle=180*(Math.atan2(i,n)+Math.PI)/Math.PI,o.radius=Math.sqrt(n*n+i*i),o},a.util.duplicatesCount=function(e){for(var t,n={},r={},i=0,o=e.length;i<o;i++)(t=e[i])in n?(n[t]++,r[t]=n[t]):n[t]=1;return r},a.util.duplicates=function(e){return Object.keys(a.util.duplicatesCount(e))},a.util.translator=function(e,t,n,r){if(r){var i=n.slice();n=t,t=i}var o=t.reduce(function(e,t){if(void 0!==e)return e[t]},e);void 0!==o&&(t.reduce(function(e,n,r){if(void 0!==e)return r===t.length-1&&delete e[n],e[n]},e),n.reduce(function(e,t,r){return void 0===e[t]&&(e[t]={}),r===n.length-1&&(e[t]=o),e[t]},e))},a.PolyChart=function(){var e=[a.PolyChart.defaultConfig()],t=r.dispatch("hover"),n={solid:"none",dash:[5,2],dot:[2,5]};function o(){var t=e[0].geometryConfig,i=t.container;"string"==typeof i&&(i=r.select(i)),i.datum(e).each(function(e,i){var o=!!e[0].data.yStack,a=e.map(function(e,t){return o?r.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]):r.zip(e.data.t[0],e.data.r[0])}),s=t.angularScale,l=t.radialScale.domain()[0],c={bar:function(n,i,o){var a=e[o].data,l=t.radialScale(n[1])-t.radialScale(0),c=t.radialScale(n[2]||0),u=a.barWidth;r.select(this).attr({class:"mark bar",d:"M"+[[l+c,-u/2],[l+c,u/2],[c,u/2],[c,-u/2]].join("L")+"Z",transform:function(e,n){return"rotate("+(t.orientation+s(e[0]))+")"}})}};c.dot=function(n,i,o){var a=n[2]?[n[0],n[1]+n[2]]:n,s=r.svg.symbol().size(e[o].data.dotSize).type(e[o].data.dotType)(n,i);r.select(this).attr({class:"mark dot",d:s,transform:function(e,n){var r=function(e){var t=e.r*Math.cos(e.t),n=e.r*Math.sin(e.t);return{x:t,y:n}}(function(e,n){var r=t.radialScale(e[1]),i=(t.angularScale(e[0])+t.orientation)*Math.PI/180;return{r:r,t:i}}(a));return"translate("+[r.x,r.y]+")"}})};var u=r.svg.line.radial().interpolate(e[0].data.lineInterpolation).radius(function(e){return t.radialScale(e[1])}).angle(function(e){return t.angularScale(e[0])*Math.PI/180});c.line=function(n,i,o){var s=n[2]?a[o].map(function(e,t){return[e[0],e[1]+e[2]]}):a[o];if(r.select(this).each(c.dot).style({opacity:function(t,n){return+e[o].data.dotVisible},fill:h.stroke(n,i,o)}).attr({class:"mark dot"}),!(i>0)){var l=r.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path"),l.attr({class:"line",d:u(s),transform:function(e,n){return"rotate("+(t.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(e,t){return h.fill(n,i,o)},"fill-opacity":0,stroke:function(e,t){return h.stroke(n,i,o)},"stroke-width":function(e,t){return h["stroke-width"](n,i,o)},"stroke-dasharray":function(e,t){return h["stroke-dasharray"](n,i,o)},opacity:function(e,t){return h.opacity(n,i,o)},display:function(e,t){return h.display(n,i,o)}})}};var d=t.angularScale.range(),f=Math.abs(d[1]-d[0])/a[0].length*Math.PI/180,p=r.svg.arc().startAngle(function(e){return-f/2}).endAngle(function(e){return f/2}).innerRadius(function(e){return t.radialScale(l+(e[2]||0))}).outerRadius(function(e){return t.radialScale(l+(e[2]||0))+t.radialScale(e[1])});c.arc=function(e,n,i){r.select(this).attr({class:"mark arc",d:p,transform:function(e,n){return"rotate("+(t.orientation+s(e[0])+90)+")"}})};var h={fill:function(t,n,r){return e[r].data.color},stroke:function(t,n,r){return e[r].data.strokeColor},"stroke-width":function(t,n,r){return e[r].data.strokeSize+"px"},"stroke-dasharray":function(t,r,i){return n[e[i].data.strokeDash]},opacity:function(t,n,r){return e[r].data.opacity},display:function(t,n,r){return void 0===e[r].data.visible||e[r].data.visible?"block":"none"}},g=r.select(this).selectAll("g.layer").data(a);g.enter().append("g").attr({class:"layer"});var v=g.selectAll("path.mark").data(function(e,t){return e});v.enter().append("path").attr({class:"mark"}),v.style(h).each(c[t.geometryType]),v.exit().remove(),g.exit().remove()})}return o.config=function(t){return arguments.length?(t.forEach(function(t,n){e[n]||(e[n]={}),i(e[n],a.PolyChart.defaultConfig()),i(e[n],t)}),this):e},o.getColorScale=function(){},r.rebind(o,t,"on"),o},a.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}}},a.BarChart=function(){return a.PolyChart()},a.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},a.AreaChart=function(){return a.PolyChart()},a.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},a.DotPlot=function(){return a.PolyChart()},a.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},a.LinePlot=function(){return a.PolyChart()},a.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},a.Legend=function(){var e=a.Legend.defaultConfig(),t=r.dispatch("hover");function n(){var t=e.legendConfig,o=e.data.map(function(e,n){return[].concat(e).map(function(e,r){var o=i({},t.elements[n]);return o.name=e,o.color=[].concat(t.elements[n].color)[r],o})}),a=r.merge(o);a=a.filter(function(e,n){return t.elements[n]&&(t.elements[n].visibleInLegend||void 0===t.elements[n].visibleInLegend)}),t.reverseOrder&&(a=a.reverse());var s=t.container;("string"==typeof s||s.nodeName)&&(s=r.select(s));var l=a.map(function(e,t){return e.color}),c=t.fontSize,u=null==t.isContinuous?"number"==typeof a[0]:t.isContinuous,d=u?t.height:c*a.length,f=s.classed("legend-group",!0).selectAll("svg").data([0]),p=f.enter().append("svg").attr({width:300,height:d+c,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});p.append("g").classed("legend-axis",!0),p.append("g").classed("legend-marks",!0);var h=r.range(a.length),g=r.scale[u?"linear":"ordinal"]().domain(h).range(l),v=r.scale[u?"linear":"ordinal"]().domain(h)[u?"range":"rangePoints"]([0,d]);if(u){var m=f.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(l);m.enter().append("stop"),m.attr({offset:function(e,t){return t/(l.length-1)*100+"%"}}).style({"stop-color":function(e,t){return e}}),f.append("rect").classed("legend-mark",!0).attr({height:t.height,width:t.colorBandWidth,fill:"url(#grad1)"})}else{var b=f.select(".legend-marks").selectAll("path.legend-mark").data(a);b.enter().append("path").classed("legend-mark",!0),b.attr({transform:function(e,t){return"translate("+[c/2,v(t)+c/2]+")"},d:function(e,t){return function(e,t){var n=3*t;return"line"===e?"M"+[[-t/2,-t/12],[t/2,-t/12],[t/2,t/12],[-t/2,t/12]]+"Z":-1!=r.svg.symbolTypes.indexOf(e)?r.svg.symbol().type(e).size(n)():r.svg.symbol().type("square").size(n)()}(e.symbol,c)},fill:function(e,t){return g(t)}}),b.exit().remove()}var y=r.svg.axis().scale(v).orient("right"),x=f.select("g.legend-axis").attr({transform:"translate("+[u?t.colorBandWidth:c,c/2]+")"}).call(y);return x.selectAll(".domain").style({fill:"none",stroke:"none"}),x.selectAll("line").style({fill:"none",stroke:u?t.textColor:"none"}),x.selectAll("text").style({fill:t.textColor,"font-size":t.fontSize}).text(function(e,t){return a[t].name}),n}return n.config=function(t){return arguments.length?(i(e,t),this):e},r.rebind(n,t,"on"),n},a.Legend.defaultConfig=function(e,t){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},a.tooltipPanel=function(){var e,t,n,o={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},s="tooltip-"+a.tooltipPanel.uid++,l=10,c=function(){var r=(e=o.container.selectAll("g."+s).data([0])).enter().append("g").classed(s,!0).style({"pointer-events":"none",display:"none"});return n=r.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),t=r.append("text").attr({dx:o.padding+l,dy:.3*+o.fontSize}),c};return c.text=function(i){var a=r.hsl(o.color).l,s=a>=.5?"#aaa":"white",u=a>=.5?"black":"white",d=i||"";t.style({fill:u,"font-size":o.fontSize+"px"}).text(d);var f=o.padding,p=t.node().getBBox(),h={fill:o.color,stroke:s,"stroke-width":"2px"},g=p.width+2*f+l,v=p.height+2*f;return n.attr({d:"M"+[[l,-v/2],[l,-v/4],[o.hasTick?0:l,0],[l,v/4],[l,v/2],[g,v/2],[g,-v/2]].join("L")+"Z"}).style(h),e.attr({transform:"translate("+[l,-v/2+2*f]+")"}),e.style({display:"block"}),c},c.move=function(t){if(e)return e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"}),c},c.hide=function(){if(e)return e.style({display:"none"}),c},c.show=function(){if(e)return e.style({display:"block"}),c},c.config=function(e){return i(o,e),c},c},a.tooltipPanel.uid=1,a.adapter={},a.adapter.plotly=function(){var e={convert:function(e,t){var n={};if(e.data&&(n.data=e.data.map(function(e,n){var r=i({},e);return[[r,["marker","color"],["color"]],[r,["marker","opacity"],["opacity"]],[r,["marker","line","color"],["strokeColor"]],[r,["marker","line","dash"],["strokeDash"]],[r,["marker","line","width"],["strokeSize"]],[r,["marker","symbol"],["dotType"]],[r,["marker","size"],["dotSize"]],[r,["marker","barWidth"],["barWidth"]],[r,["line","interpolation"],["lineInterpolation"]],[r,["showlegend"],["visibleInLegend"]]].forEach(function(e,n){a.util.translator.apply(null,e.concat(t))}),t||delete r.marker,t&&delete r.groupId,t?("LinePlot"===r.geometry?(r.type="scatter",!0===r.dotVisible?(delete r.dotVisible,r.mode="lines+markers"):r.mode="lines"):"DotPlot"===r.geometry?(r.type="scatter",r.mode="markers"):"AreaChart"===r.geometry?r.type="area":"BarChart"===r.geometry&&(r.type="bar"),delete r.geometry):("scatter"===r.type?"lines"===r.mode?r.geometry="LinePlot":"markers"===r.mode?r.geometry="DotPlot":"lines+markers"===r.mode&&(r.geometry="LinePlot",r.dotVisible=!0):"area"===r.type?r.geometry="AreaChart":"bar"===r.type&&(r.geometry="BarChart"),delete r.mode,delete r.type),r}),!t&&e.layout&&"stack"===e.layout.barmode)){var o=a.util.duplicates(n.data.map(function(e,t){return e.geometry}));n.data.forEach(function(e,t){var r=o.indexOf(e.geometry);-1!=r&&(n.data[t].groupId=r)})}if(e.layout){var s=i({},e.layout);if([[s,["plot_bgcolor"],["backgroundColor"]],[s,["showlegend"],["showLegend"]],[s,["radialaxis"],["radialAxis"]],[s,["angularaxis"],["angularAxis"]],[s.angularaxis,["showline"],["gridLinesVisible"]],[s.angularaxis,["showticklabels"],["labelsVisible"]],[s.angularaxis,["nticks"],["ticksCount"]],[s.angularaxis,["tickorientation"],["tickOrientation"]],[s.angularaxis,["ticksuffix"],["ticksSuffix"]],[s.angularaxis,["range"],["domain"]],[s.angularaxis,["endpadding"],["endPadding"]],[s.radialaxis,["showline"],["gridLinesVisible"]],[s.radialaxis,["tickorientation"],["tickOrientation"]],[s.radialaxis,["ticksuffix"],["ticksSuffix"]],[s.radialaxis,["range"],["domain"]],[s.angularAxis,["showline"],["gridLinesVisible"]],[s.angularAxis,["showticklabels"],["labelsVisible"]],[s.angularAxis,["nticks"],["ticksCount"]],[s.angularAxis,["tickorientation"],["tickOrientation"]],[s.angularAxis,["ticksuffix"],["ticksSuffix"]],[s.angularAxis,["range"],["domain"]],[s.angularAxis,["endpadding"],["endPadding"]],[s.radialAxis,["showline"],["gridLinesVisible"]],[s.radialAxis,["tickorientation"],["tickOrientation"]],[s.radialAxis,["ticksuffix"],["ticksSuffix"]],[s.radialAxis,["range"],["domain"]],[s.font,["outlinecolor"],["outlineColor"]],[s.legend,["traceorder"],["reverseOrder"]],[s,["labeloffset"],["labelOffset"]],[s,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(e,n){a.util.translator.apply(null,e.concat(t))}),t?(void 0!==s.tickLength&&(s.angularaxis.ticklen=s.tickLength,delete s.tickLength),s.tickColor&&(s.angularaxis.tickcolor=s.tickColor,delete s.tickColor)):(s.angularAxis&&void 0!==s.angularAxis.ticklen&&(s.tickLength=s.angularAxis.ticklen),s.angularAxis&&void 0!==s.angularAxis.tickcolor&&(s.tickColor=s.angularAxis.tickcolor)),s.legend&&"boolean"!=typeof s.legend.reverseOrder&&(s.legend.reverseOrder="normal"!=s.legend.reverseOrder),s.legend&&"boolean"==typeof s.legend.traceorder&&(s.legend.traceorder=s.legend.traceorder?"reversed":"normal",delete s.legend.reverseOrder),s.margin&&void 0!==s.margin.t){var l=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],u={};r.entries(s.margin).forEach(function(e,t){u[c[l.indexOf(e.key)]]=e.value}),s.margin=u}t&&(delete s.needsEndSpacing,delete s.minorTickColor,delete s.minorTicks,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksStep,delete s.angularaxis.rewriteTicks,delete s.angularaxis.nticks,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksStep,delete s.radialaxis.rewriteTicks,delete s.radialaxis.nticks),n.layout=s}return n}};return e}},{"../../../constants/alignment":141,"../../../lib":161,d3:8}],244:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../../lib"),o=e("../../../components/color"),a=e("./micropolar"),s=e("./undo_manager"),l=i.extendDeepAll,c=t.exports={};c.framework=function(e){var t,n,i,o,u,d=new s;function f(n,s){return s&&(u=s),r.select(r.select(u).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),t=t?l(t,n):n,i||(i=a.Axis()),o=a.adapter.plotly().convert(t),i.config(o).render(u),e.data=t.data,e.layout=t.layout,c.fillLayout(e),t}return f.isPolar=!0,f.svg=function(){return i.svg()},f.getConfig=function(){return t},f.getLiveConfig=function(){return a.adapter.plotly().convert(i.getLiveConfig(),!0)},f.getLiveScales=function(){return{t:i.angularScale(),r:i.radialScale()}},f.setUndoPoint=function(){var e=this,r=a.util.cloneJson(t);!function(t,n){d.add({undo:function(){n&&e(n)},redo:function(){e(t)}})}(r,n),n=a.util.cloneJson(r)},f.undo=function(){d.undo()},f.redo=function(){d.redo()},f},c.fillLayout=function(e){var t=r.select(e).selectAll(".plot-container"),n=t.selectAll(".svg-container"),i=e.framework&&e.framework.svg&&e.framework.svg(),a={width:800,height:600,paper_bgcolor:o.background,_container:t,_paperdiv:n,_paper:i};e._fullLayout=l(a,e.layout)}},{"../../../components/color":43,"../../../lib":161,"./micropolar":243,"./undo_manager":245,d3:8}],245:[function(e,t,n){"use strict";t.exports=function(){var e,t=[],n=-1,r=!1;function i(e,t){return e?(r=!0,e[t](),r=!1,this):this}return{add:function(e){return r?this:(t.splice(n+1,t.length-n),t.push(e),n=t.length-1,this)},setCallback:function(t){e=t},undo:function(){var r=t[n];return r?(i(r,"undo"),n-=1,e&&e(r.undo),this):this},redo:function(){var r=t[n+1];return r?(i(r,"redo"),n+=1,e&&e(r.redo),this):this},clear:function(){t=[],n=-1},hasUndo:function(){return-1!==n},hasRedo:function(){return n<t.length-1},getCommands:function(){return t},getPreviousCommand:function(){return t[n-1]},getIndex:function(){return n}}}},{}],246:[function(e,t,n){"use strict";var r=e("./lib/loggers"),i=e("./lib/noop"),o=e("./lib/push_unique"),a=e("./lib/is_plain_object"),s=e("./lib/extend"),l=e("./plots/attributes"),c=e("./plots/layout_attributes"),u=s.extendFlat,d=s.extendDeepAll;function f(e){var t=e.name,i=e.categories,o=e.meta;if(n.modules[t])r.log("Type "+t+" already registered");else{n.subplotsRegistry[e.basePlotModule.name]||function(e){var t=e.name;if(n.subplotsRegistry[t])return void r.log("Plot type "+t+" already registered.");for(var i in v(e),n.subplotsRegistry[t]=e,n.componentsRegistry)y(i,e.name)}(e.basePlotModule);for(var a={},s=0;s<i.length;s++)a[i[s]]=!0,n.allCategories[i[s]]=!0;for(var l in n.modules[t]={_module:e,categories:a},o&&Object.keys(o).length&&(n.modules[t].meta=o),n.allTypes.push(t),n.componentsRegistry)m(l,t);e.layoutAttributes&&u(n.traceLayoutAttributes,e.layoutAttributes)}}function p(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var t=e.name;for(var r in n.componentsRegistry[t]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&o(n.layoutArrayContainers,t),v(e)),n.modules)m(t,r);for(var i in n.subplotsRegistry)y(t,i);for(var a in n.transformsRegistry)b(t,a);e.schema&&e.schema.layout&&d(c,e.schema.layout)}function h(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,i="function"==typeof e.transform,o="function"==typeof e.calcTransform;if(!i&&!o)throw new Error(t+" is missing a *transform* or *calcTransform* method.");for(var s in i&&o&&r.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),a(e.attributes)||r.log(t+" registered without an *attributes* object."),"function"!=typeof e.supplyDefaults&&r.log(t+" registered without a *supplyDefaults* method."),n.transformsRegistry[e.name]=e,n.componentsRegistry)b(s,e.name)}function g(e){var t=e.name,r=t.split("-")[0],i=e.dictionary,o=e.format,a=i&&Object.keys(i).length,s=o&&Object.keys(o).length,l=n.localeRegistry,c=l[t];if(c||(l[t]=c={}),r!==t){var u=l[r];u||(l[r]=u={}),a&&u.dictionary===c.dictionary&&(u.dictionary=i),s&&u.format===c.format&&(u.format=o)}a&&(c.dictionary=i),s&&(c.format=o)}function v(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var r=0;r<t.length;r++)o(n.layoutArrayRegexes,t[r])}}function m(e,t){var r=n.componentsRegistry[e].schema;if(r&&r.traces){var i=r.traces[t];i&&d(n.modules[t]._module.attributes,i)}}function b(e,t){var r=n.componentsRegistry[e].schema;if(r&&r.transforms){var i=r.transforms[t];i&&d(n.transformsRegistry[t].attributes,i)}}function y(e,t){var r=n.componentsRegistry[e].schema;if(r&&r.subplots){var i=n.subplotsRegistry[t],o=i.layoutAttributes,a="subplot"===i.attr?i.name:i.attr;Array.isArray(a)&&(a=a[0]);var s=r.subplots[a];o&&s&&d(o,s)}}function x(e){return"object"==typeof e&&(e=e.type),e}n.modules={},n.allCategories={},n.allTypes=[],n.subplotsRegistry={},n.transformsRegistry={},n.componentsRegistry={},n.layoutArrayContainers=[],n.layoutArrayRegexes=[],n.traceLayoutAttributes={},n.localeRegistry={},n.apiMethodRegistry={},n.register=function(e){if(!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var r=e[t];if(!r)throw new Error("Invalid module was attempted to be registered!");switch(r.moduleType){case"trace":f(r);break;case"transform":h(r);break;case"component":p(r);break;case"locale":g(r);break;case"apiMethod":var i=r.name;n.apiMethodRegistry[i]=r.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},n.getModule=function(e){var t=n.modules[x(e)];return!!t&&t._module},n.traceIs=function(e,t){if("various"===(e=x(e)))return!1;var i=n.modules[e];return i||(e&&"area"!==e&&r.log("Unrecognized trace type "+e+"."),i=n.modules[l.type.dflt]),!!i.categories[t]},n.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],i=0;i<r.length;i++)r[i].type===t&&n.push(i);return n},n.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},n.getComponentMethod=function(e,t){var r=n.componentsRegistry[e];return r&&r[t]||i},n.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return n.apiMethodRegistry[e].apply(null,t)}},{"./lib/extend":155,"./lib/is_plain_object":163,"./lib/loggers":166,"./lib/noop":171,"./lib/push_unique":175,"./plots/attributes":203,"./plots/layout_attributes":237}],247:[function(e,t,n){"use strict";var r=e("../lib"),i=r.extendFlat,o=r.extendDeep;function a(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function s(e){return["xaxis","yaxis","zaxis"].indexOf(e.slice(0,5))>-1}t.exports=function(e,t){var n;e.framework&&e.framework.isPolar&&(e=e.framework.getConfig());var r=e.data,l=e.layout,c=o([],r),u=o({},l,a(t.tileClass)),d=e._context||{};if(t.width&&(u.width=t.width),t.height&&(u.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){u.annotations=[];var f=Object.keys(u);for(n=0;n<f.length;n++)s(f[n])&&(u[f[n]].title="");for(n=0;n<c.length;n++){var p=c[n];p.showscale=!1,p.marker&&(p.marker.showscale=!1),"pie"===p.type&&(p.textposition="none")}}if(Array.isArray(t.annotations))for(n=0;n<t.annotations.length;n++)u.annotations.push(t.annotations[n]);var h=Object.keys(u).filter(function(e){return e.match(/^scene\d*$/)});if(h.length){var g={};for("thumbnail"===t.tileClass&&(g={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<h.length;n++){var v=u[h[n]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),i(v.xaxis,g),i(v.yaxis,g),i(v.zaxis,g),v._scene=null}}var m=document.createElement("div");t.tileClass&&(m.className=t.tileClass);var b={gd:m,td:m,layout:u,data:c,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return"transparent"!==t.setBackground&&(b.config.setBackground=t.setBackground||"opaque"),b.gd.defaultLayout=a(t.tileClass),b}},{"../lib":161}],248:[function(e,t,n){"use strict";var r=e("../plot_api/to_image"),i=e("../lib"),o=e("./filesaver");t.exports=function(e,t){var n;return i.isPlainObject(e)||(n=i.getGraphDiv(e)),(t=t||{}).format=t.format||"png",new Promise(function(a,s){n&&n._snapshotInProgress&&s(new Error("Snapshotting already in progress.")),i.isIE()&&"svg"!==t.format&&s(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),n&&(n._snapshotInProgress=!0);var l=r(e,t),c=t.filename||e.fn||"newplot";c+="."+t.format,l.then(function(e){return n&&(n._snapshotInProgress=!1),o(e,c)}).then(function(e){a(e)}).catch(function(e){n&&(n._snapshotInProgress=!1),s(e)})})}},{"../lib":161,"../plot_api/to_image":199,"./filesaver":249}],249:[function(e,t,n){"use strict";t.exports=function(e,t){var n=document.createElement("a"),r="download"in n,i=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(o,a){if("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&a(new Error("IE < 10 unsupported")),i&&(document.location.href="data:application/octet-stream"+e.slice(e.search(/[,;]/)),o(t)),t||(t="download"),r&&(n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),o(t)),"undefined"!=typeof navigator&&navigator.msSaveBlob){var s=e.split(/^data:image\/svg\+xml,/)[1],l=decodeURIComponent(s);navigator.msSaveBlob(new Blob([l]),t),o(t)}a(new Error("download error"))})}},{}],250:[function(e,t,n){"use strict";n.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},n.getRedrawFunc=function(e){var t=e._fullLayout||{};if(!(!(t._has&&t._has("polar"))&&e.data&&e.data[0]&&e.data[0].r))return function(){(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()})}}},{}],251:[function(e,t,n){"use strict";var r=e("./helpers"),i={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=i},{"./cloneplot":247,"./download":248,"./helpers":250,"./svgtoimg":252,"./toimage":253,"./tosvg":254}],252:[function(e,t,n){"use strict";var r=e("../lib"),i=e("events").EventEmitter;t.exports=function(e){var t=e.emitter||new i,n=new Promise(function(i,o){var a=window.Image,s=e.svg,l=e.format||"png";if(r.isIE()&&"svg"!==l){var c=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return o(c),e.promise?n:t.emit("error",c)}var u=e.canvas,d=e.scale||1,f=d*(e.width||300),p=d*(e.height||150),h=u.getContext("2d"),g=new a,v="data:image/svg+xml,"+encodeURIComponent(s);u.width=f,u.height=p,g.onload=function(){var n;switch("svg"!==l&&h.drawImage(g,0,0,f,p),l){case"jpeg":n=u.toDataURL("image/jpeg");break;case"png":n=u.toDataURL("image/png");break;case"webp":n=u.toDataURL("image/webp");break;case"svg":n=v;break;default:var r="Image format is not jpeg, png, svg or webp.";if(o(new Error(r)),!e.promise)return t.emit("error",r)}i(n),e.promise||t.emit("success",n)},g.onerror=function(n){if(o(n),!e.promise)return t.emit("error",n)},g.src=v});return e.promise?n:t}},{"../lib":161,events:7}],253:[function(e,t,n){"use strict";var r=e("events").EventEmitter,i=e("../registry"),o=e("../lib"),a=e("./helpers"),s=e("./cloneplot"),l=e("./tosvg"),c=e("./svgtoimg");t.exports=function(e,t){var n=new r,u=s(e,{format:"png"}),d=u.gd;d.style.position="absolute",d.style.left="-5000px",document.body.appendChild(d);var f=a.getRedrawFunc(d);return i.call("plot",d,u.data,u.layout,u.config).then(f).then(function(){var e=a.getDelay(d._fullLayout);setTimeout(function(){var e=l(d),r=document.createElement("canvas");r.id=o.randstr(),(n=c({format:t.format,width:d._fullLayout.width,height:d._fullLayout.height,canvas:r,emitter:n,svg:e})).clean=function(){d&&document.body.removeChild(d)}},e)}).catch(function(e){n.emit("error",e)}),n}},{"../lib":161,"../registry":246,"./cloneplot":247,"./helpers":250,"./svgtoimg":252,"./tosvg":254,events:7}],254:[function(e,t,n){"use strict";var r=e("d3"),i=e("../lib"),o=e("../components/drawing"),a=e("../components/color"),s=e("../constants/xmlns_namespaces"),l=/"/g,c=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");t.exports=function(e,t,n){var u,d=e._fullLayout,f=d._paper,p=d._toppaper,h=d.width,g=d.height;f.insert("rect",":first-child").call(o.setRect,0,0,h,g).call(a.fill,d.paper_bgcolor);var v=d._basePlotModules||[];for(u=0;u<v.length;u++){var m=v[u];m.toSVG&&m.toSVG(e)}if(p){var b=p.node().childNodes,y=Array.prototype.slice.call(b);for(u=0;u<y.length;u++){var x=y[u];x.childNodes.length&&f.node().appendChild(x)}}d._draggers&&d._draggers.remove(),f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=r.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){e.style({visibility:null,display:null});var t=this.style.fontFamily;t&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(l,"TOBESTRIPPED"))}else e.remove()}),f.selectAll(".point, .scatterpts, .legendfill>path, .legendlines>path, .cbfill").each(function(){var e=r.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(l,"TOBESTRIPPED"));var n=this.style.stroke;n&&-1!==n.indexOf("url(")&&e.style("stroke",n.replace(l,"TOBESTRIPPED"))}),"pdf"!==t&&"eps"!==t||f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS(s.xmlns,"xmlns",s.svg),f.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),"svg"===t&&n&&(f.attr("width",n*h),f.attr("height",n*g),f.attr("viewBox","0 0 "+h+" "+g));var _=(new window.XMLSerializer).serializeToString(f.node());return _=(_=function(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}(_=function(e){var t=r.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":t.html(e).text()});return t.remove(),n}(_))).replace(c,"'"),i.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},{"../components/color":43,"../components/drawing":68,"../constants/xmlns_namespaces":144,"../lib":161,d3:8}],255:[function(e,t,n){"use strict";var r=e("../../lib").mergeArray;t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r(t.text,e,"tx"),r(t.hovertext,e,"htx");var i=t.marker;if(i){r(i.opacity,e,"mo"),r(i.color,e,"mc");var o=i.line;o&&(r(o.color,e,"mlc"),r(o.width,e,"mlw"))}}},{"../../lib":161}],256:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../components/colorscale/attributes"),o=e("../../components/colorbar/attributes"),a=e("../../plots/font_attributes"),s=e("../../lib/extend").extendFlat,l=a({editType:"calc",arrayOk:!0}),c=s({line:s({width:s({},r.marker.line.width,{dflt:0}),editType:"calc"},i("marker.line")),editType:"calc"},i("marker"),{colorbar:o,opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,hovertext:r.hovertext,textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},textfont:s({},l,{}),insidetextfont:s({},l,{}),outsidetextfont:s({},l,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:s({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:c,selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorbar/attributes":44,"../../components/colorscale/attributes":50,"../../lib/extend":155,"../../plots/font_attributes":233,"../scatter/attributes":283}],257:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),i=e("../../components/colorscale/has_colorscale"),o=e("../../components/colorscale/calc"),a=e("./arrays_to_calcdata"),s=e("../scatter/calc_selection");t.exports=function(e,t){var n,l,c=r.getFromId(e,t.xaxis||"x"),u=r.getFromId(e,t.yaxis||"y");"h"===t.orientation?(n=c.makeCalcdata(t,"x"),l=u.makeCalcdata(t,"y")):(n=u.makeCalcdata(t,"y"),l=c.makeCalcdata(t,"x"));for(var d=Math.min(l.length,n.length),f=new Array(d),p=0;p<d;p++)f[p]={p:l[p],s:n[p]},t.ids&&(f[p].id=String(t.ids[p]));return i(t,"marker")&&o(t,t.marker.color,"marker","c"),i(t,"marker.line")&&o(t,t.marker.line.color,"marker.line","c"),a(f,t),s(f,t),f}},{"../../components/colorscale/calc":51,"../../components/colorscale/has_colorscale":57,"../../plots/cartesian/axes":206,"../scatter/calc_selection":285,"./arrays_to_calcdata":255}],258:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib").isArrayOrTypedArray,o=e("../../constants/numerical").BADNUM,a=e("../../registry"),s=e("../../plots/cartesian/axes"),l=e("./sieve.js");function c(e,t,n,a){if(a.length){var c,_,w,k,T=e._fullLayout.barmode,A="overlay"===T,C="group"===T;if(function(e,t,n,o){var a,s;for(a=0;a<o.length;a++){var l,c=o[a],u=c[0].trace,d=u.base,f="h"===u.orientation?u.xcalendar:u.ycalendar;if(i(d)){for(s=0;s<Math.min(d.length,c.length);s++)l=n.d2c(d[s],0,f),r(l)?(c[s].b=+l,c[s].hasB=1):c[s].b=0;for(;s<c.length;s++)c[s].b=0}else{l=n.d2c(d,0,f);var p=r(l);for(l=p?l:0,s=0;s<c.length;s++)c[s].b=l,p&&(c[s].hasB=1)}}}(0,0,n,a),A)u(e,t,n,a);else if(C){for(c=[],_=[],w=0;w<a.length;w++)void 0===(k=a[w])[0].trace.offset?_.push(k):c.push(k);_.length&&function(e,t,n,r){var i=e._fullLayout.barnorm,o=new l(r,!1,!i);(function(e,t,n){var r,i,o,a,s=e._fullLayout,l=s.bargap,c=s.bargroupgap||0,u=n.positions,d=n.distinctPositions,g=n.minDiff,v=n.traces,m=u.length!==d.length,b=v.length,y=g*(1-l),x=m?y/b:y,_=x*(1-c);for(r=0;r<b;r++){i=v[r],o=i[0];var w=m?((2*r+1-b)*x-_)/2:-_/2;(a=o.t).barwidth=_,a.poffset=w,a.bargroupwidth=y,a.bardelta=g}n.binWidth=v[0][0].t.barwidth/100,f(n),p(e,t,n),h(e,t,n,m)})(e,t,o),i?(m(e,n,o),b(e,n,o)):v(e,n,o)}(e,t,n,_),c.length&&u(e,t,n,c)}else{for(c=[],_=[],w=0;w<a.length;w++)void 0===(k=a[w])[0].trace.base?_.push(k):c.push(k);_.length&&function(e,t,n,i){var a=e._fullLayout.barmode,c="stack"===a,u="relative"===a,f=e._fullLayout.barnorm,p=new l(i,u,!(f||c||u));d(e,t,p),function(e,t,n){var i,a,l,c,u=e._fullLayout.barnorm,d=y(t),f=n.traces,p=[null,null];for(i=0;i<f.length;i++)for(a=f[i],l=0;l<a.length;l++)if((c=a[l]).s!==o){var h=n.put(c.p,c.b+c.s),v=h+c.b+c.s;c.b=h,c[d]=v,u||(r(t.c2l(v))&&g(p,v),c.hasB&&r(t.c2l(h))&&g(p,h))}if(!u){var m=s.findExtremes(t,p,{tozero:!0,padded:!0});x(f,t,m)}}(e,n,p);for(var h=0;h<i.length;h++)for(var v=i[h],m=0;m<v.length;m++){var _=v[m];if(_.s!==o){var w=_.b+_.s===p.get(_.p,_.s);w&&(_._outmost=!0)}}f&&b(e,n,p)}(e,t,n,_),c.length&&u(e,t,n,c)}!function(e,t){var n,i,o,a=t._id.charAt(0),s={},l=1/0,c=-1/0;for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i++){var u=o[i].p;r(u)&&(l=Math.min(l,u),c=Math.max(c,u))}var d,f,p=1e4/(c-l),h=s.round=function(e){return String(Math.round(p*(e-l)))};for(n=0;n<e.length;n++)for((o=e[n])[0].t.extents=s,d=o[0].t.poffset,f=Array.isArray(d),i=0;i<o.length;i++){var g=o[i],v=g[a]-g.w/2;if(r(v)){var m=g[a]+g.w/2,b=h(g.p);s[b]?s[b]=[Math.min(v,s[b][0]),Math.max(m,s[b][1])]:s[b]=[v,m]}g.p0=g.p+(f?d[i]:d),g.p1=g.p0+g.w,g.s0=g.b,g.s1=g.s0+g.s}}(a,t)}}function u(e,t,n,r){for(var i=e._fullLayout.barnorm,o=!i,a=0;a<r.length;a++){var s=r[a],c=new l([s],!1,o);d(e,t,c),i?(m(e,n,c),b(e,n,c)):v(e,n,c)}}function d(e,t,n){var r,i,o=e._fullLayout,a=o.bargap,s=o.bargroupgap||0,l=n.minDiff,c=n.traces,u=l*(1-a),d=u*(1-s),g=-d/2;for(r=0;r<c.length;r++)(i=c[r][0].t).barwidth=d,i.poffset=g,i.bargroupwidth=u,i.bardelta=l;n.binWidth=c[0][0].t.barwidth/100,f(n),p(e,t,n),h(e,t,n)}function f(e){var t,n,o,a,s,l,c=e.traces;for(t=0;t<c.length;t++){a=(o=(n=c[t])[0]).trace,l=o.t;var u,d=a._offset||a.offset,f=l.poffset;if(i(d)){for(u=Array.prototype.slice.call(d,0,n.length),s=0;s<u.length;s++)r(u[s])||(u[s]=f);for(s=u.length;s<n.length;s++)u.push(f);l.poffset=u}else void 0!==d&&(l.poffset=d);var p=a._width||a.width,h=l.barwidth;if(i(p)){var g=Array.prototype.slice.call(p,0,n.length);for(s=0;s<g.length;s++)r(g[s])||(g[s]=h);for(s=g.length;s<n.length;s++)g.push(h);if(l.barwidth=g,void 0===d){for(u=[],s=0;s<n.length;s++)u.push(f+(h-g[s])/2);l.poffset=u}}else void 0!==p&&(l.barwidth=p,void 0===d&&(l.poffset=f+(h-p)/2))}}function p(e,t,n){for(var r=n.traces,i=y(t),o=0;o<r.length;o++)for(var a=r[o],s=a[0].t,l=s.poffset,c=Array.isArray(l),u=s.barwidth,d=Array.isArray(u),f=0;f<a.length;f++){var p=a[f],h=p.w=d?u[f]:u;p[i]=p.p+(c?l[f]:l)+h/2}}function h(e,t,n,r){var i=n.traces,o=n.distinctPositions,a=o[0],l=n.minDiff,c=l/2;s.minDtick(t,l,a,r);for(var u=Math.min.apply(Math,o)-c,d=Math.max.apply(Math,o)+c,f=0;f<i.length;f++){var p=i[f],h=p[0],g=h.trace;if(void 0!==g.width||void 0!==g.offset)for(var v=h.t,m=v.poffset,b=v.barwidth,y=Array.isArray(m),_=Array.isArray(b),w=0;w<p.length;w++){var k=p[w],T=y?m[w]:m,A=_?b[w]:b,C=k.p+T,S=C+A;u=Math.min(u,C),d=Math.max(d,S)}}x(i,t,s.findExtremes(t,[u,d],{padded:!1}))}function g(e,t){r(e[0])?e[0]=Math.min(e[0],t):e[0]=t,r(e[1])?e[1]=Math.max(e[1],t):e[1]=t}function v(e,t,n){for(var i=n.traces,o=y(t),a=[null,null],l=0;l<i.length;l++)for(var c=i[l],u=0;u<c.length;u++){var d=c[u],f=d.b,p=f+d.s;d[o]=p,r(t.c2l(p))&&g(a,p),d.hasB&&r(t.c2l(f))&&g(a,f)}x(i,t,s.findExtremes(t,a,{tozero:!0,padded:!0}))}function m(e,t,n){for(var r=n.traces,i=0;i<r.length;i++)for(var a=r[i],s=0;s<a.length;s++){var l=a[s];l.s!==o&&n.put(l.p,l.b+l.s)}}function b(e,t,n){var i=n.traces,a=y(t),l="fraction"===e._fullLayout.barnorm?1:100,c=l/1e9,u=t.l2c(t.c2l(0)),d="stack"===e._fullLayout.barmode?l:u,f=[u,d],p=!1;function h(e){r(t.c2l(e))&&(e<u-c||e>d+c||!r(u))&&(p=!0,g(f,e))}for(var v=0;v<i.length;v++)for(var m=i[v],b=0;b<m.length;b++){var _=m[b];if(_.s!==o){var w=Math.abs(l/n.get(_.p,_.s));_.b*=w,_.s*=w;var k=_.b,T=k+_.s;_[a]=T,h(T),_.hasB&&h(k)}}var A=s.findExtremes(t,f,{tozero:!0,padded:p});x(i,t,A)}function y(e){return e._id.charAt(0)}function x(e,t,n){for(var r=0;r<e.length;r++)e[r][0].trace._extremes[t._id]=n}t.exports={crossTraceCalc:function(e,t){var n,r=t.xaxis,i=t.yaxis,o=e._fullData,s=e.calcdata,l=[],u=[];for(n=0;n<o.length;n++){var d=o[n];!0===d.visible&&a.traceIs(d,"bar")&&d.xaxis===r._id&&d.yaxis===i._id&&("h"===d.orientation?l.push(s[n]):u.push(s[n]))}c(e,r,i,u),c(e,i,r,l)},setGroupPositions:c}},{"../../constants/numerical":143,"../../lib":161,"../../plots/cartesian/axes":206,"../../registry":246,"./sieve.js":267,"fast-isnumeric":10}],259:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/color"),o=e("../../registry"),a=e("../scatter/xy_defaults"),s=e("../bar/style_defaults"),l=e("./attributes");t.exports=function(e,t,n,c){function u(n,i){return r.coerce(e,t,l,n,i)}var d=r.coerceFont;if(a(e,t,c,u)){u("orientation",t.x&&!t.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext");var f=u("textposition"),p=Array.isArray(f)||"auto"===f,h=p||"outside"===f;if(p||"inside"===f||h){var g=d(u,"textfont",c.font),v=r.extendFlat({},g);!(e.textfont&&e.textfont.color)&&delete v.color,d(u,"insidetextfont",v),h&&d(u,"outsidetextfont",g),u("constraintext"),u("selected.textfont.color"),u("unselected.textfont.color"),u("cliponaxis")}s(e,t,u,n,c);var m=o.getComponentMethod("errorbars","supplyDefaults");m(e,t,i.defaultLine,{axis:"y"}),m(e,t,i.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,u)}else t.visible=!1}},{"../../components/color":43,"../../lib":161,"../../registry":246,"../bar/style_defaults":269,"../scatter/xy_defaults":309,"./attributes":256}],260:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("tinycolor2");n.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if("number"==typeof t&&!e.strict)return String(t);return void 0!==n?n:e.dflt},n.coerceNumber=function(e,t,n){if(r(t)){t=+t;var i=e.min,o=e.max;if(!(void 0!==i&&t<i||void 0!==o&&t>o))return t}return void 0!==n?n:e.dflt},n.coerceColor=function(e,t,n){return i(t).isValid()?t:void 0!==n?n:e.dflt},n.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},n.getValue=function(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n}},{"fast-isnumeric":10,tinycolor2:26}],261:[function(e,t,n){"use strict";var r=e("../../components/fx"),i=e("../../registry"),o=e("../../components/color"),a=e("../scatter/fill_hover_text");function s(e,t){var n=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,i=t.mlw||e.marker.line.width;return o.opacity(n)?n:o.opacity(r)&&i?r:void 0}t.exports={hoverPoints:function(e,t,n,o){var l,c,u,d,f,p,h,g=e.cd,v=g[0].trace,m=g[0].t,b="closest"===o,y=e.maxHoverDistance,x=e.maxSpikeDistance;function _(e){return e[u]-e.w/2}function w(e){return e[u]+e.w/2}var k=b?_:function(e){return Math.min(_(e),e.p-m.bardelta/2)},T=b?w:function(e){return Math.max(w(e),e.p+m.bardelta/2)};function A(e,t){return r.inbox(e-l,t-l,y+Math.min(1,Math.abs(t-e)/h)-1)}function C(e){return A(k(e),T(e))}function S(e){return r.inbox(e.b-c,e[d]-c,y+(e[d]-c)/(e[d]-e.b)-1)}"h"===v.orientation?(l=n,c=t,u="y",d="x",f=S,p=C):(l=t,c=n,u="x",d="y",p=S,f=C);var M=e[u+"a"],E=e[d+"a"];h=Math.abs(M.r2c(M.range[1])-M.r2c(M.range[0]));var O=r.getDistanceFunction(o,f,p,function(e){return(f(e)+p(e))/2});if(r.getClosest(g,O,e),!1!==e.index){b||(k=function(e){return Math.min(_(e),e.p-m.bargroupwidth/2)},T=function(e){return Math.max(w(e),e.p+m.bargroupwidth/2)});var L=g[e.index],P=v.base?L.b+L.s:L.s;e[d+"0"]=e[d+"1"]=E.c2p(L[d],!0),e[d+"LabelVal"]=P;var D=m.extents[m.extents.round(L.p)];return e[u+"0"]=M.c2p(b?k(L):D[0],!0),e[u+"1"]=M.c2p(b?T(L):D[1],!0),e[u+"LabelVal"]=L.p,e.spikeDistance=(S(L)+function(e){return A(_(e),w(e))}(L))/2+x-y,e[u+"Spike"]=M.c2p(L.p,!0),e.color=s(v,L),a(L,v,e),i.getComponentMethod("errorbars","hoverInfo")(L,v,e),[e]}},getTraceColor:s}},{"../../components/color":43,"../../components/fx":85,"../../registry":246,"../scatter/fill_hover_text":291}],262:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("./layout_attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.calc=e("./calc"),r.crossTraceCalc=e("./cross_trace_calc").crossTraceCalc,r.colorbar=e("../scatter/marker_colorbar"),r.arraysToCalcdata=e("./arrays_to_calcdata"),r.plot=e("./plot"),r.style=e("./style").style,r.styleOnSelect=e("./style").styleOnSelect,r.hoverPoints=e("./hover").hoverPoints,r.selectPoints=e("./select"),r.moduleType="trace",r.name="bar",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],r.meta={},t.exports=r},{"../../plots/cartesian":218,"../scatter/marker_colorbar":301,"./arrays_to_calcdata":255,"./attributes":256,"./calc":257,"./cross_trace_calc":258,"./defaults":259,"./hover":261,"./layout_attributes":263,"./layout_defaults":264,"./plot":265,"./select":266,"./style":268}],263:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],264:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../plots/cartesian/axes"),o=e("../../lib"),a=e("./layout_attributes");t.exports=function(e,t,n){function s(n,r){return o.coerce(e,t,a,n,r)}for(var l=!1,c=!1,u=!1,d={},f=0;f<n.length;f++){var p=n[f];if(r.traceIs(p,"bar")&&p.visible){if(l=!0,"overlay"!==e.barmode&&"stack"!==e.barmode){var h=p.xaxis+p.yaxis;d[h]&&(u=!0),d[h]=!0}if(p.visible&&"histogram"===p.type)"category"!==i.getFromId({_fullLayout:t},p["v"===p.orientation?"xaxis":"yaxis"]).type&&(c=!0)}}l&&("overlay"!==s("barmode")&&s("barnorm"),s("bargap",c&&!u?0:.2),s("bargroupgap"))}},{"../../lib":161,"../../plots/cartesian/axes":206,"../../registry":246,"./layout_attributes":263}],265:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),o=e("../../lib"),a=e("../../lib/svg_text_utils"),s=e("../../components/color"),l=e("../../components/drawing"),c=e("../../registry"),u=e("./attributes"),d=u.text,f=u.textposition,p=e("./helpers"),h=e("./style"),g=3;function v(e,t,n,r,i,o){var a;return i<1?a="scale("+i+") ":(i=1,a=""),"translate("+(n-i*e)+" "+(r-i*t)+")"+a+(o?"rotate("+o+" "+e+" "+t+") ":"")}t.exports=function(e,t,n,u){var m=t.xaxis,b=t.yaxis,y=e._fullLayout,x=o.makeTraceGroups(u,n,"trace bars").each(function(n){var c=r.select(this),u=n[0],x=u.trace;t.isRangePlot||(u.node3=c);var _=o.ensureSingle(c,"g","points").selectAll("g.point").data(o.identity);_.enter().append("g").classed("point",!0),_.exit().remove(),_.each(function(c,u){var _,w,k,T,A=r.select(this);if("h"===x.orientation?(k=b.c2p(c.p0,!0),T=b.c2p(c.p1,!0),_=m.c2p(c.s0,!0),w=m.c2p(c.s1,!0),c.ct=[w,(k+T)/2]):(_=m.c2p(c.p0,!0),w=m.c2p(c.p1,!0),k=b.c2p(c.s0,!0),T=b.c2p(c.s1,!0),c.ct=[(_+w)/2,T]),i(_)&&i(w)&&i(k)&&i(T)&&_!==w&&k!==T){var C=(c.mlw+1||x.marker.line.width+1||(c.trace?c.trace.marker.line.width:0)+1)-1,S=r.round(C/2%1,2);if(!e._context.staticPlot){var M=s.opacity(c.mc||x.marker.color)<1||C>.01?E:function(e,t){return Math.abs(e-t)>=2?E(e):e>t?Math.ceil(e):Math.floor(e)};w=M(w,_=M(_,w)),T=M(T,k=M(k,T))}o.ensureSingle(A,"path").style("vector-effect","non-scaling-stroke").attr("d","M"+_+","+k+"V"+T+"H"+w+"V"+k+"Z").call(l.setClipUrl,t.layerClipId),function(e,t,n,r,i,s,c,u){var m;function b(t,n,r){var i=o.ensureSingle(t,"text").text(n).attr({class:"bartext bartext-"+m,transform:"","text-anchor":"middle","data-notex":1}).call(l.font,r).call(a.convertToTspans,e);return i}var y=n[0].trace,x=y.orientation,_=function(e,t){var n=p.getValue(e.text,t);return p.coerceString(d,n)}(y,r);if(m=function(e,t){var n=p.getValue(e.textposition,t);return p.coerceEnumerated(f,n)}(y,r),!_||"none"===m)return void t.select("text").remove();var w,k,T,A,C,S,M=e._fullLayout.font,E=h.getBarColor(n[r],y),O=h.getInsideTextFont(y,r,M,E),L=h.getOutsideTextFont(y,r,M),P=e._fullLayout.barmode,D="stack"===P||"relative"===P,R=n[r],F=!D||R._outmost,j=Math.abs(s-i)-2*g,I=Math.abs(u-c)-2*g;"outside"===m&&(F||R.hasB||(m="inside"));if("auto"===m)if(F){m="inside",w=b(t,_,O),k=l.bBox(w.node()),T=k.width,A=k.height;var N=T>0&&A>0,z=T<=j&&A<=I,q=T<=I&&A<=j,H="h"===x?j>=T*(I/A):I>=A*(j/T);N&&(z||q||H)?m="inside":(m="outside",w.remove(),w=null)}else m="inside";if(!w&&(w=b(t,_,"outside"===m?L:O),k=l.bBox(w.node()),T=k.width,A=k.height,T<=0||A<=0))return void w.remove();"outside"===m?(S="both"===y.constraintext||"outside"===y.constraintext,C=function(e,t,n,r,i,o,a){var s,l="h"===o?Math.abs(r-n):Math.abs(t-e);l>2*g&&(s=g);var c=1;a&&(c="h"===o?Math.min(1,l/i.height):Math.min(1,l/i.width));var u,d,f,p,h=(i.left+i.right)/2,m=(i.top+i.bottom)/2;u=c*i.width,d=c*i.height,"h"===o?t<e?(f=t-s-u/2,p=(n+r)/2):(f=t+s+u/2,p=(n+r)/2):r>n?(f=(e+t)/2,p=r+s+d/2):(f=(e+t)/2,p=r-s-d/2);return v(h,m,f,p,c,!1)}(i,s,c,u,k,x,S)):(S="both"===y.constraintext||"inside"===y.constraintext,C=function(e,t,n,r,i,o,a){var s,l,c,u,d,f,p,h=i.width,m=i.height,b=(i.left+i.right)/2,y=(i.top+i.bottom)/2,x=Math.abs(t-e),_=Math.abs(r-n);x>2*g&&_>2*g?(x-=2*(d=g),_-=2*d):d=0;h<=x&&m<=_?(f=!1,p=1):h<=_&&m<=x?(f=!0,p=1):h<m==x<_?(f=!1,p=a?Math.min(x/h,_/m):1):(f=!0,p=a?Math.min(_/h,x/m):1);f&&(f=90);f?(s=p*m,l=p*h):(s=p*h,l=p*m);"h"===o?t<e?(c=t+d+s/2,u=(n+r)/2):(c=t-d-s/2,u=(n+r)/2):r>n?(c=(e+t)/2,u=r-d-l/2):(c=(e+t)/2,u=r+d+l/2);return v(b,y,c,u,p,f)}(i,s,c,u,k,x,S));w.attr("transform",C)}(e,A,n,u,_,w,k,T),t.layerClipId&&l.hideOutsideRangePoint(c,A.select("text"),m,b,x.xcalendar,x.ycalendar)}else A.remove();function E(e){return 0===y.bargap&&0===y.bargroupgap?r.round(Math.round(e)-S,2):e}});var w=!1===u.trace.cliponaxis;l.setClipUrl(c,w?null:t.layerClipId)});c.getComponentMethod("errorbars","plot")(x,t)}},{"../../components/color":43,"../../components/drawing":68,"../../lib":161,"../../lib/svg_text_utils":183,"../../registry":246,"./attributes":256,"./helpers":260,"./style":268,d3:8,"fast-isnumeric":10}],266:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r=e.cd,i=e.xaxis,o=e.yaxis,a=[];if(!1===t)for(n=0;n<r.length;n++)r[n].selected=0;else for(n=0;n<r.length;n++){var s=r[n];t.contains(s.ct,!1,n,e)?(a.push({pointNumber:n,x:i.c2d(s.x),y:o.c2d(s.y)}),s.selected=1):s.selected=0}return a}},{}],267:[function(e,t,n){"use strict";t.exports=o;var r=e("../../lib"),i=e("../../constants/numerical").BADNUM;function o(e,t,n){this.traces=e,this.separateNegativeValues=t,this.dontMergeOverlappingData=n;for(var o=1/0,a=[],s=0;s<e.length;s++){for(var l=e[s],c=0;c<l.length;c++){var u=l[c];u.p!==i&&a.push(u.p)}l[0]&&l[0].width1&&(o=Math.min(l[0].width1,o))}this.positions=a;var d=r.distinctVals(a);this.distinctPositions=d.vals,1===d.vals.length&&o!==1/0?this.minDiff=o:this.minDiff=Math.min(d.minDiff,o),this.binWidth=this.minDiff,this.bins={}}o.prototype.put=function(e,t){var n=this.getLabel(e,t),r=this.bins[n]||0;return this.bins[n]=r+t,r},o.prototype.get=function(e,t){var n=this.getLabel(e,t);return this.bins[n]||0},o.prototype.getLabel=function(e,t){return(t<0&&this.separateNegativeValues?"v":"^")+(this.dontMergeOverlappingData?e:Math.round(e/this.binWidth))}},{"../../constants/numerical":143,"../../lib":161}],268:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/color"),o=e("../../components/drawing"),a=e("../../lib"),s=e("../../registry"),l=e("./attributes"),c=l.textfont,u=l.insidetextfont,d=l.outsidetextfont,f=e("./helpers");function p(e,t,n){var i=e.selectAll("path"),a=e.selectAll("text");o.pointStyle(i,t,n),a.each(function(e){var i=r.select(this),a=h(i,e,t,n);o.font(i,a)})}function h(e,t,n,r){var i=r._fullLayout.font,o=n.textfont;if(e.classed("bartext-inside")){var a=y(t,n);o=v(n,t.i,i,a)}else e.classed("bartext-outside")&&(o=m(n,t.i,i));return o}function g(e,t,n){return b(c,e.textfont,t,n)}function v(e,t,n,r){var o=g(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(o={color:i.contrast(r),family:o.family,size:o.size}),b(u,e.insidetextfont,t,o)}function m(e,t,n){var r=g(e,t,n);return b(d,e.outsidetextfont,t,r)}function b(e,t,n,r){t=t||{};var i=f.getValue(t.family,n),o=f.getValue(t.size,n),a=f.getValue(t.color,n);return{family:f.coerceString(e.family,i,r.family),size:f.coerceNumber(e.size,o,r.size),color:f.coerceColor(e.color,a,r.color)}}function y(e,t){return e.mc||t.marker.color}t.exports={style:function(e,t){var n=t?t[0].node3:r.select(e).selectAll("g.trace.bars"),i=n.size(),o=e._fullLayout;n.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===o.barmode&&i>1||0===o.bargap&&0===o.bargroupgap&&!e[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")}),n.selectAll("g.points").each(function(t){p(r.select(this),t[0].trace,e)}),s.getComponentMethod("errorbars","style")(n)},styleOnSelect:function(e,t){var n=t[0].node3,i=t[0].trace;i.selectedpoints?function(e,t,n){o.selectedPointStyle(e.selectAll("path"),t),function(e,t,n){e.each(function(e){var i,s=r.select(this);if(e.selected){i=a.extendFlat({},h(s,e,t,n));var l=t.selected.textfont&&t.selected.textfont.color;l&&(i.color=l),o.font(s,i)}else o.selectedTextStyle(s,t)})}(e.selectAll("text"),t,n)}(n,i,e):p(n,i,e)},getInsideTextFont:v,getOutsideTextFont:m,getBarColor:y}},{"../../components/color":43,"../../components/drawing":68,"../../lib":161,"../../registry":246,"./attributes":256,"./helpers":260,d3:8}],269:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("../../components/colorscale/has_colorscale"),o=e("../../components/colorscale/defaults");t.exports=function(e,t,n,a,s){n("marker.color",a),i(e,"marker")&&o(e,t,s,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),i(e,"marker.line")&&o(e,t,s,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":43,"../../components/colorscale/defaults":53,"../../components/colorscale/has_colorscale":57}],270:[function(e,t,n){"use strict";var r=e("../../components/color/attributes"),i=e("../../plots/font_attributes"),o=e("../../plots/attributes"),a=e("../../plots/domain").attributes,s=e("../../lib/extend").extendFlat,l=i({editType:"calc",arrayOk:!0,colorEditType:"style"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:r.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},o.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},textfont:s({},l,{}),insidetextfont:s({},l,{}),outsidetextfont:s({},l,{}),title:{valType:"string",dflt:"",editType:"calc"},titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"},titlefont:s({},l,{}),domain:a({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}},{"../../components/color/attributes":42,"../../lib/extend":155,"../../plots/attributes":203,"../../plots/domain":232,"../../plots/font_attributes":233}],271:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../plots/get_data").getModuleCalcData;n.name="pie",n.plot=function(e){var t=r.getModule("pie"),n=i(e.calcdata,t)[0];n.length&&t.plot(e,n)},n.clean=function(e,t,n,r){var i=r._has&&r._has("pie"),o=t._has&&t._has("pie");i&&!o&&r._pielayer.selectAll("g.trace").remove()}},{"../../plots/get_data":235,"../../registry":246}],272:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib").isArrayOrTypedArray,o=e("tinycolor2"),a=e("../../components/color"),s=e("./helpers");n.calc=function(e,t){var n,l,c,u,d,f=t.values,p=i(f)&&f.length,h=t.labels,g=t.marker.colors||[],v=[],m=e._fullLayout,b=m._piecolormap,y={},x=0,_=m.hiddenlabels||[];if(t.dlabel)for(h=new Array(f.length),n=0;n<f.length;n++)h[n]=String(t.label0+n*t.dlabel);function w(e,t){return!!e&&(!!(e=o(e)).isValid()&&(e=a.addOpacity(e,e.getAlpha()),b[t]||(b[t]=e),e))}var k=(p?f:h).length;for(n=0;n<k;n++){if(p){if(l=f[n],!r(l))continue;if((l=+l)<0)continue}else l=1;void 0!==(c=h[n])&&""!==c||(c=n);var T=y[c=String(c)];void 0===T?(y[c]=v.length,(u=-1!==_.indexOf(c))||(x+=l),v.push({v:l,label:c,color:w(g[n],c),i:n,pts:[n],hidden:u})):((d=v[T]).v+=l,d.pts.push(n),d.hidden||(x+=l),!1===d.color&&g[n]&&(d.color=w(g[n],c)))}if(t.sort&&v.sort(function(e,t){return t.v-e.v}),v[0]&&(v[0].vTotal=x),t.textinfo&&"none"!==t.textinfo){var A,C=-1!==t.textinfo.indexOf("label"),S=-1!==t.textinfo.indexOf("text"),M=-1!==t.textinfo.indexOf("value"),E=-1!==t.textinfo.indexOf("percent"),O=m.separators;for(n=0;n<v.length;n++){if(d=v[n],A=C?[d.label]:[],S){var L=s.getFirstFilled(t.text,d.pts);L&&A.push(L)}M&&A.push(s.formatPieValue(d.v,O)),E&&A.push(s.formatPiePercent(d.v/x,O)),d.text=A.join("<br>")}}return v},n.crossTraceCalc=function(e){var t=e._fullLayout,n=e.calcdata,r=t.piecolorway,i=t._piecolormap;t.extendpiecolors&&(r=function(e){var t,n=JSON.stringify(e),r=l[n];if(!r){for(r=e.slice(),t=0;t<e.length;t++)r.push(o(e[t]).lighten(20).toHexString());for(t=0;t<e.length;t++)r.push(o(e[t]).darken(20).toHexString());l[n]=r}return r}(r));var a,s,c,u,d=0;for(a=0;a<n.length;a++)if("pie"===(c=n[a])[0].trace.type)for(s=0;s<c.length;s++)!1===(u=c[s]).color&&(i[u.label]?u.color=i[u.label]:(i[u.label]=u.color=r[d%r.length],d++))};var l={}},{"../../components/color":43,"../../lib":161,"./helpers":275,"fast-isnumeric":10,tinycolor2:26}],273:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes"),o=e("../../plots/domain").defaults;t.exports=function(e,t,n,a){function s(n,o){return r.coerce(e,t,i,n,o)}var l,c=r.coerceFont,u=s("values"),d=r.isArrayOrTypedArray(u),f=s("labels");if(Array.isArray(f)?(l=f.length,d&&(l=Math.min(l,u.length))):d&&(l=u.length,s("label0"),s("dlabel")),l){t._length=l,s("marker.line.width")&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var p=s("text"),h=s("textinfo",Array.isArray(p)?"text+percent":"percent");if(s("hovertext"),h&&"none"!==h){var g=s("textposition"),v=Array.isArray(g)||"auto"===g,m=v||"inside"===g,b=v||"outside"===g;if(m||b){var y=c(s,"textfont",a.font);if(m){var x=r.extendFlat({},y);!(e.textfont&&e.textfont.color)&&delete x.color,c(s,"insidetextfont",x)}b&&c(s,"outsidetextfont",y)}}o(t,a,s);var _=s("hole");if(s("title")){var w=s("titleposition",_?"middle center":"top center");_||"middle center"!==w||(t.titleposition="top center"),c(s,"titlefont",a.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else t.visible=!1}},{"../../lib":161,"../../plots/domain":232,"./attributes":270}],274:[function(e,t,n){"use strict";var r=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),r(n,t,e.pts),n}},{"../../components/fx/helpers":82}],275:[function(e,t,n){"use strict";var r=e("../../lib");n.formatPiePercent=function(e,t){var n=(100*e).toPrecision(3);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,t)+"%"},n.formatPieValue=function(e,t){var n=e.toPrecision(10);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,t)},n.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r)return r}},n.castOption=function(e,t){return Array.isArray(e)?n.getFirstFilled(e,t):e||void 0}},{"../../lib":161}],276:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.layoutAttributes=e("./layout_attributes");var i=e("./calc");r.calc=i.calc,r.crossTraceCalc=i.crossTraceCalc,r.plot=e("./plot"),r.style=e("./style"),r.styleOne=e("./style_one"),r.moduleType="trace",r.name="pie",r.basePlotModule=e("./base_plot"),r.categories=["pie","showLegend"],r.meta={},t.exports=r},{"./attributes":270,"./base_plot":271,"./calc":272,"./defaults":273,"./layout_attributes":277,"./layout_defaults":278,"./plot":279,"./style":280,"./style_one":281}],277:[function(e,t,n){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],278:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./layout_attributes");t.exports=function(e,t){function n(n,o){return r.coerce(e,t,i,n,o)}n("hiddenlabels"),n("piecolorway",t.colorway),n("extendpiecolors")}},{"../../lib":161,"./layout_attributes":277}],279:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/fx"),o=e("../../components/color"),a=e("../../components/drawing"),s=e("../../lib"),l=e("../../lib/svg_text_utils"),c=e("./helpers"),u=e("./event_data");function d(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;var n=Math.PI*Math.min(e.v/t.vTotal,.5);return Math.min(1/(1+1/Math.sin(n)),(1-t.trace.hole)/2)}function f(e,t){var n=t.pxmid[0],r=t.pxmid[1],i=e.width/2,o=e.height/2;return n<0&&(i*=-1),r<0&&(o*=-1),{scale:1,rCenter:1,rotate:0,x:i+Math.abs(o)*(i>0?1:-1)/2,y:o/(1+n*n/(r*r)),outside:!0}}function p(e,t){var n=e.trace,r=t.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(e.titleBox.height,r/2)}function h(e){var t,n=e.pull;if(Array.isArray(n))for(n=0,t=0;t<e.pull.length;t++)e.pull[t]>n&&(n=e.pull[t]);return n}t.exports=function(e,t){var n=e._fullLayout;!function(e,t){for(var n,r,i=0;i<e.length;i++)if(n=e[i][0],(r=n.trace).title){var o=a.tester.append("text").attr("data-notex",1).text(r.title).call(a.font,r.titlefont).call(l.convertToTspans,t),s=a.bBox(o.node(),!0);n.titleBox={width:s.width,height:s.height},o.remove()}}(t,e),function(e,t){var n,r,i,o,a,s,l,c,u,d=[];for(i=0;i<e.length;i++)a=e[i][0],s=a.trace,n=t.w*(s.domain.x[1]-s.domain.x[0]),r=t.h*(s.domain.y[1]-s.domain.y[0]),s.title&&"middle center"!==s.titleposition&&(r-=p(a,t)),l=h(s),a.r=Math.min(n,r)/(2+2*l),a.cx=t.l+t.w*(s.domain.x[1]+s.domain.x[0])/2,a.cy=t.t+t.h*(1-s.domain.y[0])-r/2,s.title&&-1!==s.titleposition.indexOf("bottom")&&(a.cy-=p(a,t)),s.scalegroup&&-1===d.indexOf(s.scalegroup)&&d.push(s.scalegroup);for(o=0;o<d.length;o++){for(u=1/0,c=d[o],i=0;i<e.length;i++)(a=e[i][0]).trace.scalegroup===c&&(u=Math.min(u,a.r*a.r/a.vTotal));for(i=0;i<e.length;i++)(a=e[i][0]).trace.scalegroup===c&&(a.r=Math.sqrt(u*a.vTotal))}}(t,n._size);var g=s.makeTraceGroups(n._pielayer,t,"trace").each(function(t){var g=r.select(this),v=t[0],m=v.trace;!function(e){var t,n,r,i=e[0],o=i.trace,a=o.rotation*Math.PI/180,s=2*Math.PI/i.vTotal,l="px0",c="px1";if("counterclockwise"===o.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;a+=s*e[t].v,s*=-1,l="px1",c="px0"}function u(e){return[i.r*Math.sin(e),-i.r*Math.cos(e)]}for(r=u(a),t=0;t<e.length;t++)(n=e[t]).hidden||(n[l]=r,a+=s*n.v/2,n.pxmid=u(a),n.midangle=a,a+=s*n.v/2,r=u(a),n[c]=r,n.largeArc=n.v>i.vTotal/2?1:0)}(t),g.attr("stroke-linejoin","round"),g.each(function(){var g=r.select(this).selectAll("g.slice").data(t);g.enter().append("g").classed("slice",!0),g.exit().remove();var b=[[[],[]],[[],[]]],y=!1;g.each(function(t){if(t.hidden)r.select(this).selectAll("path,g").remove();else{t.pointNumber=t.i,t.curveNumber=m.index,b[t.pxmid[1]<0?0:1][t.pxmid[0]<0?0:1].push(t);var p=v.cx,h=v.cy,g=r.select(this),x=g.selectAll("path.surface").data([t]),_=!1,w=!1;if(x.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),g.select("path.textline").remove(),g.on("mouseover",function(){var o=e._fullLayout,a=e._fullData[m.index];if(!e._dragging&&!1!==o.hovermode){var s=a.hoverinfo;if(Array.isArray(s)&&(s=i.castHoverinfo({hoverinfo:[c.castOption(s,t.pts)],_module:m._module},o,0)),"all"===s&&(s="label+text+value+percent+name"),"none"!==s&&"skip"!==s&&s){var l=d(t,v),f=p+t.pxmid[0]*(1-l),g=h+t.pxmid[1]*(1-l),b=n.separators,y=[];if(-1!==s.indexOf("label")&&y.push(t.label),-1!==s.indexOf("text")){var x=c.castOption(a.hovertext||a.text,t.pts);x&&y.push(x)}-1!==s.indexOf("value")&&y.push(c.formatPieValue(t.v,b)),-1!==s.indexOf("percent")&&y.push(c.formatPiePercent(t.v/v.vTotal,b));var k=m.hoverlabel,T=k.font;i.loneHover({x0:f-l*v.r,x1:f+l*v.r,y:g,text:y.join("<br>"),name:-1!==s.indexOf("name")?a.name:void 0,idealAlign:t.pxmid[0]<0?"left":"right",color:c.castOption(k.bgcolor,t.pts)||t.color,borderColor:c.castOption(k.bordercolor,t.pts),fontFamily:c.castOption(T.family,t.pts),fontSize:c.castOption(T.size,t.pts),fontColor:c.castOption(T.color,t.pts)},{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:e}),_=!0}e.emit("plotly_hover",{points:[u(t,a)],event:r.event}),w=!0}}).on("mouseout",function(n){var o=e._fullLayout,a=e._fullData[m.index];w&&(n.originalEvent=r.event,e.emit("plotly_unhover",{points:[u(t,a)],event:r.event}),w=!1),_&&(i.loneUnhover(o._hoverlayer.node()),_=!1)}).on("click",function(){var n=e._fullLayout,o=e._fullData[m.index];e._dragging||!1===n.hovermode||(e._hoverdata=[u(t,o)],i.click(e,r.event))}),m.pull){var k=+c.castOption(m.pull,t.pts)||0;k>0&&(p+=k*t.pxmid[0],h+=k*t.pxmid[1])}t.cxFinal=p,t.cyFinal=h;var T=m.hole;if(t.v===v.vTotal){var A="M"+(p+t.px0[0])+","+(h+t.px0[1])+O(t.px0,t.pxmid,!0,1)+O(t.pxmid,t.px0,!0,1)+"Z";T?x.attr("d","M"+(p+T*t.px0[0])+","+(h+T*t.px0[1])+O(t.px0,t.pxmid,!1,T)+O(t.pxmid,t.px0,!1,T)+"Z"+A):x.attr("d",A)}else{var C=O(t.px0,t.px1,!0,1);if(T){var S=1-T;x.attr("d","M"+(p+T*t.px1[0])+","+(h+T*t.px1[1])+O(t.px1,t.px0,!1,T)+"l"+S*t.px0[0]+","+S*t.px0[1]+C+"Z")}else x.attr("d","M"+p+","+h+"l"+t.px0[0]+","+t.px0[1]+C+"Z")}var M=c.castOption(m.textposition,t.pts),E=g.selectAll("g.slicetext").data(t.text&&"none"!==M?[0]:[]);E.enter().append("g").classed("slicetext",!0),E.exit().remove(),E.each(function(){var n=s.ensureSingle(r.select(this),"text","",function(e){e.attr("data-notex",1)});n.text(t.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(a.font,"outside"===M?function(e,t,n){var r=c.castOption(e.outsidetextfont.color,t.pts)||c.castOption(e.textfont.color,t.pts)||n.color,i=c.castOption(e.outsidetextfont.family,t.pts)||c.castOption(e.textfont.family,t.pts)||n.family,o=c.castOption(e.outsidetextfont.size,t.pts)||c.castOption(e.textfont.size,t.pts)||n.size;return{color:r,family:i,size:o}}(m,t,e._fullLayout.font):function(e,t,n){var r=c.castOption(e.insidetextfont.color,t.pts);!r&&e._input.textfont&&(r=c.castOption(e._input.textfont.color,t.pts));var i=c.castOption(e.insidetextfont.family,t.pts)||c.castOption(e.textfont.family,t.pts)||n.family,a=c.castOption(e.insidetextfont.size,t.pts)||c.castOption(e.textfont.size,t.pts)||n.size;return{color:r||o.contrast(t.color),family:i,size:a}}(m,t,e._fullLayout.font)).call(l.convertToTspans,e);var i,u=a.bBox(n.node());"outside"===M?i=f(u,t):(i=function(e,t,n){var r=Math.sqrt(e.width*e.width+e.height*e.height),i=e.width/e.height,o=Math.PI*Math.min(t.v/n.vTotal,.5),a=1-n.trace.hole,s=d(t,n),l={scale:s*n.r*2/r,rCenter:1-s,rotate:0};if(l.scale>=1)return l;var c=i+1/(2*Math.tan(o)),u=n.r*Math.min(1/(Math.sqrt(c*c+.5)+c),a/(Math.sqrt(i*i+a/2)+i)),f={scale:2*u/e.height,rCenter:Math.cos(u/n.r)-u*i/n.r,rotate:(180/Math.PI*t.midangle+720)%180-90},p=1/i,h=p+1/(2*Math.tan(o)),g=n.r*Math.min(1/(Math.sqrt(h*h+.5)+h),a/(Math.sqrt(p*p+a/2)+p)),v={scale:2*g/e.width,rCenter:Math.cos(g/n.r)-g/i/n.r,rotate:(180/Math.PI*t.midangle+810)%180-90},m=v.scale>f.scale?v:f;return l.scale<1&&m.scale>l.scale?m:l}(u,t,v),"auto"===M&&i.scale<1&&(n.call(a.font,m.outsidetextfont),m.outsidetextfont.family===m.insidetextfont.family&&m.outsidetextfont.size===m.insidetextfont.size||(u=a.bBox(n.node())),i=f(u,t)));var g=p+t.pxmid[0]*i.rCenter+(i.x||0),b=h+t.pxmid[1]*i.rCenter+(i.y||0);i.outside&&(t.yLabelMin=b-u.height/2,t.yLabelMid=b,t.yLabelMax=b+u.height/2,t.labelExtraX=0,t.labelExtraY=0,y=!0),n.attr("transform","translate("+g+","+b+")"+(i.scale<1?"scale("+i.scale+")":"")+(i.rotate?"rotate("+i.rotate+")":"")+"translate("+-(u.left+u.right)/2+","+-(u.top+u.bottom)/2+")")})}function O(e,n,r,i){return"a"+i*v.r+","+i*v.r+" 0 "+t.largeArc+(r?" 1 ":" 0 ")+i*(n[0]-e[0])+","+i*(n[1]-e[1])}});var x=r.select(this).selectAll("g.titletext").data(m.title?[0]:[]);x.enter().append("g").classed("titletext",!0),x.exit().remove(),x.each(function(){var t,i=s.ensureSingle(r.select(this),"text","",function(e){e.attr("data-notex",1)});i.text(m.title).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(a.font,m.titlefont).call(l.convertToTspans,e),t="middle center"===m.titleposition?function(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.titlefont.size}}(v):function(e,t){var n,r,i=1,o=1,a=e.trace,s={x:e.cx,y:e.cy},l={tx:0,ty:0};l.ty+=a.titlefont.size,r=h(a),-1!==a.titleposition.indexOf("top")?(s.y-=(1+r)*e.r,l.ty-=e.titleBox.height):-1!==a.titleposition.indexOf("bottom")&&(s.y+=(1+r)*e.r);-1!==a.titleposition.indexOf("left")?(n=t.w*(a.domain.x[1]-a.domain.x[0])/2+e.r,s.x-=(1+r)*e.r,l.tx+=e.titleBox.width/2):-1!==a.titleposition.indexOf("center")?n=t.w*(a.domain.x[1]-a.domain.x[0]):-1!==a.titleposition.indexOf("right")&&(n=t.w*(a.domain.x[1]-a.domain.x[0])/2+e.r,s.x+=(1+r)*e.r,l.tx-=e.titleBox.width/2);return i=n/e.titleBox.width,o=p(e,t)/e.titleBox.height,{x:s.x,y:s.y,scale:Math.min(i,o),tx:l.tx,ty:l.ty}}(v,n._size),i.attr("transform","translate("+t.x+","+t.y+")"+(t.scale<1?"scale("+t.scale+")":"")+"translate("+t.tx+","+t.ty+")")}),y&&function(e,t){var n,r,i,o,a,s,l,u,d,f,p,h,g;function v(e,t){return e.pxmid[1]-t.pxmid[1]}function m(e,t){return t.pxmid[1]-e.pxmid[1]}function b(e,n){n||(n={});var i,u,d,p,h,g,v=n.labelExtraY+(r?n.yLabelMax:n.yLabelMin),m=r?e.yLabelMin:e.yLabelMax,b=r?e.yLabelMax:e.yLabelMin,y=e.cyFinal+a(e.px0[1],e.px1[1]),x=v-m;if(x*l>0&&(e.labelExtraY=x),Array.isArray(t.pull))for(u=0;u<f.length;u++)(d=f[u])===e||(c.castOption(t.pull,e.pts)||0)>=(c.castOption(t.pull,d.pts)||0)||((e.pxmid[1]-d.pxmid[1])*l>0?(p=d.cyFinal+a(d.px0[1],d.px1[1]),(x=p-m-e.labelExtraY)*l>0&&(e.labelExtraY+=x)):(b+e.labelExtraY-y)*l>0&&(i=3*s*Math.abs(u-f.indexOf(e)),h=d.cxFinal+o(d.px0[0],d.px1[0]),(g=h+i-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*s>0&&(e.labelExtraX+=g)))}for(r=0;r<2;r++)for(i=r?v:m,a=r?Math.max:Math.min,l=r?1:-1,n=0;n<2;n++){for(o=n?Math.max:Math.min,s=n?1:-1,(u=e[r][n]).sort(i),d=e[1-r][n],f=d.concat(u),h=[],p=0;p<u.length;p++)void 0!==u[p].yLabelMid&&h.push(u[p]);for(g=!1,p=0;r&&p<d.length;p++)if(void 0!==d[p].yLabelMid){g=d[p];break}for(p=0;p<h.length;p++){var y=p&&h[p-1];g&&!p&&(y=g),b(h[p],y)}}}(b,m),g.each(function(e){if(e.labelExtraX||e.labelExtraY){var t=r.select(this),n=t.select("g.slicetext text");n.attr("transform","translate("+e.labelExtraX+","+e.labelExtraY+")"+n.attr("transform"));var i=e.cxFinal+e.pxmid[0],a="M"+i+","+(e.cyFinal+e.pxmid[1]),s=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var l=e.labelExtraX*e.pxmid[1]/e.pxmid[0],c=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);Math.abs(l)>Math.abs(c)?a+="l"+c*e.pxmid[0]/e.pxmid[1]+","+c+"H"+(i+e.labelExtraX+s):a+="l"+e.labelExtraX+","+l+"v"+(c-l)+"h"+s}else a+="V"+(e.yLabelMid+e.labelExtraY)+"h"+s;t.append("path").classed("textline",!0).call(o.stroke,m.outsidetextfont.color).attr({"stroke-width":Math.min(2,m.outsidetextfont.size/8),d:a,fill:"none"})}})})});setTimeout(function(){g.selectAll("tspan").each(function(){var e=r.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)}},{"../../components/color":43,"../../components/drawing":68,"../../components/fx":85,"../../lib":161,"../../lib/svg_text_utils":183,"./event_data":274,"./helpers":275,d3:8}],280:[function(e,t,n){"use strict";var r=e("d3"),i=e("./style_one");t.exports=function(e){e._fullLayout._pielayer.selectAll(".trace").each(function(e){var t=e[0].trace,n=r.select(this);n.style({opacity:t.opacity}),n.selectAll("path.surface").each(function(e){r.select(this).call(i,e,t)})})}},{"./style_one":281,d3:8}],281:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("./helpers").castOption;t.exports=function(e,t,n){var o=n.marker.line,a=i(o.color,t.pts)||r.defaultLine,s=i(o.width,t.pts)||0;e.style({"stroke-width":s}).call(r.fill,t.color).call(r.stroke,a)}},{"../../components/color":43,"./helpers":275}],282:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx"),r.mergeArray(t.customdata,e,"data"),r.mergeArray(t.textposition,e,"tp"),t.textfont&&(r.mergeArray(t.textfont.size,e,"ts"),r.mergeArray(t.textfont.color,e,"tc"),r.mergeArray(t.textfont.family,e,"tf"));var i=t.marker;if(i){r.mergeArray(i.size,e,"ms"),r.mergeArray(i.opacity,e,"mo"),r.mergeArray(i.symbol,e,"mx"),r.mergeArray(i.color,e,"mc");var o=i.line;i.line&&(r.mergeArray(o.color,e,"mlc"),r.mergeArray(o.width,e,"mlw"));var a=i.gradient;a&&"none"!==a.type&&(r.mergeArray(a.type,e,"mgt"),r.mergeArray(a.color,e,"mgc"))}}},{"../../lib":161}],283:[function(e,t,n){"use strict";var r=e("../../components/colorscale/attributes"),i=e("../../components/colorbar/attributes"),o=e("../../plots/font_attributes"),a=e("../../components/drawing/attributes").dash,s=e("../../components/drawing"),l=(e("./constants"),e("../../lib/extend").extendFlat);t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:l({},a,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:l({symbol:{valType:"enumerated",values:s.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},colorbar:i,line:l({width:{valType:"number",min:0,arrayOk:!0,editType:"style"},editType:"calc"},r("marker.line")),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},r("marker")),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:o({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorbar/attributes":44,"../../components/colorscale/attributes":50,"../../components/drawing":68,"../../components/drawing/attributes":67,"../../lib/extend":155,"../../plots/font_attributes":233,"./constants":287}],284:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),o=e("../../plots/cartesian/axes"),a=e("../../constants/numerical").BADNUM,s=e("./subtypes"),l=e("./colorscale_calc"),c=e("./arrays_to_calcdata"),u=e("./calc_selection");function d(e,t,n,r,i,a,l){var c=t._length,u=e._fullLayout,d=n._id,f=r._id,p=u._firstScatter[h(t)]===t.uid,v=(g(t,u,n,r)||{}).orientation,m=t.fill;n._minDtick=0,r._minDtick=0;var b={padded:!0},y={padded:!0};l&&(b.ppad=y.ppad=l);var x=c<2||i[0]!==i[c-1]||a[0]!==a[c-1];x&&("tozerox"===m||"tonextx"===m&&(p||"h"===v))?b.tozero=!0:(t.error_y||{}).visible||"tonexty"!==m&&"tozeroy"!==m&&(s.hasMarkers(t)||s.hasText(t))||(b.padded=!1,b.ppad=0),x&&("tozeroy"===m||"tonexty"===m&&(p||"v"===v))?y.tozero=!0:"tonextx"!==m&&"tozerox"!==m||(y.padded=!1),d&&(t._extremes[d]=o.findExtremes(n,i,b)),f&&(t._extremes[f]=o.findExtremes(r,a,y))}function f(e,t){if(s.hasMarkers(e)){var n,r=e.marker,a=1.6*(e.marker.sizeref||1);if(n="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/a),3)}:function(e){return Math.max((e||0)/a,3)},i.isArrayOrTypedArray(r.size)){var l={type:"linear"};o.setConvert(l);for(var c=l.makeCalcdata(e.marker,"size"),u=new Array(t),d=0;d<t;d++)u[d]=n(c[d]);return u}return n(r.size)}}function p(e,t){var n=h(t),r=e._firstScatter;r[n]||(r[n]=t.uid)}function h(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function g(e,t,n,r){var i=e.stackgroup;if(i){var o=t._scatterStackOpts[n._id+r._id][i],a="v"===o.orientation?r:n;return"linear"===a.type||"log"===a.type?o:void 0}}t.exports={calc:function(e,t){var n,s,h,v,m,b,y=e._fullLayout,x=o.getFromId(e,t.xaxis||"x"),_=o.getFromId(e,t.yaxis||"y"),w=x.makeCalcdata(t,"x"),k=_.makeCalcdata(t,"y"),T=t._length,A=new Array(T),C=t.ids,S=g(t,y,x,_),M=!1;p(y,t);var E,O="x",L="y";for(S?(S.traceIndices.push(t.index),(n="v"===S.orientation)?(L="s",E="x"):(O="s",E="y"),m="interpolate"===S.stackgaps):d(e,t,x,_,w,k,f(t,T)),s=0;s<T;s++){var P=A[s]={},D=r(w[s]),R=r(k[s]);D&&R?(P[O]=w[s],P[L]=k[s]):S&&(n?D:R)?(P[E]=n?w[s]:k[s],P.gap=!0,m?(P.s=a,M=!0):P.s=0):P[O]=P[L]=a,C&&(P.id=String(C[s]))}if(c(A,t),l(t),u(A,t),S){for(s=0;s<A.length;)A[s][E]===a?A.splice(s,1):s++;if(i.sort(A,function(e,t){return e[E]-t[E]||e.i-t.i}),M){for(s=0;s<A.length-1&&A[s].gap;)s++;for((b=A[s].s)||(b=A[s].s=0),h=0;h<s;h++)A[h].s=b;for(v=A.length-1;v>s&&A[v].gap;)v--;for(b=A[v].s,h=A.length-1;h>v;h--)A[h].s=b;for(;s<v;)if(A[++s].gap){for(h=s+1;A[h].gap;)h++;for(var F=A[s-1][E],j=A[s-1].s,I=(A[h].s-j)/(A[h][E]-F);s<h;)A[s].s=j+(A[s][E]-F)*I,s++}}}return A},calcMarkerSize:f,calcAxisExpansion:d,setFirstScatter:p,getStackOpts:g}},{"../../constants/numerical":143,"../../lib":161,"../../plots/cartesian/axes":206,"./arrays_to_calcdata":282,"./calc_selection":285,"./colorscale_calc":286,"./subtypes":307,"fast-isnumeric":10}],285:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},{"../../lib":161}],286:[function(e,t,n){"use strict";var r=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/calc"),o=e("./subtypes");t.exports=function(e){o.hasLines(e)&&r(e,"line")&&i(e,e.line.color,"line","c"),o.hasMarkers(e)&&(r(e,"marker")&&i(e,e.marker.color,"marker","c"),r(e,"marker.line")&&i(e,e.marker.line.color,"marker.line","c"))}},{"../../components/colorscale/calc":51,"../../components/colorscale/has_colorscale":57,"./subtypes":307}],287:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20}},{}],288:[function(e,t,n){"use strict";var r=e("./calc");function i(e,t,n,r,i,o,a){i[r]=!0;var s={i:null,gap:!0,s:0};if(s[a]=n,e.splice(t,0,s),t&&n===e[t-1][a]){var l=e[t-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else o&&(s.s=function(e,t,n,r){var i=e[t-1],o=e[t+1];return o?i?i.s+(o.s-i.s)*(n-i[r])/(o[r]-i[r]):o.s:i.s}(e,t,n,a));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}t.exports=function(e,t){var n=t.xaxis,o=t.yaxis,a=n._id+o._id,s=e._fullLayout._scatterStackOpts[a];if(s){var l,c,u,d,f,p,h,g,v,m,b,y,x,_,w,k=e.calcdata;for(var T in s){var A=(m=s[T]).traceIndices;if(A.length){for(b="interpolate"===m.stackgaps,y=m.groupnorm,"v"===m.orientation?(x="x",_="y"):(x="y",_="x"),w=new Array(A.length),l=0;l<w.length;l++)w[l]=!1;p=k[A[0]];var C=new Array(p.length);for(l=0;l<p.length;l++)C[l]=p[l][x];for(l=1;l<A.length;l++){for(f=k[A[l]],c=u=0;c<f.length;c++){for(h=f[c][x];h>C[u]&&u<C.length;u++)i(f,c,C[u],l,w,b,x),c++;if(h!==C[u]){for(d=0;d<l;d++)i(k[A[d]],u,h,d,w,b,x);C.splice(u,0,h)}u++}for(;u<C.length;u++)i(f,c,C[u],l,w,b,x),c++}var S=C.length;for(c=0;c<p.length;c++){for(g=p[c][_]=p[c].s,l=1;l<A.length;l++)(f=k[A[l]])[0].trace._rawLength=f[0].trace._length,f[0].trace._length=S,g+=f[c].s,f[c][_]=g;if(y)for(v=("fraction"===y?g:g/100)||1,l=0;l<A.length;l++){var M=k[A[l]][c];M[_]/=v,M.sNorm=M.s/v}}for(l=0;l<A.length;l++){var E=(f=k[A[l]])[0].trace,O=r.calcMarkerSize(E,E._rawLength),L=Array.isArray(O);if(O&&w[l]||L){var P=O;for(O=new Array(S),c=0;c<S;c++)O[c]=f[c].gap?0:L?P[f[c].i]:P}var D=new Array(S),R=new Array(S);for(c=0;c<S;c++)D[c]=f[c].x,R[c]=f[c].y;r.calcAxisExpansion(e,E,n,o,D,R,O),f[0].t.orientation=m.orientation}}}}}},{"./calc":284}],289:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var i=t-1;i>=0;i--){var o=e[i];if("scatter"===o.type&&o.xaxis===n.xaxis&&o.yaxis===n.yaxis){o.opacity=void 0;break}}}}}},{}],290:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../registry"),o=e("./attributes"),a=e("./constants"),s=e("./subtypes"),l=e("./xy_defaults"),c=e("./stack_defaults"),u=e("./marker_defaults"),d=e("./line_defaults"),f=e("./line_shape_defaults"),p=e("./text_defaults"),h=e("./fillcolor_defaults");t.exports=function(e,t,n,g){function v(n,i){return r.coerce(e,t,o,n,i)}var m=l(e,t,g,v);if(m||(t.visible=!1),t.visible){var b=c(e,t,g,v),y=!b&&m<a.PTS_LINESONLY?"lines+markers":"lines";v("text"),v("hovertext"),v("mode",y),s.hasLines(t)&&(d(e,t,n,g,v),f(e,t,v),v("connectgaps"),v("line.simplify")),s.hasMarkers(t)&&u(e,t,n,g,v,{gradient:!0}),s.hasText(t)&&p(e,t,g,v);var x=[];(s.hasMarkers(t)||s.hasText(t))&&(v("cliponaxis"),v("marker.maxdisplayed"),x.push("points")),v("fill",b?b.fillDflt:"none"),"none"!==t.fill&&(h(e,t,n,v),s.hasLines(t)||f(e,t,v)),"tonext"!==t.fill&&"toself"!==t.fill||x.push("fills"),v("hoveron",x.join("+")||"points");var _=i.getComponentMethod("errorbars","supplyDefaults");_(e,t,n,{axis:"y"}),_(e,t,n,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,v)}}},{"../../lib":161,"../../registry":246,"./attributes":283,"./constants":287,"./fillcolor_defaults":292,"./line_defaults":296,"./line_shape_defaults":298,"./marker_defaults":302,"./stack_defaults":305,"./subtypes":307,"./text_defaults":308,"./xy_defaults":309}],291:[function(e,t,n){"use strict";var r=e("../../lib");function i(e){return e||0===e}t.exports=function(e,t,n){var o=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},a=r.extractOption(e,t,"htx","hovertext");if(i(a))return o(a);var s=r.extractOption(e,t,"tx","text");return i(s)?o(s):void 0}},{"../../lib":161}],292:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,o){var a=!1;if(t.marker){var s=t.marker.color,l=(t.marker.line||{}).color;s&&!i(s)?a=s:l&&!i(l)&&(a=l)}o("fillcolor",r.addOpacity((t.line||{}).color||a||n,.5))}},{"../../components/color":43,"../../lib":161}],293:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("./subtypes");t.exports=function(e,t){var n,o;if("lines"===e.mode)return(n=e.line.color)&&r.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var a=t.mcc||(e.marker||{}).color,s=t.mlcc||((e.marker||{}).line||{}).color;return(o=a&&r.opacity(a)?a:s&&r.opacity(s)&&(t.mlw||((e.marker||{}).line||{}).width)?s:"")?r.opacity(o)<.3?r.addOpacity(o,.3):o:(n=(e.line||{}).color)&&r.opacity(n)&&i.hasLines(e)&&e.line.width?n:e.fillcolor}},{"../../components/color":43,"./subtypes":307}],294:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/fx"),o=e("../../registry"),a=e("./get_trace_color"),s=e("../../components/color"),l=e("./fill_hover_text");t.exports=function(e,t,n,c){var u=e.cd,d=u[0].trace,f=e.xa,p=e.ya,h=f.c2p(t),g=p.c2p(n),v=[h,g],m=d.hoveron||"",b=-1!==d.mode.indexOf("markers")?3:.5;if(-1!==m.indexOf("points")){var y=function(e){var t=Math.max(b,e.mrc||0),n=f.c2p(e.x)-h,r=p.c2p(e.y)-g;return Math.max(Math.sqrt(n*n+r*r)-t,1-b/t)},x=i.getDistanceFunction(c,function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(f.c2p(e.x)-h);return r<t?n*r/t:r-t+n},function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(p.c2p(e.y)-g);return r<t?n*r/t:r-t+n},y);if(i.getClosest(u,x,e),!1!==e.index){var _=u[e.index],w=f.c2p(_.x,!0),k=p.c2p(_.y,!0),T=_.mrc||1;e.index=_.i;var A=u[0].t.orientation,C=A&&(_.sNorm||_.s),S="h"===A?C:_.x,M="v"===A?C:_.y;return r.extendFlat(e,{color:a(d,_),x0:w-T,x1:w+T,xLabelVal:S,y0:k-T,y1:k+T,yLabelVal:M,spikeDistance:y(_)}),l(_,d,e),o.getComponentMethod("errorbars","hoverInfo")(_,d,e),[e]}}if(-1!==m.indexOf("fills")&&d._polygons){var E,O,L,P,D,R,F,j,I,N=d._polygons,z=[],q=!1,H=1/0,B=-1/0,V=1/0,U=-1/0;for(E=0;E<N.length;E++)(L=N[E]).contains(v)&&(q=!q,z.push(L),V=Math.min(V,L.ymin),U=Math.max(U,L.ymax));if(q){var $=((V=Math.max(V,0))+(U=Math.min(U,p._length)))/2;for(E=0;E<z.length;E++)for(P=z[E].pts,O=1;O<P.length;O++)(j=P[O-1][1])>$!=(I=P[O][1])>=$&&(R=P[O-1][0],F=P[O][0],I-j&&(D=R+(F-R)*($-j)/(I-j),H=Math.min(H,D),B=Math.max(B,D)));H=Math.max(H,0),B=Math.min(B,f._length);var W=s.defaultLine;return s.opacity(d.fillcolor)?W=d.fillcolor:s.opacity((d.line||{}).color)&&(W=d.line.color),r.extendFlat(e,{distance:e.maxHoverDistance,x0:H,x1:B,y0:$,y1:$,color:W}),delete e.index,d.text&&!Array.isArray(d.text)?e.text=String(d.text):e.text=d.name,[e]}}}},{"../../components/color":43,"../../components/fx":85,"../../lib":161,"../../registry":246,"./fill_hover_text":291,"./get_trace_color":293}],295:[function(e,t,n){"use strict";var r={},i=e("./subtypes");r.hasLines=i.hasLines,r.hasMarkers=i.hasMarkers,r.hasText=i.hasText,r.isBubble=i.isBubble,r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.crossTraceDefaults=e("./cross_trace_defaults"),r.calc=e("./calc").calc,r.crossTraceCalc=e("./cross_trace_calc"),r.arraysToCalcdata=e("./arrays_to_calcdata"),r.plot=e("./plot"),r.colorbar=e("./marker_colorbar"),r.style=e("./style").style,r.styleOnSelect=e("./style").styleOnSelect,r.hoverPoints=e("./hover"),r.selectPoints=e("./select"),r.animatable=!0,r.moduleType="trace",r.name="scatter",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],r.meta={},t.exports=r},{"../../plots/cartesian":218,"./arrays_to_calcdata":282,"./attributes":283,"./calc":284,"./cross_trace_calc":288,"./cross_trace_defaults":289,"./defaults":290,"./hover":294,"./marker_colorbar":301,"./plot":303,"./select":304,"./style":306,"./subtypes":307}],296:[function(e,t,n){"use strict";var r=e("../../lib").isArrayOrTypedArray,i=e("../../components/colorscale/has_colorscale"),o=e("../../components/colorscale/defaults");t.exports=function(e,t,n,a,s,l){var c=(e.marker||{}).color;(s("line.color",n),i(e,"line"))?o(e,t,a,s,{prefix:"line.",cLetter:"c",noScale:!0}):s("line.color",!r(c)&&c||n);s("line.width"),(l||{}).noDash||s("line.dash")}},{"../../components/colorscale/defaults":53,"../../components/colorscale/has_colorscale":57,"../../lib":161}],297:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),i=r.BADNUM,o=r.LOG_CLIP,a=o+.5,s=o-.5,l=e("../../lib"),c=l.segmentsIntersect,u=l.constrain,d=e("./constants");t.exports=function(e,t){var n,r,o,f,p,h,g,v,m,b,y,x,_,w,k,T,A,C,S=t.xaxis,M=t.yaxis,E="log"===S.type,O="log"===M.type,L=S._length,P=M._length,D=t.connectGaps,R=t.baseTolerance,F=t.shape,j="linear"===F,I=[],N=d.minTolerance,z=new Array(e.length),q=0;function H(t){var n=e[t];if(!n)return!1;var r=S.c2p(n.x),o=M.c2p(n.y);if(r===i){if(E&&(r=S.c2p(n.x,!0)),r===i)return!1;O&&o===i&&(r*=Math.abs(S._m*P*(S._m>0?a:s)/(M._m*L*(M._m>0?a:s)))),r*=1e3}if(o===i){if(O&&(o=M.c2p(n.y,!0)),o===i)return!1;o*=1e3}return[r,o]}function B(e,t,n,r){var i=n-e,o=r-t,a=.5-e,s=.5-t,l=i*i+o*o,c=i*a+o*s;if(c>0&&c<l){var u=a*o-s*i;if(u*u<l)return!0}}function V(e,t){var n=e[0]/L,r=e[1]/P,i=Math.max(0,-n,n-1,-r,r-1);return i&&void 0!==A&&B(n,r,A,C)&&(i=0),i&&t&&B(n,r,t[0]/L,t[1]/P)&&(i=0),(1+d.toleranceGrowth*i)*R}function U(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}var $,W,X,G,Y,Z,J,K=d.maxScreensAway,Q=-L*K,ee=L*(1+K),te=-P*K,ne=P*(1+K),re=[[Q,te,ee,te],[ee,te,ee,ne],[ee,ne,Q,ne],[Q,ne,Q,te]];function ie(e){if(e[0]<Q||e[0]>ee||e[1]<te||e[1]>ne)return[u(e[0],Q,ee),u(e[1],te,ne)]}function oe(e,t){return e[0]===t[0]&&(e[0]===Q||e[0]===ee)||(e[1]===t[1]&&(e[1]===te||e[1]===ne)||void 0)}function ae(e,t,n){return function(r,i){var o=ie(r),a=ie(i),s=[];if(o&&a&&oe(o,a))return s;o&&s.push(o),a&&s.push(a);var c=2*l.constrain((r[e]+i[e])/2,t,n)-((o||r)[e]+(a||i)[e]);c&&((o&&a?c>0==o[e]>a[e]?o:a:o||a)[e]+=c);return s}}function se(e){var t=e[0],n=e[1],r=t===z[q-1][0],i=n===z[q-1][1];if(!r||!i)if(q>1){var o=t===z[q-2][0],a=n===z[q-2][1];r&&(t===Q||t===ee)&&o?a?q--:z[q-1]=e:i&&(n===te||n===ne)&&a?o?q--:z[q-1]=e:z[q++]=e}else z[q++]=e}function le(e){z[q-1][0]!==e[0]&&z[q-1][1]!==e[1]&&se([X,G]),se(e),Y=null,X=G=0}function ce(e){if(A=e[0]/L,C=e[1]/P,$=e[0]<Q?Q:e[0]>ee?ee:0,W=e[1]<te?te:e[1]>ne?ne:0,$||W){if(q)if(Y){var t=J(Y,e);t.length>1&&(le(t[0]),z[q++]=t[1])}else Z=J(z[q-1],e)[0],z[q++]=Z;else z[q++]=[$||e[0],W||e[1]];var n=z[q-1];$&&W&&(n[0]!==$||n[1]!==W)?(Y&&(X!==$&&G!==W?se(X&&G?function(e,t){var n=t[0]-e[0],r=(t[1]-e[1])/n;return(e[1]*t[0]-t[1]*e[0])/n>0?[r>0?Q:ee,ne]:[r>0?ee:Q,te]}(Y,e):[X||$,G||W]):X&&G&&se([X,G])),se([$,W])):X-$&&G-W&&se([$||X,W||G]),Y=e,X=$,G=W}else Y&&le(J(Y,e)[0]),z[q++]=e}for("linear"===F||"spline"===F?J=function(e,t){for(var n=[],r=0,i=0;i<4;i++){var o=re[i],a=c(e[0],e[1],t[0],t[1],o[0],o[1],o[2],o[3]);a&&(!r||Math.abs(a.x-n[0][0])>1||Math.abs(a.y-n[0][1])>1)&&(a=[a.x,a.y],r&&U(a,e)<U(n[0],e)?n.unshift(a):n.push(a),r++)}return n}:"hv"===F||"vh"===F?J=function(e,t){var n=[],r=ie(e),i=ie(t);return r&&i&&oe(r,i)?n:(r&&n.push(r),i&&n.push(i),n)}:"hvh"===F?J=ae(0,Q,ee):"vhv"===F&&(J=ae(1,te,ne)),n=0;n<e.length;n++)if(r=H(n)){for(q=0,Y=null,ce(r),n++;n<e.length;n++){if(!(f=H(n))){if(D)continue;break}if(j&&t.simplify){var ue=H(n+1);if(!((b=U(f,r))<V(f,ue)*N)){for(v=[(f[0]-r[0])/b,(f[1]-r[1])/b],p=r,y=b,x=w=k=0,g=!1,o=f,n++;n<e.length;n++){if(h=ue,ue=H(n+1),!h){if(D)continue;break}if(T=(m=[h[0]-r[0],h[1]-r[1]])[0]*v[1]-m[1]*v[0],w=Math.min(w,T),(k=Math.max(k,T))-w>V(h,ue))break;o=h,(_=m[0]*v[0]+m[1]*v[1])>y?(y=_,f=h,g=!1):_<x&&(x=_,p=h,g=!0)}if(g?(ce(f),o!==p&&ce(p)):(p!==r&&ce(p),o!==f&&ce(f)),ce(o),n>=e.length||!h)break;ce(h),r=h}}else ce(f)}Y&&se([X||Y[0],G||Y[1]]),I.push(z.slice(0,q))}return I}},{"../../constants/numerical":143,"../../lib":161,"./constants":287}],298:[function(e,t,n){"use strict";t.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],299:[function(e,t,n){"use strict";var r={tonextx:1,tonexty:1,tonext:1};t.exports=function(e,t,n){var i,o,a,s,l,c={},u=!1,d=-1,f=0,p=-1;for(o=0;o<n.length;o++)(a=(i=n[o][0].trace).stackgroup||"")?a in c?l=c[a]:(l=c[a]=f,f++):i.fill in r&&p>=0?l=p:(l=p=f,f++),l<d&&(u=!0),i._groupIndex=d=l;var h=n.slice();u&&h.sort(function(e,t){var n=e[0].trace,r=t[0].trace;return n._groupIndex-r._groupIndex||n.index-r.index});var g={};for(o=0;o<h.length;o++)a=(i=h[o][0].trace).stackgroup||"",!0===i.visible?(i._nexttrace=null,i.fill in r&&(s=g[a],i._prevtrace=s||null,s&&(s._nexttrace=i)),i._ownfill=i.fill&&("tozero"===i.fill.substr(0,6)||"toself"===i.fill||"to"===i.fill.substr(0,2)&&!i._prevtrace),g[a]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return h}},{}],300:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e){var t=e.marker,n=t.sizeref||1,i=t.sizemin||0,o="area"===t.sizemode?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){var t=o(e/2);return r(t)&&t>0?Math.max(t,i):0}}},{"fast-isnumeric":10}],301:[function(e,t,n){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],302:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("../../components/colorscale/has_colorscale"),o=e("../../components/colorscale/defaults"),a=e("./subtypes");t.exports=function(e,t,n,s,l,c){var u=a.isBubble(e),d=(e.line||{}).color;(c=c||{},d&&(n=d),l("marker.symbol"),l("marker.opacity",u?.7:1),l("marker.size"),l("marker.color",n),i(e,"marker")&&o(e,t,s,l,{prefix:"marker.",cLetter:"c"}),c.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),c.noLine||(l("marker.line.color",d&&!Array.isArray(d)&&t.marker.color!==d?d:u?r.background:r.defaultLine),i(e,"marker.line")&&o(e,t,s,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",u?1:0)),u&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),c.gradient)&&("none"!==l("marker.gradient.type")&&l("marker.gradient.color"))}},{"../../components/color":43,"../../components/colorscale/defaults":53,"../../components/colorscale/has_colorscale":57,"./subtypes":307}],303:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../registry"),o=e("../../lib"),a=o.ensureSingle,s=o.identity,l=e("../../components/drawing"),c=e("./subtypes"),u=e("./line_points"),d=e("./link_traces"),f=e("../../lib/polygon").tester;function p(e,t,n,d,p,h,g){var v;!function(e,t,n,i,a){var s=n.xaxis,l=n.yaxis,u=r.extent(o.simpleMap(s.range,s.r2c)),d=r.extent(o.simpleMap(l.range,l.r2c)),f=i[0].trace;if(!c.hasMarkers(f))return;var p=f.marker.maxdisplayed;if(0===p)return;var h=i.filter(function(e){return e.x>=u[0]&&e.x<=u[1]&&e.y>=d[0]&&e.y<=d[1]}),g=Math.ceil(h.length/p),v=0;a.forEach(function(e,n){var r=e[0].trace;c.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<t&&v++});var m=Math.round(v*g/3+Math.floor(v/3)*g/7.1);i.forEach(function(e){delete e.vis}),h.forEach(function(e,t){0===Math.round((t+m)%g)&&(e.vis=!0)})}(0,t,n,d,p);var m=!!g&&g.duration>0;function b(e){return m?e.transition():e}var y=n.xaxis,x=n.yaxis,_=d[0].trace,w=_.line,k=r.select(h),T=a(k,"g","errorbars"),A=a(k,"g","lines"),C=a(k,"g","points"),S=a(k,"g","text");if(i.getComponentMethod("errorbars","plot")(T,n,g),!0===_.visible){var M,E;b(k).style("opacity",_.opacity);var O=_.fill.charAt(_.fill.length-1);"x"!==O&&"y"!==O&&(O=""),n.isRangePlot||(d[0].node3=k);var L="",P=[],D=_._prevtrace;D&&(L=D._prevRevpath||"",E=D._nextFill,P=D._polygons);var R,F,j,I,N,z,q,H,B,V="",U="",$=[],W=o.noop;if(M=_._ownFill,c.hasLines(_)||"none"!==_.fill){for(E&&E.datum(d),-1!==["hv","vh","hvh","vhv"].indexOf(w.shape)?(j=l.steps(w.shape),I=l.steps(w.shape.split("").reverse().join(""))):j=I="spline"===w.shape?function(e){var t=e[e.length-1];return e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]?l.smoothclosed(e.slice(1),w.smoothing):l.smoothopen(e,w.smoothing)}:function(e){return"M"+e.join("L")},N=function(e){return I(e.reverse())},$=u(d,{xaxis:y,yaxis:x,connectGaps:_.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,simplify:w.simplify}),B=_._polygons=new Array($.length),v=0;v<$.length;v++)_._polygons[v]=f($[v]);$.length&&(z=$[0][0],H=(q=$[$.length-1])[q.length-1]),W=function(e){return function(t){if(R=j(t),F=N(t),V?O?(V+="L"+R.substr(1),U=F+"L"+U.substr(1)):(V+="Z"+R,U=F+"Z"+U):(V=R,U=F),c.hasLines(_)&&t.length>1){var n=r.select(this);if(n.datum(d),e)b(n.style("opacity",0).attr("d",R).call(l.lineGroupStyle)).style("opacity",1);else{var i=b(n);i.attr("d",R),l.singleLineStyle(d,i)}}}}}var X=A.selectAll(".js-line").data($);b(X.exit()).style("opacity",0).remove(),X.each(W(!1)),X.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(W(!0)),l.setClipUrl(X,n.layerClipId),$.length?(M?(M.datum(d),z&&H&&(O?("y"===O?z[1]=H[1]=x.c2p(0,!0):"x"===O&&(z[0]=H[0]=y.c2p(0,!0)),b(M).attr("d","M"+H+"L"+z+"L"+V.substr(1)).call(l.singleFillStyle)):b(M).attr("d",V+"Z").call(l.singleFillStyle))):E&&("tonext"===_.fill.substr(0,6)&&V&&L?("tonext"===_.fill?b(E).attr("d",V+"Z"+L+"Z").call(l.singleFillStyle):b(E).attr("d",V+"L"+L.substr(1)+"Z").call(l.singleFillStyle),_._polygons=_._polygons.concat(P)):(Y(E),_._polygons=null)),_._prevRevpath=U,_._prevPolygons=B):(M?Y(M):E&&Y(E),_._polygons=_._prevRevpath=_._prevPolygons=null),C.datum(d),S.datum(d),function(t,i,o){var a,u=o[0].trace,d=c.hasMarkers(u),f=c.hasText(u),p=ee(u),h=te,g=te;if(d||f){var v=s,_=u.stackgroup,w=_&&"infer zero"===e._fullLayout._scatterStackOpts[y._id+x._id][_].stackgaps;u.marker.maxdisplayed||u._needsCull?v=w?J:Z:_&&!w&&(v=K),d&&(h=v),f&&(g=v)}var k,T=(a=t.selectAll("path.point").data(h,p)).enter().append("path").classed("point",!0);m&&T.call(l.pointStyle,u,e).call(l.translatePoints,y,x).style("opacity",0).transition().style("opacity",1),a.order(),d&&(k=l.makePointStyleFns(u)),a.each(function(t){var i=r.select(this),o=b(i);l.translatePoint(t,o,y,x)?(l.singlePointStyle(t,o,u,k,e),n.layerClipId&&l.hideOutsideRangePoint(t,o,y,x,u.xcalendar,u.ycalendar),u.customdata&&i.classed("plotly-customdata",null!==t.data&&void 0!==t.data)):o.remove()}),m?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=i.selectAll("g").data(g,p)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each(function(e){var t=r.select(this),i=b(t.select("text"));l.translatePoint(e,i,y,x)?n.layerClipId&&l.hideOutsideRangePoint(e,t,y,x,u.xcalendar,u.ycalendar):t.remove()}),a.selectAll("text").call(l.textPointStyle,u,e).each(function(e){var t=y.c2p(e.x),n=x.c2p(e.y);r.select(this).selectAll("tspan.line").each(function(){b(r.select(this)).attr({x:t,y:n})})}),a.exit().remove()}(C,S,d);var G=!1===_.cliponaxis?null:n.layerClipId;l.setClipUrl(C,G),l.setClipUrl(S,G)}function Y(e){b(e).attr("d","M0,0Z")}function Z(e){return e.filter(function(e){return!e.gap&&e.vis})}function J(e){return e.filter(function(e){return e.vis})}function K(e){return e.filter(function(e){return!e.gap})}function Q(e){return e.id}function ee(e){if(e.ids)return Q}function te(){return!1}}t.exports=function(e,t,n,i,o,c){var u,f,h=!o,g=!!o&&o.duration>0,v=d(e,t,n);((u=i.selectAll("g.trace").data(v,function(e){return e[0].trace.uid})).enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),u.order(),function(e,t,n){t.each(function(e){var t=a(r.select(this),"g","fills");l.setClipUrl(t,n.layerClipId);var i=e[0].trace,o=[];i._ownfill&&o.push("_ownFill"),i._nexttrace&&o.push("_nextFill");var c=t.selectAll("g").data(o,s);c.enter().append("g"),c.exit().each(function(e){i[e]=null}).remove(),c.order().each(function(e){i[e]=a(r.select(this),"path","js-fill")})})}(0,u,t),g)?(c&&(f=c()),r.transition().duration(o.duration).ease(o.easing).each("end",function(){f&&f()}).each("interrupt",function(){f&&f()}).each(function(){i.selectAll("g.trace").each(function(n,r){p(e,r,t,n,v,this,o)})})):u.each(function(n,r){p(e,r,t,n,v,this,o)});h&&u.exit().remove(),i.selectAll("path:not([d])").remove()}},{"../../components/drawing":68,"../../lib":161,"../../lib/polygon":174,"../../registry":246,"./line_points":297,"./link_traces":299,"./subtypes":307,d3:8}],304:[function(e,t,n){"use strict";var r=e("./subtypes");t.exports=function(e,t){var n,i,o,a,s=e.cd,l=e.xaxis,c=e.yaxis,u=[],d=s[0].trace;if(!r.hasMarkers(d)&&!r.hasText(d))return[];if(!1===t)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)i=s[n],o=l.c2p(i.x),a=c.c2p(i.y),null!==i.i&&t.contains([o,a],!1,n,e)?(u.push({pointNumber:i.i,x:l.c2d(i.x),y:c.c2d(i.y)}),i.selected=1):i.selected=0;return u}},{"./subtypes":307}],305:[function(e,t,n){"use strict";var r=["orientation","groupnorm","stackgaps"];t.exports=function(e,t,n,i){var o=n._scatterStackOpts,a=i("stackgroup");if(a){var s=t.xaxis+t.yaxis,l=o[s];l||(l=o[s]={});var c=l[a],u=!1;c?c.traces.push(t):(c=l[a]={traceIndices:[],traces:[t]},u=!0);for(var d={orientation:t.x&&!t.y?"h":"v"},f=0;f<r.length;f++){var p=r[f],h=p+"Found";if(!c[h]){var g=void 0!==e[p],v="orientation"===p;if((g||u)&&(c[p]=i(p,d[p]),v&&(c.fillDflt="h"===c[p]?"tonextx":"tonexty"),g&&(c[h]=!0,!u&&(delete c.traces[0][p],v))))for(var m=0;m<c.traces.length-1;m++){var b=c.traces[m];b._input.fill!==b.fill&&(b.fill=c.fillDflt)}}}return c}}},{}],306:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/drawing"),o=e("../../registry");function a(e,t,n){i.pointStyle(e.selectAll("path.point"),t,n)}function s(e,t,n){i.textPointStyle(e.selectAll("text"),t,n)}t.exports={style:function(e,t){var n=t?t[0].node3:r.select(e).selectAll("g.trace.scatter");n.style("opacity",function(e){return e[0].trace.opacity}),n.selectAll("g.points").each(function(t){a(r.select(this),t.trace||t[0].trace,e)}),n.selectAll("g.text").each(function(t){s(r.select(this),t.trace||t[0].trace,e)}),n.selectAll("g.trace path.js-line").call(i.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),o.getComponentMethod("errorbars","style")(n)},stylePoints:a,styleText:s,styleOnSelect:function(e,t){var n=t[0].node3,r=t[0].trace;r.selectedpoints?(i.selectedPointStyle(n.selectAll("path.point"),r),i.selectedTextStyle(n.selectAll("text"),r)):(a(n,r,e),s(n,r,e))}}},{"../../components/drawing":68,"../../registry":246,d3:8}],307:[function(e,t,n){"use strict";var r=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return r.isPlainObject(e.marker)&&r.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":161}],308:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t,n,i,o){o=o||{},i("textposition"),r.coerceFont(i,"textfont",n.font),o.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}},{"../../lib":161}],309:[function(e,t,n){"use strict";var r=e("../../registry");t.exports=function(e,t,n,i){var o,a=i("x"),s=i("y");if(r.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),a)s?o=Math.min(a.length,s.length):(o=a.length,i("y0"),i("dy"));else{if(!s)return 0;o=t.y.length,i("x0"),i("dx")}return t._length=o,o}},{"../../registry":246}]},{},[5])(5)})}).call(t,n(1),n(0))},function(e,t,n){"use strict";(function(e){var r=n(10),i=n.n(r),o=n(11),a=n.n(o),s=n(5),l=n.n(s),c=n(12),u=(n.n(c),n(4)),d=n.n(u),f=n(24),p=n.n(f),h=n(27),g=n.n(h),v=n(30),m=n.n(v),b=n(31),y=n.n(b),x="function"==typeof Promise?Promise:i.a;function _(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}var w,k,T=Function.prototype.toString,A=T.call(Object);function C(e){var t,n,r;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=C(e[n]);return t}if(e instanceof Date)return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return _(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&T.call(n)==A}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=C(e[n]);void 0!==i&&(t[n]=i)}return t}function S(e){var t=!1;return a()(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function M(e){return a()(function(t){var n=this,r="function"==typeof(t=C(t))[t.length-1]&&t.pop(),i=new x(function(r,i){var o;try{var a=S(function(e,t){e?i(e):r(t)});t.push(a),(o=e.apply(n,t))&&"function"==typeof o.then&&r(o)}catch(e){i(e)}});return r&&i.then(function(e){r(null,e)},r),i})}function E(e,t){return M(a()(function(n){if(this._closed)return x.reject(new Error("database is closed"));if(this._destroyed)return x.reject(new Error("database is destroyed"));var r=this;return function(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],i=0;i<n.length-1;i++)r.push(n[i]);e.constructor.emit("debug",r);var o=n[n.length-1];n[n.length-1]=function(n,r){var i=["api",e.name,t];i=i.concat(n?["error",n]:["success",r]),e.constructor.emit("debug",i),o(n,r)}}}(r,e,n),this.taskqueue.isReady?t.apply(this,n):new x(function(t,i){r.taskqueue.addTask(function(o){o?i(o):t(r[e].apply(r,n))})})}))}function O(e){return"$"+e}function L(e){return e.substring(1)}function P(){this._store={}}function D(e){if(this._store=new P,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}function R(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}P.prototype.get=function(e){var t=O(e);return this._store[t]},P.prototype.set=function(e,t){var n=O(e);return this._store[n]=t,!0},P.prototype.has=function(e){return O(e)in this._store},P.prototype.delete=function(e){var t=O(e),n=t in this._store;return delete this._store[t],n},P.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n];e(this._store[i],i=L(i))}},Object.defineProperty(P.prototype,"size",{get:function(){return Object.keys(this._store).length}}),D.prototype.add=function(e){return this._store.set(e,!0)},D.prototype.has=function(e){return this._store.has(e)},D.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})},Object.defineProperty(D.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(w=D,k=P):(w=Set,k=Map);var F,j=6;function I(e){return e}function N(e){return[{ok:e}]}function z(e,t,n){var r=t.docs,i=new k;r.forEach(function(e){i.has(e.id)?i.get(e.id).push(e):i.set(e.id,[e])});var o=i.size,a=0,s=new Array(o);function l(){++a===o&&function(){var e=[];s.forEach(function(t){t.docs.forEach(function(n){e.push({id:t.id,docs:[n]})})}),n(null,{results:e})}()}var c=[];i.forEach(function(e,t){c.push(t)});var u=0;function d(){if(!(u>=c.length)){var n=Math.min(u+j,c.length),r=c.slice(u,n);!function(n,r){n.forEach(function(n,o){var a=r+o,c=i.get(n),u=R(c[0],["atts_since","attachments"]);u.open_revs=c.map(function(e){return e.rev}),u.open_revs=u.open_revs.filter(I);var f=I;0===u.open_revs.length&&(delete u.open_revs,f=N),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in t&&(u[e]=t[e])}),e.get(n,u,function(e,t){var r;r=e?[{error:e}]:f(t),function(e,t,n){s[e]={id:t,docs:n},l()}(a,n,r),d()})})}(r,u),u+=r.length}}d()}function q(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}if(q())F=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),F=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){F=!1}function H(){return F}function B(){c.EventEmitter.call(this),this._listeners={},function(e){q()?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):H()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}(this)}function V(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function U(e){var t=0;return e||(t=2e3),function(e,t){return e=parseInt(e,10)||0,(t=parseInt(t,10))!=t||t<=e?t=(e||1)<<1:t+=1,t>6e5&&(e=3e5,t=6e5),~~((t-e)*Math.random()+e)}(e,t)}function $(e,t){V("info","The above "+e+" is totally normal. "+t)}d()(B,c.EventEmitter),B.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var i=this,o=!1;this._listeners[t]=a,this.on(e,a)}function a(){if(i._listeners[t])if(o)o="waiting";else{o=!0;var e=R(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(e).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===o&&l()(a),o=!1}).on("error",function(){o=!1})}}},B.prototype.removeListener=function(e,t){t in this._listeners&&(c.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},B.prototype.notifyLocalWindows=function(e){q()?chrome.storage.local.set({dbName:e}):H()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},B.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var W="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};function X(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}d()(X,Error),X.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new X(401,"unauthorized","Name or password is incorrect.");var G=new X(400,"bad_request","Missing JSON list of 'docs'"),Y=new X(404,"not_found","missing"),Z=new X(409,"conflict","Document update conflict"),J=new X(400,"bad_request","_id field must contain a string"),K=new X(412,"missing_id","_id is required for puts"),Q=new X(400,"bad_request","Only reserved document ids may start with underscore."),ee=(new X(412,"precondition_failed","Database not open"),new X(500,"unknown_error","Database encountered an unknown error")),te=new X(500,"badarg","Some query argument is invalid"),ne=(new X(400,"invalid_request","Request was invalid"),new X(400,"query_parse_error","Some query parameter is invalid")),re=new X(500,"doc_validation","Bad special document member"),ie=new X(400,"bad_request","Something wrong with the request"),oe=new X(400,"bad_request","Document must be a JSON object"),ae=(new X(404,"not_found","Database not found"),new X(500,"indexed_db_went_bad","unknown")),se=new X(500,"web_sql_went_bad","unknown"),le=(new X(500,"levelDB_went_went_bad","unknown"),new X(403,"forbidden","Forbidden by design doc validate_doc_update function"),new X(400,"bad_request","Invalid rev format")),ce=(new X(412,"file_exists","The database could not be created, the file already exists."),new X(412,"missing_stub","A pre-existing attachment stub wasn't found"));new X(413,"invalid_url","Provided URL is invalid");function ue(e,t){function n(t){for(var n in e)"function"!=typeof e[n]&&(this[n]=e[n]);void 0!==t&&(this.reason=t)}return n.prototype=X.prototype,new n(t)}function de(e){if("object"!=typeof e){var t=e;(e=ee).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}function fe(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){r.doc||(r.doc={});var i=n&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return ue(ie,r)}}(e.filter,r.doc,t);if("object"==typeof i)return i;if(i)return!1;if(e.include_docs){if(!e.attachments)for(var o in r.doc._attachments)r.doc._attachments.hasOwnProperty(o)&&(r.doc._attachments[o].stub=!0)}else delete r.doc;return!0}}function pe(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function he(e){var t;if(e?"string"!=typeof e?t=ue(J):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=ue(Q)):t=ue(K),t)throw t}function ge(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(V("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function ve(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function me(e){var t=ve(e);return t?t.join("/"):null}var be=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ye="queryKey",xe=/(?:^|&)([^&=]*)=?([^&]*)/g,_e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function we(e){for(var t=_e.exec(e),n={},r=14;r--;){var i=be[r],o=t[r]||"",a=-1!==["user","password"].indexOf(i);n[i]=a?decodeURIComponent(o):o}return n[ye]={},n[be[12]].replace(xe,function(e,t,r){t&&(n[ye][t]=r)}),n}function ke(e,t){var n=[],r=[];for(var i in t)t.hasOwnProperty(i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function Te(e,t,n){return new x(function(r,i){e.get(t,function(o,a){if(o){if(404!==o.status)return i(o);a={}}var s=a._rev,l=n(a);if(!l)return r({updated:!1,rev:s});l._id=t,l._rev=s,r(function(e,t,n){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(r){if(409!==r.status)throw r;return Te(e,t._id,n)})}(e,l,n))})})}function Ae(){return p.a.v4().replace(/-/g,"").toLowerCase()}var Ce=p.a.v4;function Se(e){for(var t,n,r,i,o=e.rev_tree.slice();i=o.pop();){var a=i.ids,s=a[2],l=i.pos;if(s.length)for(var c=0,u=s.length;c<u;c++)o.push({pos:l+1,ids:s[c]});else{var d=!!a[1].deleted,f=a[0];t&&!(r!==d?r:n!==l?n<l:t<f)||(t=f,n=l,r=d)}}return n+"-"+t}function Me(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,o=n.ids,a=o[2],s=t(0===a.length,i,o[0],n.ctx,o[1]),l=0,c=a.length;l<c;l++)r.push({pos:i+1,ids:a[l],ctx:s})}function Ee(e,t){return e.pos-t.pos}function Oe(e){var t=[];Me(e,function(e,n,r,i,o){e&&t.push({rev:n+"-"+r,pos:n,opts:o})}),t.sort(Ee).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function Le(e){for(var t=Se(e),n=Oe(e.rev_tree),r=[],i=0,o=n.length;i<o;i++){var a=n[i];a.rev===t||a.opts.deleted||r.push(a.rev)}return r}function Pe(e){var t=[];return Me(e.rev_tree,function(e,n,r,i,o){"available"!==o.status||e||(t.push(n+"-"+r),o.status="missing")}),t}function De(e){for(var t,n=[],r=e.slice();t=r.pop();){var i=t.pos,o=t.ids,a=o[0],s=o[1],l=o[2],c=0===l.length,u=t.history?t.history.slice():[];u.push({id:a,opts:s}),c&&n.push({pos:i+1-u.length,ids:u});for(var d=0,f=l.length;d<f;d++)r.push({pos:i+1,ids:l[d],history:u})}return n.reverse()}function Re(e,t){return e.pos-t.pos}function Fe(e,t,n){var r=function(e,t,n){for(var r,i=0,o=e.length;i<o;)n(e[r=i+o>>>1],t)<0?i=r+1:o=r;return i}(e,t,n);e.splice(r,0,t)}function je(e,t){for(var n,r,i=t,o=e.length;i<o;i++){var a=e[i],s=[a.id,a.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function Ie(e,t){return e[0]<t[0]?-1:1}function Ne(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),o=i.tree1,a=i.tree2;(o[1].status||a[1].status)&&(o[1].status="available"===o[1].status||"available"===a[1].status?"available":"missing");for(var s=0;s<a[2].length;s++)if(o[2][0]){for(var l=!1,c=0;c<o[2].length;c++)o[2][c][0]===a[2][s][0]&&(n.push({tree1:o[2][c],tree2:a[2][s]}),l=!0);l||(r="new_branch",Fe(o[2],a[2][s],Ie))}else r="new_leaf",o[2][0]=a[2][s]}return{conflicts:r,tree:e}}function ze(e,t,n){var r,i=[],o=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,l=e.length;s<l;s++){var c=e[s];if(c.pos===t.pos&&c.ids[0]===t.ids[0])r=Ne(c.ids,t.ids),i.push({pos:c.pos,ids:r.tree}),o=o||r.conflicts,a=!0;else if(!0!==n){var u=c.pos<t.pos?c:t,d=c.pos<t.pos?t:c,f=d.pos-u.pos,p=[],h=[];for(h.push({ids:u.ids,diff:f,parent:null,parentIdx:null});h.length>0;){var g=h.pop();if(0!==g.diff)for(var v=g.ids[2],m=0,b=v.length;m<b;m++)h.push({ids:v[m],diff:g.diff-1,parent:g.ids,parentIdx:m});else g.ids[0]===d.ids[0]&&p.push(g)}var y=p[0];y?(r=Ne(y.ids,d.ids),y.parent[2][y.parentIdx]=r.tree,i.push({pos:u.pos,ids:u.ids}),o=o||r.conflicts,a=!0):i.push(c)}else i.push(c)}return a||i.push(t),i.sort(Re),{tree:i,conflicts:o||"internal_node"}}function qe(e,t,n){var r=ze(e,t),i=function(e,t){for(var n,r,i=De(e),o=0,a=i.length;o<a;o++){var s,l=i[o],c=l.ids;if(c.length>t){n||(n={});var u=c.length-t;s={pos:l.pos+u,ids:je(c,u)};for(var d=0;d<u;d++){var f=l.pos+d+"-"+c[d].id;n[f]=!0}}else s={pos:l.pos,ids:je(c,0)};r=r?ze(r,s,!0).tree:[s]}return n&&Me(r,function(e,t,r){delete n[t+"-"+r]}),{tree:r,revs:n?Object.keys(n):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function He(e){return e.ids}function Be(e,t){t||(t=Se(e));for(var n,r=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(He);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}}function Ve(e){return/^_local/.test(e)}function Ue(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,o=n.ids,a=o[0],s=o[1],l=o[2],c=0===l.length,u=n.history?n.history.slice():[];if(u.push({id:a,pos:i,opts:s}),c)for(var d=0,f=u.length;d<f;d++){var p=u[d];if(p.pos+"-"+p.id===e)return i+"-"+a}for(var h=0,g=l.length;h<g;h++)r.push({pos:i+1,ids:l[h],history:u})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}function $e(e,t,n){c.EventEmitter.call(this);var r=this;this.db=e;var i=(t=t?C(t):{}).complete=S(function(t,n){t?function(e,t){return"listenerCount"in e?e.listenerCount(t):c.EventEmitter.listenerCount(e,t)}(r,"error")>0&&r.emit("error",t):r.emit("complete",n),r.removeAllListeners(),e.removeListener("destroyed",o)});function o(){r.cancel()}n&&(r.on("complete",function(e){n(null,e)}),r.on("error",n)),e.once("destroyed",o),t.onChange=function(e,t,n){r.isCancelled||function(e,t,n,r){try{e.emit("change",t,n,r)}catch(e){V("error",'Error in .on("change", function):',e)}}(r,e,t,n)};var a=new x(function(e,n){t.complete=function(t,r){t?n(t):e(r)}});r.once("cancel",function(){e.removeListener("destroyed",o),t.complete(null,{status:"cancelled"})}),this.then=a.then.bind(a),this.catch=a.catch.bind(a),this.then(function(e){i(null,e)},i),e.taskqueue.isReady?r.validateChanges(t):e.taskqueue.addTask(function(e){e?t.complete(e):r.isCancelled?r.emit("cancel"):r.validateChanges(t)})}function We(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=Oe(t.rev_tree).map(function(e){return{rev:e.rev}}));var i={id:t.id,changes:r,doc:e};return Be(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=Le(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function Xe(e,t){return e<t?-1:e>t?1:0}function Ge(e,t){return function(n,r){n||r[0]&&r[0].error?((n=n||r[0]).docId=t,e(n)):e(null,r.length?r[0]:r)}}function Ye(e,t){var n=Xe(e._id,t._id);return 0!==n?n:Xe(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function Ze(){c.EventEmitter.call(this)}function Je(){this.isReady=!1,this.failed=!1,this.queue=[]}function Ke(e,t){if(!(this instanceof Ke))return new Ke(e,t);var n=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),this.__opts=t=C(t),n.auto_compaction=t.auto_compaction,n.prefix=Ke.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var r=function(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=Ke.adapters,i=Ke.preferredAdapters,o=Ke.prefix,a=t.adapter;if(!a)for(var s=0;s<i.length&&"idb"===(a=i[s])&&"websql"in r&&H()&&localStorage["_pouch__websqldb_"+o+e];++s)V("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var l=r[a];return{name:l&&"use_prefix"in l&&!l.use_prefix?e:o+e,adapter:a}}((t.prefix||"")+e,t);if(t.name=r.name,t.adapter=t.adapter||r.adapter,n.name=e,n._adapter=t.adapter,Ke.emit("debug",["adapter","Picked adapter: ",t.adapter]),!Ke.adapters[t.adapter]||!Ke.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);Ze.call(n),n.taskqueue=new Je,n.adapter=t.adapter,Ke.adapters[t.adapter].call(n,t,function(e){if(e)return n.taskqueue.fail(e);!function(e){function t(t){e.removeListener("closed",n),t||e.constructor.emit("destroyed",e.name)}function n(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",n),e.constructor.emit("ref",e)}(n),n.emit("created",n),Ke.emit("created",n.name),n.taskqueue.ready(n)})}d()($e,c.EventEmitter),$e.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},$e.prototype.validateChanges=function(e){var t=e.complete,n=this;Ke._changesFilterPlugin?Ke._changesFilterPlugin.validate(e,function(r){if(r)return t(r);n.doChanges(e)}):n.doChanges(e)},$e.prototype.doChanges=function(e){var t=this,n=e.complete;if("live"in(e=C(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=We,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(Ke._changesFilterPlugin){if(Ke._changesFilterPlugin.normalize(e),Ke._changesFilterPlugin.shouldFilter(this,e))return Ke._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(t){t in e&&V("warn",'The "'+t+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&"function"==typeof r.cancel){var i=t.cancel;t.cancel=a()(function(e){r.cancel(),i.apply(this,e)})}}else this.db.info().then(function(r){t.isCancelled?n(null,{status:"cancelled"}):(e.since=r.update_seq,t.doChanges(e))},n)},d()(Ze,c.EventEmitter),Ze.prototype.post=E("post",function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(ue(oe));this.bulkDocs({docs:[e]},t,Ge(n,e._id))}),Ze.prototype.put=E("put",function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(ue(oe));if(he(e._id),Ve(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var r=this;function i(n){"function"==typeof r._put&&!1!==t.new_edits?r._put(e,t,n):r.bulkDocs({docs:[e]},t,Ge(n,e._id))}t.force&&e._rev?(!function(){var n=e._rev.split("-"),r=n[1],i=parseInt(n[0],10)+1,o=Ae();e._revisions={start:i,ids:[o,r]},e._rev=i+"-"+o,t.new_edits=!1}(),i(function(t){var r=t?null:{ok:!0,id:e._id,rev:e._rev};n(t,r)})):i(n)}),Ze.prototype.putAttachment=E("putAttachment",function(e,t,n,r,i){var o=this;function a(e){var n="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:i,data:r,revpos:++n},o.put(e)}return"function"==typeof i&&(i=r,r=n,n=null),void 0===i&&(i=r,r=n,n=null),i||V("warn","Attachment",t,"on document",e,"is missing content_type"),o.get(e).then(function(e){if(e._rev!==n)throw ue(Z);return a(e)},function(t){if(t.reason===Y.message)return a({_id:e});throw t})}),Ze.prototype.removeAttachment=E("removeAttachment",function(e,t,n,r){var i=this;i.get(e,function(e,o){if(e)r(e);else if(o._rev===n){if(!o._attachments)return r();delete o._attachments[t],0===Object.keys(o._attachments).length&&delete o._attachments,i.put(o,r)}else r(ue(Z))})}),Ze.prototype.remove=E("remove",function(e,t,n,r){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(i=e,"function"==typeof t?(r=t,n={}):(r=n,n=t)),(n=n||{}).was_delete=!0;var o={_id:i._id,_rev:i._rev||n.rev,_deleted:!0};if(Ve(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[o]},n,Ge(r,o._id))}),Ze.prototype.revsDiff=E("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={});var r=Object.keys(e);if(!r.length)return n(null,{});var i=0,o=new k;function a(e,t){o.has(e)||o.set(e,{missing:[]}),o.get(e).missing.push(t)}r.map(function(t){this._getRevisionTree(t,function(s,l){if(s&&404===s.status&&"missing"===s.message)o.set(t,{missing:e[t]});else{if(s)return n(s);!function(t,n){var r=e[t].slice(0);Me(n,function(e,n,i,o,s){var l=n+"-"+i,c=r.indexOf(l);-1!==c&&(r.splice(c,1),"available"!==s.status&&a(t,l))}),r.forEach(function(e){a(t,e)})}(t,l)}if(++i===r.length){var c={};return o.forEach(function(e,t){c[t]=e}),n(null,c)}})},this)}),Ze.prototype.bulkGet=E("bulkGet",function(e,t){z(this,e,t)}),Ze.prototype.compactDocument=E("compactDocument",function(e,t,n){var r=this;this._getRevisionTree(e,function(i,o){if(i)return n(i);var a=function(e){var t={},n=[];return Me(e,function(e,r,i,o){var a=r+"-"+i;return e&&(t[a]=0),void 0!==o&&n.push({from:o,to:a}),a}),n.reverse(),n.forEach(function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}(o),s=[],l=[];Object.keys(a).forEach(function(e){a[e]>t&&s.push(e)}),Me(o,function(e,t,n,r,i){var o=t+"-"+n;"available"===i.status&&-1!==s.indexOf(o)&&l.push(o)}),r._doCompaction(e,l,n)})}),Ze.prototype.compact=E("compact",function(e,t){"function"==typeof e&&(t=e,e={});e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:t}),1===this._compactionQueue.length&&function e(t){var n=t._compactionQueue[0],r=n.opts,i=n.callback;t.get("_local/compaction").catch(function(){return!1}).then(function(n){n&&n.last_seq&&(r.last_seq=n.last_seq),t._compact(r,function(n,r){n?i(n):i(null,r),l()(function(){t._compactionQueue.shift(),t._compactionQueue.length&&e(t)})})})}(this)}),Ze.prototype._compact=function(e,t){var n=this,r={return_docs:!1,last_seq:e.last_seq||0},i=[];n.changes(r).on("change",function(e){i.push(n.compactDocument(e.id,0))}).on("complete",function(e){var r=e.last_seq;x.all(i).then(function(){return Te(n,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<r)&&(e.last_seq=r,e)})}).then(function(){t(null,{ok:!0})}).catch(t)}).on("error",t)},Ze.prototype.get=E("get",function(e,t,n){if("function"==typeof t&&(n=t,t={}),"string"!=typeof e)return n(ue(J));if(Ve(e)&&"function"==typeof this._getLocal)return this._getLocal(e,n);var r=[],i=this;function o(){var o=[],a=r.length;if(!a)return n(null,o);r.forEach(function(r){i.get(e,{rev:r,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},function(e,t){if(e)o.push({missing:r});else{for(var i,s=0,l=o.length;s<l;s++)if(o[s].ok&&o[s].ok._rev===t._rev){i=!0;break}i||o.push({ok:t})}--a||n(null,o)})})}if(!t.open_revs)return this._get(e,t,function(r,o){if(r)return r.docId=e,n(r);var a=o.doc,s=o.metadata,l=o.ctx;if(t.conflicts){var c=Le(s);c.length&&(a._conflicts=c)}if(Be(s,a._rev)&&(a._deleted=!0),t.revs||t.revs_info){for(var u=a._rev.split("-"),d=parseInt(u[0],10),f=u[1],p=De(s.rev_tree),h=null,g=0;g<p.length;g++){var v=p[g],m=v.ids.map(function(e){return e.id}).indexOf(f);(m===d-1||!h&&-1!==m)&&(h=v)}var b=h.ids.map(function(e){return e.id}).indexOf(a._rev.split("-")[1])+1,y=h.ids.length-b;if(h.ids.splice(b,y),h.ids.reverse(),t.revs&&(a._revisions={start:h.pos+h.ids.length-1,ids:h.ids.map(function(e){return e.id})}),t.revs_info){var x=h.pos+h.ids.length;a._revs_info=h.ids.map(function(e){return{rev:--x+"-"+e.id,status:e.opts.status}})}}if(t.attachments&&a._attachments){var _=a._attachments,w=Object.keys(_).length;if(0===w)return n(null,a);Object.keys(_).forEach(function(e){this._getAttachment(a._id,e,_[e],{rev:a._rev,binary:t.binary,ctx:l},function(t,r){var i=a._attachments[e];i.data=r,delete i.stub,delete i.length,--w||n(null,a)})},i)}else{if(a._attachments)for(var k in a._attachments)a._attachments.hasOwnProperty(k)&&(a._attachments[k].stub=!0);n(null,a)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){if(e)return n(e);r=Oe(t).map(function(e){return e.rev}),o()});else{if(!Array.isArray(t.open_revs))return n(ue(ee,"function_clause"));r=t.open_revs;for(var a=0;a<r.length;a++){var s=r[a];if("string"!=typeof s||!/^\d+-/.test(s))return n(ue(le))}o()}}),Ze.prototype.getAttachment=E("getAttachment",function(e,t,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(e,n,function(o,a){return o?r(o):a.doc._attachments&&a.doc._attachments[t]?(n.ctx=a.ctx,n.binary=!0,void i._getAttachment(e,t,a.doc._attachments[t],n,r)):r(ue(Y))})}),Ze.prototype.allDocs=E("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(n)return void t(ue(ne,"Query parameter `"+n+"` is not compatible with multi-get"));if(!ge(this)&&(function(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}(e),0===e.keys.length))return this._allDocs({limit:0},t)}return this._allDocs(e,t)}),Ze.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new $e(this,e,t)},Ze.prototype.close=E("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),Ze.prototype.info=E("info",function(e){var t=this;this._info(function(n,r){if(n)return e(n);r.db_name=r.db_name||t.name,r.auto_compaction=!(!t.auto_compaction||ge(t)),r.adapter=t.adapter,e(null,r)})}),Ze.prototype.id=E("id",function(e){return this._id(e)}),Ze.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Ze.prototype.bulkDocs=E("bulkDocs",function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(ue(G));for(var r=0;r<e.docs.length;++r)if("object"!=typeof e.docs[r]||Array.isArray(e.docs[r]))return n(ue(oe));var i;if(e.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(t){i=i||function(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}(t),e._attachments[t].content_type||V("warn","Attachment",t,"on document",e._id,"is missing content_type")})}),i)return n(ue(ie,i));"new_edits"in t||(t.new_edits=!("new_edits"in e)||e.new_edits);var o=this;t.new_edits||ge(o)||e.docs.sort(Ye),function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var o=r[i];n._attachments[o]=R(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var a=e.docs.map(function(e){return e._id});return this._bulkDocs(e,t,function(e,r){if(e)return n(e);if(t.new_edits||(r=r.filter(function(e){return e.error})),!ge(o))for(var i=0,s=r.length;i<s;i++)r[i].id=r[i].id||a[i];n(null,r)})}),Ze.prototype.registerDependentDatabase=E("registerDependentDatabase",function(e,t){var n=new this.constructor(e,this.__opts);Te(this,"_local/_pouch_dependentDbs",function(t){return t.dependentDbs=t.dependentDbs||{},!t.dependentDbs[e]&&(t.dependentDbs[e]=!0,t)}).then(function(){t(null,{db:n})}).catch(t)}),Ze.prototype.destroy=E("destroy",function(e,t){"function"==typeof e&&(t=e,e={});var n=this,r=!("use_prefix"in n)||n.use_prefix;function i(){n._destroy(e,function(e,r){if(e)return t(e);n._destroyed=!0,n.emit("destroyed"),t(null,r||{ok:!0})})}if(ge(n))return i();n.get("_local/_pouch_dependentDbs",function(e,o){if(e)return 404!==e.status?t(e):i();var a=o.dependentDbs,s=n.constructor,l=Object.keys(a).map(function(e){var t=r?e.replace(new RegExp("^"+s.prefix),""):e;return new s(t,n.__opts).destroy()});x.all(l).then(i,t)})}),Je.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},Je.prototype.fail=function(e){this.failed=e,this.execute()},Je.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},Je.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},d()(Ke,Ze),Ke.adapters={},Ke.preferredAdapters=[],Ke.prefix="_pouch_";var Qe=new c.EventEmitter;!function(e){Object.keys(c.EventEmitter.prototype).forEach(function(t){"function"==typeof c.EventEmitter.prototype[t]&&(e[t]=Qe[t].bind(Qe))});var t=e._destructionListeners=new k;e.on("ref",function(e){t.has(e.name)||t.set(e.name,[]),t.get(e.name).push(e)}),e.on("unref",function(e){if(t.has(e.name)){var n=t.get(e.name),r=n.indexOf(e);r<0||(n.splice(r,1),n.length>1?t.set(e.name,n):t.delete(e.name))}}),e.on("destroyed",function(e){if(t.has(e)){var n=t.get(e);t.delete(e),n.forEach(function(e){e.emit("destroyed",!0)})}})}(Ke),Ke.adapter=function(e,t,n){t.valid()&&(Ke.adapters[e]=t,n&&Ke.preferredAdapters.push(e))},Ke.plugin=function(e){if("function"==typeof e)e(Ke);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){Ke.prototype[t]=e[t]})}return this.__defaults&&(Ke.__defaults=W({},this.__defaults)),Ke},Ke.defaults=function(e){function t(e,n){if(!(this instanceof t))return new t(e,n);n=n||{},e&&"object"==typeof e&&(e=(n=e).name,delete n.name),n=W({},t.__defaults,n),Ke.call(this,e,n)}return d()(t,Ke),t.preferredAdapters=Ke.preferredAdapters.slice(),Object.keys(Ke).forEach(function(e){e in t||(t[e]=Ke[e])}),t.__defaults=W({},this.__defaults,e),t};function et(e,t){for(var n=e,r=0,i=t.length;r<i;r++){if(!(n=n[t[r]]))break}return n}function tt(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];"."===o?r>0&&"\\"===e[r-1]?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=o}return t.push(n),t}var nt=["$or","$nor","$not"];function rt(e){return nt.indexOf(e)>-1}function it(e){return Object.keys(e)[0]}function ot(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){var r=e[n];if("object"!=typeof r&&(r={$eq:r}),rt(n))r instanceof Array?t[n]=r.map(function(e){return ot([e])}):t[n]=ot([r]);else{var i=t[n]=t[n]||{};Object.keys(r).forEach(function(e){var t=r[e];return"$gt"===e||"$gte"===e?function(e,t,n){if(void 0!==n.$eq)return;void 0!==n.$gte?"$gte"===e?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):void 0!==n.$gt?"$gte"===e?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t}(e,t,i):"$lt"===e||"$lte"===e?function(e,t,n){if(void 0!==n.$eq)return;void 0!==n.$lte?"$lte"===e?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):void 0!==n.$lt?"$lte"===e?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t}(e,t,i):"$ne"===e?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(t,i):"$eq"===e?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(t,i):void(i[e]=t)})}})}),t}var at=-324,st=3,lt="";function ct(e,t){if(e===t)return 0;e=ut(e),t=ut(t);var n=gt(e),r=gt(t);if(n-r!=0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=ct(e[r],t[r]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var a=ct(n[o],r[o]);if(0!==a)return a;if(0!==(a=ct(e[n[o]],t[r[o]])))return a}return n.length===r.length?0:n.length>r.length?1:-1}(e,t)}function ut(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=ut(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(t.hasOwnProperty(i)){var o=t[i];void 0!==o&&(e[i]=ut(o))}}}return e}function dt(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=function(e,t,n){return function(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}(e,t,n)+e}(((r?-n:n)-at).toString(),"0",st);i+=lt+o;var a=Math.abs(parseFloat(t[0]));r&&(a=10-a);var s=a.toFixed(20);return s=s.replace(/\.?0+$/,""),i+=lt+s}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=ft(n[r]);else for(;++r<i;){var a=n[r];o+=ft(a)+ft(e[a])}return o}return""}function ft(e){return gt(e=ut(e))+lt+dt(e)+"\0"}function pt(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var i="0"===e[t];t++;var o="",a=e.substring(t,t+st),s=parseInt(a,10)+at;for(i&&(s=-s),t+=st;;){var l=e[t];if("\0"===l)break;o+=l,t++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),i&&(n-=10),0!==s&&(n=parseFloat(n+"e"+s))}return{num:n,length:t-r}}function ht(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){i[e.pop()]=n}else e.push(n)}}function gt(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}function vt(e,t,n){if(e=e.filter(function(e){return mt(e.doc,t.selector,n)}),t.sort){var r=function(e){function t(t){return e.map(function(e){var n=tt(it(e));return et(t,n)})}return function(e,n){var r=ct(t(e.doc),t(n.doc));return 0!==r?r:function(e,t){return e<t?-1:e>t?1:0}(e.doc._id,n.doc._id)}}(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===function(e){return e[it(e)]}(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,o=("limit"in t?t.limit:e.length)+i;e=e.slice(i,o)}return e}function mt(e,t,n){return n.every(function(n){var r=t[n],i=tt(n),o=et(e,i);return rt(n)?function(e,t,n){if("$or"===e)return t.some(function(e){return mt(n,e,Object.keys(e))});if("$not"===e)return!mt(n,t,Object.keys(t));return!t.find(function(e){return mt(n,e,Object.keys(e))})}(n,r,e):bt(r,e,i,o)})}function bt(e,t,n,r){return!e||Object.keys(e).every(function(i){var o=e[i];return function(e,t,n,r,i){if(!wt[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return wt[e](t,n,r,i)}(i,t,o,n,r)})}function yt(e){return void 0!==e&&null!==e}function xt(e){return void 0!==e}function _t(e,t){return t.some(function(t){return e instanceof Array?e.indexOf(t)>-1:e===t})}var wt={$elemMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.some(function(e){return mt(e,t,Object.keys(t))}):r.some(function(r){return bt(t,e,n,r)})))},$allMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.every(function(e){return mt(e,t,Object.keys(t))}):r.every(function(r){return bt(t,e,n,r)})))},$eq:function(e,t,n,r){return xt(r)&&0===ct(r,t)},$gte:function(e,t,n,r){return xt(r)&&ct(r,t)>=0},$gt:function(e,t,n,r){return xt(r)&&ct(r,t)>0},$lte:function(e,t,n,r){return xt(r)&&ct(r,t)<=0},$lt:function(e,t,n,r){return xt(r)&&ct(r,t)<0},$exists:function(e,t,n,r){return t?xt(r):!xt(r)},$mod:function(e,t,n,r){return yt(r)&&function(e,t){var n=t[0],r=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===r}(r,t)},$ne:function(e,t,n,r){return t.every(function(e){return 0!==ct(r,e)})},$in:function(e,t,n,r){return yt(r)&&_t(r,t)},$nin:function(e,t,n,r){return yt(r)&&!_t(r,t)},$size:function(e,t,n,r){return yt(r)&&function(e,t){return e.length===t}(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&function(e,t){return t.every(function(t){return e.indexOf(t)>-1})}(r,t)},$regex:function(e,t,n,r){return yt(r)&&function(e,t){return new RegExp(t).test(e)}(r,t)},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(r,t)}};function kt(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var n=vt([{doc:e}],{selector:t=function(e){var t=C(e),n=!1;"$and"in t&&(t=ot(t.$and),n=!0),["$or","$nor"].forEach(function(e){e in t&&t[e].forEach(function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],i=e[r];"object"==typeof i&&null!==i||(e[r]={$eq:i})}})}),"$not"in t&&(t.$not=ot([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o];"object"!=typeof a||null===a?a={$eq:a}:"$ne"in a&&!n&&(a.$ne=[a.$ne]),t[o]=a}return t}(t)},Object.keys(t));return n&&1===n.length}function Tt(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter){var n="string"==typeof e.filter?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function At(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=me(e.view):e.filter=me(e.filter))}function Ct(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!ge(e.db)}function St(e,t){var n=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var r=ue(ie,"`view` filter parameter not found or invalid.");return n(r)}var i=ve(t.view);e.db.get("_design/"+i[0],function(r,o){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(de(r));var a=o&&o.views&&o.views[i[1]]&&o.views[i[1]].map;if(!a)return n(ue(Y,o.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=function(e){return ke(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{})}(a),e.doChanges(t)})}else if(t.selector)t.filter=function(e){return kt(e,t.selector)},e.doChanges(t);else{var o=ve(t.filter);e.db.get("_design/"+o[0],function(r,i){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(de(r));var a=i&&i.filters&&i.filters[o[1]];if(!a)return n(ue(Y,i&&i.filters?"missing json key: "+o[1]:"missing json key: filters"));t.filter=function(e){return ke('"use strict";\nreturn '+e+";",{})}(a),e.doChanges(t)})}}function Mt(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}Ke.plugin(function(e){e.debug=g.a;var t={};e.on("debug",function(e){var n=e[0],r=e.slice(1);t[n]||(t[n]=g()("pouchdb:"+n)),t[n].apply(null,r)})}),Ke.plugin(function(e){e._changesFilterPlugin={validate:Tt,normalize:At,shouldFilter:Ct,filter:St}}),Ke.version="6.4.3";var Et=Mt(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),Ot=Mt(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Lt(e){if(!/^\d+-./.test(e))return ue(le);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function Pt(e,t){var n,r,i,o={status:"available"};if(e._deleted&&(o.deleted=!0),t)if(e._id||(e._id=Ce()),r=Ae(),e._rev){if((i=Lt(e._rev)).error)return i;e._rev_tree=[{pos:i.prefix,ids:[i.id,{status:"missing"},[[r,o,[]]]]}],n=i.prefix+1}else e._rev_tree=[{pos:1,ids:[r,o,[]]}],n=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],o=1,a=r.length;o<a;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}(e._revisions,o),n=e._revisions.start,r=e._revisions.ids[0]),!e._rev_tree){if((i=Lt(e._rev)).error)return i;n=i.prefix,r=i.id,e._rev_tree=[{pos:n,ids:[r,o,[]]}]}he(e._id),e._rev=n+"-"+r;var a={metadata:{},data:{}};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l="_"===s[0];if(l&&!Et[s]){var c=ue(re,s);throw c.message=re.message+": "+s,c}l&&!Ot[s]?a.metadata[s.slice(1)]=e[s]:a.data[s]=e[s]}return a}var Dt=function(e){return atob(e)},Rt=function(e){return btoa(e)};function Ft(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}function jt(e,t){return Ft([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(e)],{type:t})}function It(e,t){return jt(Dt(e),t)}function Nt(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}function zt(e,t){if("undefined"==typeof FileReader)return t(Nt((new FileReaderSync).readAsArrayBuffer(e)));var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";if(r)return t(n);t(Nt(n))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function qt(e,t){zt(e,function(e){t(e)})}function Ht(e,t){qt(e,function(e){t(Rt(e))})}function Bt(e,t){if("undefined"==typeof FileReader)return t((new FileReaderSync).readAsArrayBuffer(e));var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}var Vt=e.setImmediate||e.setTimeout,Ut=32768;function $t(e,t,n,r,i){(n>0||r<t.size)&&(t=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}(t,n,r)),Bt(t,function(t){e.append(t),i()})}function Wt(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function Xt(e,t){var n="string"==typeof e,r=n?e.length:e.size,i=Math.min(Ut,r),o=Math.ceil(r/i),a=0,s=n?new m.a:new m.a.ArrayBuffer,l=n?Wt:$t;function c(){Vt(d)}function u(){var e=function(e){return Rt(e)}(s.end(!0));t(e),s.destroy()}function d(){var t=a*i,n=t+i;l(s,e,t,n,++a<o?c:u)}d()}function Gt(e,t,n){var r=function(e){try{return Dt(e)}catch(e){return{error:ue(te,"Attachment is not a valid base64 string")}}}(e.data);if(r.error)return n(r.error);e.length=r.length,e.data="blob"===t?jt(r,e.content_type):"base64"===t?Rt(r):r,Xt(r,function(t){e.digest="md5-"+t,n()})}function Yt(e,t,n){if(e.stub)return n();"string"==typeof e.data?Gt(e,t,n):function(e,t,n){Xt(e.data,function(r){e.digest="md5-"+r,e.length=e.data.size||e.data.length||0,"binary"===t?qt(e.data,function(t){e.data=t,n()}):"base64"===t?Ht(e.data,function(t){e.data=t,n()}):n()})}(e,t,n)}function Zt(e,t,n){if(!e.length)return n();var r,i=0;function o(){i++,e.length===i&&(r?n(r):n())}e.forEach(function(e){var n=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],i=0;if(!n.length)return o();function a(e){r=e,++i===n.length&&o()}for(var s in e.data._attachments)e.data._attachments.hasOwnProperty(s)&&Yt(e.data._attachments[s],t,a)})}function Jt(e,t,n,r,i,o,a,s){if(function(e,t){for(var n,r=e.slice(),i=t.split("-"),o=parseInt(i[0],10),a=i[1];n=r.pop();){if(n.pos===o&&n.ids[0]===a)return!0;for(var s=n.ids[2],l=0,c=s.length;l<c;l++)r.push({pos:n.pos+1,ids:s[l]})}return!1}(t.rev_tree,n.metadata.rev))return r[i]=n,o();var l=t.winningRev||Se(t),c="deleted"in t?t.deleted:Be(t,l),u="deleted"in n.metadata?n.metadata.deleted:Be(n.metadata),d=/^1-/.test(n.metadata.rev);if(c&&!u&&s&&d){var f=n.data;f._rev=l,f._id=n.metadata.id,n=Pt(f,s)}var p=qe(t.rev_tree,n.metadata.rev_tree[0],e);if(s&&(c&&u&&"new_leaf"!==p.conflicts||!c&&"new_leaf"!==p.conflicts||c&&!u&&"new_branch"===p.conflicts)){var h=ue(Z);return r[i]=h,o()}var g=n.metadata.rev;n.metadata.rev_tree=p.tree,n.stemmedRevs=p.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var v=Se(n.metadata),m=Be(n.metadata,v),b=c===m?0:c<m?-1:1;a(n,v,m,g===v?m:Be(n.metadata,g),!0,b,i,o)}function Kt(e,t,n,r,i,o,a,s,l){e=e||1e3;var c=s.new_edits,u=new k,d=0,f=t.length;function p(){++d===f&&l&&l()}t.forEach(function(e,t){if(e._id&&Ve(e._id)){var r=e._deleted?"_removeLocal":"_putLocal";n[r](e,{ctx:i},function(e,n){o[t]=e||n,p()})}else{var a=e.metadata.id;u.has(a)?(f--,u.get(a).push([e,t])):u.set(a,[[e,t]])}}),u.forEach(function(t,n){var i=0;function l(){++i<t.length?u():p()}function u(){var u=t[i],d=u[0],f=u[1];if(r.has(n))Jt(e,r.get(n),d,o,f,l,a,c);else{var p=qe([],d.metadata.rev_tree[0],e);d.metadata.rev_tree=p.tree,d.stemmedRevs=p.stemmedRevs||[],function(e,t,n){var r=Se(e.metadata),i=Be(e.metadata,r);if("was_delete"in s&&i)return o[t]=ue(Y,"deleted"),n();if(c&&function(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}(e)){var l=ue(Z);return o[t]=l,n()}a(e,r,i,i,!1,i?0:1,t,n)}(d,f,l)}}u()})}var Qt=5,en="document-store",tn="by-sequence",nn="attach-store",rn="attach-seq-store",on="meta-store",an="local-store",sn="detect-blob-support";function ln(e){try{return JSON.parse(e)}catch(t){return y.a.parse(e)}}function cn(e){try{return JSON.stringify(e)}catch(t){return y.a.stringify(e)}}function un(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(ue(ae,n,t.type))}}function dn(e,t,n){return{data:cn(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function fn(e){if(!e)return null;var t=ln(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function pn(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function hn(e,t,n,r){n?r(e?"string"!=typeof e?e:It(e,t):Ft([""],{type:t})):e?"string"!=typeof e?zt(e,function(e){r(Rt(e))}):r(e):r("")}function gn(e,t,n,r){var i=Object.keys(e._attachments||{});if(!i.length)return r&&r();var o=0;function a(){++o===i.length&&r&&r()}i.forEach(function(r){t.attachments&&t.include_docs?function(e,t){var r=e._attachments[t],i=r.digest;n.objectStore(nn).get(i).onsuccess=function(e){r.body=e.target.result.body,a()}}(e,r):(e._attachments[r].stub=!0,a())})}function vn(e,t){return x.all(e.map(function(e){if(e.doc&&e.doc._attachments){var n=Object.keys(e.doc._attachments);return x.all(n.map(function(n){var r=e.doc._attachments[n];if("body"in r){var i=r.body,o=r.content_type;return new x(function(a){hn(i,o,t,function(t){e.doc._attachments[n]=W(R(r,["digest","content_type"]),{data:t}),a()})})}}))}}))}function mn(e,t,n){var r=[],i=n.objectStore(tn),o=n.objectStore(nn),a=n.objectStore(rn),s=e.length;function l(){--s||function(){if(!r.length)return;r.forEach(function(e){var t=a.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::ï¿¿",!1,!1));t.onsuccess=function(t){var n=t.target.result;n||o.delete(e)}})}()}e.forEach(function(e){var n=i.index("_doc_id_rev"),o=t+"::"+e;n.getKey(o).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return l();i.delete(t),a.index("seq").openCursor(IDBKeyRange.only(t)).onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split("::")[0];r.push(n),a.delete(t.primaryKey),t.continue()}else l()}}})}function bn(e,t,n){try{return{txn:e.transaction(t,n)}}catch(e){return{error:e}}}var yn=new B;function xn(e,t,n,r,i,o){for(var a,s,l,c,u,d,f,p,h=t.docs,g=0,v=h.length;g<v;g++){var m=h[g];m._id&&Ve(m._id)||(m=h[g]=Pt(m,n.new_edits)).error&&!f&&(f=m)}if(f)return o(f);var b=!1,y=0,x=new Array(h.length),_=new k,w=!1,T=r._meta.blobSupport?"blob":"base64";function A(){b=!0,C()}function C(){p&&b&&(p.docCount+=y,d.put(p))}function S(){w||(yn.notify(r._meta.name),o(null,x))}function M(e,t,n,r,i,o,a,s){e.metadata.winningRev=t,e.metadata.deleted=n;var l=e.data;if(l._id=e.metadata.id,l._rev=e.metadata.rev,r&&(l._deleted=!0),l._attachments&&Object.keys(l._attachments).length)return function(e,t,n,r,i,o){var a=e.data,s=0,l=Object.keys(a._attachments);function u(){s===l.length&&E(e,t,n,r,i,o)}function d(){s++,u()}l.forEach(function(n){var r=e.data._attachments[n];if(r.stub)s++,u();else{var i=r.data;delete r.data,r.revpos=parseInt(t,10);var o=r.digest;!function(e,t,n){c.count(e).onsuccess=function(r){var i=r.target.result;if(i)return n();var o={digest:e,body:t},a=c.put(o);a.onsuccess=n}}(o,i,d)}})}(e,t,n,i,a,s);y+=o,C(),E(e,t,n,i,a,s)}function E(e,t,n,i,o,c){var d=e.data,f=e.metadata;function p(o){var l=e.stemmedRevs||[];i&&r.auto_compaction&&(l=l.concat(Pe(e.metadata))),l&&l.length&&mn(l,e.metadata.id,a),f.seq=o.target.result;var c=dn(f,t,n);s.put(c).onsuccess=h}function h(){x[o]={ok:!0,id:f.id,rev:f.rev},_.set(e.metadata.id,e.metadata),function(e,t,n){var r=0,i=Object.keys(e.data._attachments||{});if(!i.length)return n();function o(){++r===i.length&&n()}function a(n){var r=e.data._attachments[n].digest,i=u.put({seq:t,digestSeq:r+"::"+t});i.onsuccess=o,i.onerror=function(e){e.preventDefault(),e.stopPropagation(),o()}}for(var s=0;s<i.length;s++)a(i[s])}(e,f.seq,c)}d._doc_id_rev=f.id+"::"+f.rev,delete d._id,delete d._rev;var g=l.put(d);g.onsuccess=p,g.onerror=function(e){e.preventDefault(),e.stopPropagation(),l.index("_doc_id_rev").getKey(d._doc_id_rev).onsuccess=function(e){l.put(d,e.target.result).onsuccess=p}}}Zt(h,T,function(t){if(t)return o(t);!function(){var t=bn(i,[en,tn,nn,an,rn,on],"readwrite");if(t.error)return o(t.error);(a=t.txn).onabort=un(o),a.ontimeout=un(o),a.oncomplete=S,s=a.objectStore(en),l=a.objectStore(tn),c=a.objectStore(nn),u=a.objectStore(rn),(d=a.objectStore(on)).get(on).onsuccess=function(e){p=e.target.result,C()},function(e){var t=[];if(h.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(n){var r=e.data._attachments[n];r.stub&&t.push(r.digest)})}),!t.length)return e();var n,r=0;t.forEach(function(i){!function(e,t){c.get(e).onsuccess=function(n){if(n.target.result)t();else{var r=ue(ce,"unknown stub attachment with digest "+e);r.status=412,t(r)}}}(i,function(i){i&&!n&&(n=i),++r===t.length&&e(n)})})}(function(t){if(t)return w=!0,o(t);!function(){if(!h.length)return;var t=0;function i(){++t===h.length&&Kt(e.revs_limit,h,r,_,a,x,M,n,A)}function o(e){var t=fn(e.target.result);t&&_.set(t.id,t),i()}for(var l=0,c=h.length;l<c;l++){var u=h[l];if(u._id&&Ve(u._id))i();else{var d=s.get(u.metadata.id);d.onsuccess=o}}}()})}()})}function _n(e,t,n,r,i){var o,a,s;function l(e){a=e.target.result,o&&i(o,a,s)}function c(e){o=e.target.result,a&&i(o,a,s)}function u(e){var t=e.target.result;if(!t)return i();i([t.key],[t.value],t)}"function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&r>1&&!n?(s={continue:function(){if(!o.length)return i();var n,s=o[o.length-1];if(t&&t.upper)try{n=IDBKeyRange.bound(s,t.upper,!0,t.upperOpen)}catch(e){if("DataError"===e.name&&0===e.code)return i()}else n=IDBKeyRange.lowerBound(s,!0);t=n,o=null,a=null,e.getAll(t,r).onsuccess=l,e.getAllKeys(t,r).onsuccess=c}},e.getAll(t,r).onsuccess=l,e.getAllKeys(t,r).onsuccess=c):n?e.openCursor(t,"prev").onsuccess=u:e.openCursor(t).onsuccess=u}function wn(e,t,n){var r,i,o="startkey"in e&&e.startkey,a="endkey"in e&&e.endkey,s="key"in e&&e.key,l="keys"in e&&e.keys,c=e.skip||0,u="number"==typeof e.limit?e.limit:-1,d=!1!==e.inclusive_end;if(!l&&(i=(r=function(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}(o,a,d,s,e.descending))&&r.error)&&("DataError"!==i.name||0!==i.code))return n(ue(ae,i.name,i.message));var f=[en,tn,on];e.attachments&&f.push(nn);var p=bn(t,f,"readonly");if(p.error)return n(p.error);var h=p.txn;h.oncomplete=function(){e.attachments?vn(_,e.binary).then(A):A()},h.onabort=un(n);var g,v,m=h.objectStore(en),b=h.objectStore(tn),y=h.objectStore(on),x=b.index("_doc_id_rev"),_=[];function w(t,n){var r={id:n.id,key:n.id,value:{rev:t}};n.deleted?l&&(_.push(r),r.value.deleted=!0,r.doc=null):c--<=0&&(_.push(r),e.include_docs&&function(t,n,r){var i=t.id+"::"+r;x.get(i).onsuccess=function(r){if(n.doc=pn(r.target.result),e.conflicts){var i=Le(t);i.length&&(n.doc._conflicts=i)}gn(n.doc,e,h)}}(n,r,t))}function k(e){for(var t=0,n=e.length;t<n&&_.length!==u;t++){var r=e[t];if(r.error&&l)_.push(r);else{var i=fn(r);w(i.winningRev,i)}}}function T(e,t,n){n&&(k(t),_.length<u&&n.continue())}function A(){var t={total_rows:g,offset:e.skip,rows:_};e.update_seq&&void 0!==v&&(t.update_seq=v),n(null,t)}return y.get(on).onsuccess=function(e){g=e.target.result.docCount},e.update_seq&&function(e,t){e.openCursor(null,"prev").onsuccess=function(e){var n=e.target.result,r=void 0;n&&n.key&&(r=n.key);return t({target:{result:[r]}})}}(b,function(e){e.target.result&&e.target.result.length>0&&(v=e.target.result[0])}),i||0===u?void 0:l?function(e,t,n){var r=[],i=0;e.forEach(function(o,a){t.get(o).onsuccess=function(t){t.target.result?r[a]=t.target.result:r[a]={key:o,error:"not_found"},++i===e.length&&n(e,r,{})}})}(e.keys,m,T):-1===u?function(e,t,n){if("function"!=typeof e.getAll){var r=[];e.openCursor(t).onsuccess=function(e){var t=e.target.result;t?(r.push(t.value),t.continue()):n({target:{result:r}})}}else e.getAll(t).onsuccess=n}(m,r,function(t){var n=t.target.result;e.descending&&(n=n.reverse()),k(n)}):void _n(m,r,e.descending,u+c,T)}var kn=!1,Tn=[];function An(){!kn&&Tn.length&&(kn=!0,Tn.shift()())}function Cn(e,t,n,r){if((e=C(e)).continuous){var i=n+":"+Ce();return yn.addListener(n,i,t,e),yn.notify(n),{cancel:function(){yn.removeListener(n,i)}}}var o=e.doc_ids&&new w(e.doc_ids);e.since=e.since||0;var a,s=e.since,l="limit"in e?e.limit:-1;0===l&&(l=1),a="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var c,u,d,f,p=[],h=0,g=fe(e),v=new k;function m(e,t,n,r){if(n.seq!==t)return r();if(n.winningRev===e._rev)return r(n,e);var i=e._id+"::"+n.winningRev;f.get(i).onsuccess=function(e){r(n,pn(e.target.result))}}function b(){e.complete(null,{results:p,last_seq:s})}var y=[en,tn];e.attachments&&y.push(nn);var x=bn(r,y,"readonly");if(x.error)return e.complete(x.error);(c=x.txn).onabort=un(e.complete),c.oncomplete=function(){!e.continuous&&e.attachments?vn(p).then(b):b()},u=c.objectStore(tn),d=c.objectStore(en),f=u.index("_doc_id_rev"),_n(u,e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null,e.descending,l,function(t,n,r){if(r&&t.length){var i=new Array(t.length),u=new Array(t.length),f=0;n.forEach(function(e,n){!function(e,t,n){if(o&&!o.has(e._id))return n();var r=v.get(e._id);if(r)return m(e,t,r,n);d.get(e._id).onsuccess=function(i){r=fn(i.target.result),v.set(e._id,r),m(e,t,r,n)}}(pn(e),t[n],function(e,o){u[n]=e,i[n]=o,++f===t.length&&function(){for(var e=0,t=i.length;e<t&&h!==l;e++){var n=i[e];n&&b(u[e],n)}h!==l&&r.continue()}()})})}function b(t,n){var r=e.processChange(n,t,e);s=r.seq=t.seq;var i=g(r);if("object"==typeof i)return e.complete(i);i&&(h++,a&&p.push(r),e.attachments&&e.include_docs?gn(n,e,c,function(){vn([r],e.binary).then(function(){e.onChange(r)})}):e.onChange(r))}})}var Sn,Mn=new k,En=new k;function On(e,t){var n=this;!function(e,t,n){Tn.push(function(){e(function(e,r){!function(e,t,n,r){try{e(t,n)}catch(t){r.emit("error",t)}}(t,e,r,n),kn=!1,l()(function(){An()})})}),An()}(function(t){!function(e,t,n){var r=t.name,i=null;function o(e,t){var n=e.objectStore(en);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var i=r.value,o=Be(i);i.deletedOrLocal=o?"1":"0",n.put(i),r.continue()}else t()}}function a(e,t){var n=e.objectStore(an),r=e.objectStore(en),i=e.objectStore(tn),o=r.openCursor();o.onsuccess=function(e){var o=e.target.result;if(o){var a=o.value,s=a.id,l=Ve(s),c=Se(a);if(l){var u=s+"::"+c,d=s+"::",f=s+"::~",p=i.index("_doc_id_rev"),h=IDBKeyRange.bound(d,f,!1,!1),g=p.openCursor(h);g.onsuccess=function(e){if(g=e.target.result){var t=g.value;t._doc_id_rev===u&&n.put(t),i.delete(g.primaryKey),g.continue()}else r.delete(o.primaryKey),o.continue()}}else o.continue()}else t&&t()}}function s(e,t){var n=e.objectStore(tn),r=e.objectStore(nn),i=e.objectStore(rn),o=r.count();o.onsuccess=function(e){var r=e.target.result;if(!r)return t();n.openCursor().onsuccess=function(e){var n=e.target.result;if(!n)return t();for(var r=n.value,o=n.primaryKey,a=Object.keys(r._attachments||{}),s={},l=0;l<a.length;l++){var c=r._attachments[a[l]];s[c.digest]=!0}var u=Object.keys(s);for(l=0;l<u.length;l++){var d=u[l];i.put({seq:o,digestSeq:d+"::"+o})}n.continue()}}}function c(e){var t=e.objectStore(tn),n=e.objectStore(en),r=n.openCursor();r.onsuccess=function(e){var r=e.target.result;if(r){var i=function(e){if(!e.data)return e.deleted="1"===e.deletedOrLocal,e;return fn(e)}(r.value);if(i.winningRev=i.winningRev||Se(i),i.seq)return o();!function(){var e=i.id+"::",n=i.id+"::ï¿¿",r=0;t.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,n)).onsuccess=function(e){var t=e.target.result;if(!t)return i.seq=r,o();var n=t.primaryKey;n>r&&(r=n),t.continue()}}()}function o(){var e=dn(i,i.winningRev,i.deleted),t=n.put(e);t.onsuccess=function(){r.continue()}}}}e._meta=null,e._remote=!1,e.type=function(){return"idb"},e._id=M(function(t){t(null,e._meta.instanceId)}),e._bulkDocs=function(n,r,o){xn(t,n,r,e,i,o)},e._get=function(e,t,n){var r,o,a,s=t.ctx;if(!s){var l=bn(i,[en,tn,nn],"readonly");if(l.error)return n(l.error);s=l.txn}function c(){n(a,{doc:r,metadata:o,ctx:s})}s.objectStore(en).get(e).onsuccess=function(e){if(!(o=fn(e.target.result)))return a=ue(Y,"missing"),c();var n;if(t.rev)n=t.latest?Ue(t.rev,o):t.rev;else{n=o.winningRev;var i=Be(o);if(i)return a=ue(Y,"deleted"),c()}var l=s.objectStore(tn),u=o.id+"::"+n;l.index("_doc_id_rev").get(u).onsuccess=function(e){if((r=e.target.result)&&(r=pn(r)),!r)return a=ue(Y,"missing"),c();c()}}},e._getAttachment=function(e,t,n,r,o){var a;if(r.ctx)a=r.ctx;else{var s=bn(i,[en,tn,nn],"readonly");if(s.error)return o(s.error);a=s.txn}var l=n.digest,c=n.content_type;a.objectStore(nn).get(l).onsuccess=function(e){var t=e.target.result.body;hn(t,c,r.binary,function(e){o(null,e)})}},e._info=function(t){var n,r,o=bn(i,[on,tn],"readonly");if(o.error)return t(o.error);var a=o.txn;a.objectStore(on).get(on).onsuccess=function(e){r=e.target.result.docCount},a.objectStore(tn).openCursor(null,"prev").onsuccess=function(e){var t=e.target.result;n=t?t.key:0},a.oncomplete=function(){t(null,{doc_count:r,update_seq:n,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(e,t){wn(e,i,t)},e._changes=function(t){return Cn(t,e,r,i)},e._close=function(e){i.close(),Mn.delete(r),e()},e._getRevisionTree=function(e,t){var n=bn(i,[en],"readonly");if(n.error)return t(n.error);var r=n.txn,o=r.objectStore(en).get(e);o.onsuccess=function(e){var n=fn(e.target.result);n?t(null,n.rev_tree):t(ue(Y))}},e._doCompaction=function(e,t,n){var r=[en,tn,nn,rn],o=bn(i,r,"readwrite");if(o.error)return n(o.error);var a=o.txn,s=a.objectStore(en);s.get(e).onsuccess=function(n){var r=fn(n.target.result);Me(r.rev_tree,function(e,n,r,i,o){var a=n+"-"+r;-1!==t.indexOf(a)&&(o.status="missing")}),mn(t,e,a);var i=r.winningRev,o=r.deleted;a.objectStore(en).put(dn(r,i,o))},a.onabort=un(n),a.oncomplete=function(){n()}},e._getLocal=function(e,t){var n=bn(i,[an],"readonly");if(n.error)return t(n.error);var r=n.txn,o=r.objectStore(an).get(e);o.onerror=un(t),o.onsuccess=function(e){var n=e.target.result;n?(delete n._doc_id_rev,t(null,n)):t(ue(Y))}},e._putLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),delete e._revisions;var r=e._rev,o=e._id;e._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var a,s=t.ctx;if(!s){var l=bn(i,[an],"readwrite");if(l.error)return n(l.error);(s=l.txn).onerror=un(n),s.oncomplete=function(){a&&n(null,a)}}var c,u=s.objectStore(an);r?(c=u.get(o)).onsuccess=function(i){var o=i.target.result;if(o&&o._rev===r){var s=u.put(e);s.onsuccess=function(){a={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,a)}}else n(ue(Z))}:((c=u.add(e)).onerror=function(e){n(ue(Z)),e.preventDefault(),e.stopPropagation()},c.onsuccess=function(){a={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,a)})},e._removeLocal=function(e,t,n){"function"==typeof t&&(n=t,t={});var r,o=t.ctx;if(!o){var a=bn(i,[an],"readwrite");if(a.error)return n(a.error);(o=a.txn).oncomplete=function(){r&&n(null,r)}}var s=e._id,l=o.objectStore(an),c=l.get(s);c.onerror=un(n),c.onsuccess=function(i){var o=i.target.result;o&&o._rev===e._rev?(l.delete(s),r={ok:!0,id:s,rev:"0-0"},t.ctx&&n(null,r)):n(ue(Y))}},e._destroy=function(e,t){yn.removeAllListeners(r);var n=En.get(r);n&&n.result&&(n.result.close(),Mn.delete(r));var i=indexedDB.deleteDatabase(r);i.onsuccess=function(){En.delete(r),H()&&r in localStorage&&delete localStorage[r],t(null,{ok:!0})},i.onerror=un(t)};var u,d=Mn.get(r);if(d)return i=d.idb,e._meta=d.global,l()(function(){n(null,e)});u=t.storage?function(e,t){try{return indexedDB.open(e,{version:Qt,storage:t})}catch(t){return indexedDB.open(e,Qt)}}(r,t.storage):indexedDB.open(r,Qt);En.set(r,u),u.onupgradeneeded=function(e){var t=e.target.result;if(e.oldVersion<1)return function(e){var t=e.createObjectStore(en,{keyPath:"id"});e.createObjectStore(tn,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(nn,{keyPath:"digest"}),e.createObjectStore(on,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(sn),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(an,{keyPath:"_id"});var n=e.createObjectStore(rn,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var n=e.currentTarget.transaction;e.oldVersion<3&&function(e){e.createObjectStore(an,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(t),e.oldVersion<4&&function(e){var t=e.createObjectStore(rn,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var r=[o,a,s,c],i=e.oldVersion;!function e(){var t=r[i-1];i++;t&&t(n,e)}()},u.onsuccess=function(t){(i=t.target.result).onversionchange=function(){i.close(),Mn.delete(r)},i.onabort=function(e){V("error","Database has a global failure",e.target.error),i.close(),Mn.delete(r)};var o,a,s,l,c=i.transaction([on,sn,en],"readwrite"),u=!1;function d(){void 0!==s&&u&&(e._meta={name:r,instanceId:l,blobSupport:s},Mn.set(r,{idb:i,global:e._meta}),n(null,e))}function f(){if(void 0!==a&&void 0!==o){var e=r+"_id";e in o?l=o[e]:o[e]=l=Ce(),o.docCount=a,c.objectStore(on).put(o)}}c.objectStore(on).get(on).onsuccess=function(e){o=e.target.result||{id:on},f()},function(e,t){e.objectStore(en).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(e){t(e.target.result)}}(c,function(e){a=e,f()}),Sn||(Sn=function(e){return new x(function(t){var n=Ft([""]);e.objectStore(sn).put(n,"key").onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)},e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)}}).catch(function(){return!1})}(c)),Sn.then(function(e){s=e,d()}),c.oncomplete=function(){u=!0,d()},c.onabort=un(n)},u.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";V("error",e),n(ue(ae,e))}}(n,e,t)},t,n.constructor)}function Ln(e){return e<65?e-48:e-55}function Pn(e,t){return"UTF-8"===t?function(e){return decodeURIComponent(escape(e))}(function(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(Ln(e.charCodeAt(t++))<<4|Ln(e.charCodeAt(t++)));return r}(e,0,e.length)):function(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(Ln(e.charCodeAt(t+2))<<12|Ln(e.charCodeAt(t+3))<<8|Ln(e.charCodeAt(t))<<4|Ln(e.charCodeAt(t+1))),t+=4;return r}(e,0,e.length)}function Dn(e){return"'"+e+"'"}On.valid=function(){var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");try{return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}};var Rn=7,Fn=Dn("document-store"),jn=Dn("by-sequence"),In=Dn("attach-store"),Nn=Dn("local-store"),zn=Dn("metadata-store"),qn=Dn("attach-seq-store");function Hn(e){return delete e._id,delete e._rev,JSON.stringify(e)}function Bn(e,t,n){return(e=JSON.parse(e))._id=t,e._rev=n,e}function Vn(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function Un(e,t,n,r,i){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(i?" ORDER BY "+i:"")}function $n(e,t,n){if(e.length){var r=0,i=[];e.forEach(function(e){var r="SELECT seq FROM "+jn+" WHERE doc_id=? AND rev=?";n.executeSql(r,[t,e],function(e,t){if(!t.rows.length)return o();var n=t.rows.item(0).seq;i.push(n),e.executeSql("DELETE FROM "+jn+" WHERE seq=?",[n],o)})})}function o(){++r===e.length&&function(){if(!i.length)return;var e="SELECT DISTINCT digest AS digest FROM "+qn+" WHERE seq IN "+Vn(i.length);n.executeSql(e,i,function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).digest);if(n.length){var o="DELETE FROM "+qn+" WHERE seq IN ("+i.map(function(){return"?"}).join(",")+")";e.executeSql(o,i,function(e){var t="SELECT digest FROM "+qn+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")";e.executeSql(t,n,function(e,t){for(var r=new w,i=0;i<t.rows.length;i++)r.add(t.rows.item(i).digest);n.forEach(function(t){r.has(t)||(e.executeSql("DELETE FROM "+qn+" WHERE digest=?",[t]),e.executeSql("DELETE FROM "+In+" WHERE digest=?",[t]))})})})}})}()}}function Wn(e){return function(t){V("error","WebSQL threw an error",t);var n=t&&t.constructor.toString().match(/function ([^(]+)/),r=(n&&n[1]||t.type,t.target||t.message);e(ue(se,r))}}function Xn(e,t,n,r,i,o,a){var s,l=n.new_edits,c=t.docs.map(function(e){return e._id&&Ve(e._id)?e:Pt(e,l)}),u=c.filter(function(e){return e.error});if(u.length)return a(u[0]);var d,f=new Array(c.length),p=new k;function h(){if(d)return a(d);o.notify(r._name),a(null,f)}function g(e){var t=[];if(c.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(n){var r=e.data._attachments[n];r.stub&&t.push(r.digest)})}),!t.length)return e();var n,r=0;t.forEach(function(i){!function(e,t){var n="SELECT count(*) as cnt FROM "+In+" WHERE digest=?";s.executeSql(n,[e],function(n,r){if(0===r.rows.item(0).cnt){var i=ue(ce,"unknown stub attachment with digest "+e);t(i)}else t()})}(i,function(i){i&&!n&&(n=i),++r===t.length&&e(n)})})}function v(e,t,n,i,o,a,l,c){function u(){var t=e.data,n=i?1:0,r=t._id,o=t._rev,a=Hn(t),l="INSERT INTO "+jn+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",c=[r,o,a,n];function u(e,n){var r=0,i=Object.keys(t._attachments||{});if(!i.length)return n();function o(){return++r===i.length&&n(),!1}function a(n){var r="INSERT INTO "+qn+" (digest, seq) VALUES (?,?)",i=[t._attachments[n].digest,e];s.executeSql(r,i,o,o)}for(var l=0;l<i.length;l++)a(i[l])}s.executeSql(l,c,function(e,t){var n=t.insertId;u(n,function(){b(e,n)})},function(){var e=Un("seq",jn,null,"doc_id=? AND rev=?");return s.executeSql(e,[r,o],function(e,t){var i=t.rows.item(0).seq,s="UPDATE "+jn+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",l=[a,n,r,o];e.executeSql(s,l,function(e){u(i,function(){b(e,i)})})}),!1})}function d(e){h||(e?c(h=e):g===v.length&&u())}var h=null,g=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var v=Object.keys(e.data._attachments||{});function m(e){g++,d(e)}function b(n,i){var a=e.metadata.id,s=e.stemmedRevs||[];o&&r.auto_compaction&&(s=Pe(e.metadata).concat(s)),s.length&&$n(s,a,n),e.metadata.seq=i;var u=e.metadata.rev;delete e.metadata.rev;var d=o?"UPDATE "+Fn+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+jn+" WHERE doc_id="+Fn+".id AND rev=?) WHERE id=?":"INSERT INTO "+Fn+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",h=cn(e.metadata),g=o?[h,i,t,a]:[a,i,i,h];n.executeSql(d,g,function(){f[l]={ok:!0,id:e.metadata.id,rev:u},p.set(a,e.metadata),c()})}i&&(e.data._deleted=!0),v.forEach(function(n){var r=e.data._attachments[n];if(r.stub)g++,d();else{var i=r.data;delete r.data,r.revpos=parseInt(t,10),function(e,t,n){var r="SELECT digest FROM "+In+" WHERE digest=?";s.executeSql(r,[e],function(i,o){if(o.rows.length)return n();r="INSERT INTO "+In+" (digest, body, escaped) VALUES (?,?,1)",i.executeSql(r,[e,function(e){return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}(t)],function(){n()},function(){return n(),!1})})}(r.digest,i,m)}}),v.length||u()}function m(){Kt(e.revs_limit,c,r,p,s,f,v,n)}Zt(c,"binary",function(e){if(e)return a(e);i.transaction(function(e){s=e,g(function(e){e?d=e:function(e){if(!c.length)return e();var t=0;function n(){++t===c.length&&e()}c.forEach(function(e){if(e._id&&Ve(e._id))return n();var t=e.metadata.id;s.executeSql("SELECT json FROM "+Fn+" WHERE id = ?",[t],function(e,r){if(r.rows.length){var i=ln(r.rows.item(0).json);p.set(t,i)}n()})})}(m)})},Wn(a),h)})}var Gn=new k;var Yn=new B;function Zn(e,t,n,r,i){var o=Object.keys(e._attachments||{});if(!o.length)return i&&i();var a=0;function s(){++a===o.length&&i&&i()}o.forEach(function(i){t.attachments&&t.include_docs?function(e,i){var o=e._attachments[i],a={binary:t.binary,ctx:r};n._getAttachment(e._id,i,o,a,function(t,n){e._attachments[i]=W(R(o,["digest","content_type"]),{data:n}),s()})}(e,i):(e._attachments[i].stub=!0,s())})}var Jn=1,Kn="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+jn+" (seq, deleted)",Qn="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+jn+" (doc_id, rev)",er="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+Fn+" (winningseq)",tr="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+qn+" (seq)",nr="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+qn+" (digest, seq)",rr=jn+".seq = "+Fn+".winningseq",ir=jn+".seq AS seq, "+jn+".deleted AS deleted, "+jn+".json AS data, "+jn+".rev AS rev, "+Fn+".json AS metadata";function or(e,t){var n,r=this,i=null,o=function(e){return"size"in e?1e6*e.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1}(e),a=[];r._name=e.name;var s=function(e){var t=Gn.get(e.name);return t||(t=function(e){try{return{db:function(e){return e.websql(e.name,e.version,e.description,e.size)}(e)}}catch(e){return{error:e}}}(e),Gn.set(e.name,t)),t}(W({},e,{version:Jn,description:e.name,size:o}));if(s.error)return Wn(t)(s.error);var l=s.db;function c(){H()&&(window.localStorage["_pouch__websqldb_"+r._name]=!0),t(null,r)}function u(e,t){e.executeSql(er),e.executeSql("ALTER TABLE "+jn+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(Kn),e.executeSql("ALTER TABLE "+Fn+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+Fn+" (local, id)");var n="SELECT "+Fn+".winningseq AS seq, "+Fn+".json AS metadata FROM "+jn+" JOIN "+Fn+" ON "+jn+".seq = "+Fn+".winningseq";e.executeSql(n,[],function(e,n){for(var r=[],i=[],o=0;o<n.rows.length;o++){var a=n.rows.item(o),s=a.seq,l=JSON.parse(a.metadata);Be(l)&&r.push(s),Ve(l.id)&&i.push(l.id)}e.executeSql("UPDATE "+Fn+"SET local = 1 WHERE id IN "+Vn(i.length),i,function(){e.executeSql("UPDATE "+jn+" SET deleted = 1 WHERE seq IN "+Vn(r.length),r,t)})})})})}function d(e,t){var n="CREATE TABLE IF NOT EXISTS "+Nn+" (id UNIQUE, rev, json)";e.executeSql(n,[],function(){var n="SELECT "+Fn+".id AS id, "+jn+".json AS data FROM "+jn+" JOIN "+Fn+" ON "+jn+".seq = "+Fn+".winningseq WHERE local = 1";e.executeSql(n,[],function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i));!function n(){if(!r.length)return t(e);var i=r.shift(),o=JSON.parse(i.data)._rev;e.executeSql("INSERT INTO "+Nn+" (id, rev, json) VALUES (?,?,?)",[i.id,o,i.data],function(e){e.executeSql("DELETE FROM "+Fn+" WHERE id=?",[i.id],function(e){e.executeSql("DELETE FROM "+jn+" WHERE seq=?",[i.seq],function(){n()})})})}()})})}function f(e,t){function r(r){!function i(){if(!r.length)return t(e);var o=Pn(r.shift().hex,n),a=o.lastIndexOf("::"),s=o.substring(0,a),l=o.substring(a+2),c="UPDATE "+jn+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(c,[s,l,o],function(){i()})}()}var i="ALTER TABLE "+jn+" ADD COLUMN doc_id";e.executeSql(i,[],function(e){var t="ALTER TABLE "+jn+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(Qn,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+jn;e.executeSql(t,[],function(e,t){for(var n=[],i=0;i<t.rows.length;i++)n.push(t.rows.item(i));r(n)})})})})}function p(e,t){function n(e){var n="SELECT COUNT(*) AS cnt FROM "+In;e.executeSql(n,[],function(e,n){if(!n.rows.item(0).cnt)return t(e);var r=0,i=10;!function n(){var o=Un(ir+", "+Fn+".id AS id",[Fn,jn],rr,null,Fn+".id ");o+=" LIMIT "+i+" OFFSET "+r,r+=i,e.executeSql(o,[],function(e,r){if(!r.rows.length)return t(e);var i={};function o(e,t){var n=i[e]=i[e]||[];-1===n.indexOf(t)&&n.push(t)}for(var a=0;a<r.rows.length;a++)for(var s=r.rows.item(a),l=Bn(s.data,s.id,s.rev),c=Object.keys(l._attachments||{}),u=0;u<c.length;u++)o(l._attachments[c[u]].digest,s.seq);var d=[];if(Object.keys(i).forEach(function(e){i[e].forEach(function(t){d.push([e,t])})}),!d.length)return n();var f=0;d.forEach(function(t){var r="INSERT INTO "+qn+" (digest, seq) VALUES (?,?)";e.executeSql(r,t,function(){++f===d.length&&n()})})})}()})}var r="CREATE TABLE IF NOT EXISTS "+qn+" (digest, seq INTEGER)";e.executeSql(r,[],function(e){e.executeSql(nr,[],function(e){e.executeSql(tr,[],n)})})}function h(e,t){var n="ALTER TABLE "+In+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(n,[],t)}function g(e,t){var n="ALTER TABLE "+Fn+" ADD COLUMN max_seq INTEGER";e.executeSql(n,[],function(e){var n="UPDATE "+Fn+" SET max_seq=(SELECT MAX(seq) FROM "+jn+" WHERE doc_id=id)";e.executeSql(n,[],function(e){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+Fn+" (max_seq)";e.executeSql(n,[],t)})})}function v(){for(;a.length>0;){a.pop()(null,i)}}function m(e,t){if(0===t){var n="CREATE TABLE IF NOT EXISTS "+zn+" (dbid, db_version INTEGER)",r="CREATE TABLE IF NOT EXISTS "+In+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",o="CREATE TABLE IF NOT EXISTS "+qn+" (digest, seq INTEGER)",a="CREATE TABLE IF NOT EXISTS "+Fn+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",s="CREATE TABLE IF NOT EXISTS "+jn+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",l="CREATE TABLE IF NOT EXISTS "+Nn+" (id UNIQUE, rev, json)";e.executeSql(r),e.executeSql(l),e.executeSql(o,[],function(){e.executeSql(tr),e.executeSql(nr)}),e.executeSql(a,[],function(){e.executeSql(er),e.executeSql(s,[],function(){e.executeSql(Kn),e.executeSql(Qn),e.executeSql(n,[],function(){var t="INSERT INTO "+zn+" (db_version, dbid) VALUES (?,?)";i=Ce();var n=[Rn,i];e.executeSql(t,n,function(){v()})})})})}else{var c=[u,d,f,p,h,g,function(){t<Rn&&e.executeSql("UPDATE "+zn+" SET db_version = "+Rn);var n="SELECT dbid FROM "+zn;e.executeSql(n,[],function(e,t){i=t.rows.item(0).dbid,v()})}],m=t,b=function(e){c[m-1](e,b),m++};b(e)}}function b(e,t){var n="SELECT MAX(seq) AS seq FROM "+jn;e.executeSql(n,[],function(e,n){var r=n.rows.item(0).seq||0;t(r)})}function y(e,t){var n=Un("COUNT("+Fn+".id) AS 'num'",[Fn,jn],rr,jn+".deleted=0");e.executeSql(n,[],function(e,n){t(n.rows.item(0).num)})}"function"!=typeof l.readTransaction&&(l.readTransaction=l.transaction),l.transaction(function(e){!function(e,t){e.executeSql('SELECT HEX("a") AS hex',[],function(e,r){var i=r.rows.item(0).hex;n=2===i.length?"UTF-8":"UTF-16",t()})}(e,function(){!function(e){var t="SELECT sql FROM sqlite_master WHERE tbl_name = "+zn;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+zn,[],function(e,t){var n=t.rows.item(0).db_version;m(e,n)}):e.executeSql("ALTER TABLE "+zn+" ADD COLUMN db_version INTEGER",[],function(){m(e,1)}):m(e,0)})}(e)})},Wn(t),c),r._remote=!1,r.type=function(){return"websql"},r._id=M(function(e){e(null,i)}),r._info=function(e){var t,r;l.readTransaction(function(e){b(e,function(e){t=e}),y(e,function(e){r=e})},Wn(e),function(){e(null,{doc_count:r,update_seq:t,websql_encoding:n})})},r._bulkDocs=function(t,n,i){Xn(e,t,n,r,l,Yn,i)},r._get=function(e,t,n){var i,o,a,s,c=t.ctx;if(!c)return l.readTransaction(function(i){r._get(e,W({ctx:i},t),n)});function u(e){n(e,{doc:i,metadata:o,ctx:c})}if(t.rev){if(t.latest)return void function(e,t,n,r,i){var o=Un(ir,[Fn,jn],rr,Fn+".id=?"),a=[t];e.executeSql(o,a,function(e,t){if(!t.rows.length){var o=ue(Y,"missing");return i(o)}var a=ln(t.rows.item(0).metadata);r(Ue(n,a))})}(c,e,t.rev,function(i){t.latest=!1,t.rev=i,r._get(e,t,n)},u);a=Un(ir,[Fn,jn],Fn+".id="+jn+".doc_id",[jn+".doc_id=?",jn+".rev=?"]),s=[e,t.rev]}else a=Un(ir,[Fn,jn],rr,Fn+".id=?"),s=[e];c.executeSql(a,s,function(e,n){if(!n.rows.length)return u(ue(Y,"missing"));var r=n.rows.item(0);if(o=ln(r.metadata),r.deleted&&!t.rev)return u(ue(Y,"deleted"));i=Bn(r.data,o.id,r.rev),u()})},r._allDocs=function(e,t){var n,i,o=[],a="startkey"in e&&e.startkey,s="endkey"in e&&e.endkey,c="key"in e&&e.key,u="keys"in e&&e.keys,d="descending"in e&&e.descending,f="limit"in e?e.limit:-1,p="skip"in e?e.skip:0,h=!1!==e.inclusive_end,g=[],v=[];if(u){var m=[],x="";u.forEach(function(e){-1===m.indexOf(e)&&(m.push(e),x+="?,")}),x=x.substring(0,x.length-1),v.push(Fn+".id IN ("+x+")"),g=g.concat(m)}else if(!1!==c)v.push(Fn+".id = ?"),g.push(c);else if(!1!==a||!1!==s){if(!1!==a&&(v.push(Fn+".id "+(d?"<=":">=")+" ?"),g.push(a)),!1!==s){var _=d?">":"<";h&&(_+="="),v.push(Fn+".id "+_+" ?"),g.push(s)}!1!==c&&(v.push(Fn+".id = ?"),g.push(c))}u||v.push(jn+".deleted = 0"),l.readTransaction(function(t){if(y(t,function(e){n=e}),e.update_seq&&b(t,function(e){i=e}),0!==f){var a=Un(ir,[Fn,jn],rr,v,Fn+".id "+(d?"DESC":"ASC"));a+=" LIMIT "+f+" OFFSET "+p,t.executeSql(a,g,function(t,n){for(var i=0,a=n.rows.length;i<a;i++){var s=n.rows.item(i),l=ln(s.metadata),c=l.id,d=Bn(s.data,c,s.rev),f=d._rev,p={id:c,key:c,value:{rev:f}};if(e.include_docs){if(p.doc=d,p.doc._rev=f,e.conflicts){var h=Le(l);h.length&&(p.doc._conflicts=h)}Zn(p.doc,e,r,t)}if(s.deleted){if(!u)continue;p.value.deleted=!0,p.doc=null}if(u){var g=u.indexOf(c,g);do{o[g]=p,g=u.indexOf(c,g+1)}while(g>-1&&g<u.length)}else o.push(p)}u&&u.forEach(function(e,t){o[t]||(o[t]={key:e,error:"not_found"})})})}},Wn(t),function(){var r={total_rows:n,offset:e.skip,rows:o};e.update_seq&&(r.update_seq=i),t(null,r)})},r._changes=function(e){if((e=C(e)).continuous){var t=r._name+":"+Ce();return Yn.addListener(r._name,t,r,e),Yn.notify(r._name),{cancel:function(){Yn.removeListener(r._name,t)}}}var n=e.descending;e.since=e.since&&!n?e.since:0;var i,o="limit"in e?e.limit:-1;0===o&&(o=1),i="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var a=[],s=0;!function(){var t=Fn+".json AS metadata, "+Fn+".max_seq AS maxSeq, "+jn+".json AS winningDoc, "+jn+".rev AS winningRev ",c=Fn+" JOIN "+jn,u=Fn+".id="+jn+".doc_id AND "+Fn+".winningseq="+jn+".seq",d=["maxSeq > ?"],f=[e.since];e.doc_ids&&(d.push(Fn+".id IN "+Vn(e.doc_ids.length)),f=f.concat(e.doc_ids));var p=Un(t,c,u,d,"maxSeq "+(n?"DESC":"ASC")),h=fe(e);e.view||e.filter||(p+=" LIMIT "+o);var g=e.since||0;l.readTransaction(function(t){t.executeSql(p,f,function(t,n){function l(t){return function(){e.onChange(t)}}for(var c=0,u=n.rows.length;c<u;c++){var d=n.rows.item(c),f=ln(d.metadata);g=d.maxSeq;var p=Bn(d.winningDoc,f.id,d.winningRev),v=e.processChange(p,f,e);v.seq=d.maxSeq;var m=h(v);if("object"==typeof m)return e.complete(m);if(m&&(s++,i&&a.push(v),e.attachments&&e.include_docs?Zn(p,e,r,t,l(v)):l(v)()),s===o)break}})},Wn(e.complete),function(){e.continuous||e.complete(null,{results:a,last_seq:g})})}()},r._close=function(e){e()},r._getAttachment=function(e,t,r,i,o){var a,s=i.ctx,l=r.digest,c=r.content_type,u="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+In+" WHERE digest=?";s.executeSql(u,[l],function(e,t){var r=t.rows.item(0),s=r.escaped?function(e){return e.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}(r.body):Pn(r.body,n);a=i.binary?jt(s,c):Rt(s),o(null,a)})},r._getRevisionTree=function(e,t){l.readTransaction(function(n){var r="SELECT json AS metadata FROM "+Fn+" WHERE id = ?";n.executeSql(r,[e],function(e,n){if(n.rows.length){var r=ln(n.rows.item(0).metadata);t(null,r.rev_tree)}else t(ue(Y))})})},r._doCompaction=function(e,t,n){if(!t.length)return n();l.transaction(function(n){var r="SELECT json AS metadata FROM "+Fn+" WHERE id = ?";n.executeSql(r,[e],function(n,r){var i=ln(r.rows.item(0).metadata);Me(i.rev_tree,function(e,n,r,i,o){var a=n+"-"+r;-1!==t.indexOf(a)&&(o.status="missing")});var o="UPDATE "+Fn+" SET json = ? WHERE id = ?";n.executeSql(o,[cn(i),e])}),$n(t,e,n)},Wn(n),function(){n()})},r._getLocal=function(e,t){l.readTransaction(function(n){var r="SELECT json, rev FROM "+Nn+" WHERE id=?";n.executeSql(r,[e],function(n,r){if(r.rows.length){var i=r.rows.item(0),o=Bn(i.json,e,i.rev);t(null,o)}else t(ue(Y))})})},r._putLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),delete e._revisions;var r,i=e._rev,o=e._id;r=e._rev=i?"0-"+(parseInt(i.split("-")[1],10)+1):"0-1";var a,s=Hn(e);function c(e){var l,c;i?(l="UPDATE "+Nn+" SET rev=?, json=? WHERE id=? AND rev=?",c=[r,s,o,i]):(l="INSERT INTO "+Nn+" (id, rev, json) VALUES (?,?,?)",c=[o,r,s]),e.executeSql(l,c,function(e,i){i.rowsAffected?(a={ok:!0,id:o,rev:r},t.ctx&&n(null,a)):n(ue(Z))},function(){return n(ue(Z)),!1})}t.ctx?c(t.ctx):l.transaction(c,Wn(n),function(){a&&n(null,a)})},r._removeLocal=function(e,t,n){var r;function i(i){var o="DELETE FROM "+Nn+" WHERE id=? AND rev=?",a=[e._id,e._rev];i.executeSql(o,a,function(i,o){if(!o.rowsAffected)return n(ue(Y));r={ok:!0,id:e._id,rev:"0-0"},t.ctx&&n(null,r)})}"function"==typeof t&&(n=t,t={}),t.ctx?i(t.ctx):l.transaction(i,Wn(n),function(){r&&n(null,r)})},r._destroy=function(e,t){Yn.removeAllListeners(r._name),l.transaction(function(e){[Fn,jn,In,zn,Nn,qn].forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},Wn(t),function(){H()&&(delete window.localStorage["_pouch__websqldb_"+r._name],delete window.localStorage[r._name]),t(null,{ok:!0})})}}function ar(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var e=H(),t="_pouch__websqldb_valid_"+navigator.userAgent;if(e&&localStorage[t])return"1"===localStorage[t];var n=function(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(e){return!1}}();return e&&(localStorage[t]=n?"1":"0"),n}function sr(e,t,n,r){return openDatabase(e,t,n,r)}function lr(e,t){V("warn","WebSQL is deprecated and will be removed in future releases of PouchDB. Please migrate to IndexedDB: https://pouchdb.com/2018/01/23/pouchdb-6.4.2.html");var n=W({websql:sr},e);or.call(this,n,t)}function cr(e,t){var n,r,i,o=new Headers,a={method:e.method,credentials:"include",headers:o};return e.json&&(o.set("Accept","application/json"),o.set("Content-Type",e.headers["Content-Type"]||"application/json")),e.body&&e.processData&&"string"!=typeof e.body?a.body=JSON.stringify(e.body):a.body="body"in e?e.body:null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&o.set(t,e.headers[t])}),n=function(){for(var e={},t=new x(function(t,n){e.resolve=t,e.reject=n}),n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.promise=t,x.resolve().then(function(){return fetch.apply(null,n)}).then(function(t){e.resolve(t)}).catch(function(t){e.reject(t)}),e}(e.url,a),e.timeout>0&&(r=setTimeout(function(){n.reject(new Error("Load timeout for resource: "+e.url))},e.timeout)),n.promise.then(function(t){return i={statusCode:t.status},e.timeout>0&&clearTimeout(r),i.statusCode>=200&&i.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){i.statusCode>=200&&i.statusCode<300?t(null,i,e):(e.status=i.statusCode,t(e))}).catch(function(e){e||(e=new Error("canceled")),t(e)}),{abort:n.reject}}lr.valid=function(){return"function"==typeof openDatabase&&ar()},lr.use_prefix=!0;var ur=function(){try{return new XMLHttpRequest,!0}catch(e){return!1}}();function dr(e,t){return ur||e.xhr?function(e,t){var n,r,i=!1,o=function(){i=!0,n.abort(),s()},a={abort:function(){n.abort(),s()}},s=function(){clearTimeout(r),a.abort=function(){},n&&(n.onprogress=void 0,n.upload&&(n.upload.onprogress=void 0),n.onreadystatechange=void 0,n=void 0)};n=e.xhr?new e.xhr:new XMLHttpRequest;try{n.open(e.method,e.url)}catch(e){return t(new Error(e.name||"Url is invalid"))}for(var l in n.withCredentials=!("withCredentials"in e)||e.withCredentials,"GET"===e.method?delete e.headers["Content-Type"]:e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(n.responseType="arraybuffer"),"body"in e||(e.body=null),e.headers)e.headers.hasOwnProperty(l)&&n.setRequestHeader(l,e.headers[l]);return e.timeout>0&&(r=setTimeout(o,e.timeout),n.onprogress=function(){clearTimeout(r),4!==n.readyState&&(r=setTimeout(o,e.timeout))},void 0!==n.upload&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var r={statusCode:n.status};if(n.status>=200&&n.status<300){var o;o=e.binary?Ft([n.response||""],{type:n.getResponseHeader("Content-Type")}):n.responseText,t(null,r,o)}else{var a={};if(i)(a=new Error("ETIMEDOUT")).code="ETIMEDOUT";else if("string"==typeof n.response&&""!==n.response)try{a=JSON.parse(n.response)}catch(e){}a.status=n.status,t(a)}s()}},e.body&&e.body instanceof Blob?Bt(e.body,function(e){n.send(e)}):n.send(e.body),a}(e,t):cr(e,t)}function fr(e,t){e=C(e);return(e=W({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},e)).json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),dr(e,function(n,r,i){if(n)return t(de(n));var o,a=r.headers&&r.headers["content-type"],s=i||"";if(!e.binary&&(e.json||!e.processData)&&"object"!=typeof s&&(/json/.test(a)||/^[\s]*\{/.test(s)&&/\}[\s]*$/.test(s)))try{s=JSON.parse(s.toString())}catch(e){}r.statusCode>=200&&r.statusCode<300?function(t,n,r){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){return r(e)}Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?de(e):e})),e.binary,r(null,t,n)}(s,r,t):((o=de(s)).status=r.statusCode,t(o))})}function pr(e,t){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r=-1!==n.indexOf("safari")&&-1===n.indexOf("chrome"),i=-1!==n.indexOf("msie"),o=-1!==n.indexOf("trident"),a=-1!==n.indexOf("edge"),s=r||(i||o||a)&&"GET"===e.method,l=!("cache"in e)||e.cache;if(!/^blob:/.test(e.url)&&(s||!l)){var c=-1!==e.url.indexOf("?");e.url+=(c?"&":"?")+"_nonce="+Date.now()}return fr(e,t)}var hr=25,gr=50,vr=5e3,mr=1e4,br={};function yr(e){var t=(e.doc||e.ok)._attachments;t&&Object.keys(t).forEach(function(e){var n=t[e];n.data=It(n.data,n.content_type)})}function xr(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function _r(e){return e._attachments&&Object.keys(e._attachments)?x.all(Object.keys(e._attachments).map(function(t){var n=e._attachments[t];if(n.data&&"string"!=typeof n.data)return new x(function(e){Ht(n.data,e)}).then(function(e){n.data=e})})):x.resolve()}function wr(e,t){if(function(e){if(!e.prefix)return!1;var t=we(e.prefix).protocol;return"http"===t||"https"===t}(t)){var n=t.name.substr(t.prefix.length);e=t.prefix+encodeURIComponent(n)}var r=we(e);(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var i=r.path.replace(/(^\/|\/$)/g,"").split("/");return r.db=i.pop(),-1===r.db.indexOf("%")&&(r.db=encodeURIComponent(r.db)),r.path=i.join("/"),r}function kr(e,t){return Tr(e,e.db+"/"+t)}function Tr(e,t){var n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function Ar(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function Cr(e,t){var n,r=this,i=wr(e.name,e),o=kr(i,""),s=(e=C(e)).ajax||{};if(e.auth||i.auth){var c=e.auth||i.auth,u=c.username+":"+c.password,d=Rt(unescape(encodeURIComponent(u)));s.headers=s.headers||{},s.headers.Authorization="Basic "+d}function f(e,t,n){var i=(e||{}).ajax||{},o=W(C(s),i,t),a=C(s.headers||{});return o.headers=W(a,i.headers,t.headers||{}),r.constructor.listeners("debug").length&&r.constructor.emit("debug",["http",o.method,o.url]),r._ajax(o,n)}function p(e,t){return new x(function(n,r){f(e,t,function(e,t){if(e)return r(e);n(t)})})}function h(e,t){return E(e,a()(function(e){g().then(function(){return t.apply(this,e)}).catch(function(t){e.pop()(t)})}))}function g(){return e.skipSetup||e.skip_setup?x.resolve():n||((n=p({},{method:"GET",url:o}).catch(function(e){return e&&e.status&&404===e.status?($(404,"PouchDB is just detecting if the remote exists."),p({},{method:"PUT",url:o})):x.reject(e)}).catch(function(e){return!(!e||!e.status||412!==e.status)||x.reject(e)})).catch(function(){n=null}),n)}function v(e){return e.split("/").map(encodeURIComponent).join("/")}r._ajax=pr,l()(function(){t(null,r)}),r._remote=!0,r.type=function(){return"http"},r.id=h("id",function(e){f({},{method:"GET",url:Tr(i,"")},function(t,n){var r=n&&n.uuid?n.uuid+i.db:kr(i,"");e(null,r)})}),r.request=h("request",function(e,t){e.url=kr(i,e.url),f({},e,t)}),r.compact=h("compact",function(e,t){"function"==typeof e&&(t=e,e={}),f(e=C(e),{url:kr(i,"_compact"),method:"POST"},function(){!function n(){r.info(function(r,i){i&&!i.compact_running?t(null,{ok:!0}):setTimeout(n,e.interval||200)})}()})}),r.bulkGet=E("bulkGet",function(e,t){var n=this;function r(t){var n={};e.revs&&(n.revs=!0),e.attachments&&(n.attachments=!0),e.latest&&(n.latest=!0),f(e,{url:kr(i,"_bulk_get"+Ar(n)),method:"POST",body:{docs:e.docs}},function(n,r){!n&&e.attachments&&e.binary&&r.results.forEach(function(e){e.docs.forEach(yr)}),t(n,r)})}function o(){var r=gr,i=Math.ceil(e.docs.length/r),o=0,a=new Array(i);function l(e){return function(n,r){a[e]=r.results,++o===i&&t(null,{results:pe(a)})}}for(var c=0;c<i;c++){var u=R(e,["revs","attachments","binary","latest"]);u.ajax=s,u.docs=e.docs.slice(c*r,Math.min(e.docs.length,(c+1)*r)),z(n,u,l(c))}}var a=Tr(i,""),l=br[a];"boolean"!=typeof l?r(function(e,n){e?(br[a]=!1,$(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):(br[a]=!0,t(null,n))}):l?r(t):o()}),r._info=function(e){g().then(function(){f({},{method:"GET",url:kr(i,"")},function(t,n){if(t)return e(t);n.host=kr(i,""),e(null,n)})}).catch(e)},r.get=h("get",function(e,t,n){"function"==typeof t&&(n=t,t={});var r={};(t=C(t)).revs&&(r.revs=!0),t.revs_info&&(r.revs_info=!0),t.latest&&(r.latest=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),r.open_revs=t.open_revs),t.rev&&(r.rev=t.rev),t.conflicts&&(r.conflicts=t.conflicts),t.update_seq&&(r.update_seq=t.update_seq),e=xr(e);var o={method:"GET",url:kr(i,e+Ar(r))};function a(e){var n=e._attachments,r=n&&Object.keys(n);if(n&&r.length)return function(e,t){return new x(function(n,r){var i,o=0,a=0,s=0,l=e.length;function c(){++s===l?i?r(i):n():f()}function u(){o--,c()}function d(e){o--,i=i||e,c()}function f(){for(;o<t&&a<l;)o++,e[a++]().then(u,d)}f()})}(r.map(function(r){return function(){return function(r){var o=n[r],a=xr(e._id)+"/"+v(r)+"?rev="+e._rev;return p(t,{method:"GET",url:kr(i,a),binary:!0}).then(function(e){return t.binary?e:new x(function(t){Ht(e,t)})}).then(function(e){delete o.stub,delete o.length,o.data=e})}(r)}}),5)}p(t,o).then(function(e){return x.resolve().then(function(){if(t.attachments)return function(e){return Array.isArray(e)?x.all(e.map(function(e){if(e.ok)return a(e.ok)})):a(e)}(e)}).then(function(){n(null,e)})}).catch(function(t){t.docId=e,n(t)})}),r.remove=h("remove",function(e,t,n,r){var o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(o=e,"function"==typeof t?(r=t,n={}):(r=n,n=t));var a=o._rev||n.rev;f(n,{method:"DELETE",url:kr(i,xr(o._id))+"?rev="+a},r)}),r.getAttachment=h("getAttachment",function(e,t,n,r){"function"==typeof n&&(r=n,n={});var o=n.rev?"?rev="+n.rev:"";f(n,{method:"GET",url:kr(i,xr(e))+"/"+v(t)+o,binary:!0},r)}),r.removeAttachment=h("removeAttachment",function(e,t,n,r){f({},{method:"DELETE",url:kr(i,xr(e)+"/"+v(t))+"?rev="+n},r)}),r.putAttachment=h("putAttachment",function(e,t,n,r,o,a){"function"==typeof o&&(a=o,o=r,r=n,n=null);var l=xr(e)+"/"+v(t),c=kr(i,l);if(n&&(c+="?rev="+n),"string"==typeof r){var u;try{u=Dt(r)}catch(e){return a(ue(te,"Attachment is not a valid base64 string"))}r=u?jt(u,o):""}f({},{headers:{"Content-Type":o},method:"PUT",url:c,processData:!1,body:r,timeout:s.timeout||6e4},a)}),r._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,g().then(function(){return x.all(e.docs.map(_r))}).then(function(){f(t,{method:"POST",url:kr(i,"_bulk_docs"),timeout:t.timeout,body:e},function(e,t){if(e)return n(e);t.forEach(function(e){e.ok=!0}),n(null,t)})}).catch(n)},r._put=function(e,t,n){g().then(function(){return _r(e)}).then(function(){f(t,{method:"PUT",url:kr(i,xr(e._id)),body:e},function(t,r){if(t)return t.docId=e&&e._id,n(t);n(null,r)})}).catch(n)},r.allDocs=h("allDocs",function(e,t){"function"==typeof e&&(t=e,e={});var n,r={},o="GET";(e=C(e)).conflicts&&(r.conflicts=!0),e.update_seq&&(r.update_seq=!0),e.descending&&(r.descending=!0),e.include_docs&&(r.include_docs=!0),e.attachments&&(r.attachments=!0),e.key&&(r.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(r.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(r.endkey=JSON.stringify(e.endkey)),void 0!==e.inclusive_end&&(r.inclusive_end=!!e.inclusive_end),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.skip&&(r.skip=e.skip);var a=Ar(r);void 0!==e.keys&&(o="POST",n={keys:e.keys}),p(e,{method:o,url:kr(i,"_all_docs"+a),body:n}).then(function(n){e.include_docs&&e.attachments&&e.binary&&n.rows.forEach(yr),t(null,n)}).catch(t)}),r._changes=function(e){var t="batch_size"in e?e.batch_size:hr;!(e=C(e)).continuous||"heartbeat"in e||(e.heartbeat=mr);var n="timeout"in e?e.timeout:"timeout"in s?s.timeout:3e4;"timeout"in e&&e.timeout&&n-e.timeout<vr&&(n=e.timeout+vr),"heartbeat"in e&&e.heartbeat&&n-e.heartbeat<vr&&(n=e.heartbeat+vr);var r={};"timeout"in e&&e.timeout&&(r.timeout=e.timeout);var o,a=void 0!==e.limit&&e.limit;o="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var c=a;if(e.style&&(r.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(r.include_docs=!0),e.attachments&&(r.attachments=!0),e.continuous&&(r.feed="longpoll"),e.seq_interval&&(r.seq_interval=e.seq_interval),e.conflicts&&(r.conflicts=!0),e.descending&&(r.descending=!0),e.update_seq&&(r.update_seq=!0),"heartbeat"in e&&e.heartbeat&&(r.heartbeat=e.heartbeat),e.filter&&"string"==typeof e.filter&&(r.filter=e.filter),e.view&&"string"==typeof e.view&&(r.filter="_view",r.view=e.view),e.query_params&&"object"==typeof e.query_params)for(var u in e.query_params)e.query_params.hasOwnProperty(u)&&(r[u]=e.query_params[u]);var d,p,h,v="GET";e.doc_ids?(r.filter="_doc_ids",v="POST",d={doc_ids:e.doc_ids}):e.selector&&(r.filter="_selector",v="POST",d={selector:e.selector});var m=function(o,s){if(!e.aborted){r.since=o,"object"==typeof r.since&&(r.since=JSON.stringify(r.since)),e.descending?a&&(r.limit=c):r.limit=!a||c>t?t:c;var l={method:v,url:kr(i,"_changes"+Ar(r)),timeout:n,body:d};h=o,e.aborted||g().then(function(){p=f(e,l,s)}).catch(s)}},b={results:[]},y=function(n,r){if(!e.aborted){var i=0;if(r&&r.results){i=r.results.length,b.last_seq=r.last_seq;var s=null,u=null;"number"==typeof r.pending&&(s=r.pending),"string"!=typeof b.last_seq&&"number"!=typeof b.last_seq||(u=b.last_seq);e.query_params,r.results=r.results.filter(function(t){c--;var n=fe(e)(t);return n&&(e.include_docs&&e.attachments&&e.binary&&yr(t),o&&b.results.push(t),e.onChange(t,s,u)),n})}else if(n)return e.aborted=!0,void e.complete(n);r&&r.last_seq&&(h=r.last_seq);var d=a&&c<=0||r&&i<t||e.descending;(!e.continuous||a&&c<=0)&&d?e.complete(null,b):l()(function(){m(h,y)})}};return m(e.since||0,y),{cancel:function(){e.aborted=!0,p&&p.abort()}}},r.revsDiff=h("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={}),f(t,{method:"POST",url:kr(i,"_revs_diff"),body:e},n)}),r._close=function(e){e()},r._destroy=function(e,t){f(e,{url:kr(i,""),method:"DELETE"},function(e,n){if(e&&e.status&&404!==e.status)return t(e);t(null,n)})}}function Sr(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Sr)}catch(e){}}function Mr(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Mr)}catch(e){}}function Er(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Er)}catch(e){}}function Or(e,t){return t&&e.then(function(e){l()(function(){t(null,e)})},function(e){l()(function(){t(e)})}),e}function Lr(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function Pr(e){var t=new w(e),n=new Array(t.size),r=-1;return t.forEach(function(e){n[++r]=e}),n}function Dr(e){var t=new Array(e.size),n=-1;return e.forEach(function(e,r){t[++n]=r}),t}function Rr(e){return new Er("builtin "+e+" function requires map values to be numbers or number arrays")}function Fr(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if("number"!=typeof i){if(!Array.isArray(i))throw Rr("_sum");t="number"==typeof t?[t]:t;for(var o=0,a=i.length;o<a;o++){var s=i[o];if("number"!=typeof s)throw Rr("_sum");void 0===t[o]?t.push(s):t[o]+=s}}else"number"==typeof t?t+=i:t[0]+=i}return t}Cr.valid=function(){return!0},d()(Sr,Error),d()(Mr,Error),d()(Er,Error);var jr=V.bind(null,"log"),Ir=Array.isArray,Nr=JSON.parse;function zr(e,t){return ke("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:Fr,log:jr,isArray:Ir,toJSON:Nr})}function qr(){this.promise=new x(function(e){e()})}function Hr(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function Br(e,t,n,r,i,o){var a,s=function(e,t){return Hr(e)+Hr(t)+"undefined"}(n,r);if(!i&&(a=e._cachedViews=e._cachedViews||{})[s])return a[s];var l=e.info().then(function(l){var c=l.db_name+"-mrview-"+(i?"temp":function(e){return m.a.hash(e)}(s));return Te(e,"_local/"+o,function(e){e.views=e.views||{};var n=t;-1===n.indexOf("/")&&(n=t+"/"+t);var r=e.views[n]=e.views[n]||{};if(!r[c])return r[c]=!0,e}).then(function(){return e.registerDependentDatabase(c).then(function(t){var i=t.db;i.auto_compaction=!0;var o={name:c,db:i,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return o.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return o.seq=e?e.seq:0,a&&o.db.once("destroyed",function(){delete a[s]}),o})})})});return a&&(a[s]=l),l}qr.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},qr.prototype.finish=function(){return this.promise};var Vr={},Ur=new qr,$r=50;function Wr(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function Xr(e,t){try{e.emit("error",t)}catch(e){V("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),V("error",t)}}var Gr={_sum:function(e,t){return Fr(t)},_count:function(e,t){return t.length},_stats:function(e,t){return{sum:Fr(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:function(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];t+=i*i}return t}(t)}}};var Yr=function(e,t,n,r){function i(e,t,n){try{t(n)}catch(t){Xr(e,t)}}function o(e,t,n,r,i){try{return{output:t(n,r,i)}}catch(t){return Xr(e,t),{error:t}}}function s(e,t){var n=ct(e.key,t.key);return 0!==n?n:ct(e.value,t.value)}function c(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function u(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&function(e){e.rows.forEach(function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var n=t[e];t[e].data=It(n.data,n.content_type)})})}(t),t}}function d(e,t,n,r){var i=t[e];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function f(e){if(void 0!==e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function p(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if(void 0!==e[n]&&void 0!==e[r]&&ct(e[n],e[r])>0)throw new Sr("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new Sr("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new Sr("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(t){var n=function(e){if(e){if("number"!=typeof e)return new Sr('Invalid value for integer: "'+e+'"');if(e<0)return new Sr('Invalid value for positive integer: "'+e+'"')}}(e[t]);if(n)throw n})}function h(e){return function(t){if(404===t.status)return e;throw t}}function g(e,t,n){var r="_local/doc_"+e,i={_id:r,keys:[]},o=n.get(e),a=o[0];return(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(o[1])?x.resolve(i):t.db.get(r).catch(h(i))).then(function(e){return function(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):x.resolve({rows:[]})}(e).then(function(t){return function(e,t){for(var n=[],r=new w,i=0,o=t.rows.length;i<o;i++){var s=t.rows[i].doc;if(s&&(n.push(s),r.add(s._id),s._deleted=!a.has(s._id),!s._deleted)){var l=a.get(s._id);"value"in l&&(s.value=l.value)}}var c=Dr(a);return c.forEach(function(e){if(!r.has(e)){var t={_id:e},i=a.get(e);"value"in i&&(t.value=i.value),n.push(t)}}),e.keys=Pr(c.concat(e.keys)),n.push(e),n}(e,t)})})}function v(e){var t="string"==typeof e?e:e.name,n=Vr[t];return n||(n=Vr[t]=new qr),n}function m(e){return Lr(v(e),function(){return function(e){var n,r,o=t(e.mapFun,function(e,t){var i={id:r._id,key:ut(e)};void 0!==t&&null!==t&&(i.value=ut(t)),n.push(i)}),a=e.seq||0;function l(t,n){return function(){return function(e,t,n){return e.db.get("_local/lastSeq").catch(h({_id:"_local/lastSeq",seq:0})).then(function(r){var i=Dr(t);return x.all(i.map(function(n){return g(n,e,t)})).then(function(t){var i=pe(t);return r.seq=n,i.push(r),e.db.bulkDocs({docs:i})})})}(e,t,n)}}var c=new qr;function u(){return e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:a,limit:$r}).then(d)}function d(t){var d=t.results;if(d.length){var p=function(t){for(var l=new k,c=0,u=t.length;c<u;c++){var d=t[c];if("_"!==d.doc._id[0]){n=[],(r=d.doc)._deleted||i(e.sourceDB,o,r),n.sort(s);var p=f(n);l.set(d.doc._id,[p,d.changes])}a=d.seq}return l}(d);if(c.add(l(p,a)),!(d.length<$r))return u()}}function f(e){for(var t,n=new k,r=0,i=e.length;r<i;r++){var o=e[r],a=[o.key,o.id];r>0&&0===ct(o.key,t)&&a.push(r),n.set(ft(a),o),t=o.key}return n}return u().then(function(){return c.finish()}).then(function(){e.seq=a})}(e)})()}function b(e,t){return Lr(v(e),function(){return function(e,t){var r,i=e.reduceFun&&!1!==t.reduce,a=t.skip||0;function s(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return r=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||t>n))return e.doc.value}var r=function(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var o=pt(e,r);t.push(o.num),r+=o.length;break;case"4":for(var a="";;){var s=e[r];if("\0"===s)break;a+=s,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var l={element:[],index:t.length};t.push(l.element),n.push(l);break;case"6":var c={element:{},index:t.length};t.push(c.element),n.push(c);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();ht(t,n)}}}(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function l(s){var l;if(l=i?function(e,t,r){0===r.group_level&&delete r.group_level;var i=r.group||r.group_level,a=n(e.reduceFun),s=[],l=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;t.forEach(function(e){var t=s[s.length-1],n=i?e.key:null;if(i&&Array.isArray(n)&&(n=n.slice(0,l)),t&&0===ct(t.groupKey,n))return t.keys.push([e.key,e.id]),void t.values.push(e.value);s.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})}),t=[];for(var c=0,u=s.length;c<u;c++){var d=s[c],f=o(e.sourceDB,a,d.keys,d.values,!1);if(f.error&&f.error instanceof Er)throw f.error;t.push({value:f.error?null:f.output,key:d.groupKey})}return{rows:function(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}(t,r.limit,r.skip)}}(e,s,t):{total_rows:r,offset:a,rows:s},t.update_seq&&(l.update_seq=e.seq),t.include_docs){var u=Pr(s.map(c));return e.sourceDB.allDocs({keys:u,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then(function(e){var t=new k;return e.rows.forEach(function(e){t.set(e.id,e.doc)}),s.forEach(function(e){var n=c(e),r=t.get(n);r&&(e.doc=r)}),l})}return l}if(void 0===t.keys||t.keys.length||(t.limit=0,delete t.keys),void 0!==t.keys){var u=t.keys,d=u.map(function(e){var n={startkey:ft([e]),endkey:ft([e,{}])};return t.update_seq&&(n.update_seq=!0),s(n)});return x.all(d).then(pe).then(l)}var f,p,h={descending:t.descending};if(t.update_seq&&(h.update_seq=!0),"start_key"in t&&(f=t.start_key),"startkey"in t&&(f=t.startkey),"end_key"in t&&(p=t.end_key),"endkey"in t&&(p=t.endkey),void 0!==f&&(h.startkey=t.descending?ft([f,{}]):ft([f])),void 0!==p){var g=!1!==t.inclusive_end;t.descending&&(g=!g),h.endkey=ft(g?[p,{}]:[p])}if(void 0!==t.key){var v=ft([t.key]),m=ft([t.key,{}]);h.descending?(h.endkey=v,h.startkey=m):(h.startkey=v,h.endkey=m)}return i||("number"==typeof t.limit&&(h.limit=t.limit),h.skip=a),s(h).then(l)}(e,t)})()}function y(t,n,i){if("function"==typeof t._query)return function(e,t,n){return new x(function(r,i){e._query(t,n,function(e,t){if(e)return i(e);r(t)})})}(t,n,i);if(ge(t))return function(e,t,n){var r,i=[],o="GET";if(d("reduce",n,i),d("include_docs",n,i),d("attachments",n,i),d("limit",n,i),d("descending",n,i),d("group",n,i),d("group_level",n,i),d("skip",n,i),d("stale",n,i),d("conflicts",n,i),d("startkey",n,i,!0),d("start_key",n,i,!0),d("endkey",n,i,!0),d("end_key",n,i,!0),d("inclusive_end",n,i),d("key",n,i,!0),d("update_seq",n,i),i=""===(i=i.join("&"))?"":"?"+i,void 0!==n.keys){var a="keys="+encodeURIComponent(JSON.stringify(n.keys));a.length+i.length+1<=2e3?i+=("?"===i[0]?"&":"?")+a:(o="POST","string"==typeof t?r={keys:n.keys}:t.keys=n.keys)}if("string"==typeof t){var s=Wr(t);return e.request({method:o,url:"_design/"+s[0]+"/_view/"+s[1]+i,body:r}).then(function(e){return e.rows.forEach(function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)}),e}).then(u(n))}return r=r||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?r[e]=t[e]:r[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+i,body:r}).then(u(n))}(t,n,i);if("string"!=typeof n)return p(i,n),Ur.add(function(){return Br(t,"temp_view/temp_view",n.map,n.reduce,!0,e).then(function(e){return function(e,t){return e.then(function(e){return t().then(function(){return e})},function(e){return t().then(function(){throw e})})}(m(e).then(function(){return b(e,i)}),function(){return e.db.destroy()})})}),Ur.finish();var o=n,a=Wr(o),s=a[0],c=a[1];return t.get("_design/"+s).then(function(n){var a=n.views&&n.views[c];if(!a)throw new Mr("ddoc "+n._id+" has no view named "+c);return r(n,c),p(i,a),Br(t,o,a.map,a.reduce,!1,e).then(function(e){return"ok"===i.stale||"update_after"===i.stale?("update_after"===i.stale&&l()(function(){m(e)}),b(e,i)):m(e).then(function(){return b(e,i)})})})}return{query:function(e,t,n){var r=this;"function"==typeof t&&(n=t,t={}),t=t?function(e){return e.group_level=f(e.group_level),e.limit=f(e.limit),e.skip=f(e.skip),e}(t):{},"function"==typeof e&&(e={map:e});var i=x.resolve().then(function(){return y(r,e,t)});return Or(i,n),i},viewCleanup:function(e){return a()(function(t){var n=t.pop(),r=e.apply(this,t);return"function"==typeof n&&Or(r,n),r})}(function(){var t=this;return"function"==typeof t._viewCleanup?function(e){return new x(function(t,n){e._viewCleanup(function(e,r){if(e)return n(e);t(r)})})}(t):ge(t)?function(e){return e.request({method:"POST",url:"_view_cleanup"})}(t):function(t){return t.get("_local/"+e).then(function(e){var n=new k;Object.keys(e.views).forEach(function(e){var t=Wr(e),r="_design/"+t[0],i=t[1],o=n.get(r);o||(o=new w,n.set(r,o)),o.add(i)});var r={keys:Dr(n),include_docs:!0};return t.allDocs(r).then(function(r){var i={};r.rows.forEach(function(t){var r=t.key.substring(8);n.get(t.key).forEach(function(n){var o=r+"/"+n;e.views[o]||(o=n);var a=Object.keys(e.views[o]),s=t.doc&&t.doc.views&&t.doc.views[n];a.forEach(function(e){i[e]=i[e]||s})})});var o=Object.keys(i).filter(function(e){return!i[e]}).map(function(e){return Lr(v(e),function(){return new t.constructor(e,t.__opts).destroy()})()});return x.all(o).then(function(){return{ok:!0}})})},h({ok:!0}))}(t)})}}("mrviews",function(e,t){if("function"==typeof e&&2===e.length){var n=e;return function(e){return n(e,t)}}return zr(e.toString(),t)},function(e){var t=e.toString(),n=function(e){if(/^_sum/.test(e))return Gr._sum;if(/^_count/.test(e))return Gr._count;if(/^_stats/.test(e))return Gr._stats;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}(t);return n||zr(t)},function(e,t){var n=e.views&&e.views[t];if("string"!=typeof n.map)throw new Mr("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)});var Zr={query:function(e,t,n){return Yr.query.call(this,e,t,n)},viewCleanup:function(e){return Yr.viewCleanup.call(this,e)}};function Jr(e){return/^1-/.test(e)}function Kr(e,t){var n=Object.keys(t._attachments);return x.all(n.map(function(n){return e.getAttachment(t._id,n,{rev:t._rev})}))}function Qr(e,t,n,r){n=C(n);var i=[],o=!0;function a(t){return e.allDocs({keys:t,include_docs:!0,conflicts:!0}).then(function(e){if(r.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){e.deleted||!e.doc||!Jr(e.value.rev)||function(e){return e._attachments&&Object.keys(e._attachments).length>0}(e.doc)||function(e){return e._conflicts&&e._conflicts.length>0}(e.doc)||(e.doc._conflicts&&delete e.doc._conflicts,i.push(e.doc),delete n[e.id])})})}return x.resolve().then(function(){var e=Object.keys(n).filter(function(e){var t=n[e].missing;return 1===t.length&&Jr(t[0])});if(e.length>0)return a(e)}).then(function(){var a=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].missing.forEach(function(e){t.push({id:n,rev:e})})}),{docs:t,revs:!0,latest:!0}}(n);if(a.docs.length)return e.bulkGet(a).then(function(n){if(r.cancelled)throw new Error("cancelled");return x.all(n.results.map(function(n){return x.all(n.docs.map(function(n){var r=n.ok;return n.error&&(o=!1),r&&r._attachments?function(e,t,n){var r=ge(t)&&!ge(e),i=Object.keys(n._attachments);return r?e.get(n._id).then(function(r){return x.all(i.map(function(i){return function(e,t,n){return!e._attachments||!e._attachments[n]||e._attachments[n].digest!==t._attachments[n].digest}(r,n,i)?t.getAttachment(n._id,i):e.getAttachment(r._id,i)}))}).catch(function(e){if(404!==e.status)throw e;return Kr(t,n)}):Kr(t,n)}(t,e,r).then(function(e){var t=Object.keys(r._attachments);return e.forEach(function(e,n){var i=r._attachments[t[n]];delete i.stub,delete i.length,i.data=e}),r}):r}))})).then(function(e){i=i.concat(pe(e).filter(Boolean))})})}).then(function(){return{ok:o,docs:i}})}var ei=1,ti="pouchdb",ni=5,ri=0;function ii(e,t,n,r,i){return e.get(t).catch(function(n){if(404===n.status)return"http"!==e.adapter&&"https"!==e.adapter||$(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:t,history:[],replicator:ti,version:ei};throw n}).then(function(o){if(!i.cancelled&&o.last_seq!==n)return o.history=(o.history||[]).filter(function(e){return e.session_id!==r}),o.history.unshift({last_seq:n,session_id:r}),o.history=o.history.slice(0,ni),o.version=ei,o.replicator=ti,o.session_id=r,o.last_seq=n,e.put(o).catch(function(o){if(409===o.status)return ii(e,t,n,r,i);throw o})})}function oi(e,t,n,r,i){this.src=e,this.target=t,this.id=n,this.returnValue=r,this.opts=i||{}}oi.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then(function(){return n.updateSource(e,t)})},oi.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?ii(this.target,this.id,e,t,this.returnValue):x.resolve(!0)},oi.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var n=this;return ii(this.src,this.id,e,t,this.returnValue).catch(function(e){if(li(e))return n.opts.writeSourceCheckpoint=!1,!0;throw e})}return x.resolve(!0)};var ai={undefined:function(e,t){return 0===ct(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return function(e,t){if(e.session_id===t.session_id)return{last_seq:e.last_seq,history:e.history};return function e(t,n){var r=t[0];var i=t.slice(1);var o=n[0];var a=n.slice(1);if(!r||0===n.length)return{last_seq:ri,history:[]};var s=r.session_id;if(si(s,n))return{last_seq:r.last_seq,history:t};var l=o.session_id;if(si(l,i))return{last_seq:o.last_seq,history:a};return e(i,a)}(e.history,t.history)}(t,e).last_seq}};function si(e,t){var n=t[0],r=t.slice(1);return!(!e||0===t.length)&&(e===n.session_id||si(e,r))}function li(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}oi.prototype.getCheckpoint=function(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(e){return e.last_seq||ri}).catch(function(e){if(404!==e.status)throw e;return ri}):e.target.get(e.id).then(function(t){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?t.last_seq||ri:e.src.get(e.id).then(function(e){return t.version!==e.version?ri:(n=t.version?t.version.toString():"undefined")in ai?ai[n](t,e):ri;var n},function(n){if(404===n.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:ri}).then(function(){return ri},function(n){return li(n)?(e.opts.writeSourceCheckpoint=!1,t.last_seq):ri});throw n})}).catch(function(e){if(404!==e.status)throw e;return ri})};var ci=0;function ui(e,t,n){var r=n.doc_ids?n.doc_ids.sort(ct):"",i=n.filter?n.filter.toString():"",o="",a="",s="";return n.selector&&(s=JSON.stringify(n.selector)),n.filter&&n.query_params&&(o=JSON.stringify(function(e){return Object.keys(e).sort(ct).reduce(function(t,n){return t[n]=e[n],t},{})}(n.query_params))),n.filter&&"_view"===n.filter&&(a=n.view.toString()),x.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+i+a+o+r+s;return new x(function(e){Xt(t,e)})}).then(function(e){return"_local/"+(e=e.replace(/\//g,".").replace(/\+/g,"_"))})}function di(e,t,n,r,i){var o,a,s,l=[],c={seq:0,changes:[],docs:[]},u=!1,d=!1,f=!1,p=0,h=n.continuous||n.live||!1,g=n.batch_size||100,v=n.batches_limit||10,m=!1,b=n.doc_ids,y=n.selector,_=[],w=Ce(),k=n.seq_interval;i=i||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var T={};function A(){return s?x.resolve():ui(e,t,n).then(function(i){a=i;var o={};o=!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},s=new oi(e,t,a,r,o)})}function S(){if(_=[],0!==o.docs.length){var e=o.docs,a={timeout:n.timeout};return t.bulkDocs({docs:e,new_edits:!1},a).then(function(t){if(r.cancelled)throw D(),new Error("cancelled");var n=Object.create(null);t.forEach(function(e){e.error&&(n[e.id]=e)});var o=Object.keys(n).length;i.doc_write_failures+=o,i.docs_written+=e.length-o,e.forEach(function(e){var t=n[e._id];if(t){i.errors.push(t);var o=(t.name||"").toLowerCase();if("unauthorized"!==o&&"forbidden"!==o)throw t;r.emit("denied",C(t))}else _.push(e)})},function(t){throw i.doc_write_failures+=e.length,t})}}function M(){if(o.error)throw new Error("There was a problem getting docs.");i.last_seq=p=o.seq;var e=C(i);return _.length&&(e.docs=_,"number"==typeof o.pending&&(e.pending=o.pending,delete o.pending),r.emit("change",e)),u=!0,s.writeCheckpoint(o.seq,w).then(function(){if(u=!1,r.cancelled)throw D(),new Error("cancelled");o=void 0,I()}).catch(function(e){throw z(e),e})}function E(){return Qr(e,t,o.diffs,r).then(function(e){o.error=!e.ok,e.docs.forEach(function(e){delete o.diffs[e._id],i.docs_read++,o.docs.push(e)})})}function O(){r.cancelled||o||(0!==l.length?(o=l.shift(),function(){var e={};return o.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),t.revsDiff(e).then(function(e){if(r.cancelled)throw D(),new Error("cancelled");o.diffs=e})}().then(E).then(S).then(M).then(O).catch(function(e){P("batch processing terminated with error",e)})):L(!0))}function L(e){0!==c.changes.length?(e||d||c.changes.length>=g)&&(l.push(c),c={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),O()):0!==l.length||o||((h&&T.live||d)&&(r.state="pending",r.emit("paused")),d&&D())}function P(e,t){f||(t.message||(t.message=e),i.ok=!1,i.status="aborting",l=[],c={seq:0,changes:[],docs:[]},D(t))}function D(o){if(!(f||r.cancelled&&(i.status="cancelled",u)))if(i.status=i.status||"complete",i.end_time=new Date,i.last_seq=p,f=!0,o){(o=ue(o)).result=i;var a=(o.name||"").toLowerCase();"unauthorized"===a||"forbidden"===a?(r.emit("error",o),r.removeAllListeners()):function(e,t,n,r){if(!1===e.retry)return t.emit("error",n),void t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=U),t.emit("requestError",n),"active"===t.state||"pending"===t.state){t.emit("paused",n),t.state="stopped";var i=function(){e.current_back_off=ci};t.once("paused",function(){t.removeListener("active",i)}),t.once("active",i)}e.current_back_off=e.current_back_off||ci,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}(n,r,o,function(){di(e,t,n,r)})}else r.emit("complete",i),r.removeAllListeners()}function R(e,t,i){if(r.cancelled)return D();"number"==typeof t&&(c.pending=t),fe(n)(e)&&(c.seq=e.seq||i,c.changes.push(e),L(0===l.length&&T.live))}function F(e){if(m=!1,r.cancelled)return D();if(e.results.length>0)T.since=e.last_seq,I(),L(!0);else{var t=function(){h?(T.live=!0,I()):d=!0,L(!0)};o||0!==e.results.length?t():(u=!0,s.writeCheckpoint(e.last_seq,w).then(function(){u=!1,i.last_seq=p=e.last_seq,t()}).catch(z))}}function j(e){if(m=!1,r.cancelled)return D();P("changes rejected",e)}function I(){if(!m&&!d&&l.length<v){m=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",i);var t=e.changes(T).on("change",R);t.then(o,o),t.then(F).catch(j),n.retry&&(r._changes=t,r._abortChanges=i)}function i(){t.cancel()}function o(){r.removeListener("cancel",i)}}function N(){A().then(function(){if(!r.cancelled)return s.getCheckpoint().then(function(e){T={since:p=e,limit:g,batch_size:g,style:"all_docs",doc_ids:b,selector:y,return_docs:!0},!1!==k&&(T.seq_interval=k||g),n.filter&&("string"!=typeof n.filter?T.include_docs=!0:T.filter=n.filter),"heartbeat"in n&&(T.heartbeat=n.heartbeat),"timeout"in n&&(T.timeout=n.timeout),n.query_params&&(T.query_params=n.query_params),n.view&&(T.view=n.view),I()});D()}).catch(function(e){P("getCheckpoint rejected with ",e)})}function z(e){u=!1,P("writeCheckpoint completed with error",e)}r.ready(e,t),r.cancelled?D():(r._addedListeners||(r.once("cancel",D),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",function(e){n.complete(null,e)})),r._addedListeners=!0),void 0===n.since?N():A().then(function(){return u=!0,s.writeCheckpoint(n.since,w)}).then(function(){u=!1,r.cancelled?D():(p=n.since,N())}).catch(z))}function fi(){c.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new x(function(t,n){e.once("complete",t),e.once("error",n)});e.then=function(e,n){return t.then(e,n)},e.catch=function(e){return t.catch(e)},e.catch(function(){})}function pi(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e,t):e}function hi(e,t,n,r){if("function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw ue(ie,"`doc_ids` filter parameter is not a list.");n.complete=r,(n=C(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new fi(n);return di(pi(e,n),pi(t,n),n,i),i}function gi(e,t,n,r){return"function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),(n=C(n)).PouchConstructor=n.PouchConstructor||this,new vi(e=pi(e,n),t=pi(t,n),n,r)}function vi(e,t,n,r){var i=this;this.canceled=!1;var o=n.push?W({},n,n.push):n,a=n.pull?W({},n,n.pull):n;function s(e){i.emit("change",{direction:"pull",change:e})}function l(e){i.emit("change",{direction:"push",change:e})}function c(e){i.emit("denied",{direction:"push",doc:e})}function u(e){i.emit("denied",{direction:"pull",doc:e})}function d(){i.pushPaused=!0,i.pullPaused&&i.emit("paused")}function f(){i.pullPaused=!0,i.pushPaused&&i.emit("paused")}function p(){i.pushPaused=!1,i.pullPaused&&i.emit("active",{direction:"push"})}function h(){i.pullPaused=!1,i.pushPaused&&i.emit("active",{direction:"pull"})}this.push=hi(e,t,o),this.pull=hi(t,e,a),this.pushPaused=!0,this.pullPaused=!0;var g={};function v(e){return function(t,n){("change"===t&&(n===s||n===l)||"denied"===t&&(n===u||n===c)||"paused"===t&&(n===f||n===d)||"active"===t&&(n===h||n===p))&&(t in g||(g[t]={}),g[t][e]=!0,2===Object.keys(g[t]).length&&i.removeAllListeners(t))}}function m(e,t,n){-1==e.listeners(t).indexOf(n)&&e.on(t,n)}n.live&&(this.push.on("complete",i.pull.cancel.bind(i.pull)),this.pull.on("complete",i.push.cancel.bind(i.push))),this.on("newListener",function(e){"change"===e?(m(i.pull,"change",s),m(i.push,"change",l)):"denied"===e?(m(i.pull,"denied",u),m(i.push,"denied",c)):"active"===e?(m(i.pull,"active",h),m(i.push,"active",p)):"paused"===e&&(m(i.pull,"paused",f),m(i.push,"paused",d))}),this.on("removeListener",function(e){"change"===e?(i.pull.removeListener("change",s),i.push.removeListener("change",l)):"denied"===e?(i.pull.removeListener("denied",u),i.push.removeListener("denied",c)):"active"===e?(i.pull.removeListener("active",h),i.push.removeListener("active",p)):"paused"===e&&(i.pull.removeListener("paused",f),i.push.removeListener("paused",d))}),this.pull.on("removeListener",v("pull")),this.push.on("removeListener",v("push"));var b=x.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return i.emit("complete",t),r&&r(null,t),i.removeAllListeners(),t},function(e){if(i.cancel(),r?r(e):i.emit("error",e),i.removeAllListeners(),r)throw e});this.then=function(e,t){return b.then(e,t)},this.catch=function(e){return b.catch(e)}}d()(fi,c.EventEmitter),fi.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},fi.prototype.ready=function(e,t){var n=this;function r(){n.cancel()}n._readyCalled||(n._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),n.once("complete",function(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}))},d()(vi,c.EventEmitter),vi.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},Ke.plugin(function(e){e.adapter("idb",On,!0)}).plugin(function(e){e.adapter("websql",lr,!0)}).plugin(function(e){e.adapter("http",Cr,!1),e.adapter("https",Cr,!1)}).plugin(Zr).plugin(function(e){e.replicate=hi,e.sync=gi,Object.defineProperty(e.prototype,"replicate",{get:function(){var e=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(t,n,r){return e.constructor.replicate(t,e,n,r)},to:function(t,n,r){return e.constructor.replicate(e,t,n,r)}}),this.replicateMethods}}),e.prototype.sync=function(e,t,n){return this.constructor.sync(this,e,t,n)}}),t.a=Ke}).call(t,n(1))},function(e,t,n){var r=n(25),i=n(26),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r,i,o=n(13),a=n(14),s=0,l=0;e.exports=function(e,t,n){var c=t&&n||0,u=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:l+1,v=h-s+(g-l)/1e4;if(v<0&&void 0===e.clockseq&&(f=f+1&16383),(v<0||h>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,l=g,i=f;var m=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;u[c++]=m>>>24&255,u[c++]=m>>>16&255,u[c++]=m>>>8&255,u[c++]=255&m;var b=h/4294967296*1e4&268435455;u[c++]=b>>>8&255,u[c++]=255&b,u[c++]=b>>>24&15|16,u[c++]=b>>>16&255,u[c++]=f>>>8|128,u[c++]=255&f;for(var y=0;y<6;++y)u[c+y]=d[y];return t||a(u)}},function(e,t,n){var r=n(13),i=n(14);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(28)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++i)}),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(t,n(15))},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var l=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;l++;var i=t.formatters[r];if("function"==typeof i){var o=a[l];n=i.call(e,o),a.splice(l,1),l--}return n}),t.formatArgs.call(e,a),(r.log||t.log||console.log.bind(console)).apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(29),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,i=60*r,o=24*i,a=365.25*o;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===l&&!1===isNaN(e))return t.long?function(e){return s(e,o,"day")||s(e,i,"hour")||s(e,r,"minute")||s(e,n,"second")||e+" ms"}(e):function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){!function(t){e.exports=t()}(function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var t,i,o,a,s,l,c=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)n(u,r(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(u,o),t=0;t<16;t+=1)o[t]=0;return a=(a=8*c).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),l=parseInt(a[1],16)||0,o[14]=s,o[15]=l,n(u,o),u}function a(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function l(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function u(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==s(o("hello"))&&function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,o,a,s,l=this.byteLength,c=t(n,l),u=l;return r!==e&&(u=t(r,l)),c>u?new ArrayBuffer(0):(i=u-c,o=new ArrayBuffer(i),a=new Uint8Array(o),s=new Uint8Array(this,c,i),a.set(s),o)}}(),u.prototype.append=function(e){return this.appendBinary(l(e)),this},u.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},u.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=s(this._hash),e&&(n=c(n)),this.reset(),n},u.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},u.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},u.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},u.prototype._finish=function(e,t){var r,i,o,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(n(this._hash,e),a=0;a<16;a+=1)e[a]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=i,e[15]=o,n(this._hash,e)},u.hash=function(e,t){return u.hashBinary(l(e),t)},u.hashBinary=function(e,t){var n=s(o(e));return t?c(n):n},u.ArrayBuffer=function(){this.reset()},u.ArrayBuffer.prototype.append=function(e){var t,r=function(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}(this._buff.buffer,e,!0),o=r.length;for(this._length+=e.byteLength,t=64;t<=o;t+=64)n(this._hash,i(r.subarray(t-64,t)));return this._buff=t-64<o?new Uint8Array(r.buffer.slice(t-64)):new Uint8Array(0),this},u.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=s(this._hash),e&&(n=c(n)),this.reset(),n},u.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.ArrayBuffer.prototype.getState=function(){var e=u.prototype.getState.call(this);return e.buff=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}(e.buff),e},u.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:i}(e.buff,!0),u.prototype.setState.call(this,e)},u.ArrayBuffer.prototype.destroy=u.prototype.destroy,u.ArrayBuffer.prototype._finish=u.prototype._finish,u.ArrayBuffer.hash=function(e,t){var r=s(function(e){var t,r,o,a,s,l,c=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)n(u,i(e.subarray(t-64,t)));for(r=(e=t-64<c?e.subarray(t-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(u,o),t=0;t<16;t+=1)o[t]=0;return a=(a=8*c).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),l=parseInt(a[1],16)||0,o[14]=s,o[15]=l,n(u,o),u}(new Uint8Array(e)));return t?c(r):r},u})},function(e,t,n){"use strict";function r(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(e);else if(o===t.length-2){i[t.pop()]=e}else t.push(e)}t.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,i,o,a,s,l,c,u,d,f="";n=t.pop();)if(r=n.obj,f+=n.prefix||"",i=n.val||"")f+=i;else if("object"!=typeof r)f+=void 0===r?null:JSON.stringify(r);else if(null===r)f+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),o=r.length-1;o>=0;o--)a=0===o?"":",",t.push({obj:r[o],prefix:a});t.push({val:"["})}else{for(l in s=[],r)r.hasOwnProperty(l)&&s.push(l);for(t.push({val:"}"}),o=s.length-1;o>=0;o--)u=r[c=s[o]],d=o>0?",":"",d+=JSON.stringify(c)+":",t.push({obj:u,prefix:d});t.push({val:"{"})}return f},t.parse=function(e){for(var t,n,i,o,a,s,l,c,u,d=[],f=[],p=0;;)if("}"!==(t=e[p++])&&"]"!==t&&void 0!==t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,r(null,d,f);break;case"t":p+=3,r(!0,d,f);break;case"f":p+=4,r(!1,d,f);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",p--;;){if(i=e[p++],!/[\d\.\-e\+]/.test(i)){p--;break}n+=i}r(parseFloat(n),d,f);break;case'"':for(o="",a=void 0,s=0;'"'!==(l=e[p++])||"\\"===a&&s%2==1;)o+=l,"\\"===(a=l)?s++:s=0;r(JSON.parse('"'+o+'"'),d,f);break;case"[":c={element:[],index:d.length},d.push(c.element),f.push(c);break;case"{":u={element:{},index:d.length},d.push(u.element),f.push(u);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===d.length)return d.pop();r(d.pop(),d,f)}}},function(e,t,n){"use strict";var r=n(33),i=n.n(r),o=n(34),a=n.n(o),s=n(4),l=n.n(s),c=n(16),u=n(37),d=n(17),f=n(6);function p(e){var t;if("function"==typeof e.getUrl)t=a()(e.getUrl());else{var n=e.__opts&&e.__opts.prefix?e.__opts.prefix+"/":"";t=a()(n+e.name)}var r=t.pathname,i=(r="/"===r.substr(-1,1)?r.substr(0,-1):r).split("/").slice(0,-1).join("/");return t.origin+i}function h(e,t){return i()(p(e),(t?"/_node/"+t:"")+"/_config")}function g(e){return i()(p(e),"/_users")}function v(e){return i()(p(e),"/_session")}function m(e){var t;if(e.__opts.auth)t=e.__opts.auth;else{var n=a()(e.name);n.auth&&(t=n)}if(!t)return{};var r=t.username+":"+t.password;return{Authorization:"Basic "+Object(c.b)(unescape(encodeURIComponent(r)))}}function b(e){return function(t,n){return t&&"unknown_error"===t.name&&(t.message=(t.message||"")+" Unknown error!  Did you remember to enable CORS?"),e(t,n)}}function y(e){this.status=400,this.name="authentication_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,y)}catch(e){}}l()(y,Error);var x=Object(d.c)(function(e,t){void 0===t&&(t=e,e={});var n=p(this)+"/_membership",r=Object(d.a)({method:"GET",url:n,headers:m(this)},e.ajax||{});Object(u.a)(r,b(t))}),_=Object(d.c)(function(e,t,n,r){var i=this;return void 0===r&&(r=void 0===n?void 0===t?e:t:n,n={}),-1===["http","https"].indexOf(i.type())?r(new y('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.')):e?t?void i.getMembership(n,function(o,a){var s;if(o){if("illegal_database_name"!==o.error)return r(o);s=void 0}else s=a.all_nodes[0];var l=h(i,s),c=(n.configUrl||l)+"/admins/"+encodeURIComponent(e),f=Object(d.a)({method:"PUT",url:c,processData:!1,headers:m(i),body:'"'+t+'"'},n.ajax||{});Object(u.a)(f,b(r))}):r(new y("You must provide a password")):r(new y("You must provide a username"))}),w=Object(d.c)(function(e,t,n){var r=this;return void 0===n&&(n=void 0===t?e:t,t={}),-1===["http","https"].indexOf(r.type())?n(new y('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.')):e?void r.getMembership(t,function(i,o){var a;if(i){if("illegal_database_name"!==i.error)return n(i);a=void 0}else a=o.all_nodes[0];var s=h(r,a),l=(t.configUrl||s)+"/admins/"+encodeURIComponent(e),c=Object(d.a)({method:"DELETE",url:l,processData:!1,headers:m(r)},t.ajax||{});Object(u.a)(c,b(n))}):n(new y("You must provide a username"))}),k=Object(d.c)(function(e,t,n,r){if(void 0===r&&(r=n,n={}),-1===["http","https"].indexOf(this.type()))return r(new y("this plugin only works for the http/https adapter"));if(!e)return r(new y("you must provide a username"));if(!t)return r(new y("you must provide a password"));var i=Object(d.a)({method:"POST",url:v(this),headers:Object(d.a)({"Content-Type":"application/json"},m(this)),body:{name:e,password:t}},n.ajax||{});Object(u.a)(i,b(r))}),T=Object(d.c)(function(e,t){void 0===t&&(t=e,e={});var n=Object(d.a)({method:"DELETE",url:v(this),headers:m(this)},e.ajax||{});Object(u.a)(n,b(t))}),A=Object(d.c)(function(e,t){void 0===t&&(t=e,e={});var n=v(this),r=Object(d.a)({method:"GET",url:n,headers:m(this)},e.ajax||{});Object(u.a)(r,b(t))});function C(e,t,n,r){var i=["_id","_rev","name","type","roles","password","password_scheme","iterations","derived_key","salt"];if(n.metadata){for(var o in n.metadata)if(n.metadata.hasOwnProperty(o)&&-1!==i.indexOf(o))return r(new y('cannot use reserved word in metadata: "'+o+'"'));t=Object(d.a)(t,n.metadata)}n.roles&&(t=Object(d.a)(t,{roles:n.roles}));var a=g(e)+"/"+encodeURIComponent(t._id),s=Object(d.a)({method:"PUT",url:a,body:t,headers:m(e)},n.ajax||{});Object(u.a)(s,b(r))}var S=Object(d.c)(function(e,t,n,r){return void 0===r&&(r=void 0===n?void 0===t?e:t:n,n={}),-1===["http","https"].indexOf(this.type())?r(new y('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.')):e?t?void C(this,{name:e,password:t,roles:[],type:"user",_id:"org.couchdb.user:"+e},n,r):r(new y("You must provide a password")):r(new y("You must provide a username"))}),M=Object(d.c)(function(e,t,n){if(void 0===n&&(n=void 0===t?e:t,t={}),!e)return n(new y("you must provide a username"));var r=g(this),i=Object(d.a)({method:"GET",url:r+"/"+encodeURIComponent("org.couchdb.user:"+e),headers:m(this)},t.ajax||{});Object(u.a)(i,b(n))}),E=Object(d.c)(function(e,t,n){var r=this;return void 0===n&&(n=void 0===t?e:t,t={}),-1===["http","https"].indexOf(r.type())?n(new y('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.')):e?void r.getUser(e,t,function(e,i){if(e)return n(e);C(r,i,t,n)}):n(new y("You must provide a username"))}),O=Object(d.c)(function(e,t,n){var r=this;return void 0===n&&(n=void 0===t?e:t,t={}),-1===["http","https"].indexOf(r.type())?n(new y('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.')):e?void r.getUser(e,t,function(e,i){if(e)return n(e);var o=g(r)+"/"+encodeURIComponent(i._id)+"?rev="+i._rev,a=Object(d.a)({method:"DELETE",url:o,headers:m(r)},t.ajax||{});Object(u.a)(a,b(n))}):n(new y("You must provide a username"))}),L=Object(d.c)(function(e,t,n,r){var i=this;return void 0===r&&(r=void 0===n?void 0===t?e:t:n,n={}),-1===["http","https"].indexOf(i.type())?r(new y('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.')):e?t?void i.getUser(e,n,function(e,o){if(e)return r(e);o.password=t;var a=g(i)+"/"+encodeURIComponent(o._id),s=Object(d.a)({method:"PUT",url:a,headers:m(i),body:o},n.ajax||{});Object(u.a)(s,b(r))}):r(new y("You must provide a password")):r(new y("You must provide a username"))}),P=Object(d.c)(function(e,t,n,r){var i=this,o=function(e,t){var n=g(i)+"/"+encodeURIComponent(e._id);return function(e){return new f.a(function(t,n){Object(u.a)(e,b(function(e,r){if(e)return n(e);t(r)}))})}(Object(d.a)({method:"PUT",url:n,headers:m(i),body:e},t.ajax))};return void 0===r&&(r=n,n={}),n.ajax=n.ajax||{},-1===["http","https"].indexOf(i.type())?r(new y('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.')):t?e?void i.getUser(t,n).then(function(){var e=new y("user already exists");throw e.taken=!0,e},function(){return i.getUser(e,n)}).then(function(e){var r=Object(d.b)(e);return delete r._rev,r._id="org.couchdb.user:"+t,r.name=t,r.roles=n.roles||e.roles||{},o(r,n).then(function(){return e._deleted=!0,o(e,n)})}).then(function(e){r(null,e)}).catch(r):r(new y("You must provide a username to rename")):r(new y("You must provide a new username"))}),D={};D.login=k,D.logIn=k,D.logout=T,D.logOut=T,D.getSession=A,D.getMembership=x,D.signUpAdmin=_,D.deleteAdmin=w,D.getUsersDatabaseUrl=function(){return g(this)},D.signup=S,D.signUp=S,D.getUser=M,D.putUser=E,D.deleteUser=O,D.changePassword=L,D.changeUsername=P,"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(D),t.a=D},function(e,t,n){var r,i;!function(o,a,s){void 0!==e&&e.exports?e.exports=s():void 0===(i="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=i)}(0,0,function(){return function(){return function(e){var t=[];if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var i=e[r];if("string"!=typeof i)throw new TypeError("Url must be a string. Received "+i);""!==i&&(r>0&&(i=i.replace(/^[\/]+/,"")),i=r<e.length-1?i.replace(/[\/]+$/,""):i.replace(/[\/]+$/,"/"),t.push(i))}var o=t.join("/"),a=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return o=a.shift()+(a.length>0?"?":"")+a.join("&")}("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}})},function(e,t,n){"use strict";(function(t){var r=n(35),i=n(36),o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function c(e){var n,r={},i=typeof(e=e||t.location||{});if("blob:"===e.protocol)r=new d(unescape(e.pathname),{});else if("string"===i)for(n in r=new d(e,{}),l)delete r[n];else if("object"===i){for(n in e)n in l||(r[n]=e[n]);void 0===r.slashes&&(r.slashes=a.test(e.href))}return r}function u(e){var t=o.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function d(e,t,n){if(!(this instanceof d))return new d(e,t,n);var o,a,l,f,p,h,g=s.slice(),v=typeof t,m=this,b=0;for("object"!==v&&"string"!==v&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),t=c(t),o=!(a=u(e||"")).protocol&&!a.slashes,m.slashes=a.slashes||o&&t.slashes,m.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(g[2]=[/(.*)/,"pathname"]);b<g.length;b++)l=(f=g[b])[0],h=f[1],l!=l?m[h]=e:"string"==typeof l?~(p=e.indexOf(l))&&("number"==typeof f[2]?(m[h]=e.slice(0,p),e=e.slice(p+f[2])):(m[h]=e.slice(p),e=e.slice(0,p))):(p=l.exec(e))&&(m[h]=p[1],e=e.slice(0,p.index)),m[h]=m[h]||o&&f[3]&&t[h]||"",f[4]&&(m[h]=m[h].toLowerCase());n&&(m.query=n(m.query)),o&&t.slashes&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==t.pathname)&&(m.pathname=function(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(m.pathname,t.pathname)),r(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(f=m.auth.split(":"),m.username=f[0]||"",m.password=f[1]||""),m.origin=m.protocol&&m.host&&"file:"!==m.protocol?m.protocol+"//"+m.host:"null",m.href=m.toString()}d.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;default:o[e]=t}for(var l=0;l<s.length;l++){var c=s[l];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},d.extractProtocol=u,d.location=c,d.qs=i,e.exports=d}).call(t,n(1))},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e){return decodeURIComponent(e.replace(/\+/g," "))}t.stringify=function(e,t){t=t||"";var n=[];for(var i in"string"!=typeof t&&(t="?"),e)r.call(e,i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return n.length?t+n.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);r[i(t[1])]=i(t[2]));return r}},function(e,t,n){"use strict";var r=n(6),i=n(16),o=n(17),a=n(18);function s(e,t){var n,i,o,a=new Headers,s={method:e.method,credentials:"include",headers:a};return e.json&&(a.set("Accept","application/json"),a.set("Content-Type",e.headers["Content-Type"]||"application/json")),e.body&&e.processData&&"string"!=typeof e.body?s.body=JSON.stringify(e.body):s.body="body"in e?e.body:null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&a.set(t,e.headers[t])}),n=function(){for(var e={},t=new r.a(function(t,n){e.resolve=t,e.reject=n}),n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.promise=t,r.a.resolve().then(function(){return fetch.apply(null,n)}).then(function(t){e.resolve(t)}).catch(function(t){e.reject(t)}),e}(e.url,s),e.timeout>0&&(i=setTimeout(function(){n.reject(new Error("Load timeout for resource: "+e.url))},e.timeout)),n.promise.then(function(t){return o={statusCode:t.status},e.timeout>0&&clearTimeout(i),o.statusCode>=200&&o.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){o.statusCode>=200&&o.statusCode<300?t(null,o,e):(e.status=o.statusCode,t(e))}).catch(function(e){e||(e=new Error("canceled")),t(e)}),{abort:n.reject}}var l=function(){try{return new XMLHttpRequest,!0}catch(e){return!1}}();function c(e,t){return l||e.xhr?function(e,t){var n,r,o=!1,a=function(){o=!0,n.abort(),l()},s={abort:function(){n.abort(),l()}},l=function(){clearTimeout(r),s.abort=function(){},n&&(n.onprogress=void 0,n.upload&&(n.upload.onprogress=void 0),n.onreadystatechange=void 0,n=void 0)};n=e.xhr?new e.xhr:new XMLHttpRequest;try{n.open(e.method,e.url)}catch(e){return t(new Error(e.name||"Url is invalid"))}for(var c in n.withCredentials=!("withCredentials"in e)||e.withCredentials,"GET"===e.method?delete e.headers["Content-Type"]:e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(n.responseType="arraybuffer"),"body"in e||(e.body=null),e.headers)e.headers.hasOwnProperty(c)&&n.setRequestHeader(c,e.headers[c]);return e.timeout>0&&(r=setTimeout(a,e.timeout),n.onprogress=function(){clearTimeout(r),4!==n.readyState&&(r=setTimeout(a,e.timeout))},void 0!==n.upload&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var r={statusCode:n.status};if(n.status>=200&&n.status<300){var a;a=e.binary?Object(i.a)([n.response||""],{type:n.getResponseHeader("Content-Type")}):n.responseText,t(null,r,a)}else{var s={};if(o)(s=new Error("ETIMEDOUT")).code="ETIMEDOUT";else if("string"==typeof n.response&&""!==n.response)try{s=JSON.parse(n.response)}catch(e){}s.status=n.status,t(s)}l()}},e.body&&e.body instanceof Blob?Object(i.c)(e.body,function(e){n.send(e)}):n.send(e.body),s}(e,t):s(e,t)}function u(e,t){e=Object(o.b)(e);return(e=Object(o.a)({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},e)).json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),c(e,function(n,r,i){if(n)return t(Object(a.f)(n));var o,s=r.headers&&r.headers["content-type"],l=i||"";if(!e.binary&&(e.json||!e.processData)&&"object"!=typeof l&&(/json/.test(s)||/^[\s]*\{/.test(l)&&/\}[\s]*$/.test(l)))try{l=JSON.parse(l.toString())}catch(e){}r.statusCode>=200&&r.statusCode<300?function(t,n,r){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){return r(e)}Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?Object(a.f)(e):e})),e.binary,r(null,t,n)}(l,r,t):((o=Object(a.f)(l)).status=r.statusCode,t(o))})}t.a=function(e,t){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r=-1!==n.indexOf("safari")&&-1===n.indexOf("chrome"),i=-1!==n.indexOf("msie"),o=-1!==n.indexOf("trident"),a=-1!==n.indexOf("edge"),s=r||(i||o||a)&&"GET"===e.method,l=!("cache"in e)||e.cache;if(!/^blob:/.test(e.url)&&(s||!l)){var c=-1!==e.url.indexOf("?");e.url+=(c?"&":"?")+"_nonce="+Date.now()}return u(e,t)}},function(e,t,n){"use strict";function r(e){return"$"+e}function i(e){return e.substring(1)}function o(){this._store={}}function a(e){if(this._store=new o,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}var s;n.d(t,"a",function(){return s}),o.prototype.get=function(e){var t=r(e);return this._store[t]},o.prototype.set=function(e,t){var n=r(e);return this._store[n]=t,!0},o.prototype.has=function(e){return r(e)in this._store},o.prototype.delete=function(e){var t=r(e),n=t in this._store;return delete this._store[t],n},o.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var o=t[n];e(this._store[o],o=i(o))}},Object.defineProperty(o.prototype,"size",{get:function(){return Object.keys(this._store).length}}),a.prototype.add=function(e){return this._store.set(e,!0)},a.prototype.has=function(e){return this._store.has(e)},a.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})},Object.defineProperty(a.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(a,s=o):(Set,s=Map)},function(e,t,n){var r=n(40),i=n(41),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r,i,o=n(19),a=n(20),s=0,l=0;e.exports=function(e,t,n){var c=t&&n||0,u=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:l+1,v=h-s+(g-l)/1e4;if(v<0&&void 0===e.clockseq&&(f=f+1&16383),(v<0||h>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,l=g,i=f;var m=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;u[c++]=m>>>24&255,u[c++]=m>>>16&255,u[c++]=m>>>8&255,u[c++]=255&m;var b=h/4294967296*1e4&268435455;u[c++]=b>>>8&255,u[c++]=255&b,u[c++]=b>>>24&15|16,u[c++]=b>>>16&255,u[c++]=f>>>8|128,u[c++]=255&f;for(var y=0;y<6;++y)u[c+y]=d[y];return t||a(u)}},function(e,t,n){var r=n(19),i=n(20);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return r.exec(e).slice(1)};function o(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return t=n(o(t.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),i="/"===a(e,-1);return(e=n(o(e.split("/"),function(e){return!!e}),!r).join("/"))||r||(e="."),e&&i&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var c=[];for(l=s;l<i.length;l++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(15))},function(e,t,n){(function(e){!function(e,t,n,r){e.site=e.fn.site=function(r){var i,o,a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1),d=e.isPlainObject(r)?e.extend(!0,{},e.site.settings,r):e.extend({},e.site.settings),f=d.namespace,p=d.error,h="module-"+f,g=e(n),v=this,m=g.data(h);return i={initialize:function(){i.instantiate()},instantiate:function(){i.verbose("Storing instance of site",i),m=i,g.data(h,i)},normalize:function(){i.fix.console(),i.fix.requestAnimationFrame()},fix:{console:function(){i.debug("Normalizing window.console"),void 0!==console&&void 0!==console.log||(i.verbose("Console not available, normalizing events"),i.disable.console()),void 0!==console.group&&void 0!==console.groupEnd&&void 0!==console.groupCollapsed||(i.verbose("Console group not available, normalizing events"),t.console.group=function(){},t.console.groupEnd=function(){},t.console.groupCollapsed=function(){}),void 0===console.markTimeline&&(i.verbose("Mark timeline not available, normalizing events"),t.console.markTimeline=function(){})},consoleClear:function(){i.debug("Disabling programmatic console clearing"),t.console.clear=function(){}},requestAnimationFrame:function(){i.debug("Normalizing requestAnimationFrame"),void 0===t.requestAnimationFrame&&(i.debug("RequestAnimationFrame not available, normalizing event"),t.requestAnimationFrame=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(t){return void 0!==e.fn[t]&&void 0!==e.fn[t].settings},enabled:{modules:function(t){var n=[];return t=t||d.modules,e.each(t,function(e,t){i.moduleExists(t)&&n.push(t)}),n}},disabled:{modules:function(t){var n=[];return t=t||d.modules,e.each(t,function(e,t){i.moduleExists(t)||n.push(t)}),n}},change:{setting:function(t,n,r,o){r="string"==typeof r?"all"===r?d.modules:[r]:r||d.modules,o=void 0===o||o,e.each(r,function(r,a){var s,l=!i.moduleExists(a)||(e.fn[a].settings.namespace||!1);i.moduleExists(a)&&(i.verbose("Changing default setting",t,n,a),e.fn[a].settings[t]=n,o&&l&&(s=e(":data(module-"+l+")")).length>0&&(i.verbose("Modifying existing settings",s),s[a]("setting",t,n)))})},settings:function(t,n,r){n="string"==typeof n?[n]:n||d.modules,r=void 0===r||r,e.each(n,function(n,o){var a;i.moduleExists(o)&&(i.verbose("Changing default setting",t,o),e.extend(!0,e.fn[o].settings,t),r&&f&&(a=e(":data(module-"+f+")")).length>0&&(i.verbose("Modifying existing settings",a),a[o]("setting",t)))})}},enable:{console:function(){i.console(!0)},debug:function(e,t){e=e||d.modules,i.debug("Enabling debug for modules",e),i.change.setting("debug",!0,e,t)},verbose:function(e,t){e=e||d.modules,i.debug("Enabling verbose debug for modules",e),i.change.setting("verbose",!0,e,t)}},disable:{console:function(){i.console(!1)},debug:function(e,t){e=e||d.modules,i.debug("Disabling debug for modules",e),i.change.setting("debug",!1,e,t)},verbose:function(e,t){e=e||d.modules,i.debug("Disabling verbose debug for modules",e),i.change.setting("verbose",!1,e,t)}},console:function(e){if(e){if(void 0===m.cache.console)return void i.error(p.console);i.debug("Restoring console function"),t.console=m.cache.console}else i.debug("Disabling console function"),m.cache.console=t.console,t.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){i.verbose("Destroying previous site for",g),g.removeData(h)},cache:{},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];d[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,i,t);else{if(void 0===n)return i[t];i[t]=n}},debug:function(){d.debug&&(d.performance?i.performance.log(arguments):(i.debug=Function.prototype.bind.call(console.info,console,d.name+":"),i.debug.apply(console,arguments)))},verbose:function(){d.verbose&&d.debug&&(d.performance?i.performance.log(arguments):(i.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),i.verbose.apply(console,arguments)))},error:function(){i.error=Function.prototype.bind.call(console.error,console,d.name+":"),i.error.apply(console,arguments)},performance:{log:function(e){var t,n;d.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Element:v,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(i.performance.timer),i.performance.timer=setTimeout(i.performance.display,500)},display:function(){var t=d.name+":",n=0;a=!1,clearTimeout(i.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,r){var a,s,l,c=m;return n=n||u,r=v||r,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,r){var o=n!=a?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[o])&&n!=a)c=c[o];else{if(void 0!==c[o])return s=c[o],!1;if(!e.isPlainObject(c[r])||n==a)return void 0!==c[r]?(s=c[r],!1):(i.error(p.method,t),!1);c=c[r]}})),e.isFunction(s)?l=s.apply(r,n):void 0!==s&&(l=s),e.isArray(o)?o.push(l):void 0!==o?o=[o,l]:void 0!==l&&(o=l),s}},c?(void 0===m&&i.initialize(),i.invoke(l)):(void 0!==m&&i.destroy(),i.initialize()),void 0!==o?o:this},e.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])}})}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.form=function(t){var r,i=e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c=arguments[1],u="string"==typeof l,d=[].slice.call(arguments,1);return i.each(function(){var f,p,h,g,v,m,b,y,x,_,w,k,T,A,C,S,M=e(this),E=this,O=[],L=!1;(S={initialize:function(){S.get.settings(),u?(void 0===C&&S.instantiate(),S.invoke(l)):(void 0!==C&&C.invoke("destroy"),S.verbose("Initializing form validation",M,v),S.bindEvents(),S.set.defaults(),S.instantiate())},instantiate:function(){S.verbose("Storing instance of module",S),C=S,M.data(T,S)},destroy:function(){S.verbose("Destroying previous module",C),S.removeEvents(),M.removeData(T)},refresh:function(){S.verbose("Refreshing selector cache"),f=M.find(y.field),p=M.find(y.group),h=M.find(y.message),M.find(y.prompt),g=M.find(y.submit),M.find(y.clear),M.find(y.reset)},submit:function(){S.verbose("Submitting form",M),M.submit()},attachEvents:function(t,n){n=n||"submit",e(t).on("click"+A,function(e){S[n](),e.preventDefault()})},bindEvents:function(){S.verbose("Attaching form events"),M.on("submit"+A,S.validate.form).on("blur"+A,y.field,S.event.field.blur).on("click"+A,y.submit,S.submit).on("click"+A,y.reset,S.reset).on("click"+A,y.clear,S.clear),v.keyboardShortcuts&&M.on("keydown"+A,y.field,S.event.field.keydown),f.each(function(){var t=e(this),n=t.prop("type"),r=S.get.changeEvent(n,t);e(this).on(r+A,S.event.field.change)})},clear:function(){f.each(function(){var t=e(this),n=t.parent(),r=t.closest(p),i=r.find(y.prompt),o=t.data(b.defaultValue)||"",a=n.is(y.uiCheckbox),s=n.is(y.uiDropdown);r.hasClass(x.error)&&(S.verbose("Resetting error on field",r),r.removeClass(x.error),i.remove()),s?(S.verbose("Resetting dropdown value",n,o),n.dropdown("clear")):a?t.prop("checked",!1):(S.verbose("Resetting field value",t,o),t.val(""))})},reset:function(){f.each(function(){var t=e(this),n=t.parent(),r=t.closest(p),i=r.find(y.prompt),o=t.data(b.defaultValue),a=n.is(y.uiCheckbox),s=n.is(y.uiDropdown),l=r.hasClass(x.error);void 0!==o&&(l&&(S.verbose("Resetting error on field",r),r.removeClass(x.error),i.remove()),s?(S.verbose("Resetting dropdown value",n,o),n.dropdown("restore defaults")):a?(S.verbose("Resetting checkbox value",n,o),t.prop("checked",o)):(S.verbose("Resetting field value",t,o),t.val(o)))})},determine:{isValid:function(){var t=!0;return e.each(m,function(e,n){S.validate.field(n,e,!0)||(t=!1)}),t}},is:{bracketedRule:function(e){return e.type&&e.type.match(v.regExp.bracket)},shorthandFields:function(e){var t=e[Object.keys(e)[0]];return S.is.shorthandRules(t)},shorthandRules:function(t){return"string"==typeof t||e.isArray(t)},empty:function(e){return!e||0===e.length||(e.is('input[type="checkbox"]')?!e.is(":checked"):S.is.blank(e))},blank:function(t){return""===e.trim(t.val())},valid:function(t){var n=!0;return t?(S.verbose("Checking if field is valid",t),S.validate.field(m[t],t,!1)):(S.verbose("Checking if form is valid"),e.each(m,function(e,t){S.is.valid(e)||(n=!1)}),n)}},removeEvents:function(){M.off(A),f.off(A),g.off(A),f.off(A)},event:{field:{keydown:function(t){var n=e(this),r=t.which,i=n.is(y.input),o=n.is(y.checkbox),a=n.closest(y.uiDropdown).length>0,s=13;r==27&&(S.verbose("Escape key pressed blurring field"),n.blur()),t.ctrlKey||r!=s||!i||a||o||(L||(n.one("keyup"+A,S.event.field.keyup),S.submit(),S.debug("Enter pressed on input submitting form")),L=!0)},keyup:function(){L=!1},blur:function(t){var n=e(this),r=n.closest(p),i=S.get.validation(n);r.hasClass(x.error)?(S.debug("Revalidating field",n,i),i&&S.validate.field(i)):"blur"!=v.on&&"change"!=v.on||i&&S.validate.field(i)},change:function(t){var n=e(this),r=n.closest(p),i=S.get.validation(n);i&&("change"==v.on||r.hasClass(x.error)&&v.revalidate)&&(clearTimeout(S.timer),S.timer=setTimeout(function(){S.debug("Revalidating field",n,S.get.validation(n)),S.validate.field(i)},v.delay))}}},get:{ancillaryValue:function(e){return!(!e.type||!e.value&&!S.is.bracketedRule(e))&&(void 0!==e.value?e.value:e.type.match(v.regExp.bracket)[1]+"")},ruleName:function(e){return S.is.bracketedRule(e)?e.type.replace(e.type.match(v.regExp.bracket)[0],""):e.type},changeEvent:function(e,t){return"checkbox"==e||"radio"==e||"hidden"==e||t.is("select")?"change":S.get.inputEvent()},inputEvent:function(){return void 0!==n.createElement("input").oninput?"input":void 0!==n.createElement("input").onpropertychange?"propertychange":"keyup"},fieldsFromShorthand:function(t){var n={};return e.each(t,function(t,r){"string"==typeof r&&(r=[r]),n[t]={rules:[]},e.each(r,function(e,r){n[t].rules.push({type:r})})}),n},prompt:function(e,t){var n,r,i,o=S.get.ruleName(e),a=S.get.ancillaryValue(e),s=e.prompt||v.prompt[o]||v.text.unspecifiedRule,l=-1!==s.search("{value}"),c=-1!==s.search("{name}");return(c||l)&&(r=S.get.field(t.identifier)),l&&(s=s.replace("{value}",r.val())),c&&(i=1==(n=r.closest(y.group).find("label").eq(0)).length?n.text():r.prop("placeholder")||v.text.unspecifiedField,s=s.replace("{name}",i)),s=(s=s.replace("{identifier}",t.identifier)).replace("{ruleValue}",a),e.prompt||S.verbose("Using default validation prompt for type",s,o),s},settings:function(){if(e.isPlainObject(t)){var n=Object.keys(t);n.length>0&&(void 0!==t[n[0]].identifier&&void 0!==t[n[0]].rules)?(v=e.extend(!0,{},e.fn.form.settings,c),m=e.extend({},e.fn.form.settings.defaults,t),S.error(v.error.oldSyntax,E),S.verbose("Extending settings from legacy parameters",m,v)):(t.fields&&S.is.shorthandFields(t.fields)&&(t.fields=S.get.fieldsFromShorthand(t.fields)),v=e.extend(!0,{},e.fn.form.settings,t),m=e.extend({},e.fn.form.settings.defaults,v.fields),S.verbose("Extending settings",m,v))}else v=e.fn.form.settings,m=e.fn.form.settings.defaults,S.verbose("Using default form validation",m,v);k=v.namespace,b=v.metadata,y=v.selector,x=v.className,_=v.regExp,w=v.error,T="module-"+k,A="."+k,C=M.data(T),S.refresh()},field:function(t){return S.verbose("Finding field with identifier",t),t=S.escape.string(t),f.filter("#"+t).length>0?f.filter("#"+t):f.filter('[name="'+t+'"]').length>0?f.filter('[name="'+t+'"]'):f.filter('[name="'+t+'[]"]').length>0?f.filter('[name="'+t+'[]"]'):f.filter("[data-"+b.validate+'="'+t+'"]').length>0?f.filter("[data-"+b.validate+'="'+t+'"]'):e("<input/>")},fields:function(t){var n=e();return e.each(t,function(e,t){n=n.add(S.get.field(t))}),n},validation:function(t){var n,r;return!!m&&(e.each(m,function(e,i){r=i.identifier||e,S.get.field(r)[0]==t[0]&&(i.identifier=r,n=i)}),n||!1)},value:function(e){var t=[];return t.push(e),S.get.values.call(E,t)[e]},values:function(t){var n={};return(e.isArray(t)?S.get.fields(t):f).each(function(t,r){var i=e(r),o=(i.prop("type"),i.prop("name")),a=i.val(),s=i.is(y.checkbox),l=i.is(y.radio),c=-1!==o.indexOf("[]"),u=!!s&&i.is(":checked");o&&(c?(o=o.replace("[]",""),n[o]||(n[o]=[]),s?u?n[o].push(a||!0):n[o].push(!1):n[o].push(a)):l?void 0===n[o]&&(n[o]=!!u):n[o]=s?!!u&&(a||!0):a)}),n}},has:{field:function(e){return S.verbose("Checking for existence of a field with identifier",e),"string"!=typeof(e=S.escape.string(e))&&S.error(w.identifier,e),f.filter("#"+e).length>0||(f.filter('[name="'+e+'"]').length>0||f.filter("[data-"+b.validate+'="'+e+'"]').length>0)}},escape:{string:function(e){return(e=String(e)).replace(_.escape,"\\$&")}},add:{rule:function(e,t){S.add.field(e,t)},field:function(t,n){var r={};S.is.shorthandRules(n)?(n=e.isArray(n)?n:[n],r[t]={rules:[]},e.each(n,function(e,n){r[t].rules.push({type:n})})):r[t]=n,m=e.extend({},m,r),S.debug("Adding rules",r,m)},fields:function(t){var n;n=t&&S.is.shorthandFields(t)?S.get.fieldsFromShorthand(t):t,m=e.extend({},m,n)},prompt:function(t,n){var r=S.get.field(t).closest(p),i=r.children(y.prompt),o=0!==i.length;n="string"==typeof n?[n]:n,S.verbose("Adding field error state",t),r.addClass(x.error),v.inline&&(o||(i=v.templates.prompt(n)).appendTo(r),i.html(n[0]),o?S.verbose("Inline errors are disabled, no inline error added",t):v.transition&&void 0!==e.fn.transition&&M.transition("is supported")?(S.verbose("Displaying error with css transition",v.transition),i.transition(v.transition+" in",v.duration)):(S.verbose("Displaying error with fallback javascript animation"),i.fadeIn(v.duration)))},errors:function(e){S.debug("Adding form error messages",e),S.set.error(),h.html(v.templates.error(e))}},remove:{rule:function(t,n){var r=e.isArray(n)?n:[n];if(void 0==n)return S.debug("Removed all rules"),void(m[t].rules=[]);void 0!=m[t]&&e.isArray(m[t].rules)&&e.each(m[t].rules,function(e,n){-1!==r.indexOf(n.type)&&(S.debug("Removed rule",n.type),m[t].rules.splice(e,1))})},field:function(t){var n=e.isArray(t)?t:[t];e.each(n,function(e,t){S.remove.rule(t)})},rules:function(t,n){e.isArray(t)?e.each(fields,function(e,t){S.remove.rule(t,n)}):S.remove.rule(t,n)},fields:function(e){S.remove.field(e)},prompt:function(t){var n=S.get.field(t).closest(p),r=n.children(y.prompt);n.removeClass(x.error),v.inline&&r.is(":visible")&&(S.verbose("Removing prompt for field",t),v.transition&&void 0!==e.fn.transition&&M.transition("is supported")?r.transition(v.transition+" out",v.duration,function(){r.remove()}):r.fadeOut(v.duration,function(){r.remove()}))}},set:{success:function(){M.removeClass(x.error).addClass(x.success)},defaults:function(){f.each(function(){var t=e(this),n=t.filter(y.checkbox).length>0?t.is(":checked"):t.val();t.data(b.defaultValue,n)})},error:function(){M.removeClass(x.success).addClass(x.error)},value:function(e,t){var n={};return n[e]=t,S.set.values.call(E,n)},values:function(t){e.isEmptyObject(t)||e.each(t,function(t,n){var r,i=S.get.field(t),o=i.parent(),a=e.isArray(n),s=o.is(y.uiCheckbox),l=o.is(y.uiDropdown),c=i.is(y.radio)&&s;i.length>0&&(a&&s?(S.verbose("Selecting multiple",n,i),o.checkbox("uncheck"),e.each(n,function(e,t){r=i.filter('[value="'+t+'"]'),o=r.parent(),r.length>0&&o.checkbox("check")})):c?(S.verbose("Selecting radio value",n,i),i.filter('[value="'+n+'"]').parent(y.uiCheckbox).checkbox("check")):s?(S.verbose("Setting checkbox value",n,o),!0===n?o.checkbox("check"):o.checkbox("uncheck")):l?(S.verbose("Setting dropdown value",n,o),o.dropdown("set selected",n)):(S.verbose("Setting field value",n,i),i.val(n)))})}},validate:{form:function(e,t){var n=S.get.values();if(L)return!1;if(O=[],S.determine.isValid()){if(S.debug("Form has no validation errors, submitting"),S.set.success(),!0!==t)return v.onSuccess.call(E,e,n)}else if(S.debug("Form has errors"),S.set.error(),v.inline||S.add.errors(O),void 0!==M.data("moduleApi")&&e.stopImmediatePropagation(),!0!==t)return v.onFailure.call(E,O,n)},field:function(t,n,r){r=void 0===r||r,"string"==typeof t&&(S.verbose("Validating field",t),n=t,t=m[t]);var i=t.identifier||n,o=S.get.field(i),a=!!t.depends&&S.get.field(t.depends),s=!0,l=[];return t.identifier||(S.debug("Using field name as identifier",i),t.identifier=i),o.prop("disabled")?(S.debug("Field is disabled. Skipping",i),s=!0):t.optional&&S.is.blank(o)?(S.debug("Field is optional and blank. Skipping",i),s=!0):t.depends&&S.is.empty(a)?(S.debug("Field depends on another value that is not present or empty. Skipping",a),s=!0):void 0!==t.rules&&e.each(t.rules,function(e,n){S.has.field(i)&&!S.validate.rule(t,n)&&(S.debug("Field is invalid",i,n.type),l.push(S.get.prompt(n,t)),s=!1)}),s?(r&&(S.remove.prompt(i,l),v.onValid.call(o)),!0):(r&&(O=O.concat(l),S.add.prompt(i,l),v.onInvalid.call(o,l)),!1)},rule:function(t,n){var r=S.get.field(t.identifier),i=(n.type,r.val()),o=S.get.ancillaryValue(n),a=S.get.ruleName(n),s=v.rules[a];if(e.isFunction(s))return i=void 0===i||""===i||null===i?"":e.trim(i+""),s.call(r,i,o);S.error(w.noRule,a)}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(void 0===n)return v[t];v[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,S,t);else{if(void 0===n)return S[t];S[t]=n}},debug:function(){!v.silent&&v.debug&&(v.performance?S.performance.log(arguments):(S.debug=Function.prototype.bind.call(console.info,console,v.name+":"),S.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?S.performance.log(arguments):(S.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),S.verbose.apply(console,arguments)))},error:function(){v.silent||(S.error=Function.prototype.bind.call(console.error,console,v.name+":"),S.error.apply(console,arguments))},performance:{log:function(e){var t,n;v.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:E,"Execution Time":n})),clearTimeout(S.performance.timer),S.performance.timer=setTimeout(S.performance.display,500)},display:function(){var t=v.name+":",n=0;a=!1,clearTimeout(S.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),i.length>1&&(t+=" ("+i.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,i){var o,a,s,l=C;return n=n||d,i=E||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}}).initialize()}),void 0!==r?r:this},e.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},regExp:{htmlID:/^[a-zA-Z][\w:.-]*$/g,bracket:/\[(.*)\]/i,decimal:/^\d+\.?\d*$/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field"},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contain:'{name} cannot contain "{ruleValue}"',containExactly:'{name} cannot contain exactly "{ruleValue}"',doesntContain:'{name} must contain  "{ruleValue}"',doesntContainExactly:'{name} must contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},templates:{error:function(t){var n='<ul class="list">';return e.each(t,function(e,t){n+="<li>"+t+"</li>"}),e(n+="</ul>")},prompt:function(t){return e("<div/>").addClass("ui basic red pointing prompt label").html(t[0])}},rules:{empty:function(t){return!(void 0===t||""===t||e.isArray(t)&&0===t.length)},checked:function(){return e(this).filter(":checked").length>0},email:function(t){return e.fn.form.settings.regExp.email.test(t)},url:function(t){return e.fn.form.settings.regExp.url.test(t)},regExp:function(t,n){if(n instanceof RegExp)return t.match(n);var r,i=n.match(e.fn.form.settings.regExp.flags);return i&&(n=i.length>=2?i[1]:n,r=i.length>=3?i[2]:""),t.match(new RegExp(n,r))},integer:function(t,n){var r,i,o,a=e.fn.form.settings.regExp.integer;return n&&-1===["",".."].indexOf(n)&&(-1==n.indexOf("..")?a.test(n)&&(r=i=n-0):(o=n.split("..",2),a.test(o[0])&&(r=o[0]-0),a.test(o[1])&&(i=o[1]-0))),a.test(t)&&(void 0===r||t>=r)&&(void 0===i||t<=i)},decimal:function(t){return e.fn.form.settings.regExp.decimal.test(t)},number:function(t){return e.fn.form.settings.regExp.number.test(t)},is:function(e,t){return t="string"==typeof t?t.toLowerCase():t,(e="string"==typeof e?e.toLowerCase():e)==t},isExactly:function(e,t){return e==t},not:function(e,t){return(e="string"==typeof e?e.toLowerCase():e)!=(t="string"==typeof t?t.toLowerCase():t)},notExactly:function(e,t){return e!=t},contains:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1!==t.search(new RegExp(n,"i"))},containsExactly:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1!==t.search(new RegExp(n))},doesntContain:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1===t.search(new RegExp(n,"i"))},doesntContainExactly:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1===t.search(new RegExp(n))},minLength:function(e,t){return void 0!==e&&e.length>=t},length:function(e,t){return void 0!==e&&e.length>=t},exactLength:function(e,t){return void 0!==e&&e.length==t},maxLength:function(e,t){return void 0!==e&&e.length<=t},match:function(t,n){var r;e(this);return e('[data-validate="'+n+'"]').length>0?r=e('[data-validate="'+n+'"]').val():e("#"+n).length>0?r=e("#"+n).val():e('[name="'+n+'"]').length>0?r=e('[name="'+n+'"]').val():e('[name="'+n+'[]"]').length>0&&(r=e('[name="'+n+'[]"]')),void 0!==r&&t.toString()==r.toString()},different:function(t,n){var r;e(this);return e('[data-validate="'+n+'"]').length>0?r=e('[data-validate="'+n+'"]').val():e("#"+n).length>0?r=e("#"+n).val():e('[name="'+n+'"]').length>0?r=e('[name="'+n+'"]').val():e('[name="'+n+'[]"]').length>0&&(r=e('[name="'+n+'[]"]')),void 0!==r&&t.toString()!==r.toString()},creditCard:function(t,n){var r,i,o={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},a={},s=!1,l="string"==typeof n&&n.split(",");if("string"==typeof t&&0!==t.length){if(t=t.replace(/[\-]/g,""),l&&(e.each(l,function(n,r){(i=o[r])&&(a={length:-1!==e.inArray(t.length,i.length),pattern:-1!==t.search(i.pattern)}).length&&a.pattern&&(s=!0)}),!s))return!1;if((r={number:-1!==e.inArray(t.length,o.unionPay.length),pattern:-1!==t.search(o.unionPay.pattern)}).number&&r.pattern)return!0;for(var c=t.length,u=0,d=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],f=0;c--;)f+=d[u][parseInt(t.charAt(c),10)],u^=1;return f%10==0&&f>0}},minCount:function(e,t){return 0==t||(1==t?""!==e:e.split(",").length>=t)},exactCount:function(e,t){return 0==t?""===e:1==t?""!==e&&-1===e.search(","):e.split(",").length==t},maxCount:function(e,t){return 0!=t&&(1==t?-1===e.search(","):e.split(",").length<=t)}}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.accordion=function(n){var r,i=e(this),o=(new Date).getTime(),a=[],s=arguments[0],l="string"==typeof s,c=[].slice.call(arguments,1);t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame;return i.each(function(){var u,d,f=e.isPlainObject(n)?e.extend(!0,{},e.fn.accordion.settings,n):e.extend({},e.fn.accordion.settings),p=f.className,h=f.namespace,g=f.selector,v=f.error,m="."+h,b="module-"+h,y=i.selector||"",x=e(this),_=x.find(g.title),w=x.find(g.content),k=this,T=x.data(b);d={initialize:function(){d.debug("Initializing",x),d.bind.events(),f.observeChanges&&d.observeChanges(),d.instantiate()},instantiate:function(){T=d,x.data(b,d)},destroy:function(){d.debug("Destroying previous instance",x),x.off(m).removeData(b)},refresh:function(){_=x.find(g.title),w=x.find(g.content)},observeChanges:function(){"MutationObserver"in t&&((u=new MutationObserver(function(e){d.debug("DOM tree modified, updating selector cache"),d.refresh()})).observe(k,{childList:!0,subtree:!0}),d.debug("Setting up mutation observer",u))},bind:{events:function(){d.debug("Binding delegated events"),x.on(f.on+m,g.trigger,d.event.click)}},event:{click:function(){d.toggle.call(this)}},toggle:function(t){var n=void 0!==t?"number"==typeof t?_.eq(t):e(t).closest(g.title):e(this).closest(g.title),r=n.next(w),i=r.hasClass(p.animating),o=r.hasClass(p.active),a=o&&!i,s=!o&&i;d.debug("Toggling visibility of content",n),a||s?f.collapsible?d.close.call(n):d.debug("Cannot close accordion content collapsing is disabled"):d.open.call(n)},open:function(t){var n=void 0!==t?"number"==typeof t?_.eq(t):e(t).closest(g.title):e(this).closest(g.title),r=n.next(w),i=r.hasClass(p.animating);r.hasClass(p.active)||i?d.debug("Accordion already open, skipping",r):(d.debug("Opening accordion content",n),f.onOpening.call(r),f.exclusive&&d.closeOthers.call(n),n.addClass(p.active),r.stop(!0,!0).addClass(p.animating),f.animateChildren&&(void 0!==e.fn.transition&&x.transition("is supported")?r.children().transition({animation:"fade in",queue:!1,useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):r.children().stop(!0,!0).animate({opacity:1},f.duration,d.resetOpacity)),r.slideDown(f.duration,f.easing,function(){r.removeClass(p.animating).addClass(p.active),d.reset.display.call(this),f.onOpen.call(this),f.onChange.call(this)}))},close:function(t){var n=void 0!==t?"number"==typeof t?_.eq(t):e(t).closest(g.title):e(this).closest(g.title),r=n.next(w),i=r.hasClass(p.animating),o=r.hasClass(p.active);!o&&!(!o&&i)||o&&i||(d.debug("Closing accordion content",r),f.onClosing.call(r),n.removeClass(p.active),r.stop(!0,!0).addClass(p.animating),f.animateChildren&&(void 0!==e.fn.transition&&x.transition("is supported")?r.children().transition({animation:"fade out",queue:!1,useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):r.children().stop(!0,!0).animate({opacity:0},f.duration,d.resetOpacity)),r.slideUp(f.duration,f.easing,function(){r.removeClass(p.animating).removeClass(p.active),d.reset.display.call(this),f.onClose.call(this),f.onChange.call(this)}))},closeOthers:function(t){var n,r,i,o=void 0!==t?_.eq(t):e(this).closest(g.title),a=o.parents(g.content).prev(g.title),s=o.closest(g.accordion),l=g.title+"."+p.active+":visible",c=g.content+"."+p.active+":visible";f.closeNested?i=(n=s.find(l).not(a)).next(w):(n=s.find(l).not(a),r=s.find(c).find(l).not(a),i=(n=n.not(r)).next(w)),n.length>0&&(d.debug("Exclusive enabled, closing other content",n),n.removeClass(p.active),i.removeClass(p.animating).stop(!0,!0),f.animateChildren&&(void 0!==e.fn.transition&&x.transition("is supported")?i.children().transition({animation:"fade out",useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):i.children().stop(!0,!0).animate({opacity:0},f.duration,d.resetOpacity)),i.slideUp(f.duration,f.easing,function(){e(this).removeClass(p.active),d.reset.display.call(this)}))},reset:{display:function(){d.verbose("Removing inline display from element",this),e(this).css("display",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")},opacity:function(){d.verbose("Removing inline opacity from element",this),e(this).css("opacity",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")}},setting:function(t,n){if(d.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],n):f[t]=n}},internal:function(t,n){if(d.debug("Changing internal",t,n),void 0===n)return d[t];e.isPlainObject(t)?e.extend(!0,d,t):d[t]=n},debug:function(){!f.silent&&f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){f.silent||(d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments))},performance:{log:function(e){var t,n;f.performance&&(n=(t=(new Date).getTime())-(o||t),o=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,500)},display:function(){var t=f.name+":",n=0;o=!1,clearTimeout(d.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",y&&(t+=" '"+y+"'"),(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,i){var o,a,s,l=T;return n=n||c,i=k||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(d.error(v.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},l?(void 0===T&&d.initialize(),d.invoke(s)):(void 0!==T&&T.invoke("destroy"),d.initialize())}),void 0!==r?r:this},e.fn.accordion.settings={name:"Accordion",namespace:"accordion",silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",observeChanges:!0,exclusive:!0,collapsible:!0,closeNested:!1,animateChildren:!0,duration:350,easing:"easeOutQuad",onOpening:function(){},onOpen:function(){},onClosing:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active",animating:"animating"},selector:{accordion:".accordion",title:".title",trigger:".title",content:".content"}},e.extend(e.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}})}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.checkbox=function(r){var i,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return o.each(function(){var o,f,p=e.extend(!0,{},e.fn.checkbox.settings,r),h=p.className,g=p.namespace,v=p.selector,m=p.error,b="."+g,y="module-"+g,x=e(this),_=e(this).children(v.label),w=e(this).children(v.input),k=w[0],T=!1,A=!1,C=x.data(y),S=this;f={initialize:function(){f.verbose("Initializing checkbox",p),f.create.label(),f.bind.events(),f.set.tabbable(),f.hide.input(),f.observeChanges(),f.instantiate(),f.setup()},instantiate:function(){f.verbose("Storing instance of module",f),C=f,x.data(y,f)},destroy:function(){f.verbose("Destroying module"),f.unbind.events(),f.show.input(),x.removeData(y)},fix:{reference:function(){x.is(v.input)&&(f.debug("Behavior called on <input> adjusting invoked element"),x=x.closest(v.checkbox),f.refresh())}},setup:function(){f.set.initialLoad(),f.is.indeterminate()?(f.debug("Initial value is indeterminate"),f.indeterminate()):f.is.checked()?(f.debug("Initial value is checked"),f.check()):(f.debug("Initial value is unchecked"),f.uncheck()),f.remove.initialLoad()},refresh:function(){_=x.children(v.label),w=x.children(v.input),k=w[0]},hide:{input:function(){f.verbose("Modifying <input> z-index to be unselectable"),w.addClass(h.hidden)}},show:{input:function(){f.verbose("Modifying <input> z-index to be selectable"),w.removeClass(h.hidden)}},observeChanges:function(){"MutationObserver"in t&&((o=new MutationObserver(function(e){f.debug("DOM tree modified, updating selector cache"),f.refresh()})).observe(S,{childList:!0,subtree:!0}),f.debug("Setting up mutation observer",o))},attachEvents:function(t,n){var r=e(t);n=e.isFunction(f[n])?f[n]:f.toggle,r.length>0?(f.debug("Attaching checkbox events to element",t,n),r.on("click"+b,n)):f.error(m.notFound)},event:{click:function(t){var n=e(t.target);n.is(v.input)?f.verbose("Using default check action on initialized checkbox"):n.is(v.link)?f.debug("Clicking link inside checkbox, skipping toggle"):(f.toggle(),w.focus(),t.preventDefault())},keydown:function(e){var t=e.which,n=13,r=32;t==27?(f.verbose("Escape key pressed blurring field"),w.blur(),A=!0):e.ctrlKey||t!=r&&t!=n?A=!1:(f.verbose("Enter/space key pressed, toggling checkbox"),f.toggle(),A=!0)},keyup:function(e){A&&e.preventDefault()}},check:function(){f.should.allowCheck()&&(f.debug("Checking checkbox",w),f.set.checked(),f.should.ignoreCallbacks()||(p.onChecked.call(k),p.onChange.call(k)))},uncheck:function(){f.should.allowUncheck()&&(f.debug("Unchecking checkbox"),f.set.unchecked(),f.should.ignoreCallbacks()||(p.onUnchecked.call(k),p.onChange.call(k)))},indeterminate:function(){f.should.allowIndeterminate()?f.debug("Checkbox is already indeterminate"):(f.debug("Making checkbox indeterminate"),f.set.indeterminate(),f.should.ignoreCallbacks()||(p.onIndeterminate.call(k),p.onChange.call(k)))},determinate:function(){f.should.allowDeterminate()?f.debug("Checkbox is already determinate"):(f.debug("Making checkbox determinate"),f.set.determinate(),f.should.ignoreCallbacks()||(p.onDeterminate.call(k),p.onChange.call(k)))},enable:function(){f.is.enabled()?f.debug("Checkbox is already enabled"):(f.debug("Enabling checkbox"),f.set.enabled(),p.onEnable.call(k),p.onEnabled.call(k))},disable:function(){f.is.disabled()?f.debug("Checkbox is already disabled"):(f.debug("Disabling checkbox"),f.set.disabled(),p.onDisable.call(k),p.onDisabled.call(k))},get:{radios:function(){var t=f.get.name();return e('input[name="'+t+'"]').closest(v.checkbox)},otherRadios:function(){return f.get.radios().not(x)},name:function(){return w.attr("name")}},is:{initialLoad:function(){return T},radio:function(){return w.hasClass(h.radio)||"radio"==w.attr("type")},indeterminate:function(){return void 0!==w.prop("indeterminate")&&w.prop("indeterminate")},checked:function(){return void 0!==w.prop("checked")&&w.prop("checked")},disabled:function(){return void 0!==w.prop("disabled")&&w.prop("disabled")},enabled:function(){return!f.is.disabled()},determinate:function(){return!f.is.indeterminate()},unchecked:function(){return!f.is.checked()}},should:{allowCheck:function(){return f.is.determinate()&&f.is.checked()&&!f.should.forceCallbacks()?(f.debug("Should not allow check, checkbox is already checked"),!1):!1!==p.beforeChecked.apply(k)||(f.debug("Should not allow check, beforeChecked cancelled"),!1)},allowUncheck:function(){return f.is.determinate()&&f.is.unchecked()&&!f.should.forceCallbacks()?(f.debug("Should not allow uncheck, checkbox is already unchecked"),!1):!1!==p.beforeUnchecked.apply(k)||(f.debug("Should not allow uncheck, beforeUnchecked cancelled"),!1)},allowIndeterminate:function(){return f.is.indeterminate()&&!f.should.forceCallbacks()?(f.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):!1!==p.beforeIndeterminate.apply(k)||(f.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),!1)},allowDeterminate:function(){return f.is.determinate()&&!f.should.forceCallbacks()?(f.debug("Should not allow determinate, checkbox is already determinate"),!1):!1!==p.beforeDeterminate.apply(k)||(f.debug("Should not allow determinate, beforeDeterminate cancelled"),!1)},forceCallbacks:function(){return f.is.initialLoad()&&p.fireOnInit},ignoreCallbacks:function(){return T&&!p.fireOnInit}},can:{change:function(){return!(x.hasClass(h.disabled)||x.hasClass(h.readOnly)||w.prop("disabled")||w.prop("readonly"))},uncheck:function(){return"boolean"==typeof p.uncheckable?p.uncheckable:!f.is.radio()}},set:{initialLoad:function(){T=!0},checked:function(){f.verbose("Setting class to checked"),x.removeClass(h.indeterminate).addClass(h.checked),f.is.radio()&&f.uncheckOthers(),f.is.indeterminate()||!f.is.checked()?(f.verbose("Setting state to checked",k),w.prop("indeterminate",!1).prop("checked",!0),f.trigger.change()):f.debug("Input is already checked, skipping input property change")},unchecked:function(){f.verbose("Removing checked class"),x.removeClass(h.indeterminate).removeClass(h.checked),f.is.indeterminate()||!f.is.unchecked()?(f.debug("Setting state to unchecked"),w.prop("indeterminate",!1).prop("checked",!1),f.trigger.change()):f.debug("Input is already unchecked")},indeterminate:function(){f.verbose("Setting class to indeterminate"),x.addClass(h.indeterminate),f.is.indeterminate()?f.debug("Input is already indeterminate, skipping input property change"):(f.debug("Setting state to indeterminate"),w.prop("indeterminate",!0),f.trigger.change())},determinate:function(){f.verbose("Removing indeterminate class"),x.removeClass(h.indeterminate),f.is.determinate()?f.debug("Input is already determinate, skipping input property change"):(f.debug("Setting state to determinate"),w.prop("indeterminate",!1))},disabled:function(){f.verbose("Setting class to disabled"),x.addClass(h.disabled),f.is.disabled()?f.debug("Input is already disabled, skipping input property change"):(f.debug("Setting state to disabled"),w.prop("disabled","disabled"),f.trigger.change())},enabled:function(){f.verbose("Removing disabled class"),x.removeClass(h.disabled),f.is.enabled()?f.debug("Input is already enabled, skipping input property change"):(f.debug("Setting state to enabled"),w.prop("disabled",!1),f.trigger.change())},tabbable:function(){f.verbose("Adding tabindex to checkbox"),void 0===w.attr("tabindex")&&w.attr("tabindex",0)}},remove:{initialLoad:function(){T=!1}},trigger:{change:function(){var e=n.createEvent("HTMLEvents"),t=w[0];t&&(f.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},create:{label:function(){w.prevAll(v.label).length>0?(w.prev(v.label).detach().insertAfter(w),f.debug("Moving existing label",_)):f.has.label()||(_=e("<label>").insertAfter(w),f.debug("Creating label",_))}},has:{label:function(){return _.length>0}},bind:{events:function(){f.verbose("Attaching checkbox events"),x.on("click"+b,f.event.click).on("keydown"+b,v.input,f.event.keydown).on("keyup"+b,v.input,f.event.keyup)}},unbind:{events:function(){f.debug("Removing events"),x.off(b)}},uncheckOthers:function(){var e=f.get.otherRadios();f.debug("Unchecking other radios",e),e.removeClass(h.checked)},toggle:function(){f.can.change()?f.is.indeterminate()||f.is.unchecked()?(f.debug("Currently unchecked"),f.check()):f.is.checked()&&f.can.uncheck()&&(f.debug("Currently checked"),f.uncheck()):f.is.radio()||f.debug("Checkbox is read-only or disabled, ignoring toggle")},setting:function(t,n){if(f.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===n)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],n):p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];f[t]=n}},debug:function(){!p.silent&&p.debug&&(p.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,p.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),f.verbose.apply(console,arguments)))},error:function(){p.silent||(f.error=Function.prototype.bind.call(console.error,console,p.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,n;p.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=p.name+":",n=0;s=!1,clearTimeout(f.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var o,a,s,l=C;return n=n||d,r=S||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(f.error(m.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},u?(void 0===C&&f.initialize(),f.invoke(c)):(void 0!==C&&C.invoke("destroy"),f.initialize())}),void 0!==i?i:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:!1,debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!1,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dimmer=function(t){var r,i=e(this),o=(new Date).getTime(),a=[],s=arguments[0],l="string"==typeof s,c=[].slice.call(arguments,1);return i.each(function(){var u,d,f,p=e.isPlainObject(t)?e.extend(!0,{},e.fn.dimmer.settings,t):e.extend({},e.fn.dimmer.settings),h=p.selector,g=p.namespace,v=p.className,m=p.error,b="."+g,y="module-"+g,x=i.selector||"",_="ontouchstart"in n.documentElement?"touchstart":"click",w=e(this),k=this,T=w.data(y);(f={preinitialize:function(){f.is.dimmer()?(d=w.parent(),u=w):(d=w,u=f.has.dimmer()?p.dimmerName?d.find(h.dimmer).filter("."+p.dimmerName):d.find(h.dimmer):f.create(),f.set.variation())},initialize:function(){f.debug("Initializing dimmer",p),f.bind.events(),f.set.dimmable(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),T=f,w.data(y,T)},destroy:function(){f.verbose("Destroying previous module",u),f.unbind.events(),f.remove.variation(),d.off(b)},bind:{events:function(){"hover"==p.on?d.on("mouseenter"+b,f.show).on("mouseleave"+b,f.hide):"click"==p.on&&d.on(_+b,f.toggle),f.is.page()&&(f.debug("Setting as a page dimmer",d),f.set.pageDimmer()),f.is.closable()&&(f.verbose("Adding dimmer close event",u),d.on(_+b,h.dimmer,f.event.click))}},unbind:{events:function(){w.removeData(y),d.off(b)}},event:{click:function(t){f.verbose("Determining if event occured on dimmer",t),(0===u.find(t.target).length||e(t.target).is(h.content))&&(f.hide(),t.stopImmediatePropagation())}},addContent:function(t){var n=e(t);f.debug("Add content to dimmer",n),n.parent()[0]!==u[0]&&n.detach().appendTo(u)},create:function(){var t=e(p.template.dimmer());return p.dimmerName&&(f.debug("Creating named dimmer",p.dimmerName),t.addClass(p.dimmerName)),t.appendTo(d),t},show:function(t){t=e.isFunction(t)?t:function(){},f.debug("Showing dimmer",u,p),f.is.dimmed()&&!f.is.animating()||!f.is.enabled()?f.debug("Dimmer is already shown or disabled"):(f.animate.show(t),p.onShow.call(k),p.onChange.call(k))},hide:function(t){t=e.isFunction(t)?t:function(){},f.is.dimmed()||f.is.animating()?(f.debug("Hiding dimmer",u),f.animate.hide(t),p.onHide.call(k),p.onChange.call(k)):f.debug("Dimmer is not visible")},toggle:function(){f.verbose("Toggling dimmer visibility",u),f.is.dimmed()?f.hide():f.show()},animate:{show:function(t){t=e.isFunction(t)?t:function(){},p.useCSS&&void 0!==e.fn.transition&&u.transition("is supported")?("auto"!==p.opacity&&f.set.opacity(),u.transition({animation:p.transition+" in",queue:!1,duration:f.get.duration(),useFailSafe:!0,onStart:function(){f.set.dimmed()},onComplete:function(){f.set.active(),t()}})):(f.verbose("Showing dimmer animation with javascript"),f.set.dimmed(),"auto"==p.opacity&&(p.opacity=.8),u.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(f.get.duration(),p.opacity,function(){u.removeAttr("style"),f.set.active(),t()}))},hide:function(t){t=e.isFunction(t)?t:function(){},p.useCSS&&void 0!==e.fn.transition&&u.transition("is supported")?(f.verbose("Hiding dimmer with css"),u.transition({animation:p.transition+" out",queue:!1,duration:f.get.duration(),useFailSafe:!0,onStart:function(){f.remove.dimmed()},onComplete:function(){f.remove.active(),t()}})):(f.verbose("Hiding dimmer with javascript"),f.remove.dimmed(),u.stop().fadeOut(f.get.duration(),function(){f.remove.active(),u.removeAttr("style"),t()}))}},get:{dimmer:function(){return u},duration:function(){return"object"==typeof p.duration?f.is.active()?p.duration.hide:p.duration.show:p.duration}},has:{dimmer:function(){return p.dimmerName?w.find(h.dimmer).filter("."+p.dimmerName).length>0:w.find(h.dimmer).length>0}},is:{active:function(){return u.hasClass(v.active)},animating:function(){return u.is(":animated")||u.hasClass(v.animating)},closable:function(){return"auto"==p.closable?"hover"!=p.on:p.closable},dimmer:function(){return w.hasClass(v.dimmer)},dimmable:function(){return w.hasClass(v.dimmable)},dimmed:function(){return d.hasClass(v.dimmed)},disabled:function(){return d.hasClass(v.disabled)},enabled:function(){return!f.is.disabled()},page:function(){return d.is("body")},pageDimmer:function(){return u.hasClass(v.pageDimmer)}},can:{show:function(){return!u.hasClass(v.disabled)}},set:{opacity:function(e){var t=u.css("background-color"),n=t.split(","),r=n&&3==n.length,i=n&&4==n.length;e=0===p.opacity?0:p.opacity||e,r||i?(n[3]=e+")",t=n.join(",")):t="rgba(0, 0, 0, "+e+")",f.debug("Setting opacity to",e),u.css("background-color",t)},active:function(){u.addClass(v.active)},dimmable:function(){d.addClass(v.dimmable)},dimmed:function(){d.addClass(v.dimmed)},pageDimmer:function(){u.addClass(v.pageDimmer)},disabled:function(){u.addClass(v.disabled)},variation:function(e){(e=e||p.variation)&&u.addClass(e)}},remove:{active:function(){u.removeClass(v.active)},dimmed:function(){d.removeClass(v.dimmed)},disabled:function(){u.removeClass(v.disabled)},variation:function(e){(e=e||p.variation)&&u.removeClass(e)}},setting:function(t,n){if(f.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===n)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],n):p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];f[t]=n}},debug:function(){!p.silent&&p.debug&&(p.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,p.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),f.verbose.apply(console,arguments)))},error:function(){p.silent||(f.error=Function.prototype.bind.call(console.error,console,p.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,n;p.performance&&(n=(t=(new Date).getTime())-(o||t),o=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=p.name+":",n=0;o=!1,clearTimeout(f.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",x&&(t+=" '"+x+"'"),i.length>1&&(t+=" ("+i.length+")"),(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,i){var o,a,s,l=T;return n=n||c,i=k||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(f.error(m.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}}).preinitialize(),l?(void 0===T&&f.initialize(),f.invoke(s)):(void 0!==T&&T.invoke("destroy"),f.initialize())}),void 0!==r?r:this},e.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",silent:!1,debug:!1,verbose:!1,performance:!0,dimmerName:!1,variation:!1,closable:"auto",useCSS:!0,transition:"fade",on:!1,opacity:"auto",duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},className:{active:"active",animating:"animating",dimmable:"dimmable",dimmed:"dimmed",dimmer:"dimmer",disabled:"disabled",hide:"hide",pageDimmer:"page",show:"show"},selector:{dimmer:"> .ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return e("<div />").attr("class","ui dimmer")}}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dropdown=function(r){var i,o=e(this),a=e(n),s=o.selector||"",l="ontouchstart"in n.documentElement,c=(new Date).getTime(),u=[],d=arguments[0],f="string"==typeof d,p=[].slice.call(arguments,1);return o.each(function(h){var g,v,m,b,y,x,_,w,k=e.isPlainObject(r)?e.extend(!0,{},e.fn.dropdown.settings,r):e.extend({},e.fn.dropdown.settings),T=k.className,A=k.message,C=k.fields,S=k.keys,M=k.metadata,E=k.namespace,O=k.regExp,L=k.selector,P=k.error,D=k.templates,R="."+E,F="module-"+E,j=e(this),I=e(k.context),N=j.find(L.text),z=j.find(L.search),q=j.find(L.sizer),H=j.find(L.input),B=j.find(L.icon),V=j.prev().find(L.text).length>0?j.prev().find(L.text):j.prev(),U=j.children(L.menu),$=U.find(L.item),W=!1,X=!1,G=!1,Y=this,Z=j.data(F);w={initialize:function(){w.debug("Initializing dropdown",k),w.is.alreadySetup()?w.setup.reference():(w.setup.layout(),k.values&&w.change.values(k.values),w.refreshData(),w.save.defaults(),w.restore.selected(),w.create.id(),w.bind.events(),w.observeChanges(),w.instantiate())},instantiate:function(){w.verbose("Storing instance of dropdown",w),Z=w,j.data(F,w)},destroy:function(){w.verbose("Destroying previous dropdown",j),w.remove.tabbable(),j.off(R).removeData(F),U.off(R),a.off(b),w.disconnect.menuObserver(),w.disconnect.selectObserver()},observeChanges:function(){"MutationObserver"in t&&(x=new MutationObserver(w.event.select.mutation),_=new MutationObserver(w.event.menu.mutation),w.debug("Setting up mutation observer",x,_),w.observe.select(),w.observe.menu())},disconnect:{menuObserver:function(){_&&_.disconnect()},selectObserver:function(){x&&x.disconnect()}},observe:{select:function(){w.has.input()&&x.observe(j[0],{childList:!0,subtree:!0})},menu:function(){w.has.menu()&&_.observe(U[0],{childList:!0,subtree:!0})}},create:{id:function(){y=(Math.random().toString(16)+"000000000").substr(2,8),b="."+y,w.verbose("Creating unique id for element",y)},userChoice:function(t){var n,r,i;return!!(t=t||w.get.userValues())&&(t=e.isArray(t)?t:[t],e.each(t,function(t,o){!1===w.get.item(o)&&(i=k.templates.addition(w.add.variables(A.addResult,o)),r=e("<div />").html(i).attr("data-"+M.value,o).attr("data-"+M.text,o).addClass(T.addition).addClass(T.item),k.hideAdditions&&r.addClass(T.hidden),n=void 0===n?r:n.add(r),w.verbose("Creating user choices for value",o,r))}),n)},userLabels:function(t){var n=w.get.userValues();n&&(w.debug("Adding user labels",n),e.each(n,function(e,t){w.verbose("Adding custom user value"),w.add.label(t,t)}))},menu:function(){U=e("<div />").addClass(T.menu).appendTo(j)},sizer:function(){q=e("<span />").addClass(T.sizer).insertAfter(z)}},search:function(e){e=void 0!==e?e:w.get.query(),w.verbose("Searching for query",e),w.has.minCharacters(e)?w.filter(e):w.hide()},select:{firstUnfiltered:function(){w.verbose("Selecting first non-filtered element"),w.remove.selectedItem(),$.not(L.unselectable).not(L.addition+L.hidden).eq(0).addClass(T.selected)},nextAvailable:function(e){var t=(e=e.eq(0)).nextAll(L.item).not(L.unselectable).eq(0),n=e.prevAll(L.item).not(L.unselectable).eq(0);t.length>0?(w.verbose("Moving selection to",t),t.addClass(T.selected)):(w.verbose("Moving selection to",n),n.addClass(T.selected))}},setup:{api:function(){var e={debug:k.debug,urlData:{value:w.get.value(),query:w.get.query()},on:!1};w.verbose("First request, initializing API"),j.api(e)},layout:function(){j.is("select")&&(w.setup.select(),w.setup.returnedObject()),w.has.menu()||w.create.menu(),w.is.search()&&!w.has.search()&&(w.verbose("Adding search input"),z=e("<input />").addClass(T.search).prop("autocomplete","off").insertBefore(N)),w.is.multiple()&&w.is.searchSelection()&&!w.has.sizer()&&w.create.sizer(),k.allowTab&&w.set.tabbable()},select:function(){var t=w.get.selectValues();w.debug("Dropdown initialized on a select",t),j.is("select")&&(H=j),H.parent(L.dropdown).length>0?(w.debug("UI dropdown already exists. Creating dropdown menu only"),j=H.closest(L.dropdown),w.has.menu()||w.create.menu(),U=j.children(L.menu),w.setup.menu(t)):(w.debug("Creating entire dropdown from select"),j=e("<div />").attr("class",H.attr("class")).addClass(T.selection).addClass(T.dropdown).html(D.dropdown(t)).insertBefore(H),H.hasClass(T.multiple)&&!1===H.prop("multiple")&&(w.error(P.missingMultiple),H.prop("multiple",!0)),H.is("[multiple]")&&w.set.multiple(),H.prop("disabled")&&(w.debug("Disabling dropdown"),j.addClass(T.disabled)),H.removeAttr("class").detach().prependTo(j)),w.refresh()},menu:function(e){U.html(D.menu(e,C)),$=U.find(L.item)},reference:function(){w.debug("Dropdown behavior was called on select, replacing with closest dropdown"),j=j.parent(L.dropdown),Z=j.data(F),Y=j.get(0),w.refresh(),w.setup.returnedObject()},returnedObject:function(){var e=o.slice(0,h),t=o.slice(h+1);o=e.add(j).add(t)}},refresh:function(){w.refreshSelectors(),w.refreshData()},refreshItems:function(){$=U.find(L.item)},refreshSelectors:function(){w.verbose("Refreshing selector cache"),N=j.find(L.text),z=j.find(L.search),H=j.find(L.input),B=j.find(L.icon),V=j.prev().find(L.text).length>0?j.prev().find(L.text):j.prev(),U=j.children(L.menu),$=U.find(L.item)},refreshData:function(){w.verbose("Refreshing cached metadata"),$.removeData(M.text).removeData(M.value)},clearData:function(){w.verbose("Clearing metadata"),$.removeData(M.text).removeData(M.value),j.removeData(M.defaultText).removeData(M.defaultValue).removeData(M.placeholderText)},toggle:function(){w.verbose("Toggling menu visibility"),w.is.active()?w.hide():w.show()},show:function(t){if(t=e.isFunction(t)?t:function(){},!w.can.show()&&w.is.remote()&&(w.debug("No API results retrieved, searching before show"),w.queryRemote(w.get.query(),w.show)),w.can.show()&&!w.is.active()){if(w.debug("Showing dropdown"),!w.has.message()||w.has.maxSelections()||w.has.allResultsFiltered()||w.remove.message(),w.is.allFiltered())return!0;!1!==k.onShow.call(Y)&&w.animate.show(function(){w.can.click()&&w.bind.intent(),w.has.menuSearch()&&w.focusSearch(),w.set.visible(),t.call(Y)})}},hide:function(t){t=e.isFunction(t)?t:function(){},w.is.active()&&(w.debug("Hiding dropdown"),!1!==k.onHide.call(Y)&&w.animate.hide(function(){w.remove.visible(),t.call(Y)}))},hideOthers:function(){w.verbose("Finding other dropdowns to hide"),o.not(j).has(L.menu+"."+T.visible).dropdown("hide")},hideMenu:function(){w.verbose("Hiding menu  instantaneously"),w.remove.active(),w.remove.visible(),U.transition("hide")},hideSubMenus:function(){var e=U.children(L.item).find(L.menu);w.verbose("Hiding sub menus",e),e.transition("hide")},bind:{events:function(){l&&w.bind.touchEvents(),w.bind.keyboardEvents(),w.bind.inputEvents(),w.bind.mouseEvents()},touchEvents:function(){w.debug("Touch device detected binding additional touch events"),w.is.searchSelection()||w.is.single()&&j.on("touchstart"+R,w.event.test.toggle),U.on("touchstart"+R,L.item,w.event.item.mouseenter)},keyboardEvents:function(){w.verbose("Binding keyboard events"),j.on("keydown"+R,w.event.keydown),w.has.search()&&j.on(w.get.inputEvent()+R,L.search,w.event.input),w.is.multiple()&&a.on("keydown"+b,w.event.document.keydown)},inputEvents:function(){w.verbose("Binding input change events"),j.on("change"+R,L.input,w.event.change)},mouseEvents:function(){w.verbose("Binding mouse events"),w.is.multiple()&&j.on("click"+R,L.label,w.event.label.click).on("click"+R,L.remove,w.event.remove.click),w.is.searchSelection()?(j.on("mousedown"+R,w.event.mousedown).on("mouseup"+R,w.event.mouseup).on("mousedown"+R,L.menu,w.event.menu.mousedown).on("mouseup"+R,L.menu,w.event.menu.mouseup).on("click"+R,L.icon,w.event.icon.click).on("focus"+R,L.search,w.event.search.focus).on("click"+R,L.search,w.event.search.focus).on("blur"+R,L.search,w.event.search.blur).on("click"+R,L.text,w.event.text.focus),w.is.multiple()&&j.on("click"+R,w.event.click)):("click"==k.on?j.on("click"+R,L.icon,w.event.icon.click).on("click"+R,w.event.test.toggle):"hover"==k.on?j.on("mouseenter"+R,w.delay.show).on("mouseleave"+R,w.delay.hide):j.on(k.on+R,w.toggle),j.on("mousedown"+R,w.event.mousedown).on("mouseup"+R,w.event.mouseup).on("focus"+R,w.event.focus),w.has.menuSearch()?j.on("blur"+R,L.search,w.event.search.blur):j.on("blur"+R,w.event.blur)),U.on("mouseenter"+R,L.item,w.event.item.mouseenter).on("mouseleave"+R,L.item,w.event.item.mouseleave).on("click"+R,L.item,w.event.item.click)},intent:function(){w.verbose("Binding hide intent event to document"),l&&a.on("touchstart"+b,w.event.test.touch).on("touchmove"+b,w.event.test.touch),a.on("click"+b,w.event.test.hide)}},unbind:{intent:function(){w.verbose("Removing hide intent event from document"),l&&a.off("touchstart"+b).off("touchmove"+b),a.off("click"+b)}},filter:function(e){var t=void 0!==e?e:w.get.query(),n=function(){w.is.multiple()&&w.filterActive(),(e||!e&&0==w.get.activeItem().length)&&w.select.firstUnfiltered(),w.has.allResultsFiltered()?k.onNoResults.call(Y,t)?k.allowAdditions?k.hideAdditions&&(w.verbose("User addition with no menu, setting empty style"),w.set.empty(),w.hideMenu()):(w.verbose("All items filtered, showing message",t),w.add.message(A.noResults)):(w.verbose("All items filtered, hiding dropdown",t),w.hideMenu()):(w.remove.empty(),w.remove.message()),k.allowAdditions&&w.add.userSuggestion(e),w.is.searchSelection()&&w.can.show()&&w.is.focusedOnSearch()&&w.show()};k.useLabels&&w.has.maxSelections()||(k.apiSettings?w.can.useAPI()?w.queryRemote(t,function(){k.filterRemoteData&&w.filterItems(t),n()}):w.error(P.noAPI):(w.filterItems(t),n()))},queryRemote:function(t,n){var r={errorDuration:!1,cache:"local",throttle:k.throttle,urlData:{query:t},onError:function(){w.add.message(A.serverError),n()},onFailure:function(){w.add.message(A.serverError),n()},onSuccess:function(e){w.remove.message(),w.setup.menu({values:e[C.remoteValues]}),n()}};j.api("get request")||w.setup.api(),r=e.extend(!0,{},r,k.apiSettings),j.api("setting",r).api("query")},filterItems:function(t){var n=void 0!==t?t:w.get.query(),r=null,i=w.escape.string(n),o=new RegExp("^"+i,"igm");w.has.query()&&(r=[],w.verbose("Searching for matching values",n),$.each(function(){var t,i,a=e(this);if("both"==k.match||"text"==k.match){if(-1!==(t=String(w.get.choiceText(a,!1))).search(o))return r.push(this),!0;if("exact"===k.fullTextSearch&&w.exactSearch(n,t))return r.push(this),!0;if(!0===k.fullTextSearch&&w.fuzzySearch(n,t))return r.push(this),!0}if("both"==k.match||"value"==k.match){if(-1!==(i=String(w.get.choiceValue(a,t))).search(o))return r.push(this),!0;if("exact"===k.fullTextSearch&&w.exactSearch(n,i))return r.push(this),!0;if(!0===k.fullTextSearch&&w.fuzzySearch(n,i))return r.push(this),!0}})),w.debug("Showing only matched items",n),w.remove.filteredItem(),r&&$.not(r).addClass(T.filtered)},fuzzySearch:function(e,t){var n=t.length,r=e.length;if(e=e.toLowerCase(),t=t.toLowerCase(),r>n)return!1;if(r===n)return e===t;e:for(var i=0,o=0;i<r;i++){for(var a=e.charCodeAt(i);o<n;)if(t.charCodeAt(o++)===a)continue e;return!1}return!0},exactSearch:function(e,t){return e=e.toLowerCase(),(t=t.toLowerCase()).indexOf(e)>-1},filterActive:function(){k.useLabels&&$.filter("."+T.active).addClass(T.filtered)},focusSearch:function(e){w.has.search()&&!w.is.focusedOnSearch()&&(e?(j.off("focus"+R,L.search),z.focus(),j.on("focus"+R,L.search,w.event.search.focus)):z.focus())},forceSelection:function(){var e=$.not(T.filtered).filter("."+T.selected).eq(0),t=$.not(T.filtered).filter("."+T.active).eq(0),n=e.length>0?e:t;if(n.length>0&&!w.is.multiple())return w.debug("Forcing partial selection to selected item",n),void w.event.item.click.call(n,{},!0);k.allowAdditions?(w.set.selected(w.get.query()),w.remove.searchTerm()):w.remove.searchTerm()},change:{values:function(t){k.allowAdditions||w.clear(),w.debug("Creating dropdown with specified values",t),w.setup.menu({values:t}),e.each(t,function(e,t){if(1==t.selected)return w.debug("Setting initial selection to",t.value),w.set.selected(t.value),!0})}},event:{change:function(){G||(w.debug("Input changed, updating selection"),w.set.selected())},focus:function(){k.showOnFocus&&!W&&w.is.hidden()&&!v&&w.show()},blur:function(e){v=n.activeElement===this,W||v||(w.remove.activeLabel(),w.hide())},mousedown:function(){w.is.searchSelection()?m=!0:W=!0},mouseup:function(){w.is.searchSelection()?m=!1:W=!1},click:function(t){e(t.target).is(j)&&(w.is.focusedOnSearch()?w.show():w.focusSearch())},search:{focus:function(){W=!0,w.is.multiple()&&w.remove.activeLabel(),k.showOnFocus&&w.search()},blur:function(e){v=n.activeElement===this,w.is.searchSelection()&&!m&&(X||v||(k.forceSelection&&w.forceSelection(),w.hide())),m=!1}},icon:{click:function(e){w.toggle()}},text:{focus:function(e){W=!0,w.focusSearch()}},input:function(e){(w.is.multiple()||w.is.searchSelection())&&w.set.filtered(),clearTimeout(w.timer),w.timer=setTimeout(w.search,k.delay.search)},label:{click:function(t){var n=e(this),r=j.find(L.label),i=r.filter("."+T.active),o=n.nextAll("."+T.active),a=n.prevAll("."+T.active),s=o.length>0?n.nextUntil(o).add(i).add(n):n.prevUntil(a).add(i).add(n);t.shiftKey?(i.removeClass(T.active),s.addClass(T.active)):t.ctrlKey?n.toggleClass(T.active):(i.removeClass(T.active),n.addClass(T.active)),k.onLabelSelect.apply(this,r.filter("."+T.active))}},remove:{click:function(){var t=e(this).parent();t.hasClass(T.active)?w.remove.activeLabels():w.remove.activeLabels(t)}},test:{toggle:function(e){var t=w.is.multiple()?w.show:w.toggle;w.is.bubbledLabelClick(e)||w.is.bubbledIconClick(e)||w.determine.eventOnElement(e,t)&&e.preventDefault()},touch:function(e){w.determine.eventOnElement(e,function(){"touchstart"==e.type?w.timer=setTimeout(function(){w.hide()},k.delay.touch):"touchmove"==e.type&&clearTimeout(w.timer)}),e.stopPropagation()},hide:function(e){w.determine.eventInModule(e,w.hide)}},select:{mutation:function(t){w.debug("<select> modified, recreating menu");var n=!1;e.each(t,function(t,r){if(e(r.target).is("select")||e(r.addedNodes).is("select"))return n=!0,!0}),n&&(w.disconnect.selectObserver(),w.refresh(),w.setup.select(),w.set.selected(),w.observe.select())}},menu:{mutation:function(t){var n=t[0],r=n.addedNodes?e(n.addedNodes[0]):e(!1),i=n.removedNodes?e(n.removedNodes[0]):e(!1),o=r.add(i),a=o.is(L.addition)||o.closest(L.addition).length>0,s=o.is(L.message)||o.closest(L.message).length>0;a||s?(w.debug("Updating item selector cache"),w.refreshItems()):(w.debug("Menu modified, updating selector cache"),w.refresh())},mousedown:function(){X=!0},mouseup:function(){X=!1}},item:{mouseenter:function(t){var n=e(t.target),r=e(this),i=r.children(L.menu),o=r.siblings(L.item).children(L.menu),a=i.length>0;!(i.find(n).length>0)&&a&&(clearTimeout(w.itemTimer),w.itemTimer=setTimeout(function(){w.verbose("Showing sub-menu",i),e.each(o,function(){w.animate.hide(!1,e(this))}),w.animate.show(!1,i)},k.delay.show),t.preventDefault())},mouseleave:function(t){var n=e(this).children(L.menu);n.length>0&&(clearTimeout(w.itemTimer),w.itemTimer=setTimeout(function(){w.verbose("Hiding sub-menu",n),w.animate.hide(!1,n)},k.delay.hide))},click:function(t,r){var i=e(this),o=e(t?t.target:""),a=i.find(L.menu),s=w.get.choiceText(i),l=w.get.choiceValue(i,s),c=a.length>0,u=a.find(o).length>0;w.has.menuSearch()&&e(n.activeElement).blur(),u||c&&!k.allowCategorySelection||(w.is.searchSelection()&&(k.allowAdditions&&w.remove.userAddition(),w.remove.searchTerm(),w.is.focusedOnSearch()||1==r||w.focusSearch(!0)),k.useLabels||(w.remove.filteredItem(),w.set.scrollPosition(i)),w.determine.selectAction.call(this,s,l))}},document:{keydown:function(e){var t=e.which;if(w.is.inObject(t,S)){var n=j.find(L.label),r=n.filter("."+T.active),i=(r.data(M.value),n.index(r)),o=n.length,a=r.length>0,s=r.length>1,l=0===i,c=i+1==o,u=w.is.searchSelection(),d=w.is.focusedOnSearch(),f=w.is.focused(),p=d&&0===w.get.caretPosition();if(u&&!a&&!d)return;t==S.leftArrow?!f&&!p||a?a&&(e.shiftKey?w.verbose("Adding previous label to selection"):(w.verbose("Selecting previous label"),n.removeClass(T.active)),l&&!s?r.addClass(T.active):r.prev(L.siblingLabel).addClass(T.active).end(),e.preventDefault()):(w.verbose("Selecting previous label"),n.last().addClass(T.active)):t==S.rightArrow?(f&&!a&&n.first().addClass(T.active),a&&(e.shiftKey?w.verbose("Adding next label to selection"):(w.verbose("Selecting next label"),n.removeClass(T.active)),c?u?d?n.removeClass(T.active):w.focusSearch():s?r.next(L.siblingLabel).addClass(T.active):r.addClass(T.active):r.next(L.siblingLabel).addClass(T.active),e.preventDefault())):t==S.deleteKey||t==S.backspace?a?(w.verbose("Removing active labels"),c&&u&&!d&&w.focusSearch(),r.last().next(L.siblingLabel).addClass(T.active),w.remove.activeLabels(r),e.preventDefault()):p&&!a&&t==S.backspace&&(w.verbose("Removing last label on input backspace"),r=n.last().addClass(T.active),w.remove.activeLabels(r)):r.removeClass(T.active)}}},keydown:function(e){var t=e.which;if(w.is.inObject(t,S)){var n,r=$.not(L.unselectable).filter("."+T.selected).eq(0),i=U.children("."+T.active).eq(0),o=r.length>0?r:i,a=o.length>0?o.siblings(":not(."+T.filtered+")").addBack():U.children(":not(."+T.filtered+")"),s=o.children(L.menu),l=o.closest(L.menu),c=l.hasClass(T.visible)||l.hasClass(T.animating)||l.parent(L.menu).length>0,u=s.length>0,d=o.length>0,f=o.not(L.unselectable).length>0,p=t==S.delimiter&&k.allowAdditions&&w.is.multiple();if(k.allowAdditions&&k.hideAdditions&&(t==S.enter||p)&&f&&(w.verbose("Selecting item from keyboard shortcut",o),w.event.item.click.call(o,e),w.is.searchSelection()&&w.remove.searchTerm()),w.is.visible()){if((t==S.enter||p)&&(t==S.enter&&d&&u&&!k.allowCategorySelection?(w.verbose("Pressed enter on unselectable category, opening sub menu"),t=S.rightArrow):f&&(w.verbose("Selecting item from keyboard shortcut",o),w.event.item.click.call(o,e),w.is.searchSelection()&&w.remove.searchTerm()),e.preventDefault()),d&&(t==S.leftArrow&&l[0]!==U[0]&&(w.verbose("Left key pressed, closing sub-menu"),w.animate.hide(!1,l),o.removeClass(T.selected),l.closest(L.item).addClass(T.selected),e.preventDefault()),t==S.rightArrow&&u&&(w.verbose("Right key pressed, opening sub-menu"),w.animate.show(!1,s),o.removeClass(T.selected),s.find(L.item).eq(0).addClass(T.selected),e.preventDefault())),t==S.upArrow){if(n=d&&c?o.prevAll(L.item+":not("+L.unselectable+")").eq(0):$.eq(0),a.index(n)<0)return w.verbose("Up key pressed but reached top of current menu"),void e.preventDefault();w.verbose("Up key pressed, changing active item"),o.removeClass(T.selected),n.addClass(T.selected),w.set.scrollPosition(n),k.selectOnKeydown&&w.is.single()&&w.set.selectedItem(n),e.preventDefault()}if(t==S.downArrow){if(0===(n=d&&c?n=o.nextAll(L.item+":not("+L.unselectable+")").eq(0):$.eq(0)).length)return w.verbose("Down key pressed but reached bottom of current menu"),void e.preventDefault();w.verbose("Down key pressed, changing active item"),$.removeClass(T.selected),n.addClass(T.selected),w.set.scrollPosition(n),k.selectOnKeydown&&w.is.single()&&w.set.selectedItem(n),e.preventDefault()}t==S.pageUp&&(w.scrollPage("up"),e.preventDefault()),t==S.pageDown&&(w.scrollPage("down"),e.preventDefault()),t==S.escape&&(w.verbose("Escape key pressed, closing dropdown"),w.hide())}else p&&e.preventDefault(),t!=S.downArrow||w.is.visible()||(w.verbose("Down key pressed, showing dropdown"),w.show(),e.preventDefault())}else w.has.search()||w.set.selectedLetter(String.fromCharCode(t))}},trigger:{change:function(){var e=n.createEvent("HTMLEvents"),t=H[0];t&&(w.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},determine:{selectAction:function(t,n){w.verbose("Determining action",k.action),e.isFunction(w.action[k.action])?(w.verbose("Triggering preset action",k.action,t,n),w.action[k.action].call(Y,t,n,this)):e.isFunction(k.action)?(w.verbose("Triggering user action",k.action,t,n),k.action.call(Y,t,n,this)):w.error(P.action,k.action)},eventInModule:function(t,r){var i=e(t.target),o=i.closest(n.documentElement).length>0,a=i.closest(j).length>0;return r=e.isFunction(r)?r:function(){},o&&!a?(w.verbose("Triggering event",r),r(),!0):(w.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(t,r){var i=e(t.target),o=i.closest(L.siblingLabel),a=n.body.contains(t.target),s=0===j.find(o).length,l=0===i.closest(U).length;return r=e.isFunction(r)?r:function(){},a&&s&&l?(w.verbose("Triggering event",r),r(),!0):(w.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(t,n,r){if(n=void 0!==n?n:t,w.can.activate(e(r))){if(w.set.selected(n,e(r)),w.is.multiple()&&!w.is.allFiltered())return;w.hideAndClear()}},select:function(t,n,r){if(n=void 0!==n?n:t,w.can.activate(e(r))){if(w.set.value(n,e(r)),w.is.multiple()&&!w.is.allFiltered())return;w.hideAndClear()}},combo:function(t,n,r){n=void 0!==n?n:t,w.set.selected(n,e(r)),w.hideAndClear()},hide:function(e,t,n){w.set.value(t,e),w.hideAndClear()}},get:{id:function(){return y},defaultText:function(){return j.data(M.defaultText)},defaultValue:function(){return j.data(M.defaultValue)},placeholderText:function(){return"auto"!=k.placeholder&&"string"==typeof k.placeholder?k.placeholder:j.data(M.placeholderText)||""},text:function(){return N.text()},query:function(){return e.trim(z.val())},searchWidth:function(e){return e=void 0!==e?e:z.val(),q.text(e),Math.ceil(q.width()+1)},selectionCount:function(){var t=w.get.values();return w.is.multiple()?e.isArray(t)?t.length:0:""!==w.get.value()?1:0},transition:function(e){return"auto"==k.transition?w.is.upward(e)?"slide up":"slide down":k.transition},userValues:function(){var t=w.get.values();return!!t&&(t=e.isArray(t)?t:[t],e.grep(t,function(e){return!1===w.get.item(e)}))},uniqueArray:function(t){return e.grep(t,function(n,r){return e.inArray(n,t)===r})},caretPosition:function(){var e,t,r=z.get(0);return"selectionStart"in r?r.selectionStart:n.selection?(r.focus(),t=(e=n.selection.createRange()).text.length,e.moveStart("character",-r.value.length),e.text.length-t):void 0},value:function(){var t=H.length>0?H.val():j.data(M.value),n=e.isArray(t)&&1===t.length&&""===t[0];return void 0===t||n?"":t},values:function(){var e=w.get.value();return""===e?"":!w.has.selectInput()&&w.is.multiple()?"string"==typeof e?e.split(k.delimiter):"":e},remoteValues:function(){var t=w.get.values(),n=!1;return t&&("string"==typeof t&&(t=[t]),e.each(t,function(e,t){var r=w.read.remoteData(t);w.verbose("Restoring value from session data",r,t),r&&(n||(n={}),n[t]=r)})),n},choiceText:function(t,n){if(n=void 0!==n?n:k.preserveHTML,t)return t.find(L.menu).length>0&&(w.verbose("Retrieving text of element with sub-menu"),(t=t.clone()).find(L.menu).remove(),t.find(L.menuIcon).remove()),void 0!==t.data(M.text)?t.data(M.text):n?e.trim(t.html()):e.trim(t.text())},choiceValue:function(t,n){return n=n||w.get.choiceText(t),!!t&&(void 0!==t.data(M.value)?String(t.data(M.value)):"string"==typeof n?e.trim(n.toLowerCase()):String(n))},inputEvent:function(){var e=z[0];return!!e&&(void 0!==e.oninput?"input":void 0!==e.onpropertychange?"propertychange":"keyup")},selectValues:function(){var t={values:[]};return j.find("option").each(function(){var n=e(this),r=n.html(),i=n.attr("disabled"),o=void 0!==n.attr("value")?n.attr("value"):r;"auto"===k.placeholder&&""===o?t.placeholder=r:t.values.push({name:r,value:o,disabled:i})}),k.placeholder&&"auto"!==k.placeholder&&(w.debug("Setting placeholder value to",k.placeholder),t.placeholder=k.placeholder),k.sortSelect?(t.values.sort(function(e,t){return e.name>t.name?1:-1}),w.debug("Retrieved and sorted values from select",t)):w.debug("Retrieved values from select",t),t},activeItem:function(){return $.filter("."+T.active)},selectedItem:function(){var e=$.not(L.unselectable).filter("."+T.selected);return e.length>0?e:$.eq(0)},itemWithAdditions:function(e){var t=w.get.item(e),n=w.create.userChoice(e);return n&&n.length>0&&(t=t.length>0?t.add(n):n),t},item:function(t,n){var r,i,o=!1;return t=void 0!==t?t:void 0!==w.get.values()?w.get.values():w.get.text(),r=i?t.length>0:void 0!==t&&null!==t,i=w.is.multiple()&&e.isArray(t),n=""===t||0===t||(n||!1),r&&$.each(function(){var r=e(this),a=w.get.choiceText(r),s=w.get.choiceValue(r,a);if(null!==s&&void 0!==s)if(i)-1===e.inArray(String(s),t)&&-1===e.inArray(a,t)||(o=o?o.add(r):r);else if(n){if(w.verbose("Ambiguous dropdown value using strict type check",r,t),s===t||a===t)return o=r,!0}else if(String(s)==String(t)||a==t)return w.verbose("Found select item by value",s,t),o=r,!0}),o}},check:{maxSelections:function(e){return!k.maxSelections||((e=void 0!==e?e:w.get.selectionCount())>=k.maxSelections?(w.debug("Maximum selection count reached"),k.useLabels&&($.addClass(T.filtered),w.add.message(A.maxSelections)),!0):(w.verbose("No longer at maximum selection count"),w.remove.message(),w.remove.filteredItem(),w.is.searchSelection()&&w.filterItems(),!1))}},restore:{defaults:function(){w.clear(),w.restore.defaultText(),w.restore.defaultValue()},defaultText:function(){var e=w.get.defaultText();e===w.get.placeholderText?(w.debug("Restoring default placeholder text",e),w.set.placeholderText(e)):(w.debug("Restoring default text",e),w.set.text(e))},placeholderText:function(){w.set.placeholderText()},defaultValue:function(){var e=w.get.defaultValue();void 0!==e&&(w.debug("Restoring default value",e),""!==e?(w.set.value(e),w.set.selected()):(w.remove.activeItem(),w.remove.selectedItem()))},labels:function(){k.allowAdditions&&(k.useLabels||(w.error(P.labels),k.useLabels=!0),w.debug("Restoring selected values"),w.create.userLabels()),w.check.maxSelections()},selected:function(){w.restore.values(),w.is.multiple()?(w.debug("Restoring previously selected values and labels"),w.restore.labels()):w.debug("Restoring previously selected values")},values:function(){w.set.initialLoad(),k.apiSettings&&k.saveRemoteData&&w.get.remoteValues()?w.restore.remoteValues():w.set.selected(),w.remove.initialLoad()},remoteValues:function(){var t=w.get.remoteValues();w.debug("Recreating selected from session data",t),t&&(w.is.single()?e.each(t,function(e,t){w.set.text(t)}):e.each(t,function(e,t){w.add.label(e,t)}))}},read:{remoteData:function(e){var n;if(void 0!==t.Storage)return void 0!==(n=sessionStorage.getItem(e))&&n;w.error(P.noStorage)}},save:{defaults:function(){w.save.defaultText(),w.save.placeholderText(),w.save.defaultValue()},defaultValue:function(){var e=w.get.value();w.verbose("Saving default value as",e),j.data(M.defaultValue,e)},defaultText:function(){var e=w.get.text();w.verbose("Saving default text as",e),j.data(M.defaultText,e)},placeholderText:function(){var e;!1!==k.placeholder&&N.hasClass(T.placeholder)&&(e=w.get.text(),w.verbose("Saving placeholder text as",e),j.data(M.placeholderText,e))},remoteData:function(e,n){void 0!==t.Storage?(w.verbose("Saving remote data to session storage",n,e),sessionStorage.setItem(n,e)):w.error(P.noStorage)}},clear:function(){w.is.multiple()&&k.useLabels?w.remove.labels():(w.remove.activeItem(),w.remove.selectedItem()),w.set.placeholderText(),w.clearValue()},clearValue:function(){w.set.value("")},scrollPage:function(e,t){var n,r,i=t||w.get.selectedItem(),o=i.closest(L.menu),a=o.outerHeight(),s=o.scrollTop(),l=$.eq(0).outerHeight(),c=Math.floor(a/l),u=(o.prop("scrollHeight"),"up"==e?s-l*c:s+l*c),d=$.not(L.unselectable);r="up"==e?d.index(i)-c:d.index(i)+c,(n=("up"==e?r>=0:r<d.length)?d.eq(r):"up"==e?d.first():d.last()).length>0&&(w.debug("Scrolling page",e,n),i.removeClass(T.selected),n.addClass(T.selected),k.selectOnKeydown&&w.is.single()&&w.set.selectedItem(n),o.scrollTop(u))},set:{filtered:function(){var e=w.is.multiple(),t=w.is.searchSelection(),n=e&&t,r=t?w.get.query():"",i="string"==typeof r&&r.length>0,o=w.get.searchWidth(),a=""!==r;e&&i&&(w.verbose("Adjusting input width",o,k.glyphWidth),z.css("width",o)),i||n&&a?(w.verbose("Hiding placeholder text"),N.addClass(T.filtered)):(!e||n&&!a)&&(w.verbose("Showing placeholder text"),N.removeClass(T.filtered))},empty:function(){j.addClass(T.empty)},loading:function(){j.addClass(T.loading)},placeholderText:function(e){e=e||w.get.placeholderText(),w.debug("Setting placeholder text",e),w.set.text(e),N.addClass(T.placeholder)},tabbable:function(){w.is.searchSelection()?(w.debug("Added tabindex to searchable dropdown"),z.val("").attr("tabindex",0),U.attr("tabindex",-1)):(w.debug("Added tabindex to dropdown"),void 0===j.attr("tabindex")&&(j.attr("tabindex",0),U.attr("tabindex",-1)))},initialLoad:function(){w.verbose("Setting initial load"),g=!0},activeItem:function(e){k.allowAdditions&&e.filter(L.addition).length>0?e.addClass(T.filtered):e.addClass(T.active)},partialSearch:function(e){var t=w.get.query().length;z.val(e.substr(0,t))},scrollPosition:function(e,t){var n,r,i,o,a,s;n=(e=e||w.get.selectedItem()).closest(L.menu),r=e&&e.length>0,t=void 0!==t&&t,e&&n.length>0&&r&&(e.position().top,n.addClass(T.loading),i=(o=n.scrollTop())-n.offset().top+e.offset().top,t||(s=o+n.height()<i+5,a=i-5<o),w.debug("Scrolling to active item",i),(t||a||s)&&n.scrollTop(i),n.removeClass(T.loading))},text:function(e){"select"!==k.action&&("combo"==k.action?(w.debug("Changing combo button text",e,V),k.preserveHTML?V.html(e):V.text(e)):(e!==w.get.placeholderText()&&N.removeClass(T.placeholder),w.debug("Changing text",e,N),N.removeClass(T.filtered),k.preserveHTML?N.html(e):N.text(e)))},selectedItem:function(e){var t=w.get.choiceValue(e),n=w.get.choiceText(e,!1),r=w.get.choiceText(e,!0);w.debug("Setting user selection to item",e),w.remove.activeItem(),w.set.partialSearch(n),w.set.activeItem(e),w.set.selected(t,e),w.set.text(r)},selectedLetter:function(t){var n,r=$.filter("."+T.selected),i=!1;r.length>0&&w.has.firstLetter(r,t)&&(n=r.nextAll($).eq(0),w.has.firstLetter(n,t)&&(i=n)),i||$.each(function(){if(w.has.firstLetter(e(this),t))return i=e(this),!1}),i&&(w.verbose("Scrolling to next value with letter",t),w.set.scrollPosition(i),r.removeClass(T.selected),i.addClass(T.selected),k.selectOnKeydown&&w.is.single()&&w.set.selectedItem(i))},direction:function(e){"auto"==k.direction?(w.remove.upward(),w.can.openDownward(e)?w.remove.upward(e):w.set.upward(e),w.is.leftward(e)||w.can.openRightward(e)||w.set.leftward(e)):"upward"==k.direction&&w.set.upward(e)},upward:function(e){(e||j).addClass(T.upward)},leftward:function(e){(e||U).addClass(T.leftward)},value:function(e,t,n){var r=w.escape.value(e),i=H.length>0,o=(w.has.value(e),w.get.values()),a=void 0!==e?String(e):e;if(i){if(!k.allowReselection&&a==o&&(w.verbose("Skipping value update already same value",e,o),!w.is.initialLoad()))return;w.is.single()&&w.has.selectInput()&&w.can.extendSelect()&&(w.debug("Adding user option",e),w.add.optionValue(e)),w.debug("Updating input value",r,o),G=!0,H.val(r),!1===k.fireOnInit&&w.is.initialLoad()?w.debug("Input native change event ignored on initial load"):w.trigger.change(),G=!1}else w.verbose("Storing value in metadata",r,H),r!==o&&j.data(M.value,a);!1===k.fireOnInit&&w.is.initialLoad()?w.verbose("No callback on initial load",k.onChange):k.onChange.call(Y,e,t,n)},active:function(){j.addClass(T.active)},multiple:function(){j.addClass(T.multiple)},visible:function(){j.addClass(T.visible)},exactly:function(e,t){w.debug("Setting selected to exact values"),w.clear(),w.set.selected(e,t)},selected:function(t,n){var r=w.is.multiple();(n=k.allowAdditions?n||w.get.itemWithAdditions(t):n||w.get.item(t))&&(w.debug("Setting selected menu item to",n),w.is.multiple()&&w.remove.searchWidth(),w.is.single()?(w.remove.activeItem(),w.remove.selectedItem()):k.useLabels&&w.remove.selectedItem(),n.each(function(){var t=e(this),i=w.get.choiceText(t),o=w.get.choiceValue(t,i),a=t.hasClass(T.filtered),s=t.hasClass(T.active),l=t.hasClass(T.addition),c=r&&1==n.length;r?!s||l?(k.apiSettings&&k.saveRemoteData&&w.save.remoteData(i,o),k.useLabels?(w.add.value(o,i,t),w.add.label(o,i,c),w.set.activeItem(t),w.filterActive(),w.select.nextAvailable(n)):(w.add.value(o,i,t),w.set.text(w.add.variables(A.count)),w.set.activeItem(t))):a||(w.debug("Selected active value, removing label"),w.remove.selected(o)):(k.apiSettings&&k.saveRemoteData&&w.save.remoteData(i,o),w.set.text(i),w.set.value(o,i,t),t.addClass(T.active).addClass(T.selected))}))}},add:{label:function(t,n,r){var i,o=w.is.searchSelection()?z:N,a=w.escape.value(t);i=e("<a />").addClass(T.label).attr("data-"+M.value,a).html(D.label(a,n)),i=k.onLabelCreate.call(i,a,n),w.has.label(t)?w.debug("Label already exists, skipping",a):(k.label.variation&&i.addClass(k.label.variation),!0===r?(w.debug("Animating in label",i),i.addClass(T.hidden).insertBefore(o).transition(k.label.transition,k.label.duration)):(w.debug("Adding selection label",i),i.insertBefore(o)))},message:function(t){var n=U.children(L.message),r=k.templates.message(w.add.variables(t));n.length>0?n.html(r):n=e("<div/>").html(r).addClass(T.message).appendTo(U)},optionValue:function(t){var n=w.escape.value(t);H.find('option[value="'+w.escape.string(n)+'"]').length>0||(w.disconnect.selectObserver(),w.is.single()&&(w.verbose("Removing previous user addition"),H.find("option."+T.addition).remove()),e("<option/>").prop("value",n).addClass(T.addition).html(t).appendTo(H),w.verbose("Adding user addition as an <option>",t),w.observe.select())},userSuggestion:function(e){var t,n=U.children(L.addition),r=w.get.item(e),i=r&&r.not(L.addition).length,o=n.length>0;k.useLabels&&w.has.maxSelections()||(""===e||i?n.remove():(o?(n.data(M.value,e).data(M.text,e).attr("data-"+M.value,e).attr("data-"+M.text,e).removeClass(T.filtered),k.hideAdditions||(t=k.templates.addition(w.add.variables(A.addResult,e)),n.html(t)),w.verbose("Replacing user suggestion with new value",n)):((n=w.create.userChoice(e)).prependTo(U),w.verbose("Adding item choice to menu corresponding with user choice addition",n)),k.hideAdditions&&!w.is.allFiltered()||n.addClass(T.selected).siblings().removeClass(T.selected),w.refreshItems()))},variables:function(e,t){var n,r,i=-1!==e.search("{count}"),o=-1!==e.search("{maxCount}"),a=-1!==e.search("{term}");return w.verbose("Adding templated variables to message",e),i&&(n=w.get.selectionCount(),e=e.replace("{count}",n)),o&&(n=w.get.selectionCount(),e=e.replace("{maxCount}",k.maxSelections)),a&&(r=t||w.get.query(),e=e.replace("{term}",r)),e},value:function(t,n,r){var i,o=w.get.values();""!==t?(e.isArray(o)?(i=o.concat([t]),i=w.get.uniqueArray(i)):i=[t],w.has.selectInput()?w.can.extendSelect()&&(w.debug("Adding value to select",t,i,H),w.add.optionValue(t)):(i=i.join(k.delimiter),w.debug("Setting hidden input to delimited value",i,H)),!1===k.fireOnInit&&w.is.initialLoad()?w.verbose("Skipping onadd callback on initial load",k.onAdd):k.onAdd.call(Y,t,n,r),w.set.value(i,t,n,r),w.check.maxSelections()):w.debug("Cannot select blank values from multiselect")}},remove:{active:function(){j.removeClass(T.active)},activeLabel:function(){j.find(L.label).removeClass(T.active)},empty:function(){j.removeClass(T.empty)},loading:function(){j.removeClass(T.loading)},initialLoad:function(){g=!1},upward:function(e){(e||j).removeClass(T.upward)},leftward:function(e){(e||U).removeClass(T.leftward)},visible:function(){j.removeClass(T.visible)},activeItem:function(){$.removeClass(T.active)},filteredItem:function(){k.useLabels&&w.has.maxSelections()||(k.useLabels&&w.is.multiple()?$.not("."+T.active).removeClass(T.filtered):$.removeClass(T.filtered),w.remove.empty())},optionValue:function(e){var t=w.escape.value(e),n=H.find('option[value="'+w.escape.string(t)+'"]');n.length>0&&n.hasClass(T.addition)&&(x&&(x.disconnect(),w.verbose("Temporarily disconnecting mutation observer")),n.remove(),w.verbose("Removing user addition as an <option>",t),x&&x.observe(H[0],{childList:!0,subtree:!0}))},message:function(){U.children(L.message).remove()},searchWidth:function(){z.css("width","")},searchTerm:function(){w.verbose("Cleared search term"),z.val(""),w.set.filtered()},userAddition:function(){$.filter(L.addition).remove()},selected:function(t,n){if(!(n=k.allowAdditions?n||w.get.itemWithAdditions(t):n||w.get.item(t)))return!1;n.each(function(){var t=e(this),n=w.get.choiceText(t),r=w.get.choiceValue(t,n);w.is.multiple()?k.useLabels?(w.remove.value(r,n,t),w.remove.label(r)):(w.remove.value(r,n,t),0===w.get.selectionCount()?w.set.placeholderText():w.set.text(w.add.variables(A.count))):w.remove.value(r,n,t),t.removeClass(T.filtered).removeClass(T.active),k.useLabels&&t.removeClass(T.selected)})},selectedItem:function(){$.removeClass(T.selected)},value:function(e,t,n){var r,i=w.get.values();w.has.selectInput()?(w.verbose("Input is <select> removing selected option",e),r=w.remove.arrayValue(e,i),w.remove.optionValue(e)):(w.verbose("Removing from delimited values",e),r=(r=w.remove.arrayValue(e,i)).join(k.delimiter)),!1===k.fireOnInit&&w.is.initialLoad()?w.verbose("No callback on initial load",k.onRemove):k.onRemove.call(Y,e,t,n),w.set.value(r,t,n),w.check.maxSelections()},arrayValue:function(t,n){return e.isArray(n)||(n=[n]),n=e.grep(n,function(e){return t!=e}),w.verbose("Removed value from delimited string",t,n),n},label:function(e,t){var n=j.find(L.label).filter("[data-"+M.value+'="'+w.escape.string(e)+'"]');w.verbose("Removing label",n),n.remove()},activeLabels:function(e){e=e||j.find(L.label).filter("."+T.active),w.verbose("Removing active label selections",e),w.remove.labels(e)},labels:function(t){t=t||j.find(L.label),w.verbose("Removing labels",t),t.each(function(){var t=e(this),n=t.data(M.value),r=void 0!==n?String(n):n,i=w.is.userValue(r);!1!==k.onLabelRemove.call(t,n)?(w.remove.message(),i?(w.remove.value(r),w.remove.label(r)):w.remove.selected(r)):w.debug("Label remove callback cancelled removal")})},tabbable:function(){w.is.searchSelection()?(w.debug("Searchable dropdown initialized"),z.removeAttr("tabindex"),U.removeAttr("tabindex")):(w.debug("Simple selection dropdown initialized"),j.removeAttr("tabindex"),U.removeAttr("tabindex"))}},has:{menuSearch:function(){return w.has.search()&&z.closest(U).length>0},search:function(){return z.length>0},sizer:function(){return q.length>0},selectInput:function(){return H.is("select")},minCharacters:function(e){return!k.minCharacters||(e=void 0!==e?String(e):String(w.get.query())).length>=k.minCharacters},firstLetter:function(e,t){var n;return!(!e||0===e.length||"string"!=typeof t)&&(n=w.get.choiceText(e,!1),(t=t.toLowerCase())==String(n).charAt(0).toLowerCase())},input:function(){return H.length>0},items:function(){return $.length>0},menu:function(){return U.length>0},message:function(){return 0!==U.children(L.message).length},label:function(e){var t=w.escape.value(e);return j.find(L.label).filter("[data-"+M.value+'="'+w.escape.string(t)+'"]').length>0},maxSelections:function(){return k.maxSelections&&w.get.selectionCount()>=k.maxSelections},allResultsFiltered:function(){var e=$.not(L.addition);return e.filter(L.unselectable).length===e.length},userSuggestion:function(){return U.children(L.addition).length>0},query:function(){return""!==w.get.query()},value:function(t){var n=w.get.values();return!!(e.isArray(n)?n&&-1!==e.inArray(t,n):n==t)}},is:{active:function(){return j.hasClass(T.active)},bubbledLabelClick:function(t){return e(t.target).is("select, input")&&j.closest("label").length>0},bubbledIconClick:function(t){return e(t.target).closest(B).length>0},alreadySetup:function(){return j.is("select")&&void 0!==j.parent(L.dropdown).data(F)&&0===j.prev().length},animating:function(e){return e?e.transition&&e.transition("is animating"):U.transition&&U.transition("is animating")},leftward:function(e){return(e||U).hasClass(T.leftward)},disabled:function(){return j.hasClass(T.disabled)},focused:function(){return n.activeElement===j[0]},focusedOnSearch:function(){return n.activeElement===z[0]},allFiltered:function(){return(w.is.multiple()||w.has.search())&&!(0==k.hideAdditions&&w.has.userSuggestion())&&!w.has.message()&&w.has.allResultsFiltered()},hidden:function(e){return!w.is.visible(e)},initialLoad:function(){return g},inObject:function(t,n){var r=!1;return e.each(n,function(e,n){if(n==t)return r=!0,!0}),r},multiple:function(){return j.hasClass(T.multiple)},remote:function(){return k.apiSettings&&w.can.useAPI()},single:function(){return!w.is.multiple()},selectMutation:function(t){var n=!1;return e.each(t,function(t,r){if(r.target&&e(r.target).is("select"))return n=!0,!0}),n},search:function(){return j.hasClass(T.search)},searchSelection:function(){return w.has.search()&&1===z.parent(L.dropdown).length},selection:function(){return j.hasClass(T.selection)},userValue:function(t){return-1!==e.inArray(t,w.get.userValues())},upward:function(e){return(e||j).hasClass(T.upward)},visible:function(e){return e?e.hasClass(T.visible):U.hasClass(T.visible)},verticallyScrollableContext:function(){var e=I.get(0)!==t&&I.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=I.get(0)!==t&&I.css("overflow-X");return"auto"==e||"scroll"==e}},can:{activate:function(e){return!!k.useLabels||(!w.has.maxSelections()||!(!w.has.maxSelections()||!e.hasClass(T.active)))},openDownward:function(e){var t,n,r=e||U,i=!0;return r.addClass(T.loading),n={context:{scrollTop:I.scrollTop(),height:I.outerHeight()},menu:{offset:r.offset(),height:r.outerHeight()}},w.is.verticallyScrollableContext()&&(n.menu.offset.top+=n.context.scrollTop),(t={above:n.context.scrollTop<=n.menu.offset.top-n.menu.height,below:n.context.scrollTop+n.context.height>=n.menu.offset.top+n.menu.height}).below?(w.verbose("Dropdown can fit in context downward",t),i=!0):t.below||t.above?(w.verbose("Dropdown cannot fit below, opening upward",t),i=!1):(w.verbose("Dropdown cannot fit in either direction, favoring downward",t),i=!0),r.removeClass(T.loading),i},openRightward:function(e){var t,n,r=e||U,i=!0;return r.addClass(T.loading),n={context:{scrollLeft:I.scrollLeft(),width:I.outerWidth()},menu:{offset:r.offset(),width:r.outerWidth()}},w.is.horizontallyScrollableContext()&&(n.menu.offset.left+=n.context.scrollLeft),(t=n.menu.offset.left+n.menu.width>=n.context.scrollLeft+n.context.width)&&(w.verbose("Dropdown cannot fit in context rightward",t),i=!1),r.removeClass(T.loading),i},click:function(){return l||"click"==k.on},extendSelect:function(){return k.allowAdditions||k.apiSettings},show:function(){return!w.is.disabled()&&(w.has.items()||w.has.message())},useAPI:function(){return void 0!==e.fn.api}},animate:{show:function(t,n){var r,i=n||U,o=n?function(){}:function(){w.hideSubMenus(),w.hideOthers(),w.set.active()};t=e.isFunction(t)?t:function(){},w.verbose("Doing menu show animation",i),w.set.direction(n),r=w.get.transition(n),w.is.selection()&&w.set.scrollPosition(w.get.selectedItem(),!0),(w.is.hidden(i)||w.is.animating(i))&&("none"==r?(o(),i.transition("show"),t.call(Y)):void 0!==e.fn.transition&&j.transition("is supported")?i.transition({animation:r+" in",debug:k.debug,verbose:k.verbose,duration:k.duration,queue:!0,onStart:o,onComplete:function(){t.call(Y)}}):w.error(P.noTransition,r))},hide:function(t,n){var r=n||U,i=(n?k.duration:k.duration,n?function(){}:function(){w.can.click()&&w.unbind.intent(),w.remove.active()}),o=w.get.transition(n);t=e.isFunction(t)?t:function(){},(w.is.visible(r)||w.is.animating(r))&&(w.verbose("Doing menu hide animation",r),"none"==o?(i(),r.transition("hide"),t.call(Y)):void 0!==e.fn.transition&&j.transition("is supported")?r.transition({animation:o+" out",duration:k.duration,debug:k.debug,verbose:k.verbose,queue:!0,onStart:i,onComplete:function(){t.call(Y)}}):w.error(P.transition))}},hideAndClear:function(){w.remove.searchTerm(),w.has.maxSelections()||(w.has.search()?w.hide(function(){w.remove.filteredItem()}):w.hide())},delay:{show:function(){w.verbose("Delaying show event to ensure user intent"),clearTimeout(w.timer),w.timer=setTimeout(w.show,k.delay.show)},hide:function(){w.verbose("Delaying hide event to ensure user intent"),clearTimeout(w.timer),w.timer=setTimeout(w.hide,k.delay.hide)}},escape:{value:function(t){var n=e.isArray(t),r="string"==typeof t,i=!r&&!n,o=r&&-1!==t.search(O.quote),a=[];return i||!o?t:(w.debug("Encoding quote values for use in select",t),n?(e.each(t,function(e,t){a.push(t.replace(O.quote,"&quot;"))}),a):t.replace(O.quote,"&quot;"))},string:function(e){return(e=String(e)).replace(O.escape,"\\$&")}},setting:function(t,n){if(w.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,k,t);else{if(void 0===n)return k[t];e.isPlainObject(k[t])?e.extend(!0,k[t],n):k[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,w,t);else{if(void 0===n)return w[t];w[t]=n}},debug:function(){!k.silent&&k.debug&&(k.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,k.name+":"),w.debug.apply(console,arguments)))},verbose:function(){!k.silent&&k.verbose&&k.debug&&(k.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,k.name+":"),w.verbose.apply(console,arguments)))},error:function(){k.silent||(w.error=Function.prototype.bind.call(console.error,console,k.name+":"),w.error.apply(console,arguments))},performance:{log:function(e){var t,n;k.performance&&(n=(t=(new Date).getTime())-(c||t),c=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:Y,"Execution Time":n})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(w.performance.display,500)},display:function(){var t=k.name+":",n=0;c=!1,clearTimeout(w.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(void 0!==console.group||void 0!==console.table)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,r){var o,a,s,l=Z;return n=n||p,r=Y||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(w.error(P.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},f?(void 0===Z&&w.initialize(),w.invoke(d)):(void 0!==Z&&Z.invoke("destroy"),w.initialize())}),void 0!==i?i:o},e.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",values:!1,apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:t,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(e,t,n){},onAdd:function(e,t,n){},onRemove:function(e,t,n){},onLabelSelect:function(e){},onLabelCreate:function(t,n){return e(this)},onLabelRemove:function(e){return!0},onNoResults:function(e){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}},e.fn.dropdown.settings.templates={dropdown:function(t){var n=t.placeholder||!1,r=(t.values,"");return r+='<i class="dropdown icon"></i>',t.placeholder?r+='<div class="default text">'+n+"</div>":r+='<div class="text"></div>',r+='<div class="menu">',e.each(t.values,function(e,t){r+=t.disabled?'<div class="disabled item" data-value="'+t.value+'">'+t.name+"</div>":'<div class="item" data-value="'+t.value+'">'+t.name+"</div>"}),r+="</div>"},menu:function(t,n){var r=t[n.values]||{},i="";return e.each(r,function(e,t){var r=t[n.text]?'data-text="'+t[n.text]+'"':"",o=t[n.disabled]?"disabled ":"";i+='<div class="'+o+'item" data-value="'+t[n.value]+'"'+r+">",i+=t[n.name],i+="</div>"}),i},label:function(e,t){return t+'<i class="delete icon"></i>'},message:function(e){return e},addition:function(e){return e}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.embed=function(n){var r,i=e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var d,f=e.isPlainObject(n)?e.extend(!0,{},e.fn.embed.settings,n):e.extend({},e.fn.embed.settings),p=f.selector,h=f.className,g=f.sources,v=f.error,m=f.metadata,b=f.namespace,y=f.templates,x="."+b,_="module-"+b,w=(e(t),e(this)),k=(w.find(p.placeholder),w.find(p.icon),w.find(p.embed)),T=this,A=w.data(_);d={initialize:function(){d.debug("Initializing embed"),d.determine.autoplay(),d.create(),d.bind.events(),d.instantiate()},instantiate:function(){d.verbose("Storing instance of module",d),A=d,w.data(_,d)},destroy:function(){d.verbose("Destroying previous instance of embed"),d.reset(),w.removeData(_).off(x)},refresh:function(){d.verbose("Refreshing selector cache"),w.find(p.placeholder),w.find(p.icon),k=w.find(p.embed)},bind:{events:function(){d.has.placeholder()&&(d.debug("Adding placeholder events"),w.on("click"+x,p.placeholder,d.createAndShow).on("click"+x,p.icon,d.createAndShow))}},create:function(){d.get.placeholder()?d.createPlaceholder():d.createAndShow()},createPlaceholder:function(e){var t=d.get.icon(),n=d.get.url();d.generate.embed(n);e=e||d.get.placeholder(),w.html(y.placeholder(e,t)),d.debug("Creating placeholder for embed",e,t)},createEmbed:function(t){d.refresh(),t=t||d.get.url(),k=e("<div/>").addClass(h.embed).html(d.generate.embed(t)).appendTo(w),f.onCreate.call(T,t),d.debug("Creating embed object",k)},changeEmbed:function(e){k.html(d.generate.embed(e))},createAndShow:function(){d.createEmbed(),d.show()},change:function(e,t,n){d.debug("Changing video to ",e,t,n),w.data(m.source,e).data(m.id,t),n?w.data(m.url,n):w.removeData(m.url),d.has.embed()?d.changeEmbed():d.create()},reset:function(){d.debug("Clearing embed and showing placeholder"),d.remove.active(),d.remove.embed(),d.showPlaceholder(),f.onReset.call(T)},show:function(){d.debug("Showing embed"),d.set.active(),f.onDisplay.call(T)},hide:function(){d.debug("Hiding embed"),d.showPlaceholder()},showPlaceholder:function(){d.debug("Showing placeholder image"),d.remove.active(),f.onPlaceholderDisplay.call(T)},get:{id:function(){return f.id||w.data(m.id)},placeholder:function(){return f.placeholder||w.data(m.placeholder)},icon:function(){return f.icon?f.icon:void 0!==w.data(m.icon)?w.data(m.icon):d.determine.icon()},source:function(e){return f.source?f.source:void 0!==w.data(m.source)?w.data(m.source):d.determine.source()},type:function(){var e=d.get.source();return void 0!==g[e]&&g[e].type},url:function(){return f.url?f.url:void 0!==w.data(m.url)?w.data(m.url):d.determine.url()}},determine:{autoplay:function(){d.should.autoplay()&&(f.autoplay=!0)},source:function(t){var n=!1;return(t=t||d.get.url())&&e.each(g,function(e,r){if(-1!==t.search(r.domain))return n=e,!1}),n},icon:function(){var e=d.get.source();return void 0!==g[e]&&g[e].icon},url:function(){var e,t=f.id||w.data(m.id),n=f.source||w.data(m.source);return(e=void 0!==g[n]&&g[n].url.replace("{id}",t))&&w.data(m.url,e),e}},set:{active:function(){w.addClass(h.active)}},remove:{active:function(){w.removeClass(h.active)},embed:function(){k.empty()}},encode:{parameters:function(e){var t,n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&amp;")}},generate:{embed:function(e){d.debug("Generating embed html");var t,n,r=d.get.source();return(e=d.get.url(e))?(n=d.generate.parameters(r),t=y.iframe(e,n)):d.error(v.noURL,w),t},parameters:function(t,n){var r=g[t]&&void 0!==g[t].parameters?g[t].parameters(f):{};return(n=n||f.parameters)&&(r=e.extend({},r,n)),r=f.onEmbed(r),d.encode.parameters(r)}},has:{embed:function(){return k.length>0},placeholder:function(){return f.placeholder||w.data(m.placeholder)}},should:{autoplay:function(){return"auto"===f.autoplay?f.placeholder||void 0!==w.data(m.placeholder):f.autoplay}},is:{video:function(){return"video"==d.get.type()}},setting:function(t,n){if(d.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],n):f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];d[t]=n}},debug:function(){!f.silent&&f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){f.silent||(d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments))},performance:{log:function(e){var t,n;f.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,500)},display:function(){var t=f.name+":",n=0;a=!1,clearTimeout(d.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),i.length>1&&(t+=" ("+i.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,i){var o,a,s,l=A;return n=n||u,i=T||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(d.error(v.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},c?(void 0===A&&d.initialize(),d.invoke(l)):(void 0!==A&&A.invoke("destroy"),d.initialize())}),void 0!==r?r:this},e.fn.embed.settings={name:"Embed",namespace:"embed",silent:!1,debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.color||void 0,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.color||void 0,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{iframe:function(e,t){var n=e;return t&&(n+="?"+t),'<iframe src="'+n+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(e,t){var n="";return t&&(n+='<i class="'+t+' icon"></i>'),e&&(n+='<img class="placeholder" src="'+e+'">'),n}},api:!1,onPause:function(){},onPlay:function(){},onStop:function(){}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.modal=function(r){var i,o=e(this),a=e(t),s=e(n),l=e("body"),c=o.selector||"",u=(new Date).getTime(),d=[],f=arguments[0],p="string"==typeof f,h=[].slice.call(arguments,1),g=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var o,v,m,b,y,x,_,w,k,T=e.isPlainObject(r)?e.extend(!0,{},e.fn.modal.settings,r):e.extend({},e.fn.modal.settings),A=T.selector,C=T.className,S=T.namespace,M=T.error,E="."+S,O="module-"+S,L=e(this),P=e(T.context),D=L.find(A.close),R=this,F=L.data(O),j=!1;k={initialize:function(){k.verbose("Initializing dimmer",P),k.create.id(),k.create.dimmer(),k.refreshModals(),k.bind.events(),T.observeChanges&&k.observeChanges(),k.instantiate()},instantiate:function(){k.verbose("Storing instance of modal"),F=k,L.data(O,F)},create:{dimmer:function(){var t={debug:T.debug,dimmerName:"modals"},n=e.extend(!0,t,T.dimmerSettings);void 0!==e.fn.dimmer?(k.debug("Creating dimmer"),b=P.dimmer(n),T.detachable?(k.verbose("Modal is detachable, moving content into dimmer"),b.dimmer("add content",L)):k.set.undetached(),y=b.dimmer("get dimmer")):k.error(M.dimmer)},id:function(){_=(Math.random().toString(16)+"000000000").substr(2,8),x="."+_,k.verbose("Creating unique id for element",_)}},destroy:function(){k.verbose("Destroying previous modal"),L.removeData(O).off(E),a.off(x),y.off(x),D.off(E),P.dimmer("destroy")},observeChanges:function(){"MutationObserver"in t&&((w=new MutationObserver(function(e){k.debug("DOM tree modified, refreshing"),k.refresh()})).observe(R,{childList:!0,subtree:!0}),k.debug("Setting up mutation observer",w))},refresh:function(){k.remove.scrolling(),k.cacheSizes(),k.set.screenHeight(),k.set.type(),k.set.position()},refreshModals:function(){v=L.siblings(A.modal),o=v.add(L)},attachEvents:function(t,n){var r=e(t);n=e.isFunction(k[n])?k[n]:k.toggle,r.length>0?(k.debug("Attaching modal events to element",t,n),r.off(E).on("click"+E,n)):k.error(M.notFound,t)},bind:{events:function(){k.verbose("Attaching events"),L.on("click"+E,A.close,k.event.close).on("click"+E,A.approve,k.event.approve).on("click"+E,A.deny,k.event.deny),a.on("resize"+x,k.event.resize)}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){j||!1===T.onApprove.call(R,e(this))?k.verbose("Approve callback returned false cancelling hide"):(j=!0,k.hide(function(){j=!1}))},deny:function(){j||!1===T.onDeny.call(R,e(this))?k.verbose("Deny callback returned false cancelling hide"):(j=!0,k.hide(function(){j=!1}))},close:function(){k.hide()},click:function(t){var r=e(t.target).closest(A.modal).length>0,i=e.contains(n.documentElement,t.target);!r&&i&&(k.debug("Dimmer clicked, hiding all modals"),k.is.active()&&(k.remove.clickaway(),T.allowMultiple?k.hide():k.hideAll()))},debounce:function(e,t){clearTimeout(k.timer),k.timer=setTimeout(e,t)},keyboard:function(e){27==e.which&&(T.closable?(k.debug("Escape key pressed hiding modal"),k.hide()):k.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){b.dimmer("is active")&&(k.is.animating()||k.is.active())&&g(k.refresh)}},toggle:function(){k.is.active()||k.is.animating()?k.hide():k.show()},show:function(t){t=e.isFunction(t)?t:function(){},k.refreshModals(),k.set.dimmerSettings(),k.showModal(t)},hide:function(t){t=e.isFunction(t)?t:function(){},k.refreshModals(),k.hideModal(t)},showModal:function(t){t=e.isFunction(t)?t:function(){},k.is.animating()||!k.is.active()?(k.showDimmer(),k.cacheSizes(),k.set.position(),k.set.screenHeight(),k.set.type(),k.set.clickaway(),!T.allowMultiple&&k.others.active()?k.hideOthers(k.showModal):(T.allowMultiple&&T.detachable&&L.detach().appendTo(y),T.onShow.call(R),T.transition&&void 0!==e.fn.transition&&L.transition("is supported")?(k.debug("Showing modal with css animations"),L.transition({debug:T.debug,animation:T.transition+" in",queue:T.queue,duration:T.duration,useFailSafe:!0,onComplete:function(){T.onVisible.apply(R),T.keyboardShortcuts&&k.add.keyboardShortcuts(),k.save.focus(),k.set.active(),T.autofocus&&k.set.autofocus(),t()}})):k.error(M.noTransition))):k.debug("Modal is already visible")},hideModal:function(t,n){t=e.isFunction(t)?t:function(){},k.debug("Hiding modal"),!1!==T.onHide.call(R,e(this))?(k.is.animating()||k.is.active())&&(T.transition&&void 0!==e.fn.transition&&L.transition("is supported")?(k.remove.active(),L.transition({debug:T.debug,animation:T.transition+" out",queue:T.queue,duration:T.duration,useFailSafe:!0,onStart:function(){k.others.active()||n||k.hideDimmer(),T.keyboardShortcuts&&k.remove.keyboardShortcuts()},onComplete:function(){T.onHidden.call(R),k.restore.focus(),t()}})):k.error(M.noTransition)):k.verbose("Hide callback returned false cancelling hide")},showDimmer:function(){b.dimmer("is animating")||!b.dimmer("is active")?(k.debug("Showing dimmer"),b.dimmer("show")):k.debug("Dimmer already visible")},hideDimmer:function(){b.dimmer("is animating")||b.dimmer("is active")?b.dimmer("hide",function(){k.remove.clickaway(),k.remove.screenHeight()}):k.debug("Dimmer is not visible cannot hide")},hideAll:function(t){var n=o.filter("."+C.active+", ."+C.animating);t=e.isFunction(t)?t:function(){},n.length>0&&(k.debug("Hiding all visible modals"),k.hideDimmer(),n.modal("hide modal",t))},hideOthers:function(t){var n=v.filter("."+C.active+", ."+C.animating);t=e.isFunction(t)?t:function(){},n.length>0&&(k.debug("Hiding other modals",v),n.modal("hide modal",t,!0))},others:{active:function(){return v.filter("."+C.active).length>0},animating:function(){return v.filter("."+C.animating).length>0}},add:{keyboardShortcuts:function(){k.verbose("Adding keyboard shortcuts"),s.on("keyup"+E,k.event.keyboard)}},save:{focus:function(){m=e(n.activeElement).blur()}},restore:{focus:function(){m&&m.length>0&&m.focus()}},remove:{active:function(){L.removeClass(C.active)},clickaway:function(){T.closable&&y.off("click"+x)},bodyStyle:function(){""===l.attr("style")&&(k.verbose("Removing style attribute"),l.removeAttr("style"))},screenHeight:function(){k.debug("Removing page height"),l.css("height","")},keyboardShortcuts:function(){k.verbose("Removing keyboard shortcuts"),s.off("keyup"+E)},scrolling:function(){b.removeClass(C.scrolling),L.removeClass(C.scrolling)}},cacheSizes:function(){L.addClass(C.loading);var r=L.prop("scrollHeight"),i=L.outerHeight();void 0!==k.cache&&0===i||(k.cache={pageHeight:e(n).outerHeight(),height:i+T.offset,scrollHeight:r+T.offset,contextHeight:"body"==T.context?e(t).height():b.height()},k.cache.topOffset=-k.cache.height/2),L.removeClass(C.loading),k.debug("Caching modal and container sizes",k.cache)},can:{fit:function(){var e=k.cache.contextHeight,t=k.cache.contextHeight/2,n=k.cache.topOffset,r=k.cache.scrollHeight,i=k.cache.height,o=T.padding;return r>i?t+n+r+o<e:i+2*o<e}},is:{active:function(){return L.hasClass(C.active)},animating:function(){return L.transition("is supported")?L.transition("is animating"):L.is(":visible")},scrolling:function(){return b.hasClass(C.scrolling)},modernBrowser:function(){return!(t.ActiveXObject||"ActiveXObject"in t)}},set:{autofocus:function(){var e=L.find("[tabindex], :input").filter(":visible"),t=e.filter("[autofocus]"),n=t.length>0?t.first():e.first();n.length>0&&n.focus()},clickaway:function(){T.closable&&y.on("click"+x,k.event.click)},dimmerSettings:function(){if(void 0!==e.fn.dimmer){var t={debug:T.debug,dimmerName:"modals",variation:!1,closable:"auto",duration:{show:T.duration,hide:T.duration}},n=e.extend(!0,t,T.dimmerSettings);T.inverted?(n.variation=void 0!==n.variation?n.variation+" inverted":"inverted",y.addClass(C.inverted)):y.removeClass(C.inverted),T.blurring?b.addClass(C.blurring):b.removeClass(C.blurring),P.dimmer("setting",n)}else k.error(M.dimmer)},screenHeight:function(){k.can.fit()?l.css("height",""):(k.debug("Modal is taller than page content, resizing page height"),l.css("height",k.cache.height+2*T.padding))},active:function(){L.addClass(C.active)},scrolling:function(){b.addClass(C.scrolling),L.addClass(C.scrolling)},type:function(){k.can.fit()?(k.verbose("Modal fits on screen"),k.others.active()||k.others.animating()||k.remove.scrolling()):(k.verbose("Modal cannot fit on screen setting to scrolling"),k.set.scrolling())},position:function(){k.verbose("Centering modal on page",k.cache),k.can.fit()?L.css({top:"",marginTop:k.cache.topOffset}):L.css({marginTop:"",top:s.scrollTop()})},undetached:function(){b.addClass(C.undetached)}},setting:function(t,n){if(k.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,T,t);else{if(void 0===n)return T[t];e.isPlainObject(T[t])?e.extend(!0,T[t],n):T[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,k,t);else{if(void 0===n)return k[t];k[t]=n}},debug:function(){!T.silent&&T.debug&&(T.performance?k.performance.log(arguments):(k.debug=Function.prototype.bind.call(console.info,console,T.name+":"),k.debug.apply(console,arguments)))},verbose:function(){!T.silent&&T.verbose&&T.debug&&(T.performance?k.performance.log(arguments):(k.verbose=Function.prototype.bind.call(console.info,console,T.name+":"),k.verbose.apply(console,arguments)))},error:function(){T.silent||(k.error=Function.prototype.bind.call(console.error,console,T.name+":"),k.error.apply(console,arguments))},performance:{log:function(e){var t,n;T.performance&&(n=(t=(new Date).getTime())-(u||t),u=t,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(k.performance.timer),k.performance.timer=setTimeout(k.performance.display,500)},display:function(){var t=T.name+":",n=0;u=!1,clearTimeout(k.performance.timer),e.each(d,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",c&&(t+=" '"+c+"'"),(void 0!==console.group||void 0!==console.table)&&d.length>0&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),d=[]}},invoke:function(t,n,r){var o,a,s,l=F;return n=n||h,r=R||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},p?(void 0===F&&k.initialize(),k.invoke(f)):(void 0!==F&&F.invoke("destroy"),k.initialize())}),void 0!==i?i:this},e.fn.modal.settings={name:"Modal",namespace:"modal",silent:!1,debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,inverted:!1,blurring:!1,dimmerSettings:{closable:!1,useCSS:!0},keyboardShortcuts:!0,context:"body",queue:!1,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){return!0},onHidden:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",inverted:"inverted",loading:"loading",scrolling:"scrolling",undetached:"undetached"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.nag=function(n){var r,i=e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var i,d=e.isPlainObject(n)?e.extend(!0,{},e.fn.nag.settings,n):e.extend({},e.fn.nag.settings),f=(d.className,d.selector),p=d.error,h=d.namespace,g="."+h,v=h+"-module",m=e(this),b=(m.find(f.close),d.context?e(d.context):e("body")),y=this,x=m.data(v);t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame;i={initialize:function(){i.verbose("Initializing element"),m.on("click"+g,f.close,i.dismiss).data(v,i),d.detachable&&m.parent()[0]!==b[0]&&m.detach().prependTo(b),d.displayTime>0&&setTimeout(i.hide,d.displayTime),i.show()},destroy:function(){i.verbose("Destroying instance"),m.removeData(v).off(g)},show:function(){i.should.show()&&!m.is(":visible")&&(i.debug("Showing nag",d.animation.show),"fade"==d.animation.show?m.fadeIn(d.duration,d.easing):m.slideDown(d.duration,d.easing))},hide:function(){i.debug("Showing nag",d.animation.hide),"fade"==d.animation.show?m.fadeIn(d.duration,d.easing):m.slideUp(d.duration,d.easing)},onHide:function(){i.debug("Removing nag",d.animation.hide),m.remove(),d.onHide&&d.onHide()},dismiss:function(e){d.storageMethod&&i.storage.set(d.key,d.value),i.hide(),e.stopImmediatePropagation(),e.preventDefault()},should:{show:function(){return d.persist?(i.debug("Persistent nag is set, can show nag"),!0):i.storage.get(d.key)!=d.value.toString()?(i.debug("Stored value is not set, can show nag",i.storage.get(d.key)),!0):(i.debug("Stored value is set, cannot show nag",i.storage.get(d.key)),!1)}},get:{storageOptions:function(){var e={};return d.expires&&(e.expires=d.expires),d.domain&&(e.domain=d.domain),d.path&&(e.path=d.path),e}},clear:function(){i.storage.remove(d.key)},storage:{set:function(n,r){var o=i.get.storageOptions();if("localstorage"==d.storageMethod&&void 0!==t.localStorage)t.localStorage.setItem(n,r),i.debug("Value stored using local storage",n,r);else if("sessionstorage"==d.storageMethod&&void 0!==t.sessionStorage)t.sessionStorage.setItem(n,r),i.debug("Value stored using session storage",n,r);else{if(void 0===e.cookie)return void i.error(p.noCookieStorage);e.cookie(n,r,o),i.debug("Value stored using cookie",n,r,o)}},get:function(n,r){var o;return"localstorage"==d.storageMethod&&void 0!==t.localStorage?o=t.localStorage.getItem(n):"sessionstorage"==d.storageMethod&&void 0!==t.sessionStorage?o=t.sessionStorage.getItem(n):void 0!==e.cookie?o=e.cookie(n):i.error(p.noCookieStorage),"undefined"!=o&&"null"!=o&&void 0!==o&&null!==o||(o=void 0),o},remove:function(n){var r=i.get.storageOptions();"localstorage"==d.storageMethod&&void 0!==t.localStorage?t.localStorage.removeItem(n):"sessionstorage"==d.storageMethod&&void 0!==t.sessionStorage?t.sessionStorage.removeItem(n):void 0!==e.cookie?e.removeCookie(n,r):i.error(p.noStorage)}},setting:function(t,n){if(i.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];e.isPlainObject(d[t])?e.extend(!0,d[t],n):d[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,i,t);else{if(void 0===n)return i[t];i[t]=n}},debug:function(){!d.silent&&d.debug&&(d.performance?i.performance.log(arguments):(i.debug=Function.prototype.bind.call(console.info,console,d.name+":"),i.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?i.performance.log(arguments):(i.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),i.verbose.apply(console,arguments)))},error:function(){d.silent||(i.error=Function.prototype.bind.call(console.error,console,d.name+":"),i.error.apply(console,arguments))},performance:{log:function(e){var t,n;d.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":n})),clearTimeout(i.performance.timer),i.performance.timer=setTimeout(i.performance.display,500)},display:function(){var t=d.name+":",n=0;a=!1,clearTimeout(i.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,o){var a,s,l,c=x;return n=n||u,o=y||o,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,r){var o=n!=a?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[o])&&n!=a)c=c[o];else{if(void 0!==c[o])return s=c[o],!1;if(!e.isPlainObject(c[r])||n==a)return void 0!==c[r]?(s=c[r],!1):(i.error(p.method,t),!1);c=c[r]}})),e.isFunction(s)?l=s.apply(o,n):void 0!==s&&(l=s),e.isArray(r)?r.push(l):void 0!==r?r=[r,l]:void 0!==l&&(r=l),s}},c?(void 0===x&&i.initialize(),i.invoke(l)):(void 0!==x&&x.invoke("destroy"),i.initialize())}),void 0!==r?r:this},e.fn.nag.settings={name:"Nag",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},context:!1,detachable:!1,expires:30,domain:!1,path:"/",storageMethod:"cookie",key:"nag",value:"dismiss",error:{noCookieStorage:"$.cookie is not included. A storage solution is required.",noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".close.icon"},speed:500,easing:"easeOutQuad",onHide:function(){}},e.extend(e.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}})}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.popup=function(r){var i,o=e(this),a=e(n),s=e(t),l=e("body"),c=o.selector||"",u=(new Date).getTime(),d=[],f=arguments[0],p="string"==typeof f,h=[].slice.call(arguments,1);return o.each(function(){var o,g,v,m,b,y,x=e.isPlainObject(r)?e.extend(!0,{},e.fn.popup.settings,r):e.extend({},e.fn.popup.settings),_=x.selector,w=x.className,k=x.error,T=x.metadata,A=x.namespace,C="."+x.namespace,S="module-"+A,M=e(this),E=e(x.context),O=e(x.scrollContext),L=e(x.boundary),P=x.target?e(x.target):M,D=0,R=!1,F=!1,j=this,I=M.data(S);y={initialize:function(){y.debug("Initializing",M),y.createID(),y.bind.events(),!y.exists()&&x.preserve&&y.create(),x.observeChanges&&y.observeChanges(),y.instantiate()},instantiate:function(){y.verbose("Storing instance",y),I=y,M.data(S,I)},observeChanges:function(){"MutationObserver"in t&&((v=new MutationObserver(y.event.documentChanged)).observe(n,{childList:!0,subtree:!0}),y.debug("Setting up mutation observer",v))},refresh:function(){x.popup?o=e(x.popup).eq(0):x.inline&&(o=P.nextAll(_.popup).eq(0),x.popup=o),x.popup?(o.addClass(w.loading),g=y.get.offsetParent(),o.removeClass(w.loading),x.movePopup&&y.has.popup()&&y.get.offsetParent(o)[0]!==g[0]&&(y.debug("Moving popup to the same offset parent as target"),o.detach().appendTo(g))):g=x.inline?y.get.offsetParent(P):y.has.popup()?y.get.offsetParent(o):l,g.is("html")&&g[0]!==l[0]&&(y.debug("Setting page as offset parent"),g=l),y.get.variation()&&y.set.variation()},reposition:function(){y.refresh(),y.set.position()},destroy:function(){y.debug("Destroying previous module"),v&&v.disconnect(),o&&!x.preserve&&y.removePopup(),clearTimeout(y.hideTimer),clearTimeout(y.showTimer),y.unbind.close(),y.unbind.events(),M.removeData(S)},event:{start:function(t){var n=e.isPlainObject(x.delay)?x.delay.show:x.delay;clearTimeout(y.hideTimer),F||(y.showTimer=setTimeout(y.show,n))},end:function(){var t=e.isPlainObject(x.delay)?x.delay.hide:x.delay;clearTimeout(y.showTimer),y.hideTimer=setTimeout(y.hide,t)},touchstart:function(e){F=!0,y.show()},resize:function(){y.is.visible()&&y.set.position()},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==j||e(t).find(j).length>0)&&(y.debug("Element removed from DOM, tearing down events"),y.destroy())})})},hideGracefully:function(t){var r=e(t.target),i=e.contains(n.documentElement,t.target),o=r.closest(_.popup).length>0;t&&!o&&i?(y.debug("Click occurred outside popup hiding popup"),y.hide()):y.debug("Click was inside popup, keeping popup open")}},create:function(){var t=y.get.html(),n=y.get.title(),r=y.get.content();t||r||n?(y.debug("Creating pop-up html"),t||(t=x.templates.popup({title:n,content:r})),o=e("<div/>").addClass(w.popup).data(T.activator,M).html(t),x.inline?(y.verbose("Inserting popup element inline",o),o.insertAfter(M)):(y.verbose("Appending popup element to body",o),o.appendTo(E)),y.refresh(),y.set.variation(),x.hoverable&&y.bind.popup(),x.onCreate.call(o,j)):0!==P.next(_.popup).length?(y.verbose("Pre-existing popup found"),x.inline=!0,x.popup=P.next(_.popup).data(T.activator,M),y.refresh(),x.hoverable&&y.bind.popup()):x.popup?(e(x.popup).data(T.activator,M),y.verbose("Used popup specified in settings"),y.refresh(),x.hoverable&&y.bind.popup()):y.debug("No content specified skipping display",j)},createID:function(){b=(Math.random().toString(16)+"000000000").substr(2,8),m="."+b,y.verbose("Creating unique id for element",b)},toggle:function(){y.debug("Toggling pop-up"),y.is.hidden()?(y.debug("Popup is hidden, showing pop-up"),y.unbind.close(),y.show()):(y.debug("Popup is visible, hiding pop-up"),y.hide())},show:function(e){if(e=e||function(){},y.debug("Showing pop-up",x.transition),y.is.hidden()&&(!y.is.active()||!y.is.dropdown())){if(y.exists()||y.create(),!1===x.onShow.call(o,j))return void y.debug("onShow callback returned false, cancelling popup animation");x.preserve||x.popup||y.refresh(),o&&y.set.position()&&(y.save.conditions(),x.exclusive&&y.hideAll(),y.animate.show(e))}},hide:function(e){if(e=e||function(){},y.is.visible()||y.is.animating()){if(!1===x.onHide.call(o,j))return void y.debug("onHide callback returned false, cancelling popup animation");y.remove.visible(),y.unbind.close(),y.restore.conditions(),y.animate.hide(e)}},hideAll:function(){e(_.popup).filter("."+w.popupVisible).each(function(){e(this).data(T.activator).popup("hide")})},exists:function(){return!!o&&(x.inline||x.popup?y.has.popup():o.closest(E).length>=1)},removePopup:function(){y.has.popup()&&!x.popup&&(y.debug("Removing popup",o),o.remove(),o=void 0,x.onRemove.call(o,j))},save:{conditions:function(){y.cache={title:M.attr("title")},y.cache.title&&M.removeAttr("title"),y.verbose("Saving original attributes",y.cache.title)}},restore:{conditions:function(){return y.cache&&y.cache.title&&(M.attr("title",y.cache.title),y.verbose("Restoring original attributes",y.cache.title)),!0}},supports:{svg:function(){return"undefined"==typeof SVGGraphicsElement}},animate:{show:function(t){t=e.isFunction(t)?t:function(){},x.transition&&void 0!==e.fn.transition&&M.transition("is supported")?(y.set.visible(),o.transition({animation:x.transition+" in",queue:!1,debug:x.debug,verbose:x.verbose,duration:x.duration,onComplete:function(){y.bind.close(),t.call(o,j),x.onVisible.call(o,j)}})):y.error(k.noTransition)},hide:function(t){t=e.isFunction(t)?t:function(){},y.debug("Hiding pop-up"),!1!==x.onHide.call(o,j)?x.transition&&void 0!==e.fn.transition&&M.transition("is supported")?o.transition({animation:x.transition+" out",queue:!1,duration:x.duration,debug:x.debug,verbose:x.verbose,onComplete:function(){y.reset(),t.call(o,j),x.onHidden.call(o,j)}}):y.error(k.noTransition):y.debug("onHide callback returned false, cancelling popup animation")}},change:{content:function(e){o.html(e)}},get:{html:function(){return M.removeData(T.html),M.data(T.html)||x.html},title:function(){return M.removeData(T.title),M.data(T.title)||x.title},content:function(){return M.removeData(T.content),M.data(T.content)||M.attr("title")||x.content},variation:function(){return M.removeData(T.variation),M.data(T.variation)||x.variation},popup:function(){return o},popupOffset:function(){return o.offset()},calculations:function(){var e,n=P[0],r=L[0]==t,i=x.inline||x.popup&&x.movePopup?P.position():P.offset(),a=r?{top:0,left:0}:L.offset(),l={},c=r?{top:s.scrollTop(),left:s.scrollLeft()}:{top:0,left:0};return l={target:{element:P[0],width:P.outerWidth(),height:P.outerHeight(),top:i.top,left:i.left,margin:{}},popup:{width:o.outerWidth(),height:o.outerHeight()},parent:{width:g.outerWidth(),height:g.outerHeight()},screen:{top:a.top,left:a.left,scroll:{top:c.top,left:c.left},width:L.width(),height:L.height()}},x.setFluidWidth&&y.is.fluid()&&(l.container={width:o.parent().outerWidth()},l.popup.width=l.container.width),l.target.margin.top=x.inline?parseInt(t.getComputedStyle(n).getPropertyValue("margin-top"),10):0,l.target.margin.left=x.inline?y.is.rtl()?parseInt(t.getComputedStyle(n).getPropertyValue("margin-right"),10):parseInt(t.getComputedStyle(n).getPropertyValue("margin-left"),10):0,e=l.screen,l.boundary={top:e.top+e.scroll.top,bottom:e.top+e.scroll.top+e.height,left:e.left+e.scroll.left,right:e.left+e.scroll.left+e.width},l},id:function(){return b},startEvent:function(){return"hover"==x.on?"mouseenter":"focus"==x.on&&"focus"},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"==x.on?"mouseleave":"focus"==x.on&&"blur"},distanceFromBoundary:function(e,t){var n,r,i={};return n=(t=t||y.get.calculations()).popup,r=t.boundary,e&&(i={top:e.top-r.top,left:e.left-r.left,right:r.right-(e.left+n.width),bottom:r.bottom-(e.top+n.height)},y.verbose("Distance from boundaries determined",e,i)),i},offsetParent:function(t){var n=(void 0!==t?t[0]:M[0]).parentNode,r=e(n);if(n)for(var i="none"===r.css("transform"),o="static"===r.css("position"),a=r.is("html");n&&!a&&o&&i;)n=n.parentNode,i="none"===(r=e(n)).css("transform"),o="static"===r.css("position"),a=r.is("html");return r&&r.length>0?r:e()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(e){var t=e.split(" "),n=t[0],r=t[1],i="top"==n||"bottom"==n,o=!1,a=!1,s=!1;return R||(y.verbose("All available positions available"),R=y.get.positions()),y.debug("Recording last position tried",e),R[e]=!0,"opposite"===x.prefer&&(s=(s=[{top:"bottom",bottom:"top",left:"right",right:"left"}[n],r]).join(" "),o=!0===R[s],y.debug("Trying opposite strategy",s)),"adjacent"===x.prefer&&i&&(s=(s=[n,{left:"center",center:"right",right:"left"}[r]]).join(" "),a=!0===R[s],y.debug("Trying adjacent strategy",s)),(a||o)&&(y.debug("Using backup position",s),s={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"}[e]),s}},set:{position:function(e,t){if(0!==P.length&&0!==o.length){var n,r,i,a,s,l,c,u;if(t=t||y.get.calculations(),e=e||M.data(T.position)||x.position,n=M.data(T.offset)||x.offset,r=x.distanceAway,i=t.target,a=t.popup,s=t.parent,0===i.width&&0===i.height&&!y.is.svg(i.element))return y.debug("Popup target is hidden, no action taken"),!1;switch(x.inline&&(y.debug("Adding margin to calculation",i.margin),"left center"==e||"right center"==e?(n+=i.margin.top,r+=-i.margin.left):"top left"==e||"top center"==e||"top right"==e?(n+=i.margin.left,r-=i.margin.top):(n+=i.margin.left,r+=i.margin.top)),y.debug("Determining popup position from calculations",e,t),y.is.rtl()&&(e=e.replace(/left|right/g,function(e){return"left"==e?"right":"left"}),y.debug("RTL: Popup position updated",e)),D==x.maxSearchDepth&&"string"==typeof x.lastResort&&(e=x.lastResort),e){case"top left":l={top:"auto",bottom:s.height-i.top+r,left:i.left+n,right:"auto"};break;case"top center":l={bottom:s.height-i.top+r,left:i.left+i.width/2-a.width/2+n,top:"auto",right:"auto"};break;case"top right":l={bottom:s.height-i.top+r,right:s.width-i.left-i.width-n,top:"auto",left:"auto"};break;case"left center":l={top:i.top+i.height/2-a.height/2+n,right:s.width-i.left+r,left:"auto",bottom:"auto"};break;case"right center":l={top:i.top+i.height/2-a.height/2+n,left:i.left+i.width+r,bottom:"auto",right:"auto"};break;case"bottom left":l={top:i.top+i.height+r,left:i.left+n,bottom:"auto",right:"auto"};break;case"bottom center":l={top:i.top+i.height+r,left:i.left+i.width/2-a.width/2+n,bottom:"auto",right:"auto"};break;case"bottom right":l={top:i.top+i.height+r,right:s.width-i.left-i.width-n,left:"auto",bottom:"auto"}}if(void 0===l&&y.error(k.invalidPosition,e),y.debug("Calculated popup positioning values",l),o.css(l).removeClass(w.position).addClass(e).addClass(w.loading),c=y.get.popupOffset(),u=y.get.distanceFromBoundary(c,t),y.is.offstage(u,e)){if(y.debug("Position is outside viewport",e),D<x.maxSearchDepth)return D++,e=y.get.nextPosition(e),y.debug("Trying new position",e),!!o&&y.set.position(e,t);if(!x.lastResort)return y.debug("Popup could not find a position to display",o),y.error(k.cannotPlace,j),y.remove.attempts(),y.remove.loading(),y.reset(),x.onUnplaceable.call(o,j),!1;y.debug("No position found, showing with last position")}return y.debug("Position is on stage",e),y.remove.attempts(),y.remove.loading(),x.setFluidWidth&&y.is.fluid()&&y.set.fluidWidth(t),!0}y.error(k.notFound)},fluidWidth:function(e){e=e||y.get.calculations(),y.debug("Automatically setting element width to parent width",e.parent.width),o.css("width",e.container.width)},variation:function(e){(e=e||y.get.variation())&&y.has.popup()&&(y.verbose("Adding variation to popup",e),o.addClass(e))},visible:function(){M.addClass(w.visible)}},remove:{loading:function(){o.removeClass(w.loading)},variation:function(e){(e=e||y.get.variation())&&(y.verbose("Removing variation",e),o.removeClass(e))},visible:function(){M.removeClass(w.visible)},attempts:function(){y.verbose("Resetting all searched positions"),D=0,R=!1}},bind:{events:function(){y.debug("Binding popup events to module"),"click"==x.on&&M.on("click"+C,y.toggle),"hover"==x.on&&M.on("touchstart"+C,y.event.touchstart),y.get.startEvent()&&M.on(y.get.startEvent()+C,y.event.start).on(y.get.endEvent()+C,y.event.end),x.target&&y.debug("Target set to element",P),s.on("resize"+m,y.event.resize)},popup:function(){y.verbose("Allowing hover events on popup to prevent closing"),o&&y.has.popup()&&o.on("mouseenter"+C,y.event.start).on("mouseleave"+C,y.event.end)},close:function(){(!0===x.hideOnScroll||"auto"==x.hideOnScroll&&"click"!=x.on)&&y.bind.closeOnScroll(),"hover"==x.on&&F&&y.bind.touchClose(),"click"==x.on&&x.closable&&y.bind.clickaway()},closeOnScroll:function(){y.verbose("Binding scroll close event to document"),O.one(y.get.scrollEvent()+m,y.event.hideGracefully)},touchClose:function(){y.verbose("Binding popup touchclose event to document"),a.on("touchstart"+m,function(e){y.verbose("Touched away from popup"),y.event.hideGracefully.call(j,e)})},clickaway:function(){y.verbose("Binding popup close event to document"),a.on("click"+m,function(e){y.verbose("Clicked away from popup"),y.event.hideGracefully.call(j,e)})}},unbind:{events:function(){s.off(m),M.off(C)},close:function(){a.off(m),O.off(m)}},has:{popup:function(){return o&&o.length>0}},is:{offstage:function(t,n){var r=[];return e.each(t,function(e,t){t<-x.jitter&&(y.debug("Position exceeds allowable distance from edge",e,t,n),r.push(e))}),r.length>0},svg:function(e){return y.supports.svg()&&e instanceof SVGGraphicsElement},active:function(){return M.hasClass(w.active)},animating:function(){return void 0!==o&&o.hasClass(w.animating)},fluid:function(){return void 0!==o&&o.hasClass(w.fluid)},visible:function(){return void 0!==o&&o.hasClass(w.popupVisible)},dropdown:function(){return M.hasClass(w.dropdown)},hidden:function(){return!y.is.visible()},rtl:function(){return"rtl"==M.css("direction")}},reset:function(){y.remove.visible(),x.preserve?void 0!==e.fn.transition&&o.transition("remove transition"):y.removePopup()},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,x,t);else{if(void 0===n)return x[t];x[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,y,t);else{if(void 0===n)return y[t];y[t]=n}},debug:function(){!x.silent&&x.debug&&(x.performance?y.performance.log(arguments):(y.debug=Function.prototype.bind.call(console.info,console,x.name+":"),y.debug.apply(console,arguments)))},verbose:function(){!x.silent&&x.verbose&&x.debug&&(x.performance?y.performance.log(arguments):(y.verbose=Function.prototype.bind.call(console.info,console,x.name+":"),y.verbose.apply(console,arguments)))},error:function(){x.silent||(y.error=Function.prototype.bind.call(console.error,console,x.name+":"),y.error.apply(console,arguments))},performance:{log:function(e){var t,n;x.performance&&(n=(t=(new Date).getTime())-(u||t),u=t,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":n})),clearTimeout(y.performance.timer),y.performance.timer=setTimeout(y.performance.display,500)},display:function(){var t=x.name+":",n=0;u=!1,clearTimeout(y.performance.timer),e.each(d,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",c&&(t+=" '"+c+"'"),(void 0!==console.group||void 0!==console.table)&&d.length>0&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),d=[]}},invoke:function(t,n,r){var o,a,s,l=I;return n=n||h,r=j||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},p?(void 0===I&&y.initialize(),y.invoke(f)):(void 0!==I&&I.invoke("destroy"),y.initialize())}),void 0!==i?i:this},e.fn.popup.settings={name:"Popup",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"popup",observeChanges:!0,onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onUnplaceable:function(){},onHidden:function(){},on:"hover",boundary:t,addTouchEvents:!0,position:"top left",variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",scrollContext:t,prefer:"opposite",lastResort:!1,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>",notFound:"The target or popup you specified does not exist on the page"},metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",animating:"animating",dropdown:"dropdown",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible",popupVisible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(/[&<>"'`]/g,function(e){return t[e]}):e},popup:function(t){var n="",r=e.fn.popup.settings.templates.escape;return void 0!==typeof t&&(void 0!==typeof t.title&&t.title&&(t.title=r(t.title),n+='<div class="header">'+t.title+"</div>"),void 0!==typeof t.content&&t.content&&(t.content=r(t.content),n+='<div class="content">'+t.content+"</div>")),n}}}}(e,window,document),function(e,t,n,r){"use strict";void 0!==(t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")())&&t.Math==Math||("undefined"!=typeof self&&self.Math==Math?self:Function("return this")());e.fn.progress=function(t){var r,i=e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var i,d=e.isPlainObject(t)?e.extend(!0,{},e.fn.progress.settings,t):e.extend({},e.fn.progress.settings),f=d.className,p=d.metadata,h=d.namespace,g=d.selector,v=d.error,m="."+h,b="module-"+h,y=e(this),x=e(this).find(g.bar),_=e(this).find(g.progress),w=e(this).find(g.label),k=this,T=y.data(b),A=!1;i={initialize:function(){i.debug("Initializing progress bar",d),i.set.duration(),i.set.transitionEvent(),i.read.metadata(),i.read.settings(),i.instantiate()},instantiate:function(){i.verbose("Storing instance of progress",i),T=i,y.data(b,i)},destroy:function(){i.verbose("Destroying previous progress for",y),clearInterval(T.interval),i.remove.state(),y.removeData(b),T=void 0},reset:function(){i.remove.nextValue(),i.update.progress(0)},complete:function(){(void 0===i.percent||i.percent<100)&&(i.remove.progressPoll(),i.set.percent(100))},read:{metadata:function(){var e={percent:y.data(p.percent),total:y.data(p.total),value:y.data(p.value)};e.percent&&(i.debug("Current percent value set from metadata",e.percent),i.set.percent(e.percent)),e.total&&(i.debug("Total value set from metadata",e.total),i.set.total(e.total)),e.value&&(i.debug("Current value set from metadata",e.value),i.set.value(e.value),i.set.progress(e.value))},settings:function(){!1!==d.total&&(i.debug("Current total set in settings",d.total),i.set.total(d.total)),!1!==d.value&&(i.debug("Current value set in settings",d.value),i.set.value(d.value),i.set.progress(i.value)),!1!==d.percent&&(i.debug("Current percent set in settings",d.percent),i.set.percent(d.percent))}},bind:{transitionEnd:function(e){var t=i.get.transitionEnd();x.one(t+m,function(t){clearTimeout(i.failSafeTimer),e.call(this,t)}),i.failSafeTimer=setTimeout(function(){x.triggerHandler(t)},d.duration+d.failSafeDelay),i.verbose("Adding fail safe timer",i.timer)}},increment:function(e){var t,n;i.has.total()?n=(t=i.get.value())+(e=e||1):(n=(t=i.get.percent())+(e=e||i.get.randomValue()),100,i.debug("Incrementing percentage by",t,n)),n=i.get.normalizedValue(n),i.set.progress(n)},decrement:function(e){var t,n;i.get.total()?(n=(t=i.get.value())-(e=e||1),i.debug("Decrementing value by",e,t)):(n=(t=i.get.percent())-(e=e||i.get.randomValue()),i.debug("Decrementing percentage by",e,t)),n=i.get.normalizedValue(n),i.set.progress(n)},has:{progressPoll:function(){return i.progressPoll},total:function(){return!1!==i.get.total()}},get:{text:function(e){var t=i.value||0,n=i.total||0,r=A?i.get.displayPercent():i.percent||0,o=i.total>0?n-t:100-r;return e=(e=e||"").replace("{value}",t).replace("{total}",n).replace("{left}",o).replace("{percent}",r),i.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0)return i.debug("Value cannot decrement below 0"),0;if(i.has.total()){if(e>i.total)return i.debug("Value cannot increment above total",i.total),i.total}else if(e>100)return i.debug("Value cannot increment above 100 percent"),100;return e},updateInterval:function(){return"auto"==d.updateInterval?d.duration:d.updateInterval},randomValue:function(){return i.debug("Generating random increment percentage"),Math.floor(Math.random()*d.random.max+d.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")&&+e.replace(/[^\d.]/g,""):e},transitionEnd:function(){var e,t=n.createElement("element"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(void 0!==t.style[e])return r[e]},displayPercent:function(){var e=x.width(),t=y.width(),n=e>parseInt(x.css("min-width"),10)?e/t*100:i.percent;return d.precision>0?Math.round(n*(10*d.precision))/(10*d.precision):Math.round(n)},percent:function(){return i.percent||0},value:function(){return i.nextValue||i.value||0},total:function(){return i.total||!1}},create:{progressPoll:function(){i.progressPoll=setTimeout(function(){i.update.toNextValue(),i.remove.progressPoll()},i.get.updateInterval())}},is:{complete:function(){return i.is.success()||i.is.warning()||i.is.error()},success:function(){return y.hasClass(f.success)},warning:function(){return y.hasClass(f.warning)},error:function(){return y.hasClass(f.error)},active:function(){return y.hasClass(f.active)},visible:function(){return y.is(":visible")}},remove:{progressPoll:function(){i.verbose("Removing progress poll timer"),i.progressPoll&&(clearTimeout(i.progressPoll),delete i.progressPoll)},nextValue:function(){i.verbose("Removing progress value stored for next update"),delete i.nextValue},state:function(){i.verbose("Removing stored state"),delete i.total,delete i.percent,delete i.value},active:function(){i.verbose("Removing active state"),y.removeClass(f.active)},success:function(){i.verbose("Removing success state"),y.removeClass(f.success)},warning:function(){i.verbose("Removing warning state"),y.removeClass(f.warning)},error:function(){i.verbose("Removing error state"),y.removeClass(f.error)}},set:{barWidth:function(e){e>100?i.error(v.tooHigh,e):e<0?i.error(v.tooLow,e):(x.css("width",e+"%"),y.attr("data-percent",parseInt(e,10)))},duration:function(e){e="number"==typeof(e=e||d.duration)?e+"ms":e,i.verbose("Setting progress bar transition duration",e),x.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=d.precision>0?Math.round(e*(10*d.precision))/(10*d.precision):Math.round(e),i.percent=e,i.has.total()||(i.value=d.precision>0?Math.round(e/100*i.total*(10*d.precision))/(10*d.precision):Math.round(e/100*i.total*10)/10,d.limitValues&&(i.value=i.value>100?100:i.value<0?0:i.value)),i.set.barWidth(e),i.set.labelInterval(),i.set.labels(),d.onChange.call(k,e,i.value,i.total)},labelInterval:function(){clearInterval(i.interval),i.bind.transitionEnd(function(){i.verbose("Bar finished animating, removing continuous label updates"),clearInterval(i.interval),A=!1,i.set.labels()}),A=!0,i.interval=setInterval(function(){e.contains(n.documentElement,k)||(clearInterval(i.interval),A=!1),i.set.labels()},d.framerate)},labels:function(){i.verbose("Setting both bar progress and outer label text"),i.set.barLabel(),i.set.state()},label:function(e){(e=e||"")&&(e=i.get.text(e),i.verbose("Setting label to text",e),w.text(e))},state:function(e){100===(e=void 0!==e?e:i.percent)?d.autoSuccess&&!(i.is.warning()||i.is.error()||i.is.success())?(i.set.success(),i.debug("Automatically triggering success at 100%")):(i.verbose("Reached 100% removing active state"),i.remove.active(),i.remove.progressPoll()):e>0?(i.verbose("Adjusting active progress bar label",e),i.set.active()):(i.remove.active(),i.set.label(d.text.active))},barLabel:function(e){void 0!==e?_.text(i.get.text(e)):"ratio"==d.label&&i.total?(i.verbose("Adding ratio to bar label"),_.text(i.get.text(d.text.ratio))):"percent"==d.label&&(i.verbose("Adding percentage to bar label"),_.text(i.get.text(d.text.percent)))},active:function(e){e=e||d.text.active,i.debug("Setting active state"),d.showActivity&&!i.is.active()&&y.addClass(f.active),i.remove.warning(),i.remove.error(),i.remove.success(),(e=d.onLabelUpdate("active",e,i.value,i.total))&&i.set.label(e),i.bind.transitionEnd(function(){d.onActive.call(k,i.value,i.total)})},success:function(e){e=e||d.text.success||d.text.active,i.debug("Setting success state"),y.addClass(f.success),i.remove.active(),i.remove.warning(),i.remove.error(),i.complete(),d.text.success?(e=d.onLabelUpdate("success",e,i.value,i.total),i.set.label(e)):(e=d.onLabelUpdate("active",e,i.value,i.total),i.set.label(e)),i.bind.transitionEnd(function(){d.onSuccess.call(k,i.total)})},warning:function(e){e=e||d.text.warning,i.debug("Setting warning state"),y.addClass(f.warning),i.remove.active(),i.remove.success(),i.remove.error(),i.complete(),(e=d.onLabelUpdate("warning",e,i.value,i.total))&&i.set.label(e),i.bind.transitionEnd(function(){d.onWarning.call(k,i.value,i.total)})},error:function(e){e=e||d.text.error,i.debug("Setting error state"),y.addClass(f.error),i.remove.active(),i.remove.success(),i.remove.warning(),i.complete(),(e=d.onLabelUpdate("error",e,i.value,i.total))&&i.set.label(e),i.bind.transitionEnd(function(){d.onError.call(k,i.value,i.total)})},transitionEvent:function(){i.get.transitionEnd()},total:function(e){i.total=e},value:function(e){i.value=e},progress:function(e){i.has.progressPoll()?(i.debug("Updated within interval, setting next update to use new value",e),i.set.nextValue(e)):(i.debug("First update in progress update interval, immediately updating",e),i.update.progress(e),i.create.progressPoll())},nextValue:function(e){i.nextValue=e}},update:{toNextValue:function(){var e=i.nextValue;e&&(i.debug("Update interval complete using last updated value",e),i.update.progress(e),i.remove.nextValue())},progress:function(e){var t;!1===(e=i.get.numericValue(e))&&i.error(v.nonNumeric,e),e=i.get.normalizedValue(e),i.has.total()?(i.set.value(e),t=e/i.total*100,i.debug("Calculating percent complete from total",t),i.set.percent(t)):(t=e,i.debug("Setting value to exact percentage value",t),i.set.percent(t))}},setting:function(t,n){if(i.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];e.isPlainObject(d[t])?e.extend(!0,d[t],n):d[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,i,t);else{if(void 0===n)return i[t];i[t]=n}},debug:function(){!d.silent&&d.debug&&(d.performance?i.performance.log(arguments):(i.debug=Function.prototype.bind.call(console.info,console,d.name+":"),i.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?i.performance.log(arguments):(i.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),i.verbose.apply(console,arguments)))},error:function(){d.silent||(i.error=Function.prototype.bind.call(console.error,console,d.name+":"),i.error.apply(console,arguments))},performance:{log:function(e){var t,n;d.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":n})),clearTimeout(i.performance.timer),i.performance.timer=setTimeout(i.performance.display,500)},display:function(){var t=d.name+":",n=0;a=!1,clearTimeout(i.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,o){var a,s,l,c=T;return n=n||u,o=k||o,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,r){var o=n!=a?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[o])&&n!=a)c=c[o];else{if(void 0!==c[o])return s=c[o],!1;if(!e.isPlainObject(c[r])||n==a)return void 0!==c[r]?(s=c[r],!1):(i.error(v.method,t),!1);c=c[r]}})),e.isFunction(s)?l=s.apply(o,n):void 0!==s&&(l=s),e.isArray(r)?r.push(l):void 0!==r?r=[r,l]:void 0!==l&&(r=l),s}},c?(void 0===T&&i.initialize(),i.invoke(l)):(void 0!==T&&T.invoke("destroy"),i.initialize())}),void 0!==r?r:this},e.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(e,t,n,r){return t},onChange:function(e,t,n){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.rating=function(t){var n,r=e(this),i=r.selector||"",o=(new Date).getTime(),a=[],s=arguments[0],l="string"==typeof s,c=[].slice.call(arguments,1);return r.each(function(){var u,d,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.rating.settings,t):e.extend({},e.fn.rating.settings),p=f.namespace,h=f.className,g=f.metadata,v=f.selector,m=(f.error,"."+p),b="module-"+p,y=this,x=e(this).data(b),_=e(this),w=_.find(v.icon);d={initialize:function(){d.verbose("Initializing rating module",f),0===w.length&&d.setup.layout(),f.interactive?d.enable():d.disable(),d.set.initialLoad(),d.set.rating(d.get.initialRating()),d.remove.initialLoad(),d.instantiate()},instantiate:function(){d.verbose("Instantiating module",f),x=d,_.data(b,d)},destroy:function(){d.verbose("Destroying previous instance",x),d.remove.events(),_.removeData(b)},refresh:function(){w=_.find(v.icon)},setup:{layout:function(){var t=d.get.maxRating(),n=e.fn.rating.settings.templates.icon(t);d.debug("Generating icon html dynamically"),_.html(n),d.refresh()}},event:{mouseenter:function(){var t=e(this);t.nextAll().removeClass(h.selected),_.addClass(h.selected),t.addClass(h.selected).prevAll().addClass(h.selected)},mouseleave:function(){_.removeClass(h.selected),w.removeClass(h.selected)},click:function(){var t=e(this),n=d.get.rating(),r=w.index(t)+1;("auto"==f.clearable?1===w.length:f.clearable)&&n==r?d.clearRating():d.set.rating(r)}},clearRating:function(){d.debug("Clearing current rating"),d.set.rating(0)},bind:{events:function(){d.verbose("Binding events"),_.on("mouseenter"+m,v.icon,d.event.mouseenter).on("mouseleave"+m,v.icon,d.event.mouseleave).on("click"+m,v.icon,d.event.click)}},remove:{events:function(){d.verbose("Removing events"),_.off(m)},initialLoad:function(){u=!1}},enable:function(){d.debug("Setting rating to interactive mode"),d.bind.events(),_.removeClass(h.disabled)},disable:function(){d.debug("Setting rating to read-only mode"),d.remove.events(),_.addClass(h.disabled)},is:{initialLoad:function(){return u}},get:{initialRating:function(){return void 0!==_.data(g.rating)?(_.removeData(g.rating),_.data(g.rating)):f.initialRating},maxRating:function(){return void 0!==_.data(g.maxRating)?(_.removeData(g.maxRating),_.data(g.maxRating)):f.maxRating},rating:function(){var e=w.filter("."+h.active).length;return d.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var t=e-1>=0?e-1:0,n=w.eq(t);_.removeClass(h.selected),w.removeClass(h.selected).removeClass(h.active),e>0&&(d.verbose("Setting current rating to",e),n.prevAll().addBack().addClass(h.active)),d.is.initialLoad()||f.onRate.call(y,e)},initialLoad:function(){u=!0}},setting:function(t,n){if(d.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],n):f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];d[t]=n}},debug:function(){!f.silent&&f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){f.silent||(d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments))},performance:{log:function(e){var t,n;f.performance&&(n=(t=(new Date).getTime())-(o||t),o=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,500)},display:function(){var t=f.name+":",n=0;o=!1,clearTimeout(d.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",i&&(t+=" '"+i+"'"),r.length>1&&(t+=" ("+r.length+")"),(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,r,i){var o,a,s,l=x;return r=r||c,i=y||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,r):void 0!==a&&(s=a),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),a}},l?(void 0===x&&d.initialize(),d.invoke(s)):(void 0!==x&&x.invoke("destroy"),d.initialize())}),void 0!==n?n:this},e.fn.rating.settings={name:"Rating",namespace:"rating",slent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var t=1,n="";t<=e;)n+='<i class="icon"></i>',t++;return n}}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.search=function(r){var i,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return e(this).each(function(){var f,p=e.isPlainObject(r)?e.extend(!0,{},e.fn.search.settings,r):e.extend({},e.fn.search.settings),h=p.className,g=p.metadata,v=p.regExp,m=p.fields,b=p.selector,y=p.error,x=p.namespace,_="."+x,w=x+"-module",k=e(this),T=k.find(b.prompt),A=k.find(b.searchButton),C=k.find(b.results),S=k.find(b.result),M=(k.find(b.category),this),E=k.data(w),O=!1,L=!1;f={initialize:function(){f.verbose("Initializing module"),f.determine.searchFields(),f.bind.events(),f.set.type(),f.create.results(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),E=f,k.data(w,f)},destroy:function(){f.verbose("Destroying instance"),k.off(_).removeData(w)},refresh:function(){f.debug("Refreshing selector cache"),T=k.find(b.prompt),A=k.find(b.searchButton),k.find(b.category),C=k.find(b.results),S=k.find(b.result)},refreshResults:function(){C=k.find(b.results),S=k.find(b.result)},bind:{events:function(){f.verbose("Binding events to search"),p.automatic&&(k.on(f.get.inputEvent()+_,b.prompt,f.event.input),T.attr("autocomplete","off")),k.on("focus"+_,b.prompt,f.event.focus).on("blur"+_,b.prompt,f.event.blur).on("keydown"+_,b.prompt,f.handleKeyboard).on("click"+_,b.searchButton,f.query).on("mousedown"+_,b.results,f.event.result.mousedown).on("mouseup"+_,b.results,f.event.result.mouseup).on("click"+_,b.result,f.event.result.click)}},determine:{searchFields:function(){r&&void 0!==r.searchFields&&(p.searchFields=r.searchFields)}},event:{input:function(){p.searchDelay?(clearTimeout(f.timer),f.timer=setTimeout(function(){f.is.focused()&&f.query()},p.searchDelay)):f.query()},focus:function(){f.set.focus(),p.searchOnFocus&&f.has.minimumCharacters()&&f.query(function(){f.can.show()&&f.showResults()})},blur:function(e){var t=function(){f.cancel.query(),f.remove.focus(),f.timer=setTimeout(f.hideResults,p.hideDelay)};n.activeElement===this||(L=!1,f.resultsClicked?(f.debug("Determining if user action caused search to close"),k.one("click.close"+_,b.results,function(e){f.is.inMessage(e)||O?T.focus():(O=!1,f.is.animating()||f.is.hidden()||t())})):(f.debug("Input blurred without user action, closing results"),t()))},result:{mousedown:function(){f.resultsClicked=!0},mouseup:function(){f.resultsClicked=!1},click:function(n){f.debug("Search result selected");var r=e(this),i=r.find(b.title).eq(0),o=r.is("a[href]")?r:r.find("a[href]").eq(0),a=o.attr("href")||!1,s=o.attr("target")||!1,l=(i.html(),i.length>0&&i.text()),c=f.get.results(),u=r.data(g.result)||f.get.result(l,c);if(e.isFunction(p.onSelect)&&!1===p.onSelect.call(M,u,c))return f.debug("Custom onSelect callback cancelled default select action"),void(O=!0);f.hideResults(),l&&f.set.value(l),a&&(f.verbose("Opening search link found in result",o),"_blank"==s||n.ctrlKey?t.open(a):t.location.href=a)}}},handleKeyboard:function(e){var t,n=k.find(b.result),r=k.find(b.category),i=n.filter("."+h.active),o=n.index(i),a=n.length,s=i.length>0,l=e.which,c=13,u=38,d=40;if(l==27&&(f.verbose("Escape key pressed, blurring search field"),f.hideResults(),L=!0),f.is.visible())if(l==c){if(f.verbose("Enter key pressed, selecting active result"),n.filter("."+h.active).length>0)return f.event.result.click.call(n.filter("."+h.active),e),e.preventDefault(),!1}else l==u&&s?(f.verbose("Up key pressed, changing active result"),t=o-1<0?o:o-1,r.removeClass(h.active),n.removeClass(h.active).eq(t).addClass(h.active).closest(r).addClass(h.active),e.preventDefault()):l==d&&(f.verbose("Down key pressed, changing active result"),t=o+1>=a?o:o+1,r.removeClass(h.active),n.removeClass(h.active).eq(t).addClass(h.active).closest(r).addClass(h.active),e.preventDefault());else l==c&&(f.verbose("Enter key pressed, executing query"),f.query(),f.set.buttonPressed(),T.one("keyup",f.remove.buttonFocus))},setup:{api:function(t,n){var r={debug:p.debug,on:!1,cache:!0,action:"search",urlData:{query:t},onSuccess:function(e){f.parse.response.call(M,e,t),n()},onFailure:function(){f.displayMessage(y.serverError),n()},onAbort:function(e){},onError:f.error};e.extend(!0,r,p.apiSettings),f.verbose("Setting up API request",r),k.api(r)}},can:{useAPI:function(){return void 0!==e.fn.api},show:function(){return f.is.focused()&&!f.is.visible()&&!f.is.empty()},transition:function(){return p.transition&&void 0!==e.fn.transition&&k.transition("is supported")}},is:{animating:function(){return C.hasClass(h.animating)},hidden:function(){return C.hasClass(h.hidden)},inMessage:function(t){if(t.target){var r=e(t.target);return e.contains(n.documentElement,t.target)&&r.closest(b.message).length>0}},empty:function(){return""===C.html()},visible:function(){return C.filter(":visible").length>0},focused:function(){return T.filter(":focus").length>0}},get:{inputEvent:function(){var e=T[0];return void 0!==e&&void 0!==e.oninput?"input":void 0!==e&&void 0!==e.onpropertychange?"propertychange":"keyup"},value:function(){return T.val()},results:function(){return k.data(g.results)},result:function(t,n){var r=["title","id"],i=!1;return t=void 0!==t?t:f.get.value(),n=void 0!==n?n:f.get.results(),"category"===p.type?(f.debug("Finding result that matches",t),e.each(n,function(n,o){if(e.isArray(o.results)&&(i=f.search.object(t,o.results,r)[0]))return!1})):(f.debug("Finding result in results object",t),i=f.search.object(t,n,r)[0]),i||!1}},select:{firstResult:function(){f.verbose("Selecting first result"),S.first().addClass(h.active)}},set:{focus:function(){k.addClass(h.focus)},loading:function(){k.addClass(h.loading)},value:function(e){f.verbose("Setting search input value",e),T.val(e)},type:function(e){e=e||p.type,"category"==p.type&&k.addClass(p.type)},buttonPressed:function(){A.addClass(h.pressed)}},remove:{loading:function(){k.removeClass(h.loading)},focus:function(){k.removeClass(h.focus)},buttonPressed:function(){A.removeClass(h.pressed)}},query:function(t){t=e.isFunction(t)?t:function(){};var n=f.get.value(),r=f.read.cache(n);t=t||function(){},f.has.minimumCharacters()?(r?(f.debug("Reading result from cache",n),f.save.results(r.results),f.addResults(r.html),f.inject.id(r.results),t()):(f.debug("Querying for",n),e.isPlainObject(p.source)||e.isArray(p.source)?(f.search.local(n),t()):f.can.useAPI()?f.search.remote(n,t):(f.error(y.source),t())),p.onSearchQuery.call(M,n)):f.hideResults()},search:{local:function(e){var t,n=f.search.object(e,p.content);f.set.loading(),f.save.results(n),f.debug("Returned local search results",n),t=f.generateResults({results:n}),f.remove.loading(),f.addResults(t),f.inject.id(n),f.write.cache(e,{html:t,results:n})},remote:function(t,n){n=e.isFunction(n)?n:function(){},k.api("is loading")&&k.api("abort"),f.setup.api(t,n),k.api("query")},object:function(t,n,r){var i=[],o=[],a=t.toString().replace(v.escape,"\\$&"),s=new RegExp(v.beginsWith+a,"i"),l=function(t,n){var r=-1==e.inArray(n,i),a=-1==e.inArray(n,o);r&&a&&t.push(n)};return n=n||p.source,r=void 0!==r?r:p.searchFields,e.isArray(r)||(r=[r]),void 0===n||!1===n?(f.error(y.source),[]):(e.each(r,function(r,a){e.each(n,function(e,n){"string"==typeof n[a]&&(-1!==n[a].search(s)?l(i,n):p.searchFullText&&f.fuzzySearch(t,n[a])&&l(o,n))})}),e.merge(i,o))}},fuzzySearch:function(e,t){var n=t.length,r=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),r>n)return!1;if(r===n)return e===t;e:for(var i=0,o=0;i<r;i++){for(var a=e.charCodeAt(i);o<n;)if(t.charCodeAt(o++)===a)continue e;return!1}return!0},parse:{response:function(e,t){var n=f.generateResults(e);f.verbose("Parsing server response",e),void 0!==e&&void 0!==t&&void 0!==e[m.results]&&(f.addResults(n),f.inject.id(e[m.results]),f.write.cache(t,{html:n,results:e[m.results]}),f.save.results(e[m.results]))}},cancel:{query:function(){f.can.useAPI()&&k.api("abort")}},has:{minimumCharacters:function(){return f.get.value().length>=p.minCharacters},results:function(){return 0!==C.length&&""!=C.html()}},clear:{cache:function(e){var t=k.data(g.cache);e?e&&t&&t[e]&&(f.debug("Removing value from cache",e),delete t[e],k.data(g.cache,t)):(f.debug("Clearing cache",e),k.removeData(g.cache))}},read:{cache:function(e){var t=k.data(g.cache);return!!p.cache&&(f.verbose("Checking cache for generated html for query",e),"object"==typeof t&&void 0!==t[e]&&t[e])}},create:{id:function(e,t){var n,r=e+1;return void 0!==t?(n=String.fromCharCode(97+t)+r,f.verbose("Creating category result id",n)):(n=r,f.verbose("Creating result id",n)),n},results:function(){0===C.length&&(C=e("<div />").addClass(h.results).appendTo(k))}},inject:{result:function(e,t,n){f.verbose("Injecting result into results");var r=void 0!==n?C.children().eq(n).children(b.result).eq(t):C.children(b.result).eq(t);f.verbose("Injecting results metadata",r),r.data(g.result,e)},id:function(t){f.debug("Injecting unique ids into results");var n=0,r=0;return"category"===p.type?e.each(t,function(t,i){r=0,e.each(i.results,function(e,t){var o=i.results[e];void 0===o.id&&(o.id=f.create.id(r,n)),f.inject.result(o,r,n),r++}),n++}):e.each(t,function(e,n){var i=t[e];void 0===i.id&&(i.id=f.create.id(r)),f.inject.result(i,r),r++}),t}},save:{results:function(e){f.verbose("Saving current search results to metadata",e),k.data(g.results,e)}},write:{cache:function(e,t){var n=void 0!==k.data(g.cache)?k.data(g.cache):{};p.cache&&(f.verbose("Writing generated html to cache",e,t),n[e]=t,k.data(g.cache,n))}},addResults:function(t){if(e.isFunction(p.onResultsAdd)&&!1===p.onResultsAdd.call(C,t))return f.debug("onResultsAdd callback cancelled default action"),!1;t?(C.html(t),f.refreshResults(),p.selectFirstResult&&f.select.firstResult(),f.showResults()):f.hideResults(function(){C.empty()})},showResults:function(t){t=e.isFunction(t)?t:function(){},L||!f.is.visible()&&f.has.results()&&(f.can.transition()?(f.debug("Showing results with css animations"),C.transition({animation:p.transition+" in",debug:p.debug,verbose:p.verbose,duration:p.duration,onComplete:function(){t()},queue:!0})):(f.debug("Showing results with javascript"),C.stop().fadeIn(p.duration,p.easing)),p.onResultsOpen.call(C))},hideResults:function(t){t=e.isFunction(t)?t:function(){},f.is.visible()&&(f.can.transition()?(f.debug("Hiding results with css animations"),C.transition({animation:p.transition+" out",debug:p.debug,verbose:p.verbose,duration:p.duration,onComplete:function(){t()},queue:!0})):(f.debug("Hiding results with javascript"),C.stop().fadeOut(p.duration,p.easing)),p.onResultsClose.call(C))},generateResults:function(t){f.debug("Generating html from response",t);var n=p.templates[p.type],r=e.isPlainObject(t[m.results])&&!e.isEmptyObject(t[m.results]),i=e.isArray(t[m.results])&&t[m.results].length>0,o="";return r||i?(p.maxResults>0&&(r?"standard"==p.type&&f.error(y.maxResults):t[m.results]=t[m.results].slice(0,p.maxResults)),e.isFunction(n)?o=n(t,m):f.error(y.noTemplate,!1)):p.showNoResults&&(o=f.displayMessage(y.noResults,"empty")),p.onResults.call(M,t),o},displayMessage:function(e,t){return t=t||"standard",f.debug("Displaying message",e,t),f.addResults(p.templates.message(e,t)),p.templates.message(e,t)},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===n)return p[t];p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];f[t]=n}},debug:function(){!p.silent&&p.debug&&(p.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,p.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),f.verbose.apply(console,arguments)))},error:function(){p.silent||(f.error=Function.prototype.bind.call(console.error,console,p.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,n;p.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:M,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=p.name+":",n=0;s=!1,clearTimeout(f.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),o.length>1&&(t+=" ("+o.length+")"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var o,a,s,l=E;return n=n||d,r=M||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},u?(void 0===E&&f.initialize(),f.invoke(c)):(void 0!==E&&E.invoke("destroy"),f.initialize())}),void 0!==i?i:this},e.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchOnFocus:!0,searchFields:["title","description"],displayField:"",searchFullText:!0,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(/[&<>"'`]/g,function(e){return t[e]}):e},message:function(e,t){var n="";return void 0!==e&&void 0!==t&&(n+='<div class="message '+t+'">',n+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",n+="</div>"),n},category:function(t,n){var r="";e.fn.search.settings.templates.escape;return void 0!==t[n.categoryResults]&&(e.each(t[n.categoryResults],function(t,i){void 0!==i[n.results]&&i.results.length>0&&(r+='<div class="category">',void 0!==i[n.categoryName]&&(r+='<div class="name">'+i[n.categoryName]+"</div>"),e.each(i.results,function(e,t){t[n.url]?r+='<a class="result" href="'+t[n.url]+'">':r+='<a class="result">',void 0!==t[n.image]&&(r+='<div class="image"> <img src="'+t[n.image]+'"></div>'),r+='<div class="content">',void 0!==t[n.price]&&(r+='<div class="price">'+t[n.price]+"</div>"),void 0!==t[n.title]&&(r+='<div class="title">'+t[n.title]+"</div>"),void 0!==t[n.description]&&(r+='<div class="description">'+t[n.description]+"</div>"),r+="</div>",r+="</a>"}),r+="</div>")}),t[n.action]&&(r+='<a href="'+t[n.action][n.actionURL]+'" class="action">'+t[n.action][n.actionText]+"</a>"),r)},standard:function(t,n){var r="";return void 0!==t[n.results]&&(e.each(t[n.results],function(e,t){t[n.url]?r+='<a class="result" href="'+t[n.url]+'">':r+='<a class="result">',void 0!==t[n.image]&&(r+='<div class="image"> <img src="'+t[n.image]+'"></div>'),r+='<div class="content">',void 0!==t[n.price]&&(r+='<div class="price">'+t[n.price]+"</div>"),void 0!==t[n.title]&&(r+='<div class="title">'+t[n.title]+"</div>"),void 0!==t[n.description]&&(r+='<div class="description">'+t[n.description]+"</div>"),r+="</div>",r+="</a>"}),t[n.action]&&(r+='<a href="'+t[n.action][n.actionURL]+'" class="action">'+t[n.action][n.actionText]+"</a>"),r)}}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.shape=function(r){var i,o=e(this),a=(e("body"),(new Date).getTime()),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1),d=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var t,f,p,h=o.selector||"",g=e.isPlainObject(r)?e.extend(!0,{},e.fn.shape.settings,r):e.extend({},e.fn.shape.settings),v=g.namespace,m=g.selector,b=g.error,y=g.className,x="."+v,_="module-"+v,w=e(this),k=w.find(m.sides),T=w.find(m.side),A=!1,C=this,S=w.data(_);p={initialize:function(){p.verbose("Initializing module for",C),p.set.defaultSide(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),S=p,w.data(_,S)},destroy:function(){p.verbose("Destroying previous module for",C),w.removeData(_).off(x)},refresh:function(){p.verbose("Refreshing selector cache for",C),w=e(C),k=e(this).find(m.shape),T=e(this).find(m.side)},repaint:function(){p.verbose("Forcing repaint event");(k[0]||n.createElement("div")).offsetWidth},animate:function(e,n){p.verbose("Animating box with properties",e),n=n||function(e){p.verbose("Executing animation callback"),void 0!==e&&e.stopPropagation(),p.reset(),p.set.active()},g.beforeChange.call(f[0]),p.get.transitionEvent()?(p.verbose("Starting CSS animation"),w.addClass(y.animating),k.css(e).one(p.get.transitionEvent(),n),p.set.duration(g.duration),d(function(){w.addClass(y.animating),t.addClass(y.hidden)})):n()},queue:function(e){p.debug("Queueing animation of",e),k.one(p.get.transitionEvent(),function(){p.debug("Executing queued animation"),setTimeout(function(){w.shape(e)},0)})},reset:function(){p.verbose("Animating states reset"),w.removeClass(y.animating).attr("style","").removeAttr("style"),k.attr("style","").removeAttr("style"),T.attr("style","").removeAttr("style").removeClass(y.hidden),f.removeClass(y.animating).attr("style","").removeAttr("style")},is:{complete:function(){return T.filter("."+y.active)[0]==f[0]},animating:function(){return w.hasClass(y.animating)}},set:{defaultSide:function(){t=w.find("."+g.className.active),f=t.next(m.side).length>0?t.next(m.side):w.find(m.side).first(),A=!1,p.verbose("Active side set to",t),p.verbose("Next side set to",f)},duration:function(e){e="number"==typeof(e=e||g.duration)?e+"ms":e,p.verbose("Setting animation duration",e),(g.duration||0===g.duration)&&k.add(T).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},currentStageSize:function(){var e=w.find("."+g.className.active),t=e.outerWidth(!0),n=e.outerHeight(!0);w.css({width:t,height:n})},stageSize:function(){var e=w.clone().addClass(y.loading),t=e.find("."+g.className.active),n=A?e.find(m.side).eq(A):t.next(m.side).length>0?t.next(m.side):e.find(m.side).first(),r="next"==g.width?n.outerWidth(!0):"initial"==g.width?w.width():g.width,i="next"==g.height?n.outerHeight(!0):"initial"==g.height?w.height():g.height;t.removeClass(y.active),n.addClass(y.active),e.insertAfter(w),e.remove(),"auto"!=g.width&&(w.css("width",r+g.jitter),p.verbose("Specifying width during animation",r)),"auto"!=g.height&&(w.css("height",i+g.jitter),p.verbose("Specifying height during animation",i))},nextSide:function(e){A=e,f=T.filter(e),A=T.index(f),0===f.length&&(p.set.defaultSide(),p.error(b.side)),p.verbose("Next side manually set to",f)},active:function(){p.verbose("Setting new side to active",f),T.removeClass(y.active),f.addClass(y.active),g.onChange.call(f[0]),p.set.defaultSide()}},flip:{up:function(){if(!p.is.complete()||p.is.animating()||g.allowRepeats)if(p.is.animating())p.queue("flip up");else{p.debug("Flipping up",f);var e=p.get.transform.up();p.set.stageSize(),p.stage.above(),p.animate(e)}else p.debug("Side already visible",f)},down:function(){if(!p.is.complete()||p.is.animating()||g.allowRepeats)if(p.is.animating())p.queue("flip down");else{p.debug("Flipping down",f);var e=p.get.transform.down();p.set.stageSize(),p.stage.below(),p.animate(e)}else p.debug("Side already visible",f)},left:function(){if(!p.is.complete()||p.is.animating()||g.allowRepeats)if(p.is.animating())p.queue("flip left");else{p.debug("Flipping left",f);var e=p.get.transform.left();p.set.stageSize(),p.stage.left(),p.animate(e)}else p.debug("Side already visible",f)},right:function(){if(!p.is.complete()||p.is.animating()||g.allowRepeats)if(p.is.animating())p.queue("flip right");else{p.debug("Flipping right",f);var e=p.get.transform.right();p.set.stageSize(),p.stage.right(),p.animate(e)}else p.debug("Side already visible",f)},over:function(){!p.is.complete()||p.is.animating()||g.allowRepeats?p.is.animating()?p.queue("flip over"):(p.debug("Flipping over",f),p.set.stageSize(),p.stage.behind(),p.animate(p.get.transform.over())):p.debug("Side already visible",f)},back:function(){!p.is.complete()||p.is.animating()||g.allowRepeats?p.is.animating()?p.queue("flip back"):(p.debug("Flipping back",f),p.set.stageSize(),p.stage.behind(),p.animate(p.get.transform.back())):p.debug("Side already visible",f)}},get:{transform:{up:function(){return{transform:"translateY("+-(t.outerHeight(!0)-f.outerHeight(!0))/2+"px) translateZ("+-t.outerHeight(!0)/2+"px) rotateX(-90deg)"}},down:function(){return{transform:"translateY("+-(t.outerHeight(!0)-f.outerHeight(!0))/2+"px) translateZ("+-t.outerHeight(!0)/2+"px) rotateX(90deg)"}},left:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) translateZ("+-t.outerWidth(!0)/2+"px) rotateY(90deg)"}},right:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) translateZ("+-t.outerWidth(!0)/2+"px) rotateY(-90deg)"}},over:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) rotateY(180deg)"}},back:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=n.createElement("element"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(void 0!==t.style[e])return r[e]},nextSide:function(){return t.next(m.side).length>0?t.next(m.side):w.find(m.side).first()}},stage:{above:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};p.verbose("Setting the initial animation position as above",f,e),k.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};p.verbose("Setting the initial animation position as below",f,e),k.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e=t.outerWidth(!0),n=f.outerWidth(!0),r={origin:(e-n)/2,depth:{active:n/2,next:e/2}};p.verbose("Setting the initial animation position as left",f,r),k.css({transform:"translateZ(-"+r.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+r.depth.active+"px)"}),f.addClass(y.animating).css({left:r.origin+"px",transform:"rotateY(-90deg) translateZ("+r.depth.next+"px)"})},right:function(){var e=t.outerWidth(!0),n=f.outerWidth(!0),r={origin:(e-n)/2,depth:{active:n/2,next:e/2}};p.verbose("Setting the initial animation position as left",f,r),k.css({transform:"translateZ(-"+r.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+r.depth.active+"px)"}),f.addClass(y.animating).css({left:r.origin+"px",transform:"rotateY(90deg) translateZ("+r.depth.next+"px)"})},behind:function(){var e=t.outerWidth(!0),n=f.outerWidth(!0),r={origin:(e-n)/2,depth:{active:n/2,next:e/2}};p.verbose("Setting the initial animation position as behind",f,r),t.css({transform:"rotateY(0deg)"}),f.addClass(y.animating).css({left:r.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,n){if(p.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===n)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===n)return p[t];p[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,g.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),p.verbose.apply(console,arguments)))},error:function(){g.silent||(p.error=Function.prototype.bind.call(console.error,console,g.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,n;g.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:C,"Execution Time":n})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=g.name+":",n=0;a=!1,clearTimeout(p.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",h&&(t+=" '"+h+"'"),o.length>1&&(t+=" ("+o.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,r){var o,a,s,l=S;return n=n||u,r=C||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},c?(void 0===S&&p.initialize(),p.invoke(l)):(void 0!==S&&S.invoke("destroy"),p.initialize())}),void 0!==i?i:this},e.fn.shape.settings={name:"Shape",silent:!1,debug:!1,verbose:!1,jitter:0,performance:!0,namespace:"shape",width:"initial",height:"initial",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sidebar=function(r){var i,o=e(this),a=e(t),s=e(n),l=e("html"),c=e("head"),u=o.selector||"",d=(new Date).getTime(),f=[],p=arguments[0],h="string"==typeof p,g=[].slice.call(arguments,1),v=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var o,m,b,y,x,_,w=e.isPlainObject(r)?e.extend(!0,{},e.fn.sidebar.settings,r):e.extend({},e.fn.sidebar.settings),k=w.selector,T=w.className,A=w.namespace,C=w.regExp,S=w.error,M="."+A,E="module-"+A,O=e(this),L=e(w.context),P=O.children(k.sidebar),D=(L.children(k.fixed),L.children(k.pusher)),R=this,F=O.data(E);_={initialize:function(){_.debug("Initializing sidebar",r),_.create.id(),x=_.get.transitionEvent(),w.delaySetup?v(_.setup.layout):_.setup.layout(),v(function(){_.setup.cache()}),_.instantiate()},instantiate:function(){_.verbose("Storing instance of module",_),F=_,O.data(E,_)},create:{id:function(){b=(Math.random().toString(16)+"000000000").substr(2,8),m="."+b,_.verbose("Creating unique id for element",b)}},destroy:function(){_.verbose("Destroying previous module for",O),O.off(M).removeData(E),_.is.ios()&&_.remove.ios(),L.off(m),a.off(m),s.off(m)},event:{clickaway:function(e){var t=D.find(e.target).length>0||D.is(e.target),n=L.is(e.target);t&&(_.verbose("User clicked on dimmed page"),_.hide()),n&&(_.verbose("User clicked on dimmable context (scaled out page)"),_.hide())},touch:function(e){},containScroll:function(e){R.scrollTop<=0&&(R.scrollTop=1),R.scrollTop+R.offsetHeight>=R.scrollHeight&&(R.scrollTop=R.scrollHeight-R.offsetHeight-1)},scroll:function(t){0===e(t.target).closest(k.sidebar).length&&t.preventDefault()}},bind:{clickaway:function(){_.verbose("Adding clickaway events to context",L),w.closable&&L.on("click"+m,_.event.clickaway).on("touchend"+m,_.event.clickaway)},scrollLock:function(){w.scrollLock&&(_.debug("Disabling page scroll"),a.on("DOMMouseScroll"+m,_.event.scroll)),_.verbose("Adding events to contain sidebar scroll"),s.on("touchmove"+m,_.event.touch),O.on("scroll"+M,_.event.containScroll)}},unbind:{clickaway:function(){_.verbose("Removing clickaway events from context",L),L.off(m)},scrollLock:function(){_.verbose("Removing scroll lock from page"),s.off(m),a.off(m),O.off("scroll"+M)}},add:{inlineCSS:function(){var t,n=_.cache.width||O.outerWidth(),r=_.cache.height||O.outerHeight(),i=_.is.rtl(),a=_.get.direction(),s={left:n,right:-n,top:r,bottom:-r};i&&(_.verbose("RTL detected, flipping widths"),s.left=-n,s.right=n),t="<style>","left"===a||"right"===a?(_.debug("Adding CSS rules for animation distance",n),t+=" .ui.visible."+a+".sidebar ~ .fixed, .ui.visible."+a+".sidebar ~ .pusher {   -webkit-transform: translate3d("+s[a]+"px, 0, 0);           transform: translate3d("+s[a]+"px, 0, 0); }"):"top"!==a&&"bottom"!=a||(t+=" .ui.visible."+a+".sidebar ~ .fixed, .ui.visible."+a+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+s[a]+"px, 0);           transform: translate3d(0, "+s[a]+"px, 0); }"),_.is.ie()&&("left"===a||"right"===a?(_.debug("Adding CSS rules for animation distance",n),t+=" body.pushable > .ui.visible."+a+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+s[a]+"px, 0, 0);           transform: translate3d("+s[a]+"px, 0, 0); }"):"top"!==a&&"bottom"!=a||(t+=" body.pushable > .ui.visible."+a+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+s[a]+"px, 0);           transform: translate3d(0, "+s[a]+"px, 0); }"),t+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"),o=e(t+="</style>").appendTo(c),_.debug("Adding sizing css to head",o)}},refresh:function(){_.verbose("Refreshing selector cache"),L=e(w.context),P=L.children(k.sidebar),D=L.children(k.pusher),L.children(k.fixed),_.clear.cache()},refreshSidebars:function(){_.verbose("Refreshing other sidebars"),P=L.children(k.sidebar)},repaint:function(){_.verbose("Forcing repaint event"),R.style.display="none";R.offsetHeight;R.scrollTop=R.scrollTop,R.style.display=""},setup:{cache:function(){_.cache={width:O.outerWidth(),height:O.outerHeight(),rtl:"rtl"==O.css("direction")}},layout:function(){0===L.children(k.pusher).length&&(_.debug("Adding wrapper element for sidebar"),_.error(S.pusher),D=e('<div class="pusher" />'),L.children().not(k.omitted).not(P).wrapAll(D),_.refresh()),0!==O.nextAll(k.pusher).length&&O.nextAll(k.pusher)[0]===D[0]||(_.debug("Moved sidebar to correct parent element"),_.error(S.movedSidebar,R),O.detach().prependTo(L),_.refresh()),_.clear.cache(),_.set.pushable(),_.set.direction()}},attachEvents:function(t,n){var r=e(t);n=e.isFunction(_[n])?_[n]:_.toggle,r.length>0?(_.debug("Attaching sidebar events to element",t,n),r.on("click"+M,n)):_.error(S.notFound,t)},show:function(t){if(t=e.isFunction(t)?t:function(){},_.is.hidden()){if(_.refreshSidebars(),w.overlay&&(_.error(S.overlay),w.transition="overlay"),_.refresh(),_.othersActive())if(_.debug("Other sidebars currently visible"),w.exclusive){if("overlay"!=w.transition)return void _.hideOthers(_.show);_.hideOthers()}else w.transition="overlay";_.pushPage(function(){t.call(R),w.onShow.call(R)}),w.onChange.call(R),w.onVisible.call(R)}else _.debug("Sidebar is already visible")},hide:function(t){t=e.isFunction(t)?t:function(){},(_.is.visible()||_.is.animating())&&(_.debug("Hiding sidebar",t),_.refreshSidebars(),_.pullPage(function(){t.call(R),w.onHidden.call(R)}),w.onChange.call(R),w.onHide.call(R))},othersAnimating:function(){return P.not(O).filter("."+T.animating).length>0},othersVisible:function(){return P.not(O).filter("."+T.visible).length>0},othersActive:function(){return _.othersVisible()||_.othersAnimating()},hideOthers:function(e){var t=P.not(O).filter("."+T.visible),n=t.length,r=0;e=e||function(){},t.sidebar("hide",function(){++r==n&&e()})},toggle:function(){_.verbose("Determining toggled direction"),_.is.hidden()?_.show():_.hide()},pushPage:function(t){var n,r,i,o=_.get.transition(),a="overlay"===o||_.othersActive()?O:D;t=e.isFunction(t)?t:function(){},"scale down"==w.transition&&_.scrollToTop(),_.set.transition(o),_.repaint(),n=function(){_.bind.clickaway(),_.add.inlineCSS(),_.set.animating(),_.set.visible()},r=function(){_.set.dimmed()},i=function(e){e.target==a[0]&&(a.off(x+m,i),_.remove.animating(),_.bind.scrollLock(),t.call(R))},a.off(x+m),a.on(x+m,i),v(n),w.dimPage&&!_.othersVisible()&&v(r)},pullPage:function(t){var n,r,i=_.get.transition(),o="overlay"==i||_.othersActive()?O:D;t=e.isFunction(t)?t:function(){},_.verbose("Removing context push state",_.get.direction()),_.unbind.clickaway(),_.unbind.scrollLock(),n=function(){_.set.transition(i),_.set.animating(),_.remove.visible(),w.dimPage&&!_.othersVisible()&&D.removeClass(T.dimmed)},r=function(e){e.target==o[0]&&(o.off(x+m,r),_.remove.animating(),_.remove.transition(),_.remove.inlineCSS(),("scale down"==i||w.returnScroll&&_.is.mobile())&&_.scrollBack(),t.call(R))},o.off(x+m),o.on(x+m,r),v(n)},scrollToTop:function(){_.verbose("Scrolling to top of page to avoid animation issues"),y=e(t).scrollTop(),O.scrollTop(0),t.scrollTo(0,0)},scrollBack:function(){_.verbose("Scrolling back to original page position"),t.scrollTo(0,y)},clear:{cache:function(){_.verbose("Clearing cached dimensions"),_.cache={}}},set:{ios:function(){l.addClass(T.ios)},pushed:function(){L.addClass(T.pushed)},pushable:function(){L.addClass(T.pushable)},dimmed:function(){D.addClass(T.dimmed)},active:function(){O.addClass(T.active)},animating:function(){O.addClass(T.animating)},transition:function(e){e=e||_.get.transition(),O.addClass(e)},direction:function(e){e=e||_.get.direction(),O.addClass(T[e])},visible:function(){O.addClass(T.visible)},overlay:function(){O.addClass(T.overlay)}},remove:{inlineCSS:function(){_.debug("Removing inline css styles",o),o&&o.length>0&&o.remove()},ios:function(){l.removeClass(T.ios)},pushed:function(){L.removeClass(T.pushed)},pushable:function(){L.removeClass(T.pushable)},active:function(){O.removeClass(T.active)},animating:function(){O.removeClass(T.animating)},transition:function(e){e=e||_.get.transition(),O.removeClass(e)},direction:function(e){e=e||_.get.direction(),O.removeClass(T[e])},visible:function(){O.removeClass(T.visible)},overlay:function(){O.removeClass(T.overlay)}},get:{direction:function(){return O.hasClass(T.top)?T.top:O.hasClass(T.right)?T.right:O.hasClass(T.bottom)?T.bottom:T.left},transition:function(){var e,t=_.get.direction();return e=_.is.mobile()?"auto"==w.mobileTransition?w.defaultTransition.mobile[t]:w.mobileTransition:"auto"==w.transition?w.defaultTransition.computer[t]:w.transition,_.verbose("Determined transition",e),e},transitionEvent:function(){var e,t=n.createElement("element"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(void 0!==t.style[e])return r[e]}},is:{ie:function(){return!t.ActiveXObject&&"ActiveXObject"in t||"ActiveXObject"in t},ios:function(){var e=navigator.userAgent,t=e.match(C.ios),n=e.match(C.mobileChrome);return!(!t||n)&&(_.verbose("Browser was found to be iOS",e),!0)},mobile:function(){var e=navigator.userAgent;return e.match(C.mobile)?(_.verbose("Browser was found to be mobile",e),!0):(_.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!_.is.visible()},visible:function(){return O.hasClass(T.visible)},open:function(){return _.is.visible()},closed:function(){return _.is.hidden()},vertical:function(){return O.hasClass(T.top)},animating:function(){return L.hasClass(T.animating)},rtl:function(){return void 0===_.cache.rtl&&(_.cache.rtl="rtl"==O.css("direction")),_.cache.rtl}},setting:function(t,n){if(_.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,w,t);else{if(void 0===n)return w[t];e.isPlainObject(w[t])?e.extend(!0,w[t],n):w[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,_,t);else{if(void 0===n)return _[t];_[t]=n}},debug:function(){!w.silent&&w.debug&&(w.performance?_.performance.log(arguments):(_.debug=Function.prototype.bind.call(console.info,console,w.name+":"),_.debug.apply(console,arguments)))},verbose:function(){!w.silent&&w.verbose&&w.debug&&(w.performance?_.performance.log(arguments):(_.verbose=Function.prototype.bind.call(console.info,console,w.name+":"),_.verbose.apply(console,arguments)))},error:function(){w.silent||(_.error=Function.prototype.bind.call(console.error,console,w.name+":"),_.error.apply(console,arguments))},performance:{log:function(e){var t,n;w.performance&&(n=(t=(new Date).getTime())-(d||t),d=t,f.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(_.performance.timer),_.performance.timer=setTimeout(_.performance.display,500)},display:function(){var t=w.name+":",n=0;d=!1,clearTimeout(_.performance.timer),e.each(f,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",u&&(t+=" '"+u+"'"),(void 0!==console.group||void 0!==console.table)&&f.length>0&&(console.groupCollapsed(t),console.table?console.table(f):e.each(f,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),f=[]}},invoke:function(t,n,r){var o,a,s,l=F;return n=n||g,r=R||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(_.error(S.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},h?(void 0===F&&_.initialize(),_.invoke(p)):(void 0!==F&&_.invoke("destroy"),_.initialize())}),void 0!==i?i:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sticky=function(r){var i,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return o.each(function(){var o,f,p,h,g,v=e.isPlainObject(r)?e.extend(!0,{},e.fn.sticky.settings,r):e.extend({},e.fn.sticky.settings),m=v.className,b=v.namespace,y=v.error,x="."+b,_="module-"+b,w=e(this),k=e(t),T=e(v.scrollContext),A=(w.selector,w.data(_)),C=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},S=this;g={initialize:function(){g.determineContainer(),g.determineContext(),g.verbose("Initializing sticky",v,o),g.save.positions(),g.checkErrors(),g.bind.events(),v.observeChanges&&g.observeChanges(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),A=g,w.data(_,g)},destroy:function(){g.verbose("Destroying previous instance"),g.reset(),p&&p.disconnect(),h&&h.disconnect(),k.off("load"+x,g.event.load).off("resize"+x,g.event.resize),T.off("scrollchange"+x,g.event.scrollchange),w.removeData(_)},observeChanges:function(){"MutationObserver"in t&&(p=new MutationObserver(g.event.documentChanged),h=new MutationObserver(g.event.changed),p.observe(n,{childList:!0,subtree:!0}),h.observe(S,{childList:!0,subtree:!0}),h.observe(f[0],{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",h))},determineContainer:function(){o=v.container?e(v.container):w.offsetParent()},determineContext:function(){0!==(f=v.context?e(v.context):o).length||g.error(y.invalidContext,v.context,w)},checkErrors:function(){if(g.is.hidden()&&g.error(y.visible,w),g.cache.element.height>g.cache.context.height)return g.reset(),void g.error(y.elementSize,w)},bind:{events:function(){k.on("load"+x,g.event.load).on("resize"+x,g.event.resize),T.off("scroll"+x).on("scroll"+x,g.event.scroll).on("scrollchange"+x,g.event.scrollchange)}},event:{changed:function(e){clearTimeout(g.timer),g.timer=setTimeout(function(){g.verbose("DOM tree modified, updating sticky menu",e),g.refresh()},100)},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==S||e(t).find(S).length>0)&&(g.debug("Element removed from DOM, tearing down events"),g.destroy())})})},load:function(){g.verbose("Page contents finished loading"),C(g.refresh)},resize:function(){g.verbose("Window resized"),C(g.refresh)},scroll:function(){C(function(){T.triggerHandler("scrollchange"+x,T.scrollTop())})},scrollchange:function(e,t){g.stick(t),v.onScroll.call(S)}},refresh:function(e){g.reset(),v.context||g.determineContext(),e&&g.determineContainer(),g.save.positions(),g.stick(),v.onReposition.call(S)},supports:{sticky:function(){var t=e("<div/>");t[0];return t.addClass(m.supported),t.css("position").match("sticky")}},save:{lastScroll:function(e){g.lastScroll=e},elementScroll:function(e){g.elementScroll=e},positions:function(){var e={height:T.height()},t={margin:{top:parseInt(w.css("margin-top"),10),bottom:parseInt(w.css("margin-bottom"),10)},offset:w.offset(),width:w.outerWidth(),height:w.outerHeight()},n={offset:f.offset(),height:f.outerHeight()};o.outerHeight();g.is.standardScroll()||(g.debug("Non-standard scroll. Removing scroll offset from element offset"),e.top=T.scrollTop(),e.left=T.scrollLeft(),t.offset.top+=e.top,n.offset.top+=e.top,t.offset.left+=e.left,n.offset.left+=e.left),g.cache={fits:t.height+v.offset<=e.height,sameHeight:t.height==n.height,scrollContext:{height:e.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:n.offset.top,height:n.height,bottom:n.offset.top+n.height}},g.set.containerSize(),g.stick(),g.debug("Caching element positions",g.cache)}},get:{direction:function(e){var t="down";return e=e||T.scrollTop(),void 0!==g.lastScroll&&(g.lastScroll<e?t="down":g.lastScroll>e&&(t="up")),t},scrollChange:function(e){return e=e||T.scrollTop(),g.lastScroll?e-g.lastScroll:0},currentElementScroll:function(){return g.elementScroll?g.elementScroll:g.is.top()?Math.abs(parseInt(w.css("top"),10))||0:Math.abs(parseInt(w.css("bottom"),10))||0},elementScroll:function(e){e=e||T.scrollTop();var t=g.cache.element,n=g.cache.scrollContext,r=g.get.scrollChange(e),i=t.height-n.height+v.offset,o=g.get.currentElementScroll(),a=o+r;return o=g.cache.fits||a<0?0:a>i?i:a}},remove:{lastScroll:function(){delete g.lastScroll},elementScroll:function(e){delete g.elementScroll},minimumSize:function(){o.css("min-height","")},offset:function(){w.css("margin-top","")}},set:{offset:function(){g.verbose("Setting offset on element",v.offset),w.css("margin-top",v.offset)},containerSize:function(){var e=o.get(0).tagName;"HTML"===e||"body"==e?g.determineContainer():Math.abs(o.outerHeight()-g.cache.context.height)>v.jitter&&(g.debug("Context has padding, specifying exact height for container",g.cache.context.height),o.css({height:g.cache.context.height}))},minimumSize:function(){var e=g.cache.element;o.css("min-height",e.height)},scroll:function(e){g.debug("Setting scroll on element",e),g.elementScroll!=e&&(g.is.top()&&w.css("bottom","").css("top",-e),g.is.bottom()&&w.css("top","").css("bottom",e))},size:function(){0!==g.cache.element.height&&0!==g.cache.element.width&&(S.style.setProperty("width",g.cache.element.width+"px","important"),S.style.setProperty("height",g.cache.element.height+"px","important"))}},is:{standardScroll:function(){return T[0]==t},top:function(){return w.hasClass(m.top)},bottom:function(){return w.hasClass(m.bottom)},initialPosition:function(){return!g.is.fixed()&&!g.is.bound()},hidden:function(){return!w.is(":visible")},bound:function(){return w.hasClass(m.bound)},fixed:function(){return w.hasClass(m.fixed)}},stick:function(e){var t=e||T.scrollTop(),n=g.cache,r=n.fits,i=n.sameHeight,o=n.element,a=n.scrollContext,s=n.context,l=g.is.bottom()&&v.pushing?v.bottomOffset:v.offset,c=(e={top:t+l,bottom:t+l+a.height},g.get.direction(e.top),r?0:g.get.elementScroll(e.top)),u=!r;0!==o.height&&!i&&(g.is.initialPosition()?e.top>=s.bottom?(g.debug("Initial element position is bottom of container"),g.bindBottom()):e.top>o.top&&(o.height+e.top-c>=s.bottom?(g.debug("Initial element position is bottom of container"),g.bindBottom()):(g.debug("Initial element position is fixed"),g.fixTop())):g.is.fixed()?g.is.top()?e.top<=o.top?(g.debug("Fixed element reached top of container"),g.setInitialPosition()):o.height+e.top-c>=s.bottom?(g.debug("Fixed element reached bottom of container"),g.bindBottom()):u&&(g.set.scroll(c),g.save.lastScroll(e.top),g.save.elementScroll(c)):g.is.bottom()&&(e.bottom-o.height<=o.top?(g.debug("Bottom fixed rail has reached top of container"),g.setInitialPosition()):e.bottom>=s.bottom?(g.debug("Bottom fixed rail has reached bottom of container"),g.bindBottom()):u&&(g.set.scroll(c),g.save.lastScroll(e.top),g.save.elementScroll(c))):g.is.bottom()&&(e.top<=o.top?(g.debug("Jumped from bottom fixed to top fixed, most likely used home/end button"),g.setInitialPosition()):v.pushing?g.is.bound()&&e.bottom<=s.bottom&&(g.debug("Fixing bottom attached element to bottom of browser."),g.fixBottom()):g.is.bound()&&e.top<=s.bottom-o.height&&(g.debug("Fixing bottom attached element to top of browser."),g.fixTop())))},bindTop:function(){g.debug("Binding element to top of parent container"),g.remove.offset(),w.css({left:"",top:"",marginBottom:""}).removeClass(m.fixed).removeClass(m.bottom).addClass(m.bound).addClass(m.top),v.onTop.call(S),v.onUnstick.call(S)},bindBottom:function(){g.debug("Binding element to bottom of parent container"),g.remove.offset(),w.css({left:"",top:""}).removeClass(m.fixed).removeClass(m.top).addClass(m.bound).addClass(m.bottom),v.onBottom.call(S),v.onUnstick.call(S)},setInitialPosition:function(){g.debug("Returning to initial position"),g.unfix(),g.unbind()},fixTop:function(){g.debug("Fixing element to top of page"),v.setSize&&g.set.size(),g.set.minimumSize(),g.set.offset(),w.css({left:g.cache.element.left,bottom:"",marginBottom:""}).removeClass(m.bound).removeClass(m.bottom).addClass(m.fixed).addClass(m.top),v.onStick.call(S)},fixBottom:function(){g.debug("Sticking element to bottom of page"),v.setSize&&g.set.size(),g.set.minimumSize(),g.set.offset(),w.css({left:g.cache.element.left,bottom:"",marginBottom:""}).removeClass(m.bound).removeClass(m.top).addClass(m.fixed).addClass(m.bottom),v.onStick.call(S)},unbind:function(){g.is.bound()&&(g.debug("Removing container bound position on element"),g.remove.offset(),w.removeClass(m.bound).removeClass(m.top).removeClass(m.bottom))},unfix:function(){g.is.fixed()&&(g.debug("Removing fixed position on element"),g.remove.minimumSize(),g.remove.offset(),w.removeClass(m.fixed).removeClass(m.top).removeClass(m.bottom),v.onUnstick.call(S))},reset:function(){g.debug("Resetting elements position"),g.unbind(),g.unfix(),g.resetCSS(),g.remove.offset(),g.remove.lastScroll()},resetCSS:function(){w.css({width:"",height:""}),o.css({height:""})},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(void 0===n)return v[t];v[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===n)return g[t];g[t]=n}},debug:function(){!v.silent&&v.debug&&(v.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,v.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),g.verbose.apply(console,arguments)))},error:function(){v.silent||(g.error=Function.prototype.bind.call(console.error,console,v.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,n;v.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,0)},display:function(){var t=v.name+":",n=0;s=!1,clearTimeout(g.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var o,a,s,l=A;return n=n||d,r=S||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},u?(void 0===A&&g.initialize(),g.invoke(c)):(void 0!==A&&A.invoke("destroy"),g.initialize())}),void 0!==i?i:this},e.fn.sticky.settings={name:"Sticky",namespace:"sticky",silent:!1,debug:!1,verbose:!0,performance:!0,pushing:!1,context:!1,container:!1,scrollContext:t,offset:0,bottomOffset:0,jitter:5,setSize:!0,observeChanges:!1,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible. Use silent setting to surpress this warning in production.",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.tab=function(r){var i,o=e.isFunction(this)?e(t):e(this),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1),f=!1;return o.each(function(){var p,h,g,v,m,b,y=e.isPlainObject(r)?e.extend(!0,{},e.fn.tab.settings,r):e.extend({},e.fn.tab.settings),x=y.className,_=y.metadata,w=y.selector,k=y.error,T="."+y.namespace,A="module-"+y.namespace,C=e(this),S={},M=!0,E=0,O=this,L=C.data(A);m={initialize:function(){m.debug("Initializing tab menu item",C),m.fix.callbacks(),m.determineTabs(),m.debug("Determining tabs",y.context,h),y.auto&&m.set.auto(),m.bind.events(),y.history&&!f&&(m.initializeHistory(),f=!0),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),L=m,C.data(A,m)},destroy:function(){m.debug("Destroying tabs",C),C.removeData(A).off(T)},bind:{events:function(){e.isWindow(O)||(m.debug("Attaching tab activation events to element",C),C.on("click"+T,m.event.click))}},determineTabs:function(){var t;"parent"===y.context?(C.closest(w.ui).length>0?(t=C.closest(w.ui),m.verbose("Using closest UI element as parent",t)):t=C,p=t.parent(),m.verbose("Determined parent element for creating context",p)):y.context?(p=e(y.context),m.verbose("Using selector for tab context",y.context,p)):p=e("body"),y.childrenOnly?(h=p.children(w.tabs),m.debug("Searching tab context children for tabs",p,h)):(h=p.find(w.tabs),m.debug("Searching tab context for tabs",p,h))},fix:{callbacks:function(){e.isPlainObject(r)&&(r.onTabLoad||r.onTabInit)&&(r.onTabLoad&&(r.onLoad=r.onTabLoad,delete r.onTabLoad,m.error(k.legacyLoad,r.onLoad)),r.onTabInit&&(r.onFirstLoad=r.onTabInit,delete r.onTabInit,m.error(k.legacyInit,r.onFirstLoad)),y=e.extend(!0,{},e.fn.tab.settings,r))}},initializeHistory:function(){if(m.debug("Initializing page state"),void 0===e.address)return m.error(k.state),!1;if("state"==y.historyType){if(m.debug("Using HTML5 to manage state"),!1===y.path)return m.error(k.path),!1;e.address.history(!0).state(y.path)}e.address.bind("change",m.event.history.change)},event:{click:function(t){var n=e(this).data(_.tab);void 0!==n?(y.history?(m.verbose("Updating page state",t),e.address.value(n)):(m.verbose("Changing tab",t),m.changeTab(n)),t.preventDefault()):m.debug("No tab specified")},history:{change:function(t){var n=t.pathNames.join("/")||m.get.initialPath(),r=y.templates.determineTitle(n)||!1;m.performance.display(),m.debug("History change event",n,t),b=t,void 0!==n&&m.changeTab(n),r&&e.address.title(r)}}},refresh:function(){g&&(m.debug("Refreshing tab",g),m.changeTab(g))},cache:{read:function(e){return void 0!==e&&S[e]},add:function(e,t){e=e||g,m.debug("Adding cached content for",e),S[e]=t},remove:function(e){e=e||g,m.debug("Removing cached content for",e),delete S[e]}},set:{auto:function(){var t="string"==typeof y.path?y.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";m.verbose("Setting up automatic tab retrieval from server",t),e.isPlainObject(y.apiSettings)?y.apiSettings.url=t:y.apiSettings={url:t}},loading:function(e){var t=m.get.tabElement(e);t.hasClass(x.loading)||(m.verbose("Setting loading state for",t),t.addClass(x.loading).siblings(h).removeClass(x.active+" "+x.loading),t.length>0&&y.onRequest.call(t[0],e))},state:function(t){e.address.value(t)}},changeTab:function(n){var r=t.history&&t.history.pushState&&y.ignoreFirstLoad&&M,i=y.auto||e.isPlainObject(y.apiSettings),o=i&&!r?m.utilities.pathToArray(n):m.get.defaultPathArray(n);n=m.utilities.arrayToPath(o),e.each(o,function(t,a){var s,l,c,u,d=o.slice(0,t+1),f=m.utilities.arrayToPath(d),h=m.is.tab(f),w=t+1==o.length,T=m.get.tabElement(f);if(m.verbose("Looking for tab",a),h){if(m.verbose("Tab was found",a),g=f,v=m.utilities.filterArray(o,d),w?u=!0:(l=o.slice(0,t+2),c=m.utilities.arrayToPath(l),(u=!m.is.tab(c))&&m.verbose("Tab parameters found",l)),u&&i)return r?(m.debug("Ignoring remote content on first tab load",f),M=!1,m.cache.add(n,T.html()),m.activate.all(f),y.onFirstLoad.call(T[0],f,v,b),y.onLoad.call(T[0],f,v,b)):(m.activate.navigation(f),m.fetch.content(f,n)),!1;m.debug("Opened local tab",f),m.activate.all(f),m.cache.read(f)||(m.cache.add(f,!0),m.debug("First time tab loaded calling tab init"),y.onFirstLoad.call(T[0],f,v,b)),y.onLoad.call(T[0],f,v,b)}else{if(-1!=n.search("/")||""===n)return m.error(k.missingTab,C,p,f),!1;if(f=(s=e("#"+n+', a[name="'+n+'"]')).closest("[data-tab]").data(_.tab),T=m.get.tabElement(f),s&&s.length>0&&f)return m.debug("Anchor link used, opening parent tab",T,s),T.hasClass(x.active)||setTimeout(function(){m.scrollTo(s)},0),m.activate.all(f),m.cache.read(f)||(m.cache.add(f,!0),m.debug("First time tab loaded calling tab init"),y.onFirstLoad.call(T[0],f,v,b)),y.onLoad.call(T[0],f,v,b),!1}})},scrollTo:function(t){var r=!!(t&&t.length>0)&&t.offset().top;!1!==r&&(m.debug("Forcing scroll to an in-page link in a hidden tab",r,t),e(n).scrollTop(r))},update:{content:function(t,n,r){var i=m.get.tabElement(t),o=i[0];r=void 0!==r?r:y.evaluateScripts,"string"==typeof y.cacheType&&"dom"==y.cacheType.toLowerCase()&&"string"!=typeof n?i.empty().append(e(n).clone(!0)):r?(m.debug("Updating HTML and evaluating inline scripts",t,n),i.html(n)):(m.debug("Updating HTML",t,n),o.innerHTML=n)}},fetch:{content:function(t,n){var r,i,o=m.get.tabElement(t),a={dataType:"html",encodeParameters:!1,on:"now",cache:y.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(e){"response"==y.cacheType&&m.cache.add(n,e),m.update.content(t,e),t==g?(m.debug("Content loaded",t),m.activate.tab(t)):m.debug("Content loaded in background",t),y.onFirstLoad.call(o[0],t,v,b),y.onLoad.call(o[0],t,v,b),y.loadOnce?m.cache.add(n,!0):"string"==typeof y.cacheType&&"dom"==y.cacheType.toLowerCase()&&o.children().length>0?setTimeout(function(){var e=o.children().clone(!0);e=e.not("script"),m.cache.add(n,e)},0):m.cache.add(n,o.html())},urlData:{tab:n}},s=o.api("get request")||!1,l=s&&"pending"===s.state();n=n||t,i=m.cache.read(n),y.cache&&i?(m.activate.tab(t),m.debug("Adding cached content",n),y.loadOnce||("once"==y.evaluateScripts?m.update.content(t,i,!1):m.update.content(t,i)),y.onLoad.call(o[0],t,v,b)):l?(m.set.loading(t),m.debug("Content is already loading",n)):void 0!==e.api?(r=e.extend(!0,{},y.apiSettings,a),m.debug("Retrieving remote content",n,r),m.set.loading(t),o.api(r)):m.error(k.api)}},activate:{all:function(e){m.activate.tab(e),m.activate.navigation(e)},tab:function(e){var t=m.get.tabElement(e),n="siblings"==y.deactivate?t.siblings(h):h.not(t),r=t.hasClass(x.active);m.verbose("Showing tab content for",t),r||(t.addClass(x.active),n.removeClass(x.active+" "+x.loading),t.length>0&&y.onVisible.call(t[0],e))},navigation:function(e){var t=m.get.navElement(e),n="siblings"==y.deactivate?t.siblings(o):o.not(t),r=t.hasClass(x.active);m.verbose("Activating tab navigation for",t,e),r||(t.addClass(x.active),n.removeClass(x.active+" "+x.loading))}},deactivate:{all:function(){m.deactivate.navigation(),m.deactivate.tabs()},navigation:function(){o.removeClass(x.active)},tabs:function(){h.removeClass(x.active+" "+x.loading)}},is:{tab:function(e){return void 0!==e&&m.get.tabElement(e).length>0}},get:{initialPath:function(){return o.eq(0).data(_.tab)||h.eq(0).data(_.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return m.utilities.pathToArray(m.get.defaultPath(e))},defaultPath:function(e){var t=o.filter("[data-"+_.tab+'^="'+e+'/"]').eq(0).data(_.tab)||!1;if(t){if(m.debug("Found default tab",t),E<y.maxDepth)return E++,m.get.defaultPath(t);m.error(k.recursion)}else m.debug("No default tabs found for",e,h);return E=0,e},navElement:function(e){return e=e||g,o.filter("[data-"+_.tab+'="'+e+'"]')},tabElement:function(e){var t,n,r,i;return e=e||g,r=m.utilities.pathToArray(e),i=m.utilities.last(r),t=h.filter("[data-"+_.tab+'="'+e+'"]'),n=h.filter("[data-"+_.tab+'="'+i+'"]'),t.length>0?t:n},tab:function(){return g}},utilities:{filterArray:function(t,n){return e.grep(t,function(t){return-1==e.inArray(t,n)})},last:function(t){return!!e.isArray(t)&&t[t.length-1]},pathToArray:function(e){return void 0===e&&(e=g),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return!!e.isArray(t)&&t.join("/")}},setting:function(t,n){if(m.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,y,t);else{if(void 0===n)return y[t];e.isPlainObject(y[t])?e.extend(!0,y[t],n):y[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(void 0===n)return m[t];m[t]=n}},debug:function(){!y.silent&&y.debug&&(y.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,y.name+":"),m.debug.apply(console,arguments)))},verbose:function(){!y.silent&&y.verbose&&y.debug&&(y.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,y.name+":"),m.verbose.apply(console,arguments)))},error:function(){y.silent||(m.error=Function.prototype.bind.call(console.error,console,y.name+":"),m.error.apply(console,arguments))},performance:{log:function(e){var t,n;y.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:O,"Execution Time":n})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var t=y.name+":",n=0;s=!1,clearTimeout(m.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var o,a,s,l=L;return n=n||d,r=O||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(m.error(k.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},u?(void 0===L&&m.initialize(),m.invoke(c)):(void 0!==L&&L.invoke("destroy"),m.initialize())}),void 0!==i?i:this},e.tab=function(){e(t).tab.apply(this,arguments)},e.fn.tab.settings={name:"Tab",namespace:"tab",silent:!1,debug:!1,verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,deactivate:"siblings",alwaysRefresh:!1,cache:!0,loadOnce:!1,cacheType:"response",ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",onFirstLoad:function(e,t,n){},onLoad:function(e,t,n){},onVisible:function(e,t,n){},onRequest:function(e,t,n){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.transition=function(){var r,i=e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments,c=l[0],u=[].slice.call(arguments,1),d="string"==typeof c;t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame;return i.each(function(t){var f,p,h,g,v,m,b,y,x,_=e(this),w=this;(x={initialize:function(){f=x.get.settings.apply(w,l),g=f.className,h=f.error,v=f.metadata,y="."+f.namespace,b="module-"+f.namespace,p=_.data(b)||x,m=x.get.animationEndEvent(),d&&(d=x.invoke(c)),!1===d&&(x.verbose("Converted arguments into settings object",f),f.interval?x.delay(f.animate):x.animate(),x.instantiate())},instantiate:function(){x.verbose("Storing instance of module",x),p=x,_.data(b,p)},destroy:function(){x.verbose("Destroying previous module for",w),_.removeData(b)},refresh:function(){x.verbose("Refreshing display type on next animation"),delete x.displayType},forceRepaint:function(){x.verbose("Forcing element repaint");var e=_.parent(),t=_.next();0===t.length?_.detach().appendTo(e):_.detach().insertBefore(t)},repaint:function(){x.verbose("Repainting element");w.offsetWidth},delay:function(e){var n,r=x.get.animationDirection();r||(r=x.can.transition()?x.get.direction():"static"),e=void 0!==e?e:f.interval,n="auto"==f.reverse&&r==g.outward||1==f.reverse?(i.length-t)*f.interval:t*f.interval,x.debug("Delaying animation by",n),setTimeout(x.animate,n)},animate:function(e){if(f=e||f,!x.is.supported())return x.error(h.support),!1;if(x.debug("Preparing animation",f.animation),x.is.animating()){if(f.queue)return!f.allowRepeats&&x.has.direction()&&x.is.occurring()&&!0!==x.queuing?x.debug("Animation is currently occurring, preventing queueing same animation",f.animation):x.queue(f.animation),!1;if(!f.allowRepeats&&x.is.occurring())return x.debug("Animation is already occurring, will not execute repeated animation",f.animation),!1;x.debug("New animation started, completing previous early",f.animation),p.complete()}x.can.animate()?x.set.animating(f.animation):x.error(h.noAnimation,f.animation,w)},reset:function(){x.debug("Resetting animation to beginning conditions"),x.remove.animationCallbacks(),x.restore.conditions(),x.remove.animating()},queue:function(e){x.debug("Queueing animation of",e),x.queuing=!0,_.one(m+".queue"+y,function(){x.queuing=!1,x.repaint(),x.animate.apply(this,f)})},complete:function(e){x.debug("Animation complete",f.animation),x.remove.completeCallback(),x.remove.failSafe(),x.is.looping()||(x.is.outward()?(x.verbose("Animation is outward, hiding element"),x.restore.conditions(),x.hide()):x.is.inward()?(x.verbose("Animation is outward, showing element"),x.restore.conditions(),x.show()):(x.verbose("Static animation completed"),x.restore.conditions(),f.onComplete.call(w)))},force:{visible:function(){var e=_.attr("style"),t=x.get.userStyle(),n=x.get.displayType(),r=t+"display: "+n+" !important;",i=_.css("display"),o=void 0===e||""===e;i!==n?(x.verbose("Overriding default display to show element",n),_.attr("style",r)):o&&_.removeAttr("style")},hidden:function(){var e=_.attr("style"),t=_.css("display"),n=void 0===e||""===e;"none"===t||x.is.hidden()?n&&_.removeAttr("style"):(x.verbose("Overriding default display to hide element"),_.css("display","none"))}},has:{direction:function(t){var n=!1;return"string"==typeof(t=t||f.animation)&&(t=t.split(" "),e.each(t,function(e,t){t!==g.inward&&t!==g.outward||(n=!0)})),n},inlineDisplay:function(){var t=_.attr("style")||"";return e.isArray(t.match(/display.*?;/,""))}},set:{animating:function(e){var t;x.remove.completeCallback(),e=e||f.animation,t=x.get.animationClass(e),x.save.animation(t),x.force.visible(),x.remove.hidden(),x.remove.direction(),x.start.animation(t)},duration:function(e,t){((t="number"==typeof(t=t||f.duration)?t+"ms":t)||0===t)&&(x.verbose("Setting animation duration",t),_.css({"animation-duration":t}))},direction:function(e){(e=e||x.get.direction())==g.inward?x.set.inward():x.set.outward()},looping:function(){x.debug("Transition set to loop"),_.addClass(g.looping)},hidden:function(){_.addClass(g.transition).addClass(g.hidden)},inward:function(){x.debug("Setting direction to inward"),_.removeClass(g.outward).addClass(g.inward)},outward:function(){x.debug("Setting direction to outward"),_.removeClass(g.inward).addClass(g.outward)},visible:function(){_.addClass(g.transition).addClass(g.visible)}},start:{animation:function(e){e=e||x.get.animationClass(),x.debug("Starting tween",e),_.addClass(e).one(m+".complete"+y,x.complete),f.useFailSafe&&x.add.failSafe(),x.set.duration(f.duration),f.onStart.call(w)}},save:{animation:function(e){x.cache||(x.cache={}),x.cache.animation=e},displayType:function(e){"none"!==e&&_.data(v.displayType,e)},transitionExists:function(t,n){e.fn.transition.exists[t]=n,x.verbose("Saving existence of transition",t,n)}},restore:{conditions:function(){var e=x.get.currentAnimation();e&&(_.removeClass(e),x.verbose("Removing animation class",x.cache)),x.remove.duration()}},add:{failSafe:function(){var e=x.get.duration();x.timer=setTimeout(function(){_.triggerHandler(m)},e+f.failSafeDelay),x.verbose("Adding fail safe timer",x.timer)}},remove:{animating:function(){_.removeClass(g.animating)},animationCallbacks:function(){x.remove.queueCallback(),x.remove.completeCallback()},queueCallback:function(){_.off(".queue"+y)},completeCallback:function(){_.off(".complete"+y)},display:function(){_.css("display","")},direction:function(){_.removeClass(g.inward).removeClass(g.outward)},duration:function(){_.css("animation-duration","")},failSafe:function(){x.verbose("Removing fail safe timer",x.timer),x.timer&&clearTimeout(x.timer)},hidden:function(){_.removeClass(g.hidden)},visible:function(){_.removeClass(g.visible)},looping:function(){x.debug("Transitions are no longer looping"),x.is.looping()&&(x.reset(),_.removeClass(g.looping))},transition:function(){_.removeClass(g.visible).removeClass(g.hidden)}},get:{settings:function(t,n,r){return"object"==typeof t?e.extend(!0,{},e.fn.transition.settings,t):"function"==typeof r?e.extend({},e.fn.transition.settings,{animation:t,onComplete:r,duration:n}):"string"==typeof n||"number"==typeof n?e.extend({},e.fn.transition.settings,{animation:t,duration:n}):"object"==typeof n?e.extend({},e.fn.transition.settings,n,{animation:t}):"function"==typeof n?e.extend({},e.fn.transition.settings,{animation:t,onComplete:n}):e.extend({},e.fn.transition.settings,{animation:t})},animationClass:function(e){var t=e||f.animation,n=x.can.transition()&&!x.has.direction()?x.get.direction()+" ":"";return g.animating+" "+g.transition+" "+n+t},currentAnimation:function(){return!(!x.cache||void 0===x.cache.animation)&&x.cache.animation},currentDirection:function(){return x.is.inward()?g.inward:g.outward},direction:function(){return x.is.hidden()||!x.is.visible()?g.inward:g.outward},animationDirection:function(t){var n;return"string"==typeof(t=t||f.animation)&&(t=t.split(" "),e.each(t,function(e,t){t===g.inward?n=g.inward:t===g.outward&&(n=g.outward)})),n||!1},duration:function(e){return!1===(e=e||f.duration)&&(e=_.css("animation-duration")||0),"string"==typeof e?e.indexOf("ms")>-1?parseFloat(e):1e3*parseFloat(e):e},displayType:function(e){return e=void 0===e||e,f.displayType?f.displayType:(e&&void 0===_.data(v.displayType)&&x.can.transition(!0),_.data(v.displayType))},userStyle:function(e){return(e=e||_.attr("style")||"").replace(/display.*?;/,"")},transitionExists:function(t){return e.fn.transition.exists[t]},animationStartEvent:function(){var e,t=n.createElement("div"),r={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(e in r)if(void 0!==t.style[e])return r[e];return!1},animationEndEvent:function(){var e,t=n.createElement("div"),r={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(e in r)if(void 0!==t.style[e])return r[e];return!1}},can:{transition:function(t){var n,r,i,o,a,s,l=f.animation,c=x.get.transitionExists(l),u=x.get.displayType(!1);if(void 0===c||t){if(x.verbose("Determining whether animation exists"),n=_.attr("class"),r=_.prop("tagName"),o=(i=e("<"+r+" />").addClass(n).insertAfter(_)).addClass(l).removeClass(g.inward).removeClass(g.outward).addClass(g.animating).addClass(g.transition).css("animationName"),a=i.addClass(g.inward).css("animationName"),u||(u=i.attr("class",n).removeAttr("style").removeClass(g.hidden).removeClass(g.visible).show().css("display"),x.verbose("Determining final display state",u),x.save.displayType(u)),i.remove(),o!=a)x.debug("Direction exists for animation",l),s=!0;else{if("none"==o||!o)return void x.debug("No animation defined in css",l);x.debug("Static animation found",l,u),s=!1}x.save.transitionExists(l,s)}return void 0!==c?c:s},animate:function(){return void 0!==x.can.transition()}},is:{animating:function(){return _.hasClass(g.animating)},inward:function(){return _.hasClass(g.inward)},outward:function(){return _.hasClass(g.outward)},looping:function(){return _.hasClass(g.looping)},occurring:function(e){return e="."+(e=e||f.animation).replace(" ","."),_.filter(e).length>0},visible:function(){return _.is(":visible")},hidden:function(){return"hidden"===_.css("visibility")},supported:function(){return!1!==m}},hide:function(){x.verbose("Hiding element"),x.is.animating()&&x.reset(),w.blur(),x.remove.display(),x.remove.visible(),x.set.hidden(),x.force.hidden(),f.onHide.call(w),f.onComplete.call(w)},show:function(e){x.verbose("Showing element",e),x.remove.hidden(),x.set.visible(),x.force.visible(),f.onShow.call(w),f.onComplete.call(w)},toggle:function(){x.is.visible()?x.hide():x.show()},stop:function(){x.debug("Stopping current animation"),_.triggerHandler(m)},stopAll:function(){x.debug("Stopping all animation"),x.remove.queueCallback(),_.triggerHandler(m)},clear:{queue:function(){x.debug("Clearing animation queue"),x.remove.queueCallback()}},enable:function(){x.verbose("Starting animation"),_.removeClass(g.disabled)},disable:function(){x.debug("Stopping animation"),_.addClass(g.disabled)},setting:function(t,n){if(x.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],n):f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,x,t);else{if(void 0===n)return x[t];x[t]=n}},debug:function(){!f.silent&&f.debug&&(f.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,f.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),x.verbose.apply(console,arguments)))},error:function(){f.silent||(x.error=Function.prototype.bind.call(console.error,console,f.name+":"),x.error.apply(console,arguments))},performance:{log:function(e){var t,n;f.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":n})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(x.performance.display,500)},display:function(){var t=f.name+":",n=0;a=!1,clearTimeout(x.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),i.length>1&&(t+=" ("+i.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,i){var o,a,s,l=p;return n=n||u,i=w||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),void 0!==a&&a}}).initialize()}),void 0!==r?r:this},e.fn.transition.exists={},e.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to surpress this warning in production.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();e.api=e.fn.api=function(n){var r,i=e.isFunction(this)?e(t):e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var i,d,f,p,h,g=e.isPlainObject(n)?e.extend(!0,{},e.fn.api.settings,n):e.extend({},e.fn.api.settings),v=g.namespace,m=g.metadata,b=g.selector,y=g.error,x=g.className,_="."+v,w="module-"+v,k=e(this),T=k.closest(b.form),A=g.stateContext?e(g.stateContext):k,C=this,S=A[0],M=k.data(w);h={initialize:function(){c||h.bind.events(),h.instantiate()},instantiate:function(){h.verbose("Storing instance of module",h),M=h,k.data(w,M)},destroy:function(){h.verbose("Destroying previous module for",C),k.removeData(w).off(_)},bind:{events:function(){var e=h.get.event();e?(h.verbose("Attaching API events to element",e),k.on(e+_,h.event.trigger)):"now"==g.on&&(h.debug("Querying API endpoint immediately"),h.query())}},decode:{json:function(e){if(void 0!==e&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}},read:{cachedResponse:function(e){var n;if(void 0!==t.Storage)return n=sessionStorage.getItem(e),h.debug("Using cached response",e,n),n=h.decode.json(n);h.error(y.noStorage)}},write:{cachedResponse:function(n,r){r&&""===r?h.debug("Response empty, not caching",r):void 0!==t.Storage?(e.isPlainObject(r)&&(r=JSON.stringify(r)),sessionStorage.setItem(n,r),h.verbose("Storing cached response for url",n,r)):h.error(y.noStorage)}},query:function(){if(h.is.disabled())h.debug("Element is disabled API request aborted");else{if(h.is.loading()){if(!g.interruptRequests)return void h.debug("Cancelling request, previous request is still pending");h.debug("Interrupting previous request"),h.abort()}if(g.defaultData&&e.extend(!0,g.urlData,h.get.defaultData()),g.serializeForm&&(g.data=h.add.formData(g.data)),!1===(d=h.get.settings()))return h.cancelled=!0,void h.error(y.beforeSend);if(h.cancelled=!1,(f=h.get.templatedURL())||h.is.mocked()){if((f=h.add.urlData(f))||h.is.mocked()){if(d.url=g.base+f,i=e.extend(!0,{},g,{type:g.method||g.type,data:void 0,url:g.base+f,beforeSend:g.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),h.debug("Querying URL",i.url),h.verbose("Using AJAX settings",i),"local"===g.cache&&h.read.cachedResponse(f))return h.debug("Response returned from local cache"),h.request=h.create.request(),void h.request.resolveWith(S,[h.read.cachedResponse(f)]);g.throttle?g.throttleFirstRequest||h.timer?(h.debug("Throttling request",g.throttle),clearTimeout(h.timer),h.timer=setTimeout(function(){h.timer&&delete h.timer,h.debug("Sending throttled request",void 0,i.method),h.send.request()},g.throttle)):(h.debug("Sending request",void 0,i.method),h.send.request(),h.timer=setTimeout(function(){},g.throttle)):(h.debug("Sending request",void 0,i.method),h.send.request())}}else h.error(y.missingURL)}},should:{removeError:function(){return!0===g.hideError||"auto"===g.hideError&&!h.is.form()}},is:{disabled:function(){return k.filter(b.disabled).length>0},expectingJSON:function(){return"json"===g.dataType||"jsonp"===g.dataType},form:function(){return k.is("form")||A.is("form")},mocked:function(){return g.mockResponse||g.mockResponseAsync||g.response||g.responseAsync},input:function(){return k.is("input")},loading:function(){return!!h.request&&"pending"==h.request.state()},abortedRequest:function(e){return e&&void 0!==e.readyState&&0===e.readyState?(h.verbose("XHR request determined to be aborted"),!0):(h.verbose("XHR request was not aborted"),!1)},validResponse:function(t){return h.is.expectingJSON()&&e.isFunction(g.successTest)?(h.debug("Checking JSON returned success",g.successTest,t),g.successTest(t)?(h.debug("Response passed success test",t),!0):(h.debug("Response failed success test",t),!1)):(h.verbose("Response is not JSON, skipping validation",g.successTest,t),!0)}},was:{cancelled:function(){return h.cancelled||!1},succesful:function(){return h.request&&"resolved"==h.request.state()},failure:function(){return h.request&&"rejected"==h.request.state()},complete:function(){return h.request&&("resolved"==h.request.state()||"rejected"==h.request.state())}},add:{urlData:function(t,n){var r,i;return t&&(r=t.match(g.regExp.required),i=t.match(g.regExp.optional),n=n||g.urlData,r&&(h.debug("Looking for required URL variables",r),e.each(r,function(r,i){var o=-1!==i.indexOf("$")?i.substr(2,i.length-3):i.substr(1,i.length-2),a=e.isPlainObject(n)&&void 0!==n[o]?n[o]:void 0!==k.data(o)?k.data(o):void 0!==A.data(o)?A.data(o):n[o];if(void 0===a)return h.error(y.requiredParameter,o,t),t=!1,!1;h.verbose("Found required variable",o,a),a=g.encodeParameters?h.get.urlEncodedValue(a):a,t=t.replace(i,a)})),i&&(h.debug("Looking for optional URL variables",r),e.each(i,function(r,i){var o=-1!==i.indexOf("$")?i.substr(3,i.length-4):i.substr(2,i.length-3),a=e.isPlainObject(n)&&void 0!==n[o]?n[o]:void 0!==k.data(o)?k.data(o):void 0!==A.data(o)?A.data(o):n[o];void 0!==a?(h.verbose("Optional variable Found",o,a),t=t.replace(i,a)):(h.verbose("Optional variable not found",o),t=-1!==t.indexOf("/"+i)?t.replace("/"+i,""):t.replace(i,""))}))),t},formData:function(t){var n=void 0!==e.fn.serializeObject,r=n?T.serializeObject():T.serialize();return t=t||g.data,e.isPlainObject(t)?n?(h.debug("Extending existing data with form data",t,r),t=e.extend(!0,{},t,r)):(h.error(y.missingSerialize),h.debug("Cant extend data. Replacing data with form data",t,r),t=r):(h.debug("Adding form data",r),t=r),t}},send:{request:function(){h.set.loading(),h.request=h.create.request(),h.is.mocked()?h.mockedXHR=h.create.mockedXHR():h.xhr=h.create.xhr(),g.onRequest.call(S,h.request,h.xhr)}},event:{trigger:function(e){h.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(t,n,r){var i=this,o=(new Date).getTime()-p,a=g.loadingDuration-o,s=!!e.isFunction(g.onResponse)&&(h.is.expectingJSON()?g.onResponse.call(i,e.extend(!0,{},t)):g.onResponse.call(i,t));a=a>0?a:0,s&&(h.debug("Modified API response in onResponse callback",g.onResponse,s,t),t=s),a>0&&h.debug("Response completed early delaying state change by",a),setTimeout(function(){h.is.validResponse(t)?h.request.resolveWith(i,[t,r]):h.request.rejectWith(i,[r,"invalid"])},a)},fail:function(e,t,n){var r=this,i=(new Date).getTime()-p,o=g.loadingDuration-i;(o=o>0?o:0)>0&&h.debug("Response completed early delaying state change by",o),setTimeout(function(){h.is.abortedRequest(e)?h.request.rejectWith(r,[e,"aborted",n]):h.request.rejectWith(r,[e,"error",t,n])},o)}},request:{done:function(e,t){h.debug("Successful API Response",e),"local"===g.cache&&f&&(h.write.cachedResponse(f,e),h.debug("Saving server response locally",h.cache)),g.onSuccess.call(S,e,k,t)},complete:function(e,t){var n,r;h.was.succesful()?(r=e,n=t):(n=e,r=h.get.responseFromXHR(n)),h.remove.loading(),g.onComplete.call(S,r,k,n)},fail:function(e,t,n){var r=h.get.responseFromXHR(e),o=h.get.errorFromRequest(r,t,n);if("aborted"==t)return h.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,n),g.onAbort.call(S,t,k,e),!0;"invalid"==t?h.debug("JSON did not pass success test. A server-side error has most likely occurred",r):"error"==t&&void 0!==e&&(h.debug("XHR produced a server error",t,n),200!=e.status&&void 0!==n&&""!==n&&h.error(y.statusMessage+n,i.url),g.onError.call(S,o,k,e)),g.errorDuration&&"aborted"!==t&&(h.debug("Adding error state"),h.set.error(),h.should.removeError()&&setTimeout(h.remove.error,g.errorDuration)),h.debug("API Request failed",o,e),g.onFailure.call(S,r,k,e)}}},create:{request:function(){return e.Deferred().always(h.event.request.complete).done(h.event.request.done).fail(h.event.request.fail)},mockedXHR:function(){var t,n,r,i=g.mockResponse||g.response,o=g.mockResponseAsync||g.responseAsync;return r=e.Deferred().always(h.event.xhr.complete).done(h.event.xhr.done).fail(h.event.xhr.fail),i?(e.isFunction(i)?(h.debug("Using specified synchronous callback",i),n=i.call(S,d)):(h.debug("Using settings specified response",i),n=i),r.resolveWith(S,[n,!1,{responseText:n}])):e.isFunction(o)&&(t=function(e){h.debug("Async callback returned response",e),e?r.resolveWith(S,[e,!1,{responseText:e}]):r.rejectWith(S,[{responseText:e},!1,!1])},h.debug("Using specified async response callback",o),o.call(S,d,t)),r},xhr:function(){var t;return t=e.ajax(i).always(h.event.xhr.always).done(h.event.xhr.done).fail(h.event.xhr.fail),h.verbose("Created server request",t,i),t}},set:{error:function(){h.verbose("Adding error state to element",A),A.addClass(x.error)},loading:function(){h.verbose("Adding loading state to element",A),A.addClass(x.loading),p=(new Date).getTime()}},remove:{error:function(){h.verbose("Removing error state from element",A),A.removeClass(x.error)},loading:function(){h.verbose("Removing loading state from element",A),A.removeClass(x.loading)}},get:{responseFromXHR:function(t){return!!e.isPlainObject(t)&&(h.is.expectingJSON()?h.decode.json(t.responseText):t.responseText)},errorFromRequest:function(t,n,r){return e.isPlainObject(t)&&void 0!==t.error?t.error:void 0!==g.error[n]?g.error[n]:r},request:function(){return h.request||!1},xhr:function(){return h.xhr||!1},settings:function(){var t;return(t=g.beforeSend.call(S,g))&&(void 0!==t.success&&(h.debug("Legacy success callback detected",t),h.error(y.legacyParameters,t.success),t.onSuccess=t.success),void 0!==t.failure&&(h.debug("Legacy failure callback detected",t),h.error(y.legacyParameters,t.failure),t.onFailure=t.failure),void 0!==t.complete&&(h.debug("Legacy complete callback detected",t),h.error(y.legacyParameters,t.complete),t.onComplete=t.complete)),void 0===t&&h.error(y.noReturnedValue),!1===t?t:void 0!==t?e.extend(!0,{},t):e.extend(!0,{},g)},urlEncodedValue:function(e){var n=t.decodeURIComponent(e),r=t.encodeURIComponent(e);return n!==e?(h.debug("URL value is already encoded, avoiding double encoding",e),e):(h.verbose("Encoding value using encodeURIComponent",e,r),r)},defaultData:function(){var t={};return e.isWindow(C)||(h.is.input()?t.value=k.val():h.is.form()||(t.text=k.text())),t},event:function(){return e.isWindow(C)||"now"==g.on?(h.debug("API called without element, no events attached"),!1):"auto"==g.on?k.is("input")?void 0!==C.oninput?"input":void 0!==C.onpropertychange?"propertychange":"keyup":k.is("form")?"submit":"click":g.on},templatedURL:function(e){if(e=e||k.data(m.action)||g.action||!1,f=k.data(m.url)||g.url||!1)return h.debug("Using specified url",f),f;if(e){if(h.debug("Looking up url for action",e,g.api),void 0===g.api[e]&&!h.is.mocked())return void h.error(y.missingAction,g.action,g.api);f=g.api[e]}else h.is.form()&&(f=k.attr("action")||A.attr("action")||!1,h.debug("No url or action specified, defaulting to form action",f));return f}},abort:function(){var e=h.get.xhr();e&&"resolved"!==e.state()&&(h.debug("Cancelling API request"),e.abort())},reset:function(){h.remove.error(),h.remove.loading()},setting:function(t,n){if(h.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===n)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(void 0===n)return h[t];h[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,g.name+":"),h.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),h.verbose.apply(console,arguments)))},error:function(){g.silent||(h.error=Function.prototype.bind.call(console.error,console,g.name+":"),h.error.apply(console,arguments))},performance:{log:function(e){var t,n;g.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,500)},display:function(){var t=g.name+":",n=0;a=!1,clearTimeout(h.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,i){var o,a,s,l=M;return n=n||u,i=C||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(h.error(y.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},c?(void 0===M&&h.initialize(),h.invoke(l)):(void 0!==M&&M.invoke("destroy"),h.initialize())}),void 0!==r?r:this},e.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.state=function(t){var r,i=e(this),o=i.selector||"",a=(n.documentElement,(new Date).getTime()),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var n,d=e.isPlainObject(t)?e.extend(!0,{},e.fn.state.settings,t):e.extend({},e.fn.state.settings),f=d.error,p=d.metadata,h=d.className,g=d.namespace,v=d.states,m=d.text,b="."+g,y=g+"-module",x=e(this),_=this,w=x.data(y);n={initialize:function(){n.verbose("Initializing module"),d.automatic&&n.add.defaults(),d.context&&""!==o?e(d.context).on(o,"mouseenter"+b,n.change.text).on(o,"mouseleave"+b,n.reset.text).on(o,"click"+b,n.toggle.state):x.on("mouseenter"+b,n.change.text).on("mouseleave"+b,n.reset.text).on("click"+b,n.toggle.state),n.instantiate()},instantiate:function(){n.verbose("Storing instance of module",n),w=n,x.data(y,n)},destroy:function(){n.verbose("Destroying previous module",w),x.off(b).removeData(y)},refresh:function(){n.verbose("Refreshing selector cache"),x=e(_)},add:{defaults:function(){var r=t&&e.isPlainObject(t.states)?t.states:{};e.each(d.defaults,function(t,i){void 0!==n.is[t]&&n.is[t]()&&(n.verbose("Adding default states",t,_),e.extend(d.states,i,r))})}},is:{active:function(){return x.hasClass(h.active)},loading:function(){return x.hasClass(h.loading)},inactive:function(){return!x.hasClass(h.active)},state:function(e){return void 0!==h[e]&&x.hasClass(h[e])},enabled:function(){return!x.is(d.filter.active)},disabled:function(){return x.is(d.filter.active)},textEnabled:function(){return!x.is(d.filter.text)},button:function(){return x.is(".button:not(a, .submit)")},input:function(){return x.is("input")},progress:function(){return x.is(".ui.progress")}},allow:function(e){n.debug("Now allowing state",e),v[e]=!0},disallow:function(e){n.debug("No longer allowing",e),v[e]=!1},allows:function(e){return v[e]||!1},enable:function(){x.removeClass(h.disabled)},disable:function(){x.addClass(h.disabled)},setState:function(e){n.allows(e)&&x.addClass(h[e])},removeState:function(e){n.allows(e)&&x.removeClass(h[e])},toggle:{state:function(){var t;if(n.allows("active")&&n.is.enabled()){if(n.refresh(),void 0!==e.fn.api)if(t=x.api("get request"),x.api("was cancelled"))n.debug("API Request cancelled by beforesend"),d.activateTest=function(){return!1},d.deactivateTest=function(){return!1};else if(t)return void n.listenTo(t);n.change.state()}}},listenTo:function(t){n.debug("API request detected, waiting for state signal",t),t&&(m.loading&&n.update.text(m.loading),e.when(t).then(function(){"resolved"==t.state()?(n.debug("API request succeeded"),d.activateTest=function(){return!0},d.deactivateTest=function(){return!0}):(n.debug("API request failed"),d.activateTest=function(){return!1},d.deactivateTest=function(){return!1}),n.change.state()}))},change:{state:function(){n.debug("Determining state change direction"),n.is.inactive()?n.activate():n.deactivate(),d.sync&&n.sync(),d.onChange.call(_)},text:function(){n.is.textEnabled()&&(n.is.disabled()?(n.verbose("Changing text to disabled text",m.hover),n.update.text(m.disabled)):n.is.active()?m.hover?(n.verbose("Changing text to hover text",m.hover),n.update.text(m.hover)):m.deactivate&&(n.verbose("Changing text to deactivating text",m.deactivate),n.update.text(m.deactivate)):m.hover?(n.verbose("Changing text to hover text",m.hover),n.update.text(m.hover)):m.activate&&(n.verbose("Changing text to activating text",m.activate),n.update.text(m.activate)))}},activate:function(){d.activateTest.call(_)&&(n.debug("Setting state to active"),x.addClass(h.active),n.update.text(m.active),d.onActivate.call(_))},deactivate:function(){d.deactivateTest.call(_)&&(n.debug("Setting state to inactive"),x.removeClass(h.active),n.update.text(m.inactive),d.onDeactivate.call(_))},sync:function(){n.verbose("Syncing other buttons to current state"),n.is.active()?i.not(x).state("activate"):i.not(x).state("deactivate")},get:{text:function(){return d.selector.text?x.find(d.selector.text).text():x.html()},textFor:function(e){return m[e]||!1}},flash:{text:function(e,t,r){var i=n.get.text();n.debug("Flashing text message",e,t),e=e||d.text.flash,t=t||d.flashDuration,r=r||function(){},n.update.text(e),setTimeout(function(){n.update.text(i),r.call(_)},t)}},reset:{text:function(){var e=m.active||x.data(p.storedText),t=m.inactive||x.data(p.storedText);n.is.textEnabled()&&(n.is.active()&&e?(n.verbose("Resetting active text",e),n.update.text(e)):t&&(n.verbose("Resetting inactive text",e),n.update.text(t)))}},update:{text:function(e){var t=n.get.text();e&&e!==t?(n.debug("Updating text",e),d.selector.text?x.data(p.storedText,e).find(d.selector.text).text(e):x.data(p.storedText,e).html(e)):n.debug("Text is already set, ignoring update",e)}},setting:function(t,r){if(n.debug("Changing setting",t,r),e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===r)return d[t];e.isPlainObject(d[t])?e.extend(!0,d[t],r):d[t]=r}},internal:function(t,r){if(e.isPlainObject(t))e.extend(!0,n,t);else{if(void 0===r)return n[t];n[t]=r}},debug:function(){!d.silent&&d.debug&&(d.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,d.name+":"),n.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),n.verbose.apply(console,arguments)))},error:function(){d.silent||(n.error=Function.prototype.bind.call(console.error,console,d.name+":"),n.error.apply(console,arguments))},performance:{log:function(e){var t,r;d.performance&&(r=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:_,"Execution Time":r})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,500)},display:function(){var t=d.name+":",r=0;a=!1,clearTimeout(n.performance.timer),e.each(s,function(e,t){r+=t["Execution Time"]}),t+=" "+r+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,o){var a,s,l,c=w;return i=i||u,o=_||o,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(r,i){var o=r!=a?i+t[r+1].charAt(0).toUpperCase()+t[r+1].slice(1):t;if(e.isPlainObject(c[o])&&r!=a)c=c[o];else{if(void 0!==c[o])return s=c[o],!1;if(!e.isPlainObject(c[i])||r==a)return void 0!==c[i]?(s=c[i],!1):(n.error(f.method,t),!1);c=c[i]}})),e.isFunction(s)?l=s.apply(o,i):void 0!==s&&(l=s),e.isArray(r)?r.push(l):void 0!==r?r=[r,l]:void 0!==l&&(r=l),s}},c?(void 0===w&&n.initialize(),n.invoke(l)):(void 0!==w&&w.invoke("destroy"),n.initialize())}),void 0!==r?r:this},e.fn.state.settings={name:"State",debug:!1,verbose:!1,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:1e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{beforeSend:"The before send function has cancelled state change",method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{active:"active",disabled:"disabled",error:"error",loading:"loading",success:"success",warning:"warning"},selector:{text:!1},defaults:{input:{disabled:!0,loading:!0,active:!0},button:{disabled:!0,loading:!0,active:!0},progress:{active:!0,success:!0,warning:!0,error:!0}},states:{active:!0,disabled:!0,error:!0,loading:!0,success:!0,warning:!0},text:{disabled:!1,flash:!1,hover:!1,active:!1,inactive:!1,activate:!1,deactivate:!1}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.visibility=function(r){var i,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1),f=o.length,p=0;return o.each(function(){var o,h,g,v,m=e.isPlainObject(r)?e.extend(!0,{},e.fn.visibility.settings,r):e.extend({},e.fn.visibility.settings),b=m.className,y=m.namespace,x=m.error,_=m.metadata,w="."+y,k="module-"+y,T=e(t),A=e(this),C=e(m.context),S=(A.selector,A.data(k)),M=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},E=this,O=!1;v={initialize:function(){v.debug("Initializing",m),v.setup.cache(),v.should.trackChanges()&&("image"==m.type&&v.setup.image(),"fixed"==m.type&&v.setup.fixed(),m.observeChanges&&v.observeChanges(),v.bind.events()),v.save.position(),v.is.visible()||v.error(x.visible,A),m.initialCheck&&v.checkVisibility(),v.instantiate()},instantiate:function(){v.debug("Storing instance",v),A.data(k,v),S=v},destroy:function(){v.verbose("Destroying previous module"),g&&g.disconnect(),h&&h.disconnect(),T.off("load"+w,v.event.load).off("resize"+w,v.event.resize),C.off("scroll"+w,v.event.scroll).off("scrollchange"+w,v.event.scrollchange),"fixed"==m.type&&(v.resetFixed(),v.remove.placeholder()),A.off(w).removeData(k)},observeChanges:function(){"MutationObserver"in t&&(h=new MutationObserver(v.event.contextChanged),g=new MutationObserver(v.event.changed),h.observe(n,{childList:!0,subtree:!0}),g.observe(E,{childList:!0,subtree:!0}),v.debug("Setting up mutation observer",g))},bind:{events:function(){v.verbose("Binding visibility events to scroll and resize"),m.refreshOnLoad&&T.on("load"+w,v.event.load),T.on("resize"+w,v.event.resize),C.off("scroll"+w).on("scroll"+w,v.event.scroll).on("scrollchange"+w,v.event.scrollchange)}},event:{changed:function(e){v.verbose("DOM tree modified, updating visibility calculations"),v.timer=setTimeout(function(){v.verbose("DOM tree modified, updating sticky menu"),v.refresh()},100)},contextChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==E||e(t).find(E).length>0)&&(v.debug("Element removed from DOM, tearing down events"),v.destroy())})})},resize:function(){v.debug("Window resized"),m.refreshOnResize&&M(v.refresh)},load:function(){v.debug("Page finished loading"),M(v.refresh)},scroll:function(){m.throttle?(clearTimeout(v.timer),v.timer=setTimeout(function(){C.triggerHandler("scrollchange"+w,[C.scrollTop()])},m.throttle)):M(function(){C.triggerHandler("scrollchange"+w,[C.scrollTop()])})},scrollchange:function(e,t){v.checkVisibility(t)}},precache:function(t,r){t instanceof Array||(t=[t]);for(var i=t.length,o=0,a=[],s=n.createElement("img"),l=function(){++o>=t.length&&e.isFunction(r)&&r()};i--;)(s=n.createElement("img")).onload=l,s.onerror=l,s.src=t[i],a.push(s)},enableCallbacks:function(){v.debug("Allowing callbacks to occur"),O=!1},disableCallbacks:function(){v.debug("Disabling all callbacks temporarily"),O=!0},should:{trackChanges:function(){return u?(v.debug("One time query, no need to bind events"),!1):(v.debug("Callbacks being attached"),!0)}},setup:{cache:function(){v.cache={occurred:{},screen:{},element:{}}},image:function(){var e=A.data(_.src);e&&(v.verbose("Lazy loading image",e),m.once=!0,m.observeChanges=!1,m.onOnScreen=function(){v.debug("Image on screen",E),v.precache(e,function(){v.set.image(e,function(){++p==f&&m.onAllLoaded.call(this),m.onLoad.call(this)})})})},fixed:function(){v.debug("Setting up fixed"),m.once=!1,m.observeChanges=!1,m.initialCheck=!0,m.refreshOnLoad=!0,r.transition||(m.transition=!1),v.create.placeholder(),v.debug("Added placeholder",o),m.onTopPassed=function(){v.debug("Element passed, adding fixed position",A),v.show.placeholder(),v.set.fixed(),m.transition&&void 0!==e.fn.transition&&A.transition(m.transition,m.duration)},m.onTopPassedReverse=function(){v.debug("Element returned to position, removing fixed",A),v.hide.placeholder(),v.remove.fixed()}}},create:{placeholder:function(){v.verbose("Creating fixed position placeholder"),o=A.clone(!1).css("display","none").addClass(b.placeholder).insertAfter(A)}},show:{placeholder:function(){v.verbose("Showing placeholder"),o.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){v.verbose("Hiding placeholder"),o.css("display","none").css("visibility","")}},set:{fixed:function(){v.verbose("Setting element to fixed position"),A.addClass(b.fixed).css({position:"fixed",top:m.offset+"px",left:"auto",zIndex:m.zIndex}),m.onFixed.call(E)},image:function(t,n){if(A.attr("src",t),m.transition)if(void 0!==e.fn.transition){if(A.hasClass(b.visible))return void v.debug("Transition already occurred on this image, skipping animation");A.transition(m.transition,m.duration,n)}else A.fadeIn(m.duration,n);else A.show()}},is:{onScreen:function(){return v.get.elementCalculations().onScreen},offScreen:function(){return v.get.elementCalculations().offScreen},visible:function(){return!(!v.cache||!v.cache.element)&&!(0===v.cache.element.width&&0===v.cache.element.offset.top)},verticallyScrollableContext:function(){var e=C.get(0)!==t&&C.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=C.get(0)!==t&&C.css("overflow-x");return"auto"==e||"scroll"==e}},refresh:function(){v.debug("Refreshing constants (width/height)"),"fixed"==m.type&&v.resetFixed(),v.reset(),v.save.position(),m.checkOnRefresh&&v.checkVisibility(),m.onRefresh.call(E)},resetFixed:function(){v.remove.fixed(),v.remove.occurred()},reset:function(){v.verbose("Resetting all cached values"),e.isPlainObject(v.cache)&&(v.cache.screen={},v.cache.element={})},checkVisibility:function(e){v.verbose("Checking visibility of element",v.cache.element),!O&&v.is.visible()&&(v.save.scroll(e),v.save.calculations(),v.passed(),v.passingReverse(),v.topVisibleReverse(),v.bottomVisibleReverse(),v.topPassedReverse(),v.bottomPassedReverse(),v.onScreen(),v.offScreen(),v.passing(),v.topVisible(),v.bottomVisible(),v.topPassed(),v.bottomPassed(),m.onUpdate&&m.onUpdate.call(E,v.get.elementCalculations()))},passed:function(t,n){var r=v.get.elementCalculations();if(t&&n)m.onPassed[t]=n;else{if(void 0!==t)return v.get.pixelsPassed(t)>r.pixelsPassed;r.passing&&e.each(m.onPassed,function(e,t){r.bottomVisible||r.pixelsPassed>v.get.pixelsPassed(e)?v.execute(t,e):m.once||v.remove.occurred(t)})}},onScreen:function(e){var t=v.get.elementCalculations(),n=e||m.onOnScreen;if(e&&(v.debug("Adding callback for onScreen",e),m.onOnScreen=e),t.onScreen?v.execute(n,"onScreen"):m.once||v.remove.occurred("onScreen"),void 0!==e)return t.onOnScreen},offScreen:function(e){var t=v.get.elementCalculations(),n=e||m.onOffScreen;if(e&&(v.debug("Adding callback for offScreen",e),m.onOffScreen=e),t.offScreen?v.execute(n,"offScreen"):m.once||v.remove.occurred("offScreen"),void 0!==e)return t.onOffScreen},passing:function(e){var t=v.get.elementCalculations(),n=e||m.onPassing;if(e&&(v.debug("Adding callback for passing",e),m.onPassing=e),t.passing?v.execute(n,"passing"):m.once||v.remove.occurred("passing"),void 0!==e)return t.passing},topVisible:function(e){var t=v.get.elementCalculations(),n=e||m.onTopVisible;if(e&&(v.debug("Adding callback for top visible",e),m.onTopVisible=e),t.topVisible?v.execute(n,"topVisible"):m.once||v.remove.occurred("topVisible"),void 0===e)return t.topVisible},bottomVisible:function(e){var t=v.get.elementCalculations(),n=e||m.onBottomVisible;if(e&&(v.debug("Adding callback for bottom visible",e),m.onBottomVisible=e),t.bottomVisible?v.execute(n,"bottomVisible"):m.once||v.remove.occurred("bottomVisible"),void 0===e)return t.bottomVisible},topPassed:function(e){var t=v.get.elementCalculations(),n=e||m.onTopPassed;if(e&&(v.debug("Adding callback for top passed",e),m.onTopPassed=e),t.topPassed?v.execute(n,"topPassed"):m.once||v.remove.occurred("topPassed"),void 0===e)return t.topPassed},bottomPassed:function(e){var t=v.get.elementCalculations(),n=e||m.onBottomPassed;if(e&&(v.debug("Adding callback for bottom passed",e),m.onBottomPassed=e),t.bottomPassed?v.execute(n,"bottomPassed"):m.once||v.remove.occurred("bottomPassed"),void 0===e)return t.bottomPassed},passingReverse:function(e){var t=v.get.elementCalculations(),n=e||m.onPassingReverse;if(e&&(v.debug("Adding callback for passing reverse",e),m.onPassingReverse=e),t.passing?m.once||v.remove.occurred("passingReverse"):v.get.occurred("passing")&&v.execute(n,"passingReverse"),void 0!==e)return!t.passing},topVisibleReverse:function(e){var t=v.get.elementCalculations(),n=e||m.onTopVisibleReverse;if(e&&(v.debug("Adding callback for top visible reverse",e),m.onTopVisibleReverse=e),t.topVisible?m.once||v.remove.occurred("topVisibleReverse"):v.get.occurred("topVisible")&&v.execute(n,"topVisibleReverse"),void 0===e)return!t.topVisible},bottomVisibleReverse:function(e){var t=v.get.elementCalculations(),n=e||m.onBottomVisibleReverse;if(e&&(v.debug("Adding callback for bottom visible reverse",e),m.onBottomVisibleReverse=e),t.bottomVisible?m.once||v.remove.occurred("bottomVisibleReverse"):v.get.occurred("bottomVisible")&&v.execute(n,"bottomVisibleReverse"),void 0===e)return!t.bottomVisible},topPassedReverse:function(e){var t=v.get.elementCalculations(),n=e||m.onTopPassedReverse;if(e&&(v.debug("Adding callback for top passed reverse",e),m.onTopPassedReverse=e),t.topPassed?m.once||v.remove.occurred("topPassedReverse"):v.get.occurred("topPassed")&&v.execute(n,"topPassedReverse"),void 0===e)return!t.onTopPassed},bottomPassedReverse:function(e){var t=v.get.elementCalculations(),n=e||m.onBottomPassedReverse;if(e&&(v.debug("Adding callback for bottom passed reverse",e),m.onBottomPassedReverse=e),t.bottomPassed?m.once||v.remove.occurred("bottomPassedReverse"):v.get.occurred("bottomPassed")&&v.execute(n,"bottomPassedReverse"),void 0===e)return!t.bottomPassed},execute:function(e,t){var n=v.get.elementCalculations(),r=v.get.screenCalculations();(e=e||!1)&&(m.continuous?(v.debug("Callback being called continuously",t,n),e.call(E,n,r)):v.get.occurred(t)||(v.debug("Conditions met",t,n),e.call(E,n,r))),v.save.occurred(t)},remove:{fixed:function(){v.debug("Removing fixed position"),A.removeClass(b.fixed).css({position:"",top:"",left:"",zIndex:""}),m.onUnfixed.call(E)},placeholder:function(){v.debug("Removing placeholder content"),o&&o.remove()},occurred:function(e){if(e){var t=v.cache.occurred;void 0!==t[e]&&!0===t[e]&&(v.debug("Callback can now be called again",e),v.cache.occurred[e]=!1)}else v.cache.occurred={}}},save:{calculations:function(){v.verbose("Saving all calculations necessary to determine positioning"),v.save.direction(),v.save.screenCalculations(),v.save.elementCalculations()},occurred:function(e){e&&(void 0!==v.cache.occurred[e]&&!0===v.cache.occurred[e]||(v.verbose("Saving callback occurred",e),v.cache.occurred[e]=!0))},scroll:function(e){e=e+m.offset||C.scrollTop()+m.offset,v.cache.scroll=e},direction:function(){var e,t=v.get.scroll(),n=v.get.lastScroll();return e=t>n&&n?"down":t<n&&n?"up":"static",v.cache.direction=e,v.cache.direction},elementPosition:function(){var e=v.cache.element,t=v.get.screenSize();return v.verbose("Saving element position"),e.fits=e.height<t.height,e.offset=A.offset(),e.width=A.outerWidth(),e.height=A.outerHeight(),v.is.verticallyScrollableContext()&&(e.offset.top+=C.scrollTop()-C.offset().top),v.is.horizontallyScrollableContext()&&(e.offset.left+=C.scrollLeft-C.offset().left),v.cache.element=e,e},elementCalculations:function(){var e=v.get.screenCalculations(),t=v.get.elementPosition();return m.includeMargin?(t.margin={},t.margin.top=parseInt(A.css("margin-top"),10),t.margin.bottom=parseInt(A.css("margin-bottom"),10),t.top=t.offset.top-t.margin.top,t.bottom=t.offset.top+t.height+t.margin.bottom):(t.top=t.offset.top,t.bottom=t.offset.top+t.height),t.topPassed=e.top>=t.top,t.bottomPassed=e.top>=t.bottom,t.topVisible=e.bottom>=t.top&&!t.bottomPassed,t.bottomVisible=e.bottom>=t.bottom&&!t.topPassed,t.pixelsPassed=0,t.percentagePassed=0,t.onScreen=t.topVisible&&!t.bottomPassed,t.passing=t.topPassed&&!t.bottomPassed,t.offScreen=!t.onScreen,t.passing&&(t.pixelsPassed=e.top-t.top,t.percentagePassed=(e.top-t.top)/t.height),v.cache.element=t,v.verbose("Updated element calculations",t),t},screenCalculations:function(){var e=v.get.scroll();return v.save.direction(),v.cache.screen.top=e,v.cache.screen.bottom=e+v.cache.screen.height,v.cache.screen},screenSize:function(){v.verbose("Saving window position"),v.cache.screen={height:C.height()}},position:function(){v.save.screenSize(),v.save.elementPosition()}},get:{pixelsPassed:function(e){var t=v.get.elementCalculations();return e.search("%")>-1?t.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return void 0!==v.cache.occurred&&v.cache.occurred[e]||!1},direction:function(){return void 0===v.cache.direction&&v.save.direction(),v.cache.direction},elementPosition:function(){return void 0===v.cache.element&&v.save.elementPosition(),v.cache.element},elementCalculations:function(){return void 0===v.cache.element&&v.save.elementCalculations(),v.cache.element},screenCalculations:function(){return void 0===v.cache.screen&&v.save.screenCalculations(),v.cache.screen},screenSize:function(){return void 0===v.cache.screen&&v.save.screenSize(),v.cache.screen},scroll:function(){return void 0===v.cache.scroll&&v.save.scroll(),v.cache.scroll},lastScroll:function(){return void 0===v.cache.screen?(v.debug("First scroll event, no last scroll could be found"),!1):v.cache.screen.top}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(void 0===n)return m[t];m[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(void 0===n)return v[t];v[t]=n}},debug:function(){!m.silent&&m.debug&&(m.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,m.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!m.silent&&m.verbose&&m.debug&&(m.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),v.verbose.apply(console,arguments)))},error:function(){m.silent||(v.error=Function.prototype.bind.call(console.error,console,m.name+":"),v.error.apply(console,arguments))},performance:{log:function(e){var t,n;m.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:E,"Execution Time":n})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var t=m.name+":",n=0;s=!1,clearTimeout(v.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var o,a,s,l=S;return n=n||d,r=E||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(v.error(x.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},u?(void 0===S&&v.initialize(),S.save.scroll(),S.save.calculations(),v.invoke(c)):(void 0!==S&&S.invoke("destroy"),v.initialize())}),void 0!==i?i:this},e.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:t,throttle:!1,type:!1,zIndex:"10",transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder",visible:"visible"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}}(e,window,document),function(e,t,n,r){e.site=e.fn.site=function(r){var i,o,a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1),d=e.isPlainObject(r)?e.extend(!0,{},e.site.settings,r):e.extend({},e.site.settings),f=d.namespace,p=d.error,h="module-"+f,g=e(n),v=this,m=g.data(h);return i={initialize:function(){i.instantiate()},instantiate:function(){i.verbose("Storing instance of site",i),m=i,g.data(h,i)},normalize:function(){i.fix.console(),i.fix.requestAnimationFrame()},fix:{console:function(){i.debug("Normalizing window.console"),void 0!==console&&void 0!==console.log||(i.verbose("Console not available, normalizing events"),i.disable.console()),void 0!==console.group&&void 0!==console.groupEnd&&void 0!==console.groupCollapsed||(i.verbose("Console group not available, normalizing events"),t.console.group=function(){},t.console.groupEnd=function(){},t.console.groupCollapsed=function(){}),void 0===console.markTimeline&&(i.verbose("Mark timeline not available, normalizing events"),t.console.markTimeline=function(){})},consoleClear:function(){i.debug("Disabling programmatic console clearing"),t.console.clear=function(){}},requestAnimationFrame:function(){i.debug("Normalizing requestAnimationFrame"),void 0===t.requestAnimationFrame&&(i.debug("RequestAnimationFrame not available, normalizing event"),t.requestAnimationFrame=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(t){return void 0!==e.fn[t]&&void 0!==e.fn[t].settings},enabled:{modules:function(t){var n=[];return t=t||d.modules,e.each(t,function(e,t){i.moduleExists(t)&&n.push(t)}),n}},disabled:{modules:function(t){var n=[];return t=t||d.modules,e.each(t,function(e,t){i.moduleExists(t)||n.push(t)}),n}},change:{setting:function(t,n,r,o){r="string"==typeof r?"all"===r?d.modules:[r]:r||d.modules,o=void 0===o||o,e.each(r,function(r,a){var s,l=!i.moduleExists(a)||(e.fn[a].settings.namespace||!1);i.moduleExists(a)&&(i.verbose("Changing default setting",t,n,a),e.fn[a].settings[t]=n,o&&l&&(s=e(":data(module-"+l+")")).length>0&&(i.verbose("Modifying existing settings",s),s[a]("setting",t,n)))})},settings:function(t,n,r){n="string"==typeof n?[n]:n||d.modules,r=void 0===r||r,e.each(n,function(n,o){var a;i.moduleExists(o)&&(i.verbose("Changing default setting",t,o),e.extend(!0,e.fn[o].settings,t),r&&f&&(a=e(":data(module-"+f+")")).length>0&&(i.verbose("Modifying existing settings",a),a[o]("setting",t)))})}},enable:{console:function(){i.console(!0)},debug:function(e,t){e=e||d.modules,i.debug("Enabling debug for modules",e),i.change.setting("debug",!0,e,t)},verbose:function(e,t){e=e||d.modules,i.debug("Enabling verbose debug for modules",e),i.change.setting("verbose",!0,e,t)}},disable:{console:function(){i.console(!1)},debug:function(e,t){e=e||d.modules,i.debug("Disabling debug for modules",e),i.change.setting("debug",!1,e,t)},verbose:function(e,t){e=e||d.modules,i.debug("Disabling verbose debug for modules",e),i.change.setting("verbose",!1,e,t)}},console:function(e){if(e){if(void 0===m.cache.console)return void i.error(p.console);i.debug("Restoring console function"),t.console=m.cache.console}else i.debug("Disabling console function"),m.cache.console=t.console,t.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){i.verbose("Destroying previous site for",g),g.removeData(h)},cache:{},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];d[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,i,t);else{if(void 0===n)return i[t];i[t]=n}},debug:function(){d.debug&&(d.performance?i.performance.log(arguments):(i.debug=Function.prototype.bind.call(console.info,console,d.name+":"),i.debug.apply(console,arguments)))},verbose:function(){d.verbose&&d.debug&&(d.performance?i.performance.log(arguments):(i.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),i.verbose.apply(console,arguments)))},error:function(){i.error=Function.prototype.bind.call(console.error,console,d.name+":"),i.error.apply(console,arguments)},performance:{log:function(e){var t,n;d.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Element:v,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(i.performance.timer),i.performance.timer=setTimeout(i.performance.display,500)},display:function(){var t=d.name+":",n=0;a=!1,clearTimeout(i.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,r){var a,s,l,c=m;return n=n||u,r=v||r,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,r){var o=n!=a?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[o])&&n!=a)c=c[o];else{if(void 0!==c[o])return s=c[o],!1;if(!e.isPlainObject(c[r])||n==a)return void 0!==c[r]?(s=c[r],!1):(i.error(p.method,t),!1);c=c[r]}})),e.isFunction(s)?l=s.apply(r,n):void 0!==s&&(l=s),e.isArray(o)?o.push(l):void 0!==o?o=[o,l]:void 0!==l&&(o=l),s}},c?(void 0===m&&i.initialize(),i.invoke(l)):(void 0!==m&&i.destroy(),i.initialize()),void 0!==o?o:this},e.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])}})}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.form=function(t){var r,i=e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c=arguments[1],u="string"==typeof l,d=[].slice.call(arguments,1);return i.each(function(){var f,p,h,g,v,m,b,y,x,_,w,k,T,A,C,S,M=e(this),E=this,O=[],L=!1;(S={initialize:function(){S.get.settings(),u?(void 0===C&&S.instantiate(),S.invoke(l)):(void 0!==C&&C.invoke("destroy"),S.verbose("Initializing form validation",M,v),S.bindEvents(),S.set.defaults(),S.instantiate())},instantiate:function(){S.verbose("Storing instance of module",S),C=S,M.data(T,S)},destroy:function(){S.verbose("Destroying previous module",C),S.removeEvents(),M.removeData(T)},refresh:function(){S.verbose("Refreshing selector cache"),f=M.find(y.field),p=M.find(y.group),h=M.find(y.message),M.find(y.prompt),g=M.find(y.submit),M.find(y.clear),M.find(y.reset)},submit:function(){S.verbose("Submitting form",M),M.submit()},attachEvents:function(t,n){n=n||"submit",e(t).on("click"+A,function(e){S[n](),e.preventDefault()})},bindEvents:function(){S.verbose("Attaching form events"),M.on("submit"+A,S.validate.form).on("blur"+A,y.field,S.event.field.blur).on("click"+A,y.submit,S.submit).on("click"+A,y.reset,S.reset).on("click"+A,y.clear,S.clear),v.keyboardShortcuts&&M.on("keydown"+A,y.field,S.event.field.keydown),f.each(function(){var t=e(this),n=t.prop("type"),r=S.get.changeEvent(n,t);e(this).on(r+A,S.event.field.change)})},clear:function(){f.each(function(){var t=e(this),n=t.parent(),r=t.closest(p),i=r.find(y.prompt),o=t.data(b.defaultValue)||"",a=n.is(y.uiCheckbox),s=n.is(y.uiDropdown);r.hasClass(x.error)&&(S.verbose("Resetting error on field",r),r.removeClass(x.error),i.remove()),s?(S.verbose("Resetting dropdown value",n,o),n.dropdown("clear")):a?t.prop("checked",!1):(S.verbose("Resetting field value",t,o),t.val(""))})},reset:function(){f.each(function(){var t=e(this),n=t.parent(),r=t.closest(p),i=r.find(y.prompt),o=t.data(b.defaultValue),a=n.is(y.uiCheckbox),s=n.is(y.uiDropdown),l=r.hasClass(x.error);void 0!==o&&(l&&(S.verbose("Resetting error on field",r),r.removeClass(x.error),i.remove()),s?(S.verbose("Resetting dropdown value",n,o),n.dropdown("restore defaults")):a?(S.verbose("Resetting checkbox value",n,o),t.prop("checked",o)):(S.verbose("Resetting field value",t,o),t.val(o)))})},determine:{isValid:function(){var t=!0;return e.each(m,function(e,n){S.validate.field(n,e,!0)||(t=!1)}),t}},is:{bracketedRule:function(e){return e.type&&e.type.match(v.regExp.bracket)},shorthandFields:function(e){var t=e[Object.keys(e)[0]];return S.is.shorthandRules(t)},shorthandRules:function(t){return"string"==typeof t||e.isArray(t)},empty:function(e){return!e||0===e.length||(e.is('input[type="checkbox"]')?!e.is(":checked"):S.is.blank(e))},blank:function(t){return""===e.trim(t.val())},valid:function(t){var n=!0;return t?(S.verbose("Checking if field is valid",t),S.validate.field(m[t],t,!1)):(S.verbose("Checking if form is valid"),e.each(m,function(e,t){S.is.valid(e)||(n=!1)}),n)}},removeEvents:function(){M.off(A),f.off(A),g.off(A),f.off(A)},event:{field:{keydown:function(t){var n=e(this),r=t.which,i=n.is(y.input),o=n.is(y.checkbox),a=n.closest(y.uiDropdown).length>0,s=13;r==27&&(S.verbose("Escape key pressed blurring field"),n.blur()),t.ctrlKey||r!=s||!i||a||o||(L||(n.one("keyup"+A,S.event.field.keyup),S.submit(),S.debug("Enter pressed on input submitting form")),L=!0)},keyup:function(){L=!1},blur:function(t){var n=e(this),r=n.closest(p),i=S.get.validation(n);r.hasClass(x.error)?(S.debug("Revalidating field",n,i),i&&S.validate.field(i)):"blur"!=v.on&&"change"!=v.on||i&&S.validate.field(i)},change:function(t){var n=e(this),r=n.closest(p),i=S.get.validation(n);i&&("change"==v.on||r.hasClass(x.error)&&v.revalidate)&&(clearTimeout(S.timer),S.timer=setTimeout(function(){S.debug("Revalidating field",n,S.get.validation(n)),S.validate.field(i)},v.delay))}}},get:{ancillaryValue:function(e){return!(!e.type||!e.value&&!S.is.bracketedRule(e))&&(void 0!==e.value?e.value:e.type.match(v.regExp.bracket)[1]+"")},ruleName:function(e){return S.is.bracketedRule(e)?e.type.replace(e.type.match(v.regExp.bracket)[0],""):e.type},changeEvent:function(e,t){return"checkbox"==e||"radio"==e||"hidden"==e||t.is("select")?"change":S.get.inputEvent()},inputEvent:function(){return void 0!==n.createElement("input").oninput?"input":void 0!==n.createElement("input").onpropertychange?"propertychange":"keyup"},fieldsFromShorthand:function(t){var n={};return e.each(t,function(t,r){"string"==typeof r&&(r=[r]),n[t]={rules:[]},e.each(r,function(e,r){n[t].rules.push({type:r})})}),n},prompt:function(e,t){var n,r,i,o=S.get.ruleName(e),a=S.get.ancillaryValue(e),s=e.prompt||v.prompt[o]||v.text.unspecifiedRule,l=-1!==s.search("{value}"),c=-1!==s.search("{name}");return(c||l)&&(r=S.get.field(t.identifier)),l&&(s=s.replace("{value}",r.val())),c&&(i=1==(n=r.closest(y.group).find("label").eq(0)).length?n.text():r.prop("placeholder")||v.text.unspecifiedField,s=s.replace("{name}",i)),s=(s=s.replace("{identifier}",t.identifier)).replace("{ruleValue}",a),e.prompt||S.verbose("Using default validation prompt for type",s,o),s},settings:function(){if(e.isPlainObject(t)){var n=Object.keys(t);n.length>0&&(void 0!==t[n[0]].identifier&&void 0!==t[n[0]].rules)?(v=e.extend(!0,{},e.fn.form.settings,c),m=e.extend({},e.fn.form.settings.defaults,t),S.error(v.error.oldSyntax,E),S.verbose("Extending settings from legacy parameters",m,v)):(t.fields&&S.is.shorthandFields(t.fields)&&(t.fields=S.get.fieldsFromShorthand(t.fields)),v=e.extend(!0,{},e.fn.form.settings,t),m=e.extend({},e.fn.form.settings.defaults,v.fields),S.verbose("Extending settings",m,v))}else v=e.fn.form.settings,m=e.fn.form.settings.defaults,S.verbose("Using default form validation",m,v);k=v.namespace,b=v.metadata,y=v.selector,x=v.className,_=v.regExp,w=v.error,T="module-"+k,A="."+k,C=M.data(T),S.refresh()},field:function(t){return S.verbose("Finding field with identifier",t),t=S.escape.string(t),f.filter("#"+t).length>0?f.filter("#"+t):f.filter('[name="'+t+'"]').length>0?f.filter('[name="'+t+'"]'):f.filter('[name="'+t+'[]"]').length>0?f.filter('[name="'+t+'[]"]'):f.filter("[data-"+b.validate+'="'+t+'"]').length>0?f.filter("[data-"+b.validate+'="'+t+'"]'):e("<input/>")},fields:function(t){var n=e();return e.each(t,function(e,t){n=n.add(S.get.field(t))}),n},validation:function(t){var n,r;return!!m&&(e.each(m,function(e,i){r=i.identifier||e,S.get.field(r)[0]==t[0]&&(i.identifier=r,n=i)}),n||!1)},value:function(e){var t=[];return t.push(e),S.get.values.call(E,t)[e]},values:function(t){var n={};return(e.isArray(t)?S.get.fields(t):f).each(function(t,r){var i=e(r),o=(i.prop("type"),i.prop("name")),a=i.val(),s=i.is(y.checkbox),l=i.is(y.radio),c=-1!==o.indexOf("[]"),u=!!s&&i.is(":checked");o&&(c?(o=o.replace("[]",""),n[o]||(n[o]=[]),s?u?n[o].push(a||!0):n[o].push(!1):n[o].push(a)):l?void 0===n[o]&&(n[o]=!!u):n[o]=s?!!u&&(a||!0):a)}),n}},has:{field:function(e){return S.verbose("Checking for existence of a field with identifier",e),"string"!=typeof(e=S.escape.string(e))&&S.error(w.identifier,e),f.filter("#"+e).length>0||(f.filter('[name="'+e+'"]').length>0||f.filter("[data-"+b.validate+'="'+e+'"]').length>0)}},escape:{string:function(e){return(e=String(e)).replace(_.escape,"\\$&")}},add:{rule:function(e,t){S.add.field(e,t)},field:function(t,n){var r={};S.is.shorthandRules(n)?(n=e.isArray(n)?n:[n],r[t]={rules:[]},e.each(n,function(e,n){r[t].rules.push({type:n})})):r[t]=n,m=e.extend({},m,r),S.debug("Adding rules",r,m)},fields:function(t){var n;n=t&&S.is.shorthandFields(t)?S.get.fieldsFromShorthand(t):t,m=e.extend({},m,n)},prompt:function(t,n){var r=S.get.field(t).closest(p),i=r.children(y.prompt),o=0!==i.length;n="string"==typeof n?[n]:n,S.verbose("Adding field error state",t),r.addClass(x.error),v.inline&&(o||(i=v.templates.prompt(n)).appendTo(r),i.html(n[0]),o?S.verbose("Inline errors are disabled, no inline error added",t):v.transition&&void 0!==e.fn.transition&&M.transition("is supported")?(S.verbose("Displaying error with css transition",v.transition),i.transition(v.transition+" in",v.duration)):(S.verbose("Displaying error with fallback javascript animation"),i.fadeIn(v.duration)))},errors:function(e){S.debug("Adding form error messages",e),S.set.error(),h.html(v.templates.error(e))}},remove:{rule:function(t,n){var r=e.isArray(n)?n:[n];if(void 0==n)return S.debug("Removed all rules"),void(m[t].rules=[]);void 0!=m[t]&&e.isArray(m[t].rules)&&e.each(m[t].rules,function(e,n){-1!==r.indexOf(n.type)&&(S.debug("Removed rule",n.type),m[t].rules.splice(e,1))})},field:function(t){var n=e.isArray(t)?t:[t];e.each(n,function(e,t){S.remove.rule(t)})},rules:function(t,n){e.isArray(t)?e.each(fields,function(e,t){S.remove.rule(t,n)}):S.remove.rule(t,n)},fields:function(e){S.remove.field(e)},prompt:function(t){var n=S.get.field(t).closest(p),r=n.children(y.prompt);n.removeClass(x.error),v.inline&&r.is(":visible")&&(S.verbose("Removing prompt for field",t),v.transition&&void 0!==e.fn.transition&&M.transition("is supported")?r.transition(v.transition+" out",v.duration,function(){r.remove()}):r.fadeOut(v.duration,function(){r.remove()}))}},set:{success:function(){M.removeClass(x.error).addClass(x.success)},defaults:function(){f.each(function(){var t=e(this),n=t.filter(y.checkbox).length>0?t.is(":checked"):t.val();t.data(b.defaultValue,n)})},error:function(){M.removeClass(x.success).addClass(x.error)},value:function(e,t){var n={};return n[e]=t,S.set.values.call(E,n)},values:function(t){e.isEmptyObject(t)||e.each(t,function(t,n){var r,i=S.get.field(t),o=i.parent(),a=e.isArray(n),s=o.is(y.uiCheckbox),l=o.is(y.uiDropdown),c=i.is(y.radio)&&s;i.length>0&&(a&&s?(S.verbose("Selecting multiple",n,i),o.checkbox("uncheck"),e.each(n,function(e,t){r=i.filter('[value="'+t+'"]'),o=r.parent(),r.length>0&&o.checkbox("check")})):c?(S.verbose("Selecting radio value",n,i),i.filter('[value="'+n+'"]').parent(y.uiCheckbox).checkbox("check")):s?(S.verbose("Setting checkbox value",n,o),!0===n?o.checkbox("check"):o.checkbox("uncheck")):l?(S.verbose("Setting dropdown value",n,o),o.dropdown("set selected",n)):(S.verbose("Setting field value",n,i),i.val(n)))})}},validate:{form:function(e,t){var n=S.get.values();if(L)return!1;if(O=[],S.determine.isValid()){if(S.debug("Form has no validation errors, submitting"),S.set.success(),!0!==t)return v.onSuccess.call(E,e,n)}else if(S.debug("Form has errors"),S.set.error(),v.inline||S.add.errors(O),void 0!==M.data("moduleApi")&&e.stopImmediatePropagation(),!0!==t)return v.onFailure.call(E,O,n)},field:function(t,n,r){r=void 0===r||r,"string"==typeof t&&(S.verbose("Validating field",t),n=t,t=m[t]);var i=t.identifier||n,o=S.get.field(i),a=!!t.depends&&S.get.field(t.depends),s=!0,l=[];return t.identifier||(S.debug("Using field name as identifier",i),t.identifier=i),o.prop("disabled")?(S.debug("Field is disabled. Skipping",i),s=!0):t.optional&&S.is.blank(o)?(S.debug("Field is optional and blank. Skipping",i),s=!0):t.depends&&S.is.empty(a)?(S.debug("Field depends on another value that is not present or empty. Skipping",a),s=!0):void 0!==t.rules&&e.each(t.rules,function(e,n){S.has.field(i)&&!S.validate.rule(t,n)&&(S.debug("Field is invalid",i,n.type),l.push(S.get.prompt(n,t)),s=!1)}),s?(r&&(S.remove.prompt(i,l),v.onValid.call(o)),!0):(r&&(O=O.concat(l),S.add.prompt(i,l),v.onInvalid.call(o,l)),!1)},rule:function(t,n){var r=S.get.field(t.identifier),i=(n.type,r.val()),o=S.get.ancillaryValue(n),a=S.get.ruleName(n),s=v.rules[a];if(e.isFunction(s))return i=void 0===i||""===i||null===i?"":e.trim(i+""),s.call(r,i,o);S.error(w.noRule,a)}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(void 0===n)return v[t];v[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,S,t);else{if(void 0===n)return S[t];S[t]=n}},debug:function(){!v.silent&&v.debug&&(v.performance?S.performance.log(arguments):(S.debug=Function.prototype.bind.call(console.info,console,v.name+":"),S.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?S.performance.log(arguments):(S.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),S.verbose.apply(console,arguments)))},error:function(){v.silent||(S.error=Function.prototype.bind.call(console.error,console,v.name+":"),S.error.apply(console,arguments))},performance:{log:function(e){var t,n;v.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:E,"Execution Time":n})),clearTimeout(S.performance.timer),S.performance.timer=setTimeout(S.performance.display,500)},display:function(){var t=v.name+":",n=0;a=!1,clearTimeout(S.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),i.length>1&&(t+=" ("+i.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,i){var o,a,s,l=C;return n=n||d,i=E||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}}).initialize()}),void 0!==r?r:this},e.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},regExp:{htmlID:/^[a-zA-Z][\w:.-]*$/g,bracket:/\[(.*)\]/i,decimal:/^\d+\.?\d*$/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field"},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contain:'{name} cannot contain "{ruleValue}"',containExactly:'{name} cannot contain exactly "{ruleValue}"',doesntContain:'{name} must contain  "{ruleValue}"',doesntContainExactly:'{name} must contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},templates:{error:function(t){var n='<ul class="list">';return e.each(t,function(e,t){n+="<li>"+t+"</li>"}),e(n+="</ul>")},prompt:function(t){return e("<div/>").addClass("ui basic red pointing prompt label").html(t[0])}},rules:{empty:function(t){return!(void 0===t||""===t||e.isArray(t)&&0===t.length)},checked:function(){return e(this).filter(":checked").length>0},email:function(t){return e.fn.form.settings.regExp.email.test(t)},url:function(t){return e.fn.form.settings.regExp.url.test(t)},regExp:function(t,n){if(n instanceof RegExp)return t.match(n);var r,i=n.match(e.fn.form.settings.regExp.flags);return i&&(n=i.length>=2?i[1]:n,r=i.length>=3?i[2]:""),t.match(new RegExp(n,r))},integer:function(t,n){var r,i,o,a=e.fn.form.settings.regExp.integer;return n&&-1===["",".."].indexOf(n)&&(-1==n.indexOf("..")?a.test(n)&&(r=i=n-0):(o=n.split("..",2),a.test(o[0])&&(r=o[0]-0),a.test(o[1])&&(i=o[1]-0))),a.test(t)&&(void 0===r||t>=r)&&(void 0===i||t<=i)},decimal:function(t){return e.fn.form.settings.regExp.decimal.test(t)},number:function(t){return e.fn.form.settings.regExp.number.test(t)},is:function(e,t){return t="string"==typeof t?t.toLowerCase():t,(e="string"==typeof e?e.toLowerCase():e)==t},isExactly:function(e,t){return e==t},not:function(e,t){return(e="string"==typeof e?e.toLowerCase():e)!=(t="string"==typeof t?t.toLowerCase():t)},notExactly:function(e,t){return e!=t},contains:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1!==t.search(new RegExp(n,"i"))},containsExactly:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1!==t.search(new RegExp(n))},doesntContain:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1===t.search(new RegExp(n,"i"))},doesntContainExactly:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1===t.search(new RegExp(n))},minLength:function(e,t){return void 0!==e&&e.length>=t},length:function(e,t){return void 0!==e&&e.length>=t},exactLength:function(e,t){return void 0!==e&&e.length==t},maxLength:function(e,t){return void 0!==e&&e.length<=t},match:function(t,n){var r;e(this);return e('[data-validate="'+n+'"]').length>0?r=e('[data-validate="'+n+'"]').val():e("#"+n).length>0?r=e("#"+n).val():e('[name="'+n+'"]').length>0?r=e('[name="'+n+'"]').val():e('[name="'+n+'[]"]').length>0&&(r=e('[name="'+n+'[]"]')),void 0!==r&&t.toString()==r.toString()},different:function(t,n){var r;e(this);return e('[data-validate="'+n+'"]').length>0?r=e('[data-validate="'+n+'"]').val():e("#"+n).length>0?r=e("#"+n).val():e('[name="'+n+'"]').length>0?r=e('[name="'+n+'"]').val():e('[name="'+n+'[]"]').length>0&&(r=e('[name="'+n+'[]"]')),void 0!==r&&t.toString()!==r.toString()},creditCard:function(t,n){var r,i,o={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},a={},s=!1,l="string"==typeof n&&n.split(",");if("string"==typeof t&&0!==t.length){if(t=t.replace(/[\-]/g,""),l&&(e.each(l,function(n,r){(i=o[r])&&(a={length:-1!==e.inArray(t.length,i.length),pattern:-1!==t.search(i.pattern)}).length&&a.pattern&&(s=!0)}),!s))return!1;if((r={number:-1!==e.inArray(t.length,o.unionPay.length),pattern:-1!==t.search(o.unionPay.pattern)}).number&&r.pattern)return!0;for(var c=t.length,u=0,d=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],f=0;c--;)f+=d[u][parseInt(t.charAt(c),10)],u^=1;return f%10==0&&f>0}},minCount:function(e,t){return 0==t||(1==t?""!==e:e.split(",").length>=t)},exactCount:function(e,t){return 0==t?""===e:1==t?""!==e&&-1===e.search(","):e.split(",").length==t},maxCount:function(e,t){return 0!=t&&(1==t?-1===e.search(","):e.split(",").length<=t)}}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.accordion=function(n){var r,i=e(this),o=(new Date).getTime(),a=[],s=arguments[0],l="string"==typeof s,c=[].slice.call(arguments,1);t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame;return i.each(function(){var u,d,f=e.isPlainObject(n)?e.extend(!0,{},e.fn.accordion.settings,n):e.extend({},e.fn.accordion.settings),p=f.className,h=f.namespace,g=f.selector,v=f.error,m="."+h,b="module-"+h,y=i.selector||"",x=e(this),_=x.find(g.title),w=x.find(g.content),k=this,T=x.data(b);d={initialize:function(){d.debug("Initializing",x),d.bind.events(),f.observeChanges&&d.observeChanges(),d.instantiate()},instantiate:function(){T=d,x.data(b,d)},destroy:function(){d.debug("Destroying previous instance",x),x.off(m).removeData(b)},refresh:function(){_=x.find(g.title),w=x.find(g.content)},observeChanges:function(){"MutationObserver"in t&&((u=new MutationObserver(function(e){d.debug("DOM tree modified, updating selector cache"),d.refresh()})).observe(k,{childList:!0,subtree:!0}),d.debug("Setting up mutation observer",u))},bind:{events:function(){d.debug("Binding delegated events"),x.on(f.on+m,g.trigger,d.event.click)}},event:{click:function(){d.toggle.call(this)}},toggle:function(t){var n=void 0!==t?"number"==typeof t?_.eq(t):e(t).closest(g.title):e(this).closest(g.title),r=n.next(w),i=r.hasClass(p.animating),o=r.hasClass(p.active),a=o&&!i,s=!o&&i;d.debug("Toggling visibility of content",n),a||s?f.collapsible?d.close.call(n):d.debug("Cannot close accordion content collapsing is disabled"):d.open.call(n)},open:function(t){var n=void 0!==t?"number"==typeof t?_.eq(t):e(t).closest(g.title):e(this).closest(g.title),r=n.next(w),i=r.hasClass(p.animating);r.hasClass(p.active)||i?d.debug("Accordion already open, skipping",r):(d.debug("Opening accordion content",n),f.onOpening.call(r),f.exclusive&&d.closeOthers.call(n),n.addClass(p.active),r.stop(!0,!0).addClass(p.animating),f.animateChildren&&(void 0!==e.fn.transition&&x.transition("is supported")?r.children().transition({animation:"fade in",queue:!1,useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):r.children().stop(!0,!0).animate({opacity:1},f.duration,d.resetOpacity)),r.slideDown(f.duration,f.easing,function(){r.removeClass(p.animating).addClass(p.active),d.reset.display.call(this),f.onOpen.call(this),f.onChange.call(this)}))},close:function(t){var n=void 0!==t?"number"==typeof t?_.eq(t):e(t).closest(g.title):e(this).closest(g.title),r=n.next(w),i=r.hasClass(p.animating),o=r.hasClass(p.active);!o&&!(!o&&i)||o&&i||(d.debug("Closing accordion content",r),f.onClosing.call(r),n.removeClass(p.active),r.stop(!0,!0).addClass(p.animating),f.animateChildren&&(void 0!==e.fn.transition&&x.transition("is supported")?r.children().transition({animation:"fade out",queue:!1,useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):r.children().stop(!0,!0).animate({opacity:0},f.duration,d.resetOpacity)),r.slideUp(f.duration,f.easing,function(){r.removeClass(p.animating).removeClass(p.active),d.reset.display.call(this),f.onClose.call(this),f.onChange.call(this)}))},closeOthers:function(t){var n,r,i,o=void 0!==t?_.eq(t):e(this).closest(g.title),a=o.parents(g.content).prev(g.title),s=o.closest(g.accordion),l=g.title+"."+p.active+":visible",c=g.content+"."+p.active+":visible";f.closeNested?i=(n=s.find(l).not(a)).next(w):(n=s.find(l).not(a),r=s.find(c).find(l).not(a),i=(n=n.not(r)).next(w)),n.length>0&&(d.debug("Exclusive enabled, closing other content",n),n.removeClass(p.active),i.removeClass(p.animating).stop(!0,!0),f.animateChildren&&(void 0!==e.fn.transition&&x.transition("is supported")?i.children().transition({animation:"fade out",useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):i.children().stop(!0,!0).animate({opacity:0},f.duration,d.resetOpacity)),i.slideUp(f.duration,f.easing,function(){e(this).removeClass(p.active),d.reset.display.call(this)}))},reset:{display:function(){d.verbose("Removing inline display from element",this),e(this).css("display",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")},opacity:function(){d.verbose("Removing inline opacity from element",this),e(this).css("opacity",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")}},setting:function(t,n){if(d.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],n):f[t]=n}},internal:function(t,n){if(d.debug("Changing internal",t,n),void 0===n)return d[t];e.isPlainObject(t)?e.extend(!0,d,t):d[t]=n},debug:function(){!f.silent&&f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){f.silent||(d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments))},performance:{log:function(e){var t,n;f.performance&&(n=(t=(new Date).getTime())-(o||t),o=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,500)},display:function(){var t=f.name+":",n=0;o=!1,clearTimeout(d.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",y&&(t+=" '"+y+"'"),(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,i){var o,a,s,l=T;return n=n||c,i=k||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(d.error(v.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},l?(void 0===T&&d.initialize(),d.invoke(s)):(void 0!==T&&T.invoke("destroy"),d.initialize())}),void 0!==r?r:this},e.fn.accordion.settings={name:"Accordion",namespace:"accordion",silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",observeChanges:!0,exclusive:!0,collapsible:!0,closeNested:!1,animateChildren:!0,duration:350,easing:"easeOutQuad",onOpening:function(){},onOpen:function(){},onClosing:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active",animating:"animating"},selector:{accordion:".accordion",title:".title",trigger:".title",content:".content"}},e.extend(e.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}})}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.checkbox=function(r){var i,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return o.each(function(){var o,f,p=e.extend(!0,{},e.fn.checkbox.settings,r),h=p.className,g=p.namespace,v=p.selector,m=p.error,b="."+g,y="module-"+g,x=e(this),_=e(this).children(v.label),w=e(this).children(v.input),k=w[0],T=!1,A=!1,C=x.data(y),S=this;f={initialize:function(){f.verbose("Initializing checkbox",p),f.create.label(),f.bind.events(),f.set.tabbable(),f.hide.input(),f.observeChanges(),f.instantiate(),f.setup()},instantiate:function(){f.verbose("Storing instance of module",f),C=f,x.data(y,f)},destroy:function(){f.verbose("Destroying module"),f.unbind.events(),f.show.input(),x.removeData(y)},fix:{reference:function(){x.is(v.input)&&(f.debug("Behavior called on <input> adjusting invoked element"),x=x.closest(v.checkbox),f.refresh())}},setup:function(){f.set.initialLoad(),f.is.indeterminate()?(f.debug("Initial value is indeterminate"),f.indeterminate()):f.is.checked()?(f.debug("Initial value is checked"),f.check()):(f.debug("Initial value is unchecked"),f.uncheck()),f.remove.initialLoad()},refresh:function(){_=x.children(v.label),w=x.children(v.input),k=w[0]},hide:{input:function(){f.verbose("Modifying <input> z-index to be unselectable"),w.addClass(h.hidden)}},show:{input:function(){f.verbose("Modifying <input> z-index to be selectable"),w.removeClass(h.hidden)}},observeChanges:function(){"MutationObserver"in t&&((o=new MutationObserver(function(e){f.debug("DOM tree modified, updating selector cache"),f.refresh()})).observe(S,{childList:!0,subtree:!0}),f.debug("Setting up mutation observer",o))},attachEvents:function(t,n){var r=e(t);n=e.isFunction(f[n])?f[n]:f.toggle,r.length>0?(f.debug("Attaching checkbox events to element",t,n),r.on("click"+b,n)):f.error(m.notFound)},event:{click:function(t){var n=e(t.target);n.is(v.input)?f.verbose("Using default check action on initialized checkbox"):n.is(v.link)?f.debug("Clicking link inside checkbox, skipping toggle"):(f.toggle(),w.focus(),t.preventDefault())},keydown:function(e){var t=e.which,n=13,r=32;t==27?(f.verbose("Escape key pressed blurring field"),w.blur(),A=!0):e.ctrlKey||t!=r&&t!=n?A=!1:(f.verbose("Enter/space key pressed, toggling checkbox"),f.toggle(),A=!0)},keyup:function(e){A&&e.preventDefault()}},check:function(){f.should.allowCheck()&&(f.debug("Checking checkbox",w),f.set.checked(),f.should.ignoreCallbacks()||(p.onChecked.call(k),p.onChange.call(k)))},uncheck:function(){f.should.allowUncheck()&&(f.debug("Unchecking checkbox"),f.set.unchecked(),f.should.ignoreCallbacks()||(p.onUnchecked.call(k),p.onChange.call(k)))},indeterminate:function(){f.should.allowIndeterminate()?f.debug("Checkbox is already indeterminate"):(f.debug("Making checkbox indeterminate"),f.set.indeterminate(),f.should.ignoreCallbacks()||(p.onIndeterminate.call(k),p.onChange.call(k)))},determinate:function(){f.should.allowDeterminate()?f.debug("Checkbox is already determinate"):(f.debug("Making checkbox determinate"),f.set.determinate(),f.should.ignoreCallbacks()||(p.onDeterminate.call(k),p.onChange.call(k)))},enable:function(){f.is.enabled()?f.debug("Checkbox is already enabled"):(f.debug("Enabling checkbox"),f.set.enabled(),p.onEnable.call(k),p.onEnabled.call(k))},disable:function(){f.is.disabled()?f.debug("Checkbox is already disabled"):(f.debug("Disabling checkbox"),f.set.disabled(),p.onDisable.call(k),p.onDisabled.call(k))},get:{radios:function(){var t=f.get.name();return e('input[name="'+t+'"]').closest(v.checkbox)},otherRadios:function(){return f.get.radios().not(x)},name:function(){return w.attr("name")}},is:{initialLoad:function(){return T},radio:function(){return w.hasClass(h.radio)||"radio"==w.attr("type")},indeterminate:function(){return void 0!==w.prop("indeterminate")&&w.prop("indeterminate")},checked:function(){return void 0!==w.prop("checked")&&w.prop("checked")},disabled:function(){return void 0!==w.prop("disabled")&&w.prop("disabled")},enabled:function(){return!f.is.disabled()},determinate:function(){return!f.is.indeterminate()},unchecked:function(){return!f.is.checked()}},should:{allowCheck:function(){return f.is.determinate()&&f.is.checked()&&!f.should.forceCallbacks()?(f.debug("Should not allow check, checkbox is already checked"),!1):!1!==p.beforeChecked.apply(k)||(f.debug("Should not allow check, beforeChecked cancelled"),!1)},allowUncheck:function(){return f.is.determinate()&&f.is.unchecked()&&!f.should.forceCallbacks()?(f.debug("Should not allow uncheck, checkbox is already unchecked"),!1):!1!==p.beforeUnchecked.apply(k)||(f.debug("Should not allow uncheck, beforeUnchecked cancelled"),!1)},allowIndeterminate:function(){return f.is.indeterminate()&&!f.should.forceCallbacks()?(f.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):!1!==p.beforeIndeterminate.apply(k)||(f.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),!1)},allowDeterminate:function(){return f.is.determinate()&&!f.should.forceCallbacks()?(f.debug("Should not allow determinate, checkbox is already determinate"),!1):!1!==p.beforeDeterminate.apply(k)||(f.debug("Should not allow determinate, beforeDeterminate cancelled"),!1)},forceCallbacks:function(){return f.is.initialLoad()&&p.fireOnInit},ignoreCallbacks:function(){return T&&!p.fireOnInit}},can:{change:function(){return!(x.hasClass(h.disabled)||x.hasClass(h.readOnly)||w.prop("disabled")||w.prop("readonly"))},uncheck:function(){return"boolean"==typeof p.uncheckable?p.uncheckable:!f.is.radio()}},set:{initialLoad:function(){T=!0},checked:function(){f.verbose("Setting class to checked"),x.removeClass(h.indeterminate).addClass(h.checked),f.is.radio()&&f.uncheckOthers(),f.is.indeterminate()||!f.is.checked()?(f.verbose("Setting state to checked",k),w.prop("indeterminate",!1).prop("checked",!0),f.trigger.change()):f.debug("Input is already checked, skipping input property change")},unchecked:function(){f.verbose("Removing checked class"),x.removeClass(h.indeterminate).removeClass(h.checked),f.is.indeterminate()||!f.is.unchecked()?(f.debug("Setting state to unchecked"),w.prop("indeterminate",!1).prop("checked",!1),f.trigger.change()):f.debug("Input is already unchecked")},indeterminate:function(){f.verbose("Setting class to indeterminate"),x.addClass(h.indeterminate),f.is.indeterminate()?f.debug("Input is already indeterminate, skipping input property change"):(f.debug("Setting state to indeterminate"),w.prop("indeterminate",!0),f.trigger.change())},determinate:function(){f.verbose("Removing indeterminate class"),x.removeClass(h.indeterminate),f.is.determinate()?f.debug("Input is already determinate, skipping input property change"):(f.debug("Setting state to determinate"),w.prop("indeterminate",!1))},disabled:function(){f.verbose("Setting class to disabled"),x.addClass(h.disabled),f.is.disabled()?f.debug("Input is already disabled, skipping input property change"):(f.debug("Setting state to disabled"),w.prop("disabled","disabled"),f.trigger.change())},enabled:function(){f.verbose("Removing disabled class"),x.removeClass(h.disabled),f.is.enabled()?f.debug("Input is already enabled, skipping input property change"):(f.debug("Setting state to enabled"),w.prop("disabled",!1),f.trigger.change())},tabbable:function(){f.verbose("Adding tabindex to checkbox"),void 0===w.attr("tabindex")&&w.attr("tabindex",0)}},remove:{initialLoad:function(){T=!1}},trigger:{change:function(){var e=n.createEvent("HTMLEvents"),t=w[0];t&&(f.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},create:{label:function(){w.prevAll(v.label).length>0?(w.prev(v.label).detach().insertAfter(w),f.debug("Moving existing label",_)):f.has.label()||(_=e("<label>").insertAfter(w),f.debug("Creating label",_))}},has:{label:function(){return _.length>0}},bind:{events:function(){f.verbose("Attaching checkbox events"),x.on("click"+b,f.event.click).on("keydown"+b,v.input,f.event.keydown).on("keyup"+b,v.input,f.event.keyup)}},unbind:{events:function(){f.debug("Removing events"),x.off(b)}},uncheckOthers:function(){var e=f.get.otherRadios();f.debug("Unchecking other radios",e),e.removeClass(h.checked)},toggle:function(){f.can.change()?f.is.indeterminate()||f.is.unchecked()?(f.debug("Currently unchecked"),f.check()):f.is.checked()&&f.can.uncheck()&&(f.debug("Currently checked"),f.uncheck()):f.is.radio()||f.debug("Checkbox is read-only or disabled, ignoring toggle")},setting:function(t,n){if(f.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===n)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],n):p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];f[t]=n}},debug:function(){!p.silent&&p.debug&&(p.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,p.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),f.verbose.apply(console,arguments)))},error:function(){p.silent||(f.error=Function.prototype.bind.call(console.error,console,p.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,n;p.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=p.name+":",n=0;s=!1,clearTimeout(f.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var o,a,s,l=C;return n=n||d,r=S||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(f.error(m.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},u?(void 0===C&&f.initialize(),f.invoke(c)):(void 0!==C&&C.invoke("destroy"),f.initialize())}),void 0!==i?i:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:!1,debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!1,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dimmer=function(t){var r,i=e(this),o=(new Date).getTime(),a=[],s=arguments[0],l="string"==typeof s,c=[].slice.call(arguments,1);return i.each(function(){var u,d,f,p=e.isPlainObject(t)?e.extend(!0,{},e.fn.dimmer.settings,t):e.extend({},e.fn.dimmer.settings),h=p.selector,g=p.namespace,v=p.className,m=p.error,b="."+g,y="module-"+g,x=i.selector||"",_="ontouchstart"in n.documentElement?"touchstart":"click",w=e(this),k=this,T=w.data(y);(f={preinitialize:function(){f.is.dimmer()?(d=w.parent(),u=w):(d=w,u=f.has.dimmer()?p.dimmerName?d.find(h.dimmer).filter("."+p.dimmerName):d.find(h.dimmer):f.create(),f.set.variation())},initialize:function(){f.debug("Initializing dimmer",p),f.bind.events(),f.set.dimmable(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),T=f,w.data(y,T)},destroy:function(){f.verbose("Destroying previous module",u),f.unbind.events(),f.remove.variation(),d.off(b)},bind:{events:function(){"hover"==p.on?d.on("mouseenter"+b,f.show).on("mouseleave"+b,f.hide):"click"==p.on&&d.on(_+b,f.toggle),f.is.page()&&(f.debug("Setting as a page dimmer",d),f.set.pageDimmer()),f.is.closable()&&(f.verbose("Adding dimmer close event",u),d.on(_+b,h.dimmer,f.event.click))}},unbind:{events:function(){w.removeData(y),d.off(b)}},event:{click:function(t){f.verbose("Determining if event occured on dimmer",t),(0===u.find(t.target).length||e(t.target).is(h.content))&&(f.hide(),t.stopImmediatePropagation())}},addContent:function(t){var n=e(t);f.debug("Add content to dimmer",n),n.parent()[0]!==u[0]&&n.detach().appendTo(u)},create:function(){var t=e(p.template.dimmer());return p.dimmerName&&(f.debug("Creating named dimmer",p.dimmerName),t.addClass(p.dimmerName)),t.appendTo(d),t},show:function(t){t=e.isFunction(t)?t:function(){},f.debug("Showing dimmer",u,p),f.is.dimmed()&&!f.is.animating()||!f.is.enabled()?f.debug("Dimmer is already shown or disabled"):(f.animate.show(t),p.onShow.call(k),p.onChange.call(k))},hide:function(t){t=e.isFunction(t)?t:function(){},f.is.dimmed()||f.is.animating()?(f.debug("Hiding dimmer",u),f.animate.hide(t),p.onHide.call(k),p.onChange.call(k)):f.debug("Dimmer is not visible")},toggle:function(){f.verbose("Toggling dimmer visibility",u),f.is.dimmed()?f.hide():f.show()},animate:{show:function(t){t=e.isFunction(t)?t:function(){},p.useCSS&&void 0!==e.fn.transition&&u.transition("is supported")?("auto"!==p.opacity&&f.set.opacity(),u.transition({animation:p.transition+" in",queue:!1,duration:f.get.duration(),useFailSafe:!0,onStart:function(){f.set.dimmed()},onComplete:function(){f.set.active(),t()}})):(f.verbose("Showing dimmer animation with javascript"),f.set.dimmed(),"auto"==p.opacity&&(p.opacity=.8),u.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(f.get.duration(),p.opacity,function(){u.removeAttr("style"),f.set.active(),t()}))},hide:function(t){t=e.isFunction(t)?t:function(){},p.useCSS&&void 0!==e.fn.transition&&u.transition("is supported")?(f.verbose("Hiding dimmer with css"),u.transition({animation:p.transition+" out",queue:!1,duration:f.get.duration(),useFailSafe:!0,onStart:function(){f.remove.dimmed()},onComplete:function(){f.remove.active(),t()}})):(f.verbose("Hiding dimmer with javascript"),f.remove.dimmed(),u.stop().fadeOut(f.get.duration(),function(){f.remove.active(),u.removeAttr("style"),t()}))}},get:{dimmer:function(){return u},duration:function(){return"object"==typeof p.duration?f.is.active()?p.duration.hide:p.duration.show:p.duration}},has:{dimmer:function(){return p.dimmerName?w.find(h.dimmer).filter("."+p.dimmerName).length>0:w.find(h.dimmer).length>0}},is:{active:function(){return u.hasClass(v.active)},animating:function(){return u.is(":animated")||u.hasClass(v.animating)},closable:function(){return"auto"==p.closable?"hover"!=p.on:p.closable},dimmer:function(){return w.hasClass(v.dimmer)},dimmable:function(){return w.hasClass(v.dimmable)},dimmed:function(){return d.hasClass(v.dimmed)},disabled:function(){return d.hasClass(v.disabled)},enabled:function(){return!f.is.disabled()},page:function(){return d.is("body")},pageDimmer:function(){return u.hasClass(v.pageDimmer)}},can:{show:function(){return!u.hasClass(v.disabled)}},set:{opacity:function(e){var t=u.css("background-color"),n=t.split(","),r=n&&3==n.length,i=n&&4==n.length;e=0===p.opacity?0:p.opacity||e,r||i?(n[3]=e+")",t=n.join(",")):t="rgba(0, 0, 0, "+e+")",f.debug("Setting opacity to",e),u.css("background-color",t)},active:function(){u.addClass(v.active)},dimmable:function(){d.addClass(v.dimmable)},dimmed:function(){d.addClass(v.dimmed)},pageDimmer:function(){u.addClass(v.pageDimmer)},disabled:function(){u.addClass(v.disabled)},variation:function(e){(e=e||p.variation)&&u.addClass(e)}},remove:{active:function(){u.removeClass(v.active)},dimmed:function(){d.removeClass(v.dimmed)},disabled:function(){u.removeClass(v.disabled)},variation:function(e){(e=e||p.variation)&&u.removeClass(e)}},setting:function(t,n){if(f.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===n)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],n):p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];f[t]=n}},debug:function(){!p.silent&&p.debug&&(p.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,p.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),f.verbose.apply(console,arguments)))},error:function(){p.silent||(f.error=Function.prototype.bind.call(console.error,console,p.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,n;p.performance&&(n=(t=(new Date).getTime())-(o||t),o=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=p.name+":",n=0;o=!1,clearTimeout(f.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",x&&(t+=" '"+x+"'"),i.length>1&&(t+=" ("+i.length+")"),(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,i){var o,a,s,l=T;return n=n||c,i=k||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(f.error(m.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}}).preinitialize(),l?(void 0===T&&f.initialize(),f.invoke(s)):(void 0!==T&&T.invoke("destroy"),f.initialize())}),void 0!==r?r:this},e.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",silent:!1,debug:!1,verbose:!1,performance:!0,dimmerName:!1,variation:!1,closable:"auto",useCSS:!0,transition:"fade",on:!1,opacity:"auto",duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},className:{active:"active",animating:"animating",dimmable:"dimmable",dimmed:"dimmed",dimmer:"dimmer",disabled:"disabled",hide:"hide",pageDimmer:"page",show:"show"},selector:{dimmer:"> .ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return e("<div />").attr("class","ui dimmer")}}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dropdown=function(r){var i,o=e(this),a=e(n),s=o.selector||"",l="ontouchstart"in n.documentElement,c=(new Date).getTime(),u=[],d=arguments[0],f="string"==typeof d,p=[].slice.call(arguments,1);return o.each(function(h){var g,v,m,b,y,x,_,w,k=e.isPlainObject(r)?e.extend(!0,{},e.fn.dropdown.settings,r):e.extend({},e.fn.dropdown.settings),T=k.className,A=k.message,C=k.fields,S=k.keys,M=k.metadata,E=k.namespace,O=k.regExp,L=k.selector,P=k.error,D=k.templates,R="."+E,F="module-"+E,j=e(this),I=e(k.context),N=j.find(L.text),z=j.find(L.search),q=j.find(L.sizer),H=j.find(L.input),B=j.find(L.icon),V=j.prev().find(L.text).length>0?j.prev().find(L.text):j.prev(),U=j.children(L.menu),$=U.find(L.item),W=!1,X=!1,G=!1,Y=this,Z=j.data(F);w={initialize:function(){w.debug("Initializing dropdown",k),w.is.alreadySetup()?w.setup.reference():(w.setup.layout(),k.values&&w.change.values(k.values),w.refreshData(),w.save.defaults(),w.restore.selected(),w.create.id(),w.bind.events(),w.observeChanges(),w.instantiate())},instantiate:function(){w.verbose("Storing instance of dropdown",w),Z=w,j.data(F,w)},destroy:function(){w.verbose("Destroying previous dropdown",j),w.remove.tabbable(),j.off(R).removeData(F),U.off(R),a.off(b),w.disconnect.menuObserver(),w.disconnect.selectObserver()},observeChanges:function(){"MutationObserver"in t&&(x=new MutationObserver(w.event.select.mutation),_=new MutationObserver(w.event.menu.mutation),w.debug("Setting up mutation observer",x,_),w.observe.select(),w.observe.menu())},disconnect:{menuObserver:function(){_&&_.disconnect()},selectObserver:function(){x&&x.disconnect()}},observe:{select:function(){w.has.input()&&x.observe(j[0],{childList:!0,subtree:!0})},menu:function(){w.has.menu()&&_.observe(U[0],{childList:!0,subtree:!0})}},create:{id:function(){y=(Math.random().toString(16)+"000000000").substr(2,8),b="."+y,w.verbose("Creating unique id for element",y)},userChoice:function(t){var n,r,i;return!!(t=t||w.get.userValues())&&(t=e.isArray(t)?t:[t],e.each(t,function(t,o){!1===w.get.item(o)&&(i=k.templates.addition(w.add.variables(A.addResult,o)),r=e("<div />").html(i).attr("data-"+M.value,o).attr("data-"+M.text,o).addClass(T.addition).addClass(T.item),k.hideAdditions&&r.addClass(T.hidden),n=void 0===n?r:n.add(r),w.verbose("Creating user choices for value",o,r))}),n)},userLabels:function(t){var n=w.get.userValues();n&&(w.debug("Adding user labels",n),e.each(n,function(e,t){w.verbose("Adding custom user value"),w.add.label(t,t)}))},menu:function(){U=e("<div />").addClass(T.menu).appendTo(j)},sizer:function(){q=e("<span />").addClass(T.sizer).insertAfter(z)}},search:function(e){e=void 0!==e?e:w.get.query(),w.verbose("Searching for query",e),w.has.minCharacters(e)?w.filter(e):w.hide()},select:{firstUnfiltered:function(){w.verbose("Selecting first non-filtered element"),w.remove.selectedItem(),$.not(L.unselectable).not(L.addition+L.hidden).eq(0).addClass(T.selected)},nextAvailable:function(e){var t=(e=e.eq(0)).nextAll(L.item).not(L.unselectable).eq(0),n=e.prevAll(L.item).not(L.unselectable).eq(0);t.length>0?(w.verbose("Moving selection to",t),t.addClass(T.selected)):(w.verbose("Moving selection to",n),n.addClass(T.selected))}},setup:{api:function(){var e={debug:k.debug,urlData:{value:w.get.value(),query:w.get.query()},on:!1};w.verbose("First request, initializing API"),j.api(e)},layout:function(){j.is("select")&&(w.setup.select(),w.setup.returnedObject()),w.has.menu()||w.create.menu(),w.is.search()&&!w.has.search()&&(w.verbose("Adding search input"),z=e("<input />").addClass(T.search).prop("autocomplete","off").insertBefore(N)),w.is.multiple()&&w.is.searchSelection()&&!w.has.sizer()&&w.create.sizer(),k.allowTab&&w.set.tabbable()},select:function(){var t=w.get.selectValues();w.debug("Dropdown initialized on a select",t),j.is("select")&&(H=j),H.parent(L.dropdown).length>0?(w.debug("UI dropdown already exists. Creating dropdown menu only"),j=H.closest(L.dropdown),w.has.menu()||w.create.menu(),U=j.children(L.menu),w.setup.menu(t)):(w.debug("Creating entire dropdown from select"),j=e("<div />").attr("class",H.attr("class")).addClass(T.selection).addClass(T.dropdown).html(D.dropdown(t)).insertBefore(H),H.hasClass(T.multiple)&&!1===H.prop("multiple")&&(w.error(P.missingMultiple),H.prop("multiple",!0)),H.is("[multiple]")&&w.set.multiple(),H.prop("disabled")&&(w.debug("Disabling dropdown"),j.addClass(T.disabled)),H.removeAttr("class").detach().prependTo(j)),w.refresh()},menu:function(e){U.html(D.menu(e,C)),$=U.find(L.item)},reference:function(){w.debug("Dropdown behavior was called on select, replacing with closest dropdown"),j=j.parent(L.dropdown),Z=j.data(F),Y=j.get(0),w.refresh(),w.setup.returnedObject()},returnedObject:function(){var e=o.slice(0,h),t=o.slice(h+1);o=e.add(j).add(t)}},refresh:function(){w.refreshSelectors(),w.refreshData()},refreshItems:function(){$=U.find(L.item)},refreshSelectors:function(){w.verbose("Refreshing selector cache"),N=j.find(L.text),z=j.find(L.search),H=j.find(L.input),B=j.find(L.icon),V=j.prev().find(L.text).length>0?j.prev().find(L.text):j.prev(),U=j.children(L.menu),$=U.find(L.item)},refreshData:function(){w.verbose("Refreshing cached metadata"),$.removeData(M.text).removeData(M.value)},clearData:function(){w.verbose("Clearing metadata"),$.removeData(M.text).removeData(M.value),j.removeData(M.defaultText).removeData(M.defaultValue).removeData(M.placeholderText)},toggle:function(){w.verbose("Toggling menu visibility"),w.is.active()?w.hide():w.show()},show:function(t){if(t=e.isFunction(t)?t:function(){},!w.can.show()&&w.is.remote()&&(w.debug("No API results retrieved, searching before show"),w.queryRemote(w.get.query(),w.show)),w.can.show()&&!w.is.active()){if(w.debug("Showing dropdown"),!w.has.message()||w.has.maxSelections()||w.has.allResultsFiltered()||w.remove.message(),w.is.allFiltered())return!0;!1!==k.onShow.call(Y)&&w.animate.show(function(){w.can.click()&&w.bind.intent(),w.has.menuSearch()&&w.focusSearch(),w.set.visible(),t.call(Y)})}},hide:function(t){t=e.isFunction(t)?t:function(){},w.is.active()&&(w.debug("Hiding dropdown"),!1!==k.onHide.call(Y)&&w.animate.hide(function(){w.remove.visible(),t.call(Y)}))},hideOthers:function(){w.verbose("Finding other dropdowns to hide"),o.not(j).has(L.menu+"."+T.visible).dropdown("hide")},hideMenu:function(){w.verbose("Hiding menu  instantaneously"),w.remove.active(),w.remove.visible(),U.transition("hide")},hideSubMenus:function(){var e=U.children(L.item).find(L.menu);w.verbose("Hiding sub menus",e),e.transition("hide")},bind:{events:function(){l&&w.bind.touchEvents(),w.bind.keyboardEvents(),w.bind.inputEvents(),w.bind.mouseEvents()},touchEvents:function(){w.debug("Touch device detected binding additional touch events"),w.is.searchSelection()||w.is.single()&&j.on("touchstart"+R,w.event.test.toggle),U.on("touchstart"+R,L.item,w.event.item.mouseenter)},keyboardEvents:function(){w.verbose("Binding keyboard events"),j.on("keydown"+R,w.event.keydown),w.has.search()&&j.on(w.get.inputEvent()+R,L.search,w.event.input),w.is.multiple()&&a.on("keydown"+b,w.event.document.keydown)},inputEvents:function(){w.verbose("Binding input change events"),j.on("change"+R,L.input,w.event.change)},mouseEvents:function(){w.verbose("Binding mouse events"),w.is.multiple()&&j.on("click"+R,L.label,w.event.label.click).on("click"+R,L.remove,w.event.remove.click),w.is.searchSelection()?(j.on("mousedown"+R,w.event.mousedown).on("mouseup"+R,w.event.mouseup).on("mousedown"+R,L.menu,w.event.menu.mousedown).on("mouseup"+R,L.menu,w.event.menu.mouseup).on("click"+R,L.icon,w.event.icon.click).on("focus"+R,L.search,w.event.search.focus).on("click"+R,L.search,w.event.search.focus).on("blur"+R,L.search,w.event.search.blur).on("click"+R,L.text,w.event.text.focus),w.is.multiple()&&j.on("click"+R,w.event.click)):("click"==k.on?j.on("click"+R,L.icon,w.event.icon.click).on("click"+R,w.event.test.toggle):"hover"==k.on?j.on("mouseenter"+R,w.delay.show).on("mouseleave"+R,w.delay.hide):j.on(k.on+R,w.toggle),j.on("mousedown"+R,w.event.mousedown).on("mouseup"+R,w.event.mouseup).on("focus"+R,w.event.focus),w.has.menuSearch()?j.on("blur"+R,L.search,w.event.search.blur):j.on("blur"+R,w.event.blur)),U.on("mouseenter"+R,L.item,w.event.item.mouseenter).on("mouseleave"+R,L.item,w.event.item.mouseleave).on("click"+R,L.item,w.event.item.click)},intent:function(){w.verbose("Binding hide intent event to document"),l&&a.on("touchstart"+b,w.event.test.touch).on("touchmove"+b,w.event.test.touch),a.on("click"+b,w.event.test.hide)}},unbind:{intent:function(){w.verbose("Removing hide intent event from document"),l&&a.off("touchstart"+b).off("touchmove"+b),a.off("click"+b)}},filter:function(e){var t=void 0!==e?e:w.get.query(),n=function(){w.is.multiple()&&w.filterActive(),(e||!e&&0==w.get.activeItem().length)&&w.select.firstUnfiltered(),w.has.allResultsFiltered()?k.onNoResults.call(Y,t)?k.allowAdditions?k.hideAdditions&&(w.verbose("User addition with no menu, setting empty style"),w.set.empty(),w.hideMenu()):(w.verbose("All items filtered, showing message",t),w.add.message(A.noResults)):(w.verbose("All items filtered, hiding dropdown",t),w.hideMenu()):(w.remove.empty(),w.remove.message()),k.allowAdditions&&w.add.userSuggestion(e),w.is.searchSelection()&&w.can.show()&&w.is.focusedOnSearch()&&w.show()};k.useLabels&&w.has.maxSelections()||(k.apiSettings?w.can.useAPI()?w.queryRemote(t,function(){k.filterRemoteData&&w.filterItems(t),n()}):w.error(P.noAPI):(w.filterItems(t),n()))},queryRemote:function(t,n){var r={errorDuration:!1,cache:"local",throttle:k.throttle,urlData:{query:t},onError:function(){w.add.message(A.serverError),n()},onFailure:function(){w.add.message(A.serverError),n()},onSuccess:function(e){w.remove.message(),w.setup.menu({values:e[C.remoteValues]}),n()}};j.api("get request")||w.setup.api(),r=e.extend(!0,{},r,k.apiSettings),j.api("setting",r).api("query")},filterItems:function(t){var n=void 0!==t?t:w.get.query(),r=null,i=w.escape.string(n),o=new RegExp("^"+i,"igm");w.has.query()&&(r=[],w.verbose("Searching for matching values",n),$.each(function(){var t,i,a=e(this);if("both"==k.match||"text"==k.match){if(-1!==(t=String(w.get.choiceText(a,!1))).search(o))return r.push(this),!0;if("exact"===k.fullTextSearch&&w.exactSearch(n,t))return r.push(this),!0;if(!0===k.fullTextSearch&&w.fuzzySearch(n,t))return r.push(this),!0}if("both"==k.match||"value"==k.match){if(-1!==(i=String(w.get.choiceValue(a,t))).search(o))return r.push(this),!0;if("exact"===k.fullTextSearch&&w.exactSearch(n,i))return r.push(this),!0;if(!0===k.fullTextSearch&&w.fuzzySearch(n,i))return r.push(this),!0}})),w.debug("Showing only matched items",n),w.remove.filteredItem(),r&&$.not(r).addClass(T.filtered)},fuzzySearch:function(e,t){var n=t.length,r=e.length;if(e=e.toLowerCase(),t=t.toLowerCase(),r>n)return!1;if(r===n)return e===t;e:for(var i=0,o=0;i<r;i++){for(var a=e.charCodeAt(i);o<n;)if(t.charCodeAt(o++)===a)continue e;return!1}return!0},exactSearch:function(e,t){return e=e.toLowerCase(),(t=t.toLowerCase()).indexOf(e)>-1},filterActive:function(){k.useLabels&&$.filter("."+T.active).addClass(T.filtered)},focusSearch:function(e){w.has.search()&&!w.is.focusedOnSearch()&&(e?(j.off("focus"+R,L.search),z.focus(),j.on("focus"+R,L.search,w.event.search.focus)):z.focus())},forceSelection:function(){var e=$.not(T.filtered).filter("."+T.selected).eq(0),t=$.not(T.filtered).filter("."+T.active).eq(0),n=e.length>0?e:t;if(n.length>0&&!w.is.multiple())return w.debug("Forcing partial selection to selected item",n),void w.event.item.click.call(n,{},!0);k.allowAdditions?(w.set.selected(w.get.query()),w.remove.searchTerm()):w.remove.searchTerm()},change:{values:function(t){k.allowAdditions||w.clear(),w.debug("Creating dropdown with specified values",t),w.setup.menu({values:t}),e.each(t,function(e,t){if(1==t.selected)return w.debug("Setting initial selection to",t.value),w.set.selected(t.value),!0})}},event:{change:function(){G||(w.debug("Input changed, updating selection"),w.set.selected())},focus:function(){k.showOnFocus&&!W&&w.is.hidden()&&!v&&w.show()},blur:function(e){v=n.activeElement===this,W||v||(w.remove.activeLabel(),w.hide())},mousedown:function(){w.is.searchSelection()?m=!0:W=!0},mouseup:function(){w.is.searchSelection()?m=!1:W=!1},click:function(t){e(t.target).is(j)&&(w.is.focusedOnSearch()?w.show():w.focusSearch())},search:{focus:function(){W=!0,w.is.multiple()&&w.remove.activeLabel(),k.showOnFocus&&w.search()},blur:function(e){v=n.activeElement===this,w.is.searchSelection()&&!m&&(X||v||(k.forceSelection&&w.forceSelection(),w.hide())),m=!1}},icon:{click:function(e){w.toggle()}},text:{focus:function(e){W=!0,w.focusSearch()}},input:function(e){(w.is.multiple()||w.is.searchSelection())&&w.set.filtered(),clearTimeout(w.timer),w.timer=setTimeout(w.search,k.delay.search)},label:{click:function(t){var n=e(this),r=j.find(L.label),i=r.filter("."+T.active),o=n.nextAll("."+T.active),a=n.prevAll("."+T.active),s=o.length>0?n.nextUntil(o).add(i).add(n):n.prevUntil(a).add(i).add(n);t.shiftKey?(i.removeClass(T.active),s.addClass(T.active)):t.ctrlKey?n.toggleClass(T.active):(i.removeClass(T.active),n.addClass(T.active)),k.onLabelSelect.apply(this,r.filter("."+T.active))}},remove:{click:function(){var t=e(this).parent();t.hasClass(T.active)?w.remove.activeLabels():w.remove.activeLabels(t)}},test:{toggle:function(e){var t=w.is.multiple()?w.show:w.toggle;w.is.bubbledLabelClick(e)||w.is.bubbledIconClick(e)||w.determine.eventOnElement(e,t)&&e.preventDefault()},touch:function(e){w.determine.eventOnElement(e,function(){"touchstart"==e.type?w.timer=setTimeout(function(){w.hide()},k.delay.touch):"touchmove"==e.type&&clearTimeout(w.timer)}),e.stopPropagation()},hide:function(e){w.determine.eventInModule(e,w.hide)}},select:{mutation:function(t){w.debug("<select> modified, recreating menu");var n=!1;e.each(t,function(t,r){if(e(r.target).is("select")||e(r.addedNodes).is("select"))return n=!0,!0}),n&&(w.disconnect.selectObserver(),w.refresh(),w.setup.select(),w.set.selected(),w.observe.select())}},menu:{mutation:function(t){var n=t[0],r=n.addedNodes?e(n.addedNodes[0]):e(!1),i=n.removedNodes?e(n.removedNodes[0]):e(!1),o=r.add(i),a=o.is(L.addition)||o.closest(L.addition).length>0,s=o.is(L.message)||o.closest(L.message).length>0;a||s?(w.debug("Updating item selector cache"),w.refreshItems()):(w.debug("Menu modified, updating selector cache"),w.refresh())},mousedown:function(){X=!0},mouseup:function(){X=!1}},item:{mouseenter:function(t){var n=e(t.target),r=e(this),i=r.children(L.menu),o=r.siblings(L.item).children(L.menu),a=i.length>0;!(i.find(n).length>0)&&a&&(clearTimeout(w.itemTimer),w.itemTimer=setTimeout(function(){w.verbose("Showing sub-menu",i),e.each(o,function(){w.animate.hide(!1,e(this))}),w.animate.show(!1,i)},k.delay.show),t.preventDefault())},mouseleave:function(t){var n=e(this).children(L.menu);n.length>0&&(clearTimeout(w.itemTimer),w.itemTimer=setTimeout(function(){w.verbose("Hiding sub-menu",n),w.animate.hide(!1,n)},k.delay.hide))},click:function(t,r){var i=e(this),o=e(t?t.target:""),a=i.find(L.menu),s=w.get.choiceText(i),l=w.get.choiceValue(i,s),c=a.length>0,u=a.find(o).length>0;w.has.menuSearch()&&e(n.activeElement).blur(),u||c&&!k.allowCategorySelection||(w.is.searchSelection()&&(k.allowAdditions&&w.remove.userAddition(),w.remove.searchTerm(),w.is.focusedOnSearch()||1==r||w.focusSearch(!0)),k.useLabels||(w.remove.filteredItem(),w.set.scrollPosition(i)),w.determine.selectAction.call(this,s,l))}},document:{keydown:function(e){var t=e.which;if(w.is.inObject(t,S)){var n=j.find(L.label),r=n.filter("."+T.active),i=(r.data(M.value),n.index(r)),o=n.length,a=r.length>0,s=r.length>1,l=0===i,c=i+1==o,u=w.is.searchSelection(),d=w.is.focusedOnSearch(),f=w.is.focused(),p=d&&0===w.get.caretPosition();if(u&&!a&&!d)return;t==S.leftArrow?!f&&!p||a?a&&(e.shiftKey?w.verbose("Adding previous label to selection"):(w.verbose("Selecting previous label"),n.removeClass(T.active)),l&&!s?r.addClass(T.active):r.prev(L.siblingLabel).addClass(T.active).end(),e.preventDefault()):(w.verbose("Selecting previous label"),n.last().addClass(T.active)):t==S.rightArrow?(f&&!a&&n.first().addClass(T.active),a&&(e.shiftKey?w.verbose("Adding next label to selection"):(w.verbose("Selecting next label"),n.removeClass(T.active)),c?u?d?n.removeClass(T.active):w.focusSearch():s?r.next(L.siblingLabel).addClass(T.active):r.addClass(T.active):r.next(L.siblingLabel).addClass(T.active),e.preventDefault())):t==S.deleteKey||t==S.backspace?a?(w.verbose("Removing active labels"),c&&u&&!d&&w.focusSearch(),r.last().next(L.siblingLabel).addClass(T.active),w.remove.activeLabels(r),e.preventDefault()):p&&!a&&t==S.backspace&&(w.verbose("Removing last label on input backspace"),r=n.last().addClass(T.active),w.remove.activeLabels(r)):r.removeClass(T.active)}}},keydown:function(e){var t=e.which;if(w.is.inObject(t,S)){var n,r=$.not(L.unselectable).filter("."+T.selected).eq(0),i=U.children("."+T.active).eq(0),o=r.length>0?r:i,a=o.length>0?o.siblings(":not(."+T.filtered+")").addBack():U.children(":not(."+T.filtered+")"),s=o.children(L.menu),l=o.closest(L.menu),c=l.hasClass(T.visible)||l.hasClass(T.animating)||l.parent(L.menu).length>0,u=s.length>0,d=o.length>0,f=o.not(L.unselectable).length>0,p=t==S.delimiter&&k.allowAdditions&&w.is.multiple();if(k.allowAdditions&&k.hideAdditions&&(t==S.enter||p)&&f&&(w.verbose("Selecting item from keyboard shortcut",o),w.event.item.click.call(o,e),w.is.searchSelection()&&w.remove.searchTerm()),w.is.visible()){if((t==S.enter||p)&&(t==S.enter&&d&&u&&!k.allowCategorySelection?(w.verbose("Pressed enter on unselectable category, opening sub menu"),t=S.rightArrow):f&&(w.verbose("Selecting item from keyboard shortcut",o),w.event.item.click.call(o,e),w.is.searchSelection()&&w.remove.searchTerm()),e.preventDefault()),d&&(t==S.leftArrow&&l[0]!==U[0]&&(w.verbose("Left key pressed, closing sub-menu"),w.animate.hide(!1,l),o.removeClass(T.selected),l.closest(L.item).addClass(T.selected),e.preventDefault()),t==S.rightArrow&&u&&(w.verbose("Right key pressed, opening sub-menu"),w.animate.show(!1,s),o.removeClass(T.selected),s.find(L.item).eq(0).addClass(T.selected),e.preventDefault())),t==S.upArrow){if(n=d&&c?o.prevAll(L.item+":not("+L.unselectable+")").eq(0):$.eq(0),a.index(n)<0)return w.verbose("Up key pressed but reached top of current menu"),void e.preventDefault();w.verbose("Up key pressed, changing active item"),o.removeClass(T.selected),n.addClass(T.selected),w.set.scrollPosition(n),k.selectOnKeydown&&w.is.single()&&w.set.selectedItem(n),e.preventDefault()}if(t==S.downArrow){if(0===(n=d&&c?n=o.nextAll(L.item+":not("+L.unselectable+")").eq(0):$.eq(0)).length)return w.verbose("Down key pressed but reached bottom of current menu"),void e.preventDefault();w.verbose("Down key pressed, changing active item"),$.removeClass(T.selected),n.addClass(T.selected),w.set.scrollPosition(n),k.selectOnKeydown&&w.is.single()&&w.set.selectedItem(n),e.preventDefault()}t==S.pageUp&&(w.scrollPage("up"),e.preventDefault()),t==S.pageDown&&(w.scrollPage("down"),e.preventDefault()),t==S.escape&&(w.verbose("Escape key pressed, closing dropdown"),w.hide())}else p&&e.preventDefault(),t!=S.downArrow||w.is.visible()||(w.verbose("Down key pressed, showing dropdown"),w.show(),e.preventDefault())}else w.has.search()||w.set.selectedLetter(String.fromCharCode(t))}},trigger:{change:function(){var e=n.createEvent("HTMLEvents"),t=H[0];t&&(w.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},determine:{selectAction:function(t,n){w.verbose("Determining action",k.action),e.isFunction(w.action[k.action])?(w.verbose("Triggering preset action",k.action,t,n),w.action[k.action].call(Y,t,n,this)):e.isFunction(k.action)?(w.verbose("Triggering user action",k.action,t,n),k.action.call(Y,t,n,this)):w.error(P.action,k.action)},eventInModule:function(t,r){var i=e(t.target),o=i.closest(n.documentElement).length>0,a=i.closest(j).length>0;return r=e.isFunction(r)?r:function(){},o&&!a?(w.verbose("Triggering event",r),r(),!0):(w.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(t,r){var i=e(t.target),o=i.closest(L.siblingLabel),a=n.body.contains(t.target),s=0===j.find(o).length,l=0===i.closest(U).length;return r=e.isFunction(r)?r:function(){},a&&s&&l?(w.verbose("Triggering event",r),r(),!0):(w.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(t,n,r){if(n=void 0!==n?n:t,w.can.activate(e(r))){if(w.set.selected(n,e(r)),w.is.multiple()&&!w.is.allFiltered())return;w.hideAndClear()}},select:function(t,n,r){if(n=void 0!==n?n:t,w.can.activate(e(r))){if(w.set.value(n,e(r)),w.is.multiple()&&!w.is.allFiltered())return;w.hideAndClear()}},combo:function(t,n,r){n=void 0!==n?n:t,w.set.selected(n,e(r)),w.hideAndClear()},hide:function(e,t,n){w.set.value(t,e),w.hideAndClear()}},get:{id:function(){return y},defaultText:function(){return j.data(M.defaultText)},defaultValue:function(){return j.data(M.defaultValue)},placeholderText:function(){return"auto"!=k.placeholder&&"string"==typeof k.placeholder?k.placeholder:j.data(M.placeholderText)||""},text:function(){return N.text()},query:function(){return e.trim(z.val())},searchWidth:function(e){return e=void 0!==e?e:z.val(),q.text(e),Math.ceil(q.width()+1)},selectionCount:function(){var t=w.get.values();return w.is.multiple()?e.isArray(t)?t.length:0:""!==w.get.value()?1:0},transition:function(e){return"auto"==k.transition?w.is.upward(e)?"slide up":"slide down":k.transition},userValues:function(){var t=w.get.values();return!!t&&(t=e.isArray(t)?t:[t],e.grep(t,function(e){return!1===w.get.item(e)}))},uniqueArray:function(t){return e.grep(t,function(n,r){return e.inArray(n,t)===r})},caretPosition:function(){var e,t,r=z.get(0);return"selectionStart"in r?r.selectionStart:n.selection?(r.focus(),t=(e=n.selection.createRange()).text.length,e.moveStart("character",-r.value.length),e.text.length-t):void 0},value:function(){var t=H.length>0?H.val():j.data(M.value),n=e.isArray(t)&&1===t.length&&""===t[0];return void 0===t||n?"":t},values:function(){var e=w.get.value();return""===e?"":!w.has.selectInput()&&w.is.multiple()?"string"==typeof e?e.split(k.delimiter):"":e},remoteValues:function(){var t=w.get.values(),n=!1;return t&&("string"==typeof t&&(t=[t]),e.each(t,function(e,t){var r=w.read.remoteData(t);w.verbose("Restoring value from session data",r,t),r&&(n||(n={}),n[t]=r)})),n},choiceText:function(t,n){if(n=void 0!==n?n:k.preserveHTML,t)return t.find(L.menu).length>0&&(w.verbose("Retrieving text of element with sub-menu"),(t=t.clone()).find(L.menu).remove(),t.find(L.menuIcon).remove()),void 0!==t.data(M.text)?t.data(M.text):n?e.trim(t.html()):e.trim(t.text())},choiceValue:function(t,n){return n=n||w.get.choiceText(t),!!t&&(void 0!==t.data(M.value)?String(t.data(M.value)):"string"==typeof n?e.trim(n.toLowerCase()):String(n))},inputEvent:function(){var e=z[0];return!!e&&(void 0!==e.oninput?"input":void 0!==e.onpropertychange?"propertychange":"keyup")},selectValues:function(){var t={values:[]};return j.find("option").each(function(){var n=e(this),r=n.html(),i=n.attr("disabled"),o=void 0!==n.attr("value")?n.attr("value"):r;"auto"===k.placeholder&&""===o?t.placeholder=r:t.values.push({name:r,value:o,disabled:i})}),k.placeholder&&"auto"!==k.placeholder&&(w.debug("Setting placeholder value to",k.placeholder),t.placeholder=k.placeholder),k.sortSelect?(t.values.sort(function(e,t){return e.name>t.name?1:-1}),w.debug("Retrieved and sorted values from select",t)):w.debug("Retrieved values from select",t),t},activeItem:function(){return $.filter("."+T.active)},selectedItem:function(){var e=$.not(L.unselectable).filter("."+T.selected);return e.length>0?e:$.eq(0)},itemWithAdditions:function(e){var t=w.get.item(e),n=w.create.userChoice(e);return n&&n.length>0&&(t=t.length>0?t.add(n):n),t},item:function(t,n){var r,i,o=!1;return t=void 0!==t?t:void 0!==w.get.values()?w.get.values():w.get.text(),r=i?t.length>0:void 0!==t&&null!==t,i=w.is.multiple()&&e.isArray(t),n=""===t||0===t||(n||!1),r&&$.each(function(){var r=e(this),a=w.get.choiceText(r),s=w.get.choiceValue(r,a);if(null!==s&&void 0!==s)if(i)-1===e.inArray(String(s),t)&&-1===e.inArray(a,t)||(o=o?o.add(r):r);else if(n){if(w.verbose("Ambiguous dropdown value using strict type check",r,t),s===t||a===t)return o=r,!0}else if(String(s)==String(t)||a==t)return w.verbose("Found select item by value",s,t),o=r,!0}),o}},check:{maxSelections:function(e){return!k.maxSelections||((e=void 0!==e?e:w.get.selectionCount())>=k.maxSelections?(w.debug("Maximum selection count reached"),k.useLabels&&($.addClass(T.filtered),w.add.message(A.maxSelections)),!0):(w.verbose("No longer at maximum selection count"),w.remove.message(),w.remove.filteredItem(),w.is.searchSelection()&&w.filterItems(),!1))}},restore:{defaults:function(){w.clear(),w.restore.defaultText(),w.restore.defaultValue()},defaultText:function(){var e=w.get.defaultText();e===w.get.placeholderText?(w.debug("Restoring default placeholder text",e),w.set.placeholderText(e)):(w.debug("Restoring default text",e),w.set.text(e))},placeholderText:function(){w.set.placeholderText()},defaultValue:function(){var e=w.get.defaultValue();void 0!==e&&(w.debug("Restoring default value",e),""!==e?(w.set.value(e),w.set.selected()):(w.remove.activeItem(),w.remove.selectedItem()))},labels:function(){k.allowAdditions&&(k.useLabels||(w.error(P.labels),k.useLabels=!0),w.debug("Restoring selected values"),w.create.userLabels()),w.check.maxSelections()},selected:function(){w.restore.values(),w.is.multiple()?(w.debug("Restoring previously selected values and labels"),w.restore.labels()):w.debug("Restoring previously selected values")},values:function(){w.set.initialLoad(),k.apiSettings&&k.saveRemoteData&&w.get.remoteValues()?w.restore.remoteValues():w.set.selected(),w.remove.initialLoad()},remoteValues:function(){var t=w.get.remoteValues();w.debug("Recreating selected from session data",t),t&&(w.is.single()?e.each(t,function(e,t){w.set.text(t)}):e.each(t,function(e,t){w.add.label(e,t)}))}},read:{remoteData:function(e){var n;if(void 0!==t.Storage)return void 0!==(n=sessionStorage.getItem(e))&&n;w.error(P.noStorage)}},save:{defaults:function(){w.save.defaultText(),w.save.placeholderText(),w.save.defaultValue()},defaultValue:function(){var e=w.get.value();w.verbose("Saving default value as",e),j.data(M.defaultValue,e)},defaultText:function(){var e=w.get.text();w.verbose("Saving default text as",e),j.data(M.defaultText,e)},placeholderText:function(){var e;!1!==k.placeholder&&N.hasClass(T.placeholder)&&(e=w.get.text(),w.verbose("Saving placeholder text as",e),j.data(M.placeholderText,e))},remoteData:function(e,n){void 0!==t.Storage?(w.verbose("Saving remote data to session storage",n,e),sessionStorage.setItem(n,e)):w.error(P.noStorage)}},clear:function(){w.is.multiple()&&k.useLabels?w.remove.labels():(w.remove.activeItem(),w.remove.selectedItem()),w.set.placeholderText(),w.clearValue()},clearValue:function(){w.set.value("")},scrollPage:function(e,t){var n,r,i=t||w.get.selectedItem(),o=i.closest(L.menu),a=o.outerHeight(),s=o.scrollTop(),l=$.eq(0).outerHeight(),c=Math.floor(a/l),u=(o.prop("scrollHeight"),"up"==e?s-l*c:s+l*c),d=$.not(L.unselectable);r="up"==e?d.index(i)-c:d.index(i)+c,(n=("up"==e?r>=0:r<d.length)?d.eq(r):"up"==e?d.first():d.last()).length>0&&(w.debug("Scrolling page",e,n),i.removeClass(T.selected),n.addClass(T.selected),k.selectOnKeydown&&w.is.single()&&w.set.selectedItem(n),o.scrollTop(u))},set:{filtered:function(){var e=w.is.multiple(),t=w.is.searchSelection(),n=e&&t,r=t?w.get.query():"",i="string"==typeof r&&r.length>0,o=w.get.searchWidth(),a=""!==r;e&&i&&(w.verbose("Adjusting input width",o,k.glyphWidth),z.css("width",o)),i||n&&a?(w.verbose("Hiding placeholder text"),N.addClass(T.filtered)):(!e||n&&!a)&&(w.verbose("Showing placeholder text"),N.removeClass(T.filtered))},empty:function(){j.addClass(T.empty)},loading:function(){j.addClass(T.loading)},placeholderText:function(e){e=e||w.get.placeholderText(),w.debug("Setting placeholder text",e),w.set.text(e),N.addClass(T.placeholder)},tabbable:function(){w.is.searchSelection()?(w.debug("Added tabindex to searchable dropdown"),z.val("").attr("tabindex",0),U.attr("tabindex",-1)):(w.debug("Added tabindex to dropdown"),void 0===j.attr("tabindex")&&(j.attr("tabindex",0),U.attr("tabindex",-1)))},initialLoad:function(){w.verbose("Setting initial load"),g=!0},activeItem:function(e){k.allowAdditions&&e.filter(L.addition).length>0?e.addClass(T.filtered):e.addClass(T.active)},partialSearch:function(e){var t=w.get.query().length;z.val(e.substr(0,t))},scrollPosition:function(e,t){var n,r,i,o,a,s;n=(e=e||w.get.selectedItem()).closest(L.menu),r=e&&e.length>0,t=void 0!==t&&t,e&&n.length>0&&r&&(e.position().top,n.addClass(T.loading),i=(o=n.scrollTop())-n.offset().top+e.offset().top,t||(s=o+n.height()<i+5,a=i-5<o),w.debug("Scrolling to active item",i),(t||a||s)&&n.scrollTop(i),n.removeClass(T.loading))},text:function(e){"select"!==k.action&&("combo"==k.action?(w.debug("Changing combo button text",e,V),k.preserveHTML?V.html(e):V.text(e)):(e!==w.get.placeholderText()&&N.removeClass(T.placeholder),w.debug("Changing text",e,N),N.removeClass(T.filtered),k.preserveHTML?N.html(e):N.text(e)))},selectedItem:function(e){var t=w.get.choiceValue(e),n=w.get.choiceText(e,!1),r=w.get.choiceText(e,!0);w.debug("Setting user selection to item",e),w.remove.activeItem(),w.set.partialSearch(n),w.set.activeItem(e),w.set.selected(t,e),w.set.text(r)},selectedLetter:function(t){var n,r=$.filter("."+T.selected),i=!1;r.length>0&&w.has.firstLetter(r,t)&&(n=r.nextAll($).eq(0),w.has.firstLetter(n,t)&&(i=n)),i||$.each(function(){if(w.has.firstLetter(e(this),t))return i=e(this),!1}),i&&(w.verbose("Scrolling to next value with letter",t),w.set.scrollPosition(i),r.removeClass(T.selected),i.addClass(T.selected),k.selectOnKeydown&&w.is.single()&&w.set.selectedItem(i))},direction:function(e){"auto"==k.direction?(w.remove.upward(),w.can.openDownward(e)?w.remove.upward(e):w.set.upward(e),w.is.leftward(e)||w.can.openRightward(e)||w.set.leftward(e)):"upward"==k.direction&&w.set.upward(e)},upward:function(e){(e||j).addClass(T.upward)},leftward:function(e){(e||U).addClass(T.leftward)},value:function(e,t,n){var r=w.escape.value(e),i=H.length>0,o=(w.has.value(e),w.get.values()),a=void 0!==e?String(e):e;if(i){if(!k.allowReselection&&a==o&&(w.verbose("Skipping value update already same value",e,o),!w.is.initialLoad()))return;w.is.single()&&w.has.selectInput()&&w.can.extendSelect()&&(w.debug("Adding user option",e),w.add.optionValue(e)),w.debug("Updating input value",r,o),G=!0,H.val(r),!1===k.fireOnInit&&w.is.initialLoad()?w.debug("Input native change event ignored on initial load"):w.trigger.change(),G=!1}else w.verbose("Storing value in metadata",r,H),r!==o&&j.data(M.value,a);!1===k.fireOnInit&&w.is.initialLoad()?w.verbose("No callback on initial load",k.onChange):k.onChange.call(Y,e,t,n)},active:function(){j.addClass(T.active)},multiple:function(){j.addClass(T.multiple)},visible:function(){j.addClass(T.visible)},exactly:function(e,t){w.debug("Setting selected to exact values"),w.clear(),w.set.selected(e,t)},selected:function(t,n){var r=w.is.multiple();(n=k.allowAdditions?n||w.get.itemWithAdditions(t):n||w.get.item(t))&&(w.debug("Setting selected menu item to",n),w.is.multiple()&&w.remove.searchWidth(),w.is.single()?(w.remove.activeItem(),w.remove.selectedItem()):k.useLabels&&w.remove.selectedItem(),n.each(function(){var t=e(this),i=w.get.choiceText(t),o=w.get.choiceValue(t,i),a=t.hasClass(T.filtered),s=t.hasClass(T.active),l=t.hasClass(T.addition),c=r&&1==n.length;r?!s||l?(k.apiSettings&&k.saveRemoteData&&w.save.remoteData(i,o),k.useLabels?(w.add.value(o,i,t),w.add.label(o,i,c),w.set.activeItem(t),w.filterActive(),w.select.nextAvailable(n)):(w.add.value(o,i,t),w.set.text(w.add.variables(A.count)),w.set.activeItem(t))):a||(w.debug("Selected active value, removing label"),w.remove.selected(o)):(k.apiSettings&&k.saveRemoteData&&w.save.remoteData(i,o),w.set.text(i),w.set.value(o,i,t),t.addClass(T.active).addClass(T.selected))}))}},add:{label:function(t,n,r){var i,o=w.is.searchSelection()?z:N,a=w.escape.value(t);i=e("<a />").addClass(T.label).attr("data-"+M.value,a).html(D.label(a,n)),i=k.onLabelCreate.call(i,a,n),w.has.label(t)?w.debug("Label already exists, skipping",a):(k.label.variation&&i.addClass(k.label.variation),!0===r?(w.debug("Animating in label",i),i.addClass(T.hidden).insertBefore(o).transition(k.label.transition,k.label.duration)):(w.debug("Adding selection label",i),i.insertBefore(o)))},message:function(t){var n=U.children(L.message),r=k.templates.message(w.add.variables(t));n.length>0?n.html(r):n=e("<div/>").html(r).addClass(T.message).appendTo(U)},optionValue:function(t){var n=w.escape.value(t);H.find('option[value="'+w.escape.string(n)+'"]').length>0||(w.disconnect.selectObserver(),w.is.single()&&(w.verbose("Removing previous user addition"),H.find("option."+T.addition).remove()),e("<option/>").prop("value",n).addClass(T.addition).html(t).appendTo(H),w.verbose("Adding user addition as an <option>",t),w.observe.select())},userSuggestion:function(e){var t,n=U.children(L.addition),r=w.get.item(e),i=r&&r.not(L.addition).length,o=n.length>0;k.useLabels&&w.has.maxSelections()||(""===e||i?n.remove():(o?(n.data(M.value,e).data(M.text,e).attr("data-"+M.value,e).attr("data-"+M.text,e).removeClass(T.filtered),k.hideAdditions||(t=k.templates.addition(w.add.variables(A.addResult,e)),n.html(t)),w.verbose("Replacing user suggestion with new value",n)):((n=w.create.userChoice(e)).prependTo(U),w.verbose("Adding item choice to menu corresponding with user choice addition",n)),k.hideAdditions&&!w.is.allFiltered()||n.addClass(T.selected).siblings().removeClass(T.selected),w.refreshItems()))},variables:function(e,t){var n,r,i=-1!==e.search("{count}"),o=-1!==e.search("{maxCount}"),a=-1!==e.search("{term}");return w.verbose("Adding templated variables to message",e),i&&(n=w.get.selectionCount(),e=e.replace("{count}",n)),o&&(n=w.get.selectionCount(),e=e.replace("{maxCount}",k.maxSelections)),a&&(r=t||w.get.query(),e=e.replace("{term}",r)),e},value:function(t,n,r){var i,o=w.get.values();""!==t?(e.isArray(o)?(i=o.concat([t]),i=w.get.uniqueArray(i)):i=[t],w.has.selectInput()?w.can.extendSelect()&&(w.debug("Adding value to select",t,i,H),w.add.optionValue(t)):(i=i.join(k.delimiter),w.debug("Setting hidden input to delimited value",i,H)),!1===k.fireOnInit&&w.is.initialLoad()?w.verbose("Skipping onadd callback on initial load",k.onAdd):k.onAdd.call(Y,t,n,r),w.set.value(i,t,n,r),w.check.maxSelections()):w.debug("Cannot select blank values from multiselect")}},remove:{active:function(){j.removeClass(T.active)},activeLabel:function(){j.find(L.label).removeClass(T.active)},empty:function(){j.removeClass(T.empty)},loading:function(){j.removeClass(T.loading)},initialLoad:function(){g=!1},upward:function(e){(e||j).removeClass(T.upward)},leftward:function(e){(e||U).removeClass(T.leftward)},visible:function(){j.removeClass(T.visible)},activeItem:function(){$.removeClass(T.active)},filteredItem:function(){k.useLabels&&w.has.maxSelections()||(k.useLabels&&w.is.multiple()?$.not("."+T.active).removeClass(T.filtered):$.removeClass(T.filtered),w.remove.empty())},optionValue:function(e){var t=w.escape.value(e),n=H.find('option[value="'+w.escape.string(t)+'"]');n.length>0&&n.hasClass(T.addition)&&(x&&(x.disconnect(),w.verbose("Temporarily disconnecting mutation observer")),n.remove(),w.verbose("Removing user addition as an <option>",t),x&&x.observe(H[0],{childList:!0,subtree:!0}))},message:function(){U.children(L.message).remove()},searchWidth:function(){z.css("width","")},searchTerm:function(){w.verbose("Cleared search term"),z.val(""),w.set.filtered()},userAddition:function(){$.filter(L.addition).remove()},selected:function(t,n){if(!(n=k.allowAdditions?n||w.get.itemWithAdditions(t):n||w.get.item(t)))return!1;n.each(function(){var t=e(this),n=w.get.choiceText(t),r=w.get.choiceValue(t,n);w.is.multiple()?k.useLabels?(w.remove.value(r,n,t),w.remove.label(r)):(w.remove.value(r,n,t),0===w.get.selectionCount()?w.set.placeholderText():w.set.text(w.add.variables(A.count))):w.remove.value(r,n,t),t.removeClass(T.filtered).removeClass(T.active),k.useLabels&&t.removeClass(T.selected)})},selectedItem:function(){$.removeClass(T.selected)},value:function(e,t,n){var r,i=w.get.values();w.has.selectInput()?(w.verbose("Input is <select> removing selected option",e),r=w.remove.arrayValue(e,i),w.remove.optionValue(e)):(w.verbose("Removing from delimited values",e),r=(r=w.remove.arrayValue(e,i)).join(k.delimiter)),!1===k.fireOnInit&&w.is.initialLoad()?w.verbose("No callback on initial load",k.onRemove):k.onRemove.call(Y,e,t,n),w.set.value(r,t,n),w.check.maxSelections()},arrayValue:function(t,n){return e.isArray(n)||(n=[n]),n=e.grep(n,function(e){return t!=e}),w.verbose("Removed value from delimited string",t,n),n},label:function(e,t){var n=j.find(L.label).filter("[data-"+M.value+'="'+w.escape.string(e)+'"]');w.verbose("Removing label",n),n.remove()},activeLabels:function(e){e=e||j.find(L.label).filter("."+T.active),w.verbose("Removing active label selections",e),w.remove.labels(e)},labels:function(t){t=t||j.find(L.label),w.verbose("Removing labels",t),t.each(function(){var t=e(this),n=t.data(M.value),r=void 0!==n?String(n):n,i=w.is.userValue(r);!1!==k.onLabelRemove.call(t,n)?(w.remove.message(),i?(w.remove.value(r),w.remove.label(r)):w.remove.selected(r)):w.debug("Label remove callback cancelled removal")})},tabbable:function(){w.is.searchSelection()?(w.debug("Searchable dropdown initialized"),z.removeAttr("tabindex"),U.removeAttr("tabindex")):(w.debug("Simple selection dropdown initialized"),j.removeAttr("tabindex"),U.removeAttr("tabindex"))}},has:{menuSearch:function(){return w.has.search()&&z.closest(U).length>0},search:function(){return z.length>0},sizer:function(){return q.length>0},selectInput:function(){return H.is("select")},minCharacters:function(e){return!k.minCharacters||(e=void 0!==e?String(e):String(w.get.query())).length>=k.minCharacters},firstLetter:function(e,t){var n;return!(!e||0===e.length||"string"!=typeof t)&&(n=w.get.choiceText(e,!1),(t=t.toLowerCase())==String(n).charAt(0).toLowerCase())},input:function(){return H.length>0},items:function(){return $.length>0},menu:function(){return U.length>0},message:function(){return 0!==U.children(L.message).length},label:function(e){var t=w.escape.value(e);return j.find(L.label).filter("[data-"+M.value+'="'+w.escape.string(t)+'"]').length>0},maxSelections:function(){return k.maxSelections&&w.get.selectionCount()>=k.maxSelections},allResultsFiltered:function(){var e=$.not(L.addition);return e.filter(L.unselectable).length===e.length},userSuggestion:function(){return U.children(L.addition).length>0},query:function(){return""!==w.get.query()},value:function(t){var n=w.get.values();return!!(e.isArray(n)?n&&-1!==e.inArray(t,n):n==t)}},is:{active:function(){return j.hasClass(T.active)},bubbledLabelClick:function(t){return e(t.target).is("select, input")&&j.closest("label").length>0},bubbledIconClick:function(t){return e(t.target).closest(B).length>0},alreadySetup:function(){return j.is("select")&&void 0!==j.parent(L.dropdown).data(F)&&0===j.prev().length},animating:function(e){return e?e.transition&&e.transition("is animating"):U.transition&&U.transition("is animating")},leftward:function(e){return(e||U).hasClass(T.leftward)},disabled:function(){return j.hasClass(T.disabled)},focused:function(){return n.activeElement===j[0]},focusedOnSearch:function(){return n.activeElement===z[0]},allFiltered:function(){return(w.is.multiple()||w.has.search())&&!(0==k.hideAdditions&&w.has.userSuggestion())&&!w.has.message()&&w.has.allResultsFiltered()},hidden:function(e){return!w.is.visible(e)},initialLoad:function(){return g},inObject:function(t,n){var r=!1;return e.each(n,function(e,n){if(n==t)return r=!0,!0}),r},multiple:function(){return j.hasClass(T.multiple)},remote:function(){return k.apiSettings&&w.can.useAPI()},single:function(){return!w.is.multiple()},selectMutation:function(t){var n=!1;return e.each(t,function(t,r){if(r.target&&e(r.target).is("select"))return n=!0,!0}),n},search:function(){return j.hasClass(T.search)},searchSelection:function(){return w.has.search()&&1===z.parent(L.dropdown).length},selection:function(){return j.hasClass(T.selection)},userValue:function(t){return-1!==e.inArray(t,w.get.userValues())},upward:function(e){return(e||j).hasClass(T.upward)},visible:function(e){return e?e.hasClass(T.visible):U.hasClass(T.visible)},verticallyScrollableContext:function(){var e=I.get(0)!==t&&I.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=I.get(0)!==t&&I.css("overflow-X");return"auto"==e||"scroll"==e}},can:{activate:function(e){return!!k.useLabels||(!w.has.maxSelections()||!(!w.has.maxSelections()||!e.hasClass(T.active)))},openDownward:function(e){var t,n,r=e||U,i=!0;return r.addClass(T.loading),n={context:{scrollTop:I.scrollTop(),height:I.outerHeight()},menu:{offset:r.offset(),height:r.outerHeight()}},w.is.verticallyScrollableContext()&&(n.menu.offset.top+=n.context.scrollTop),(t={above:n.context.scrollTop<=n.menu.offset.top-n.menu.height,below:n.context.scrollTop+n.context.height>=n.menu.offset.top+n.menu.height}).below?(w.verbose("Dropdown can fit in context downward",t),i=!0):t.below||t.above?(w.verbose("Dropdown cannot fit below, opening upward",t),i=!1):(w.verbose("Dropdown cannot fit in either direction, favoring downward",t),i=!0),r.removeClass(T.loading),i},openRightward:function(e){var t,n,r=e||U,i=!0;return r.addClass(T.loading),n={context:{scrollLeft:I.scrollLeft(),width:I.outerWidth()},menu:{offset:r.offset(),width:r.outerWidth()}},w.is.horizontallyScrollableContext()&&(n.menu.offset.left+=n.context.scrollLeft),(t=n.menu.offset.left+n.menu.width>=n.context.scrollLeft+n.context.width)&&(w.verbose("Dropdown cannot fit in context rightward",t),i=!1),r.removeClass(T.loading),i},click:function(){return l||"click"==k.on},extendSelect:function(){return k.allowAdditions||k.apiSettings},show:function(){return!w.is.disabled()&&(w.has.items()||w.has.message())},useAPI:function(){return void 0!==e.fn.api}},animate:{show:function(t,n){var r,i=n||U,o=n?function(){}:function(){w.hideSubMenus(),w.hideOthers(),w.set.active()};t=e.isFunction(t)?t:function(){},w.verbose("Doing menu show animation",i),w.set.direction(n),r=w.get.transition(n),w.is.selection()&&w.set.scrollPosition(w.get.selectedItem(),!0),(w.is.hidden(i)||w.is.animating(i))&&("none"==r?(o(),i.transition("show"),t.call(Y)):void 0!==e.fn.transition&&j.transition("is supported")?i.transition({animation:r+" in",debug:k.debug,verbose:k.verbose,duration:k.duration,queue:!0,onStart:o,onComplete:function(){t.call(Y)}}):w.error(P.noTransition,r))},hide:function(t,n){var r=n||U,i=(n?k.duration:k.duration,n?function(){}:function(){w.can.click()&&w.unbind.intent(),w.remove.active()}),o=w.get.transition(n);t=e.isFunction(t)?t:function(){},(w.is.visible(r)||w.is.animating(r))&&(w.verbose("Doing menu hide animation",r),"none"==o?(i(),r.transition("hide"),t.call(Y)):void 0!==e.fn.transition&&j.transition("is supported")?r.transition({animation:o+" out",duration:k.duration,debug:k.debug,verbose:k.verbose,queue:!0,onStart:i,onComplete:function(){t.call(Y)}}):w.error(P.transition))}},hideAndClear:function(){w.remove.searchTerm(),w.has.maxSelections()||(w.has.search()?w.hide(function(){w.remove.filteredItem()}):w.hide())},delay:{show:function(){w.verbose("Delaying show event to ensure user intent"),clearTimeout(w.timer),w.timer=setTimeout(w.show,k.delay.show)},hide:function(){w.verbose("Delaying hide event to ensure user intent"),clearTimeout(w.timer),w.timer=setTimeout(w.hide,k.delay.hide)}},escape:{value:function(t){var n=e.isArray(t),r="string"==typeof t,i=!r&&!n,o=r&&-1!==t.search(O.quote),a=[];return i||!o?t:(w.debug("Encoding quote values for use in select",t),n?(e.each(t,function(e,t){a.push(t.replace(O.quote,"&quot;"))}),a):t.replace(O.quote,"&quot;"))},string:function(e){return(e=String(e)).replace(O.escape,"\\$&")}},setting:function(t,n){if(w.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,k,t);else{if(void 0===n)return k[t];e.isPlainObject(k[t])?e.extend(!0,k[t],n):k[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,w,t);else{if(void 0===n)return w[t];w[t]=n}},debug:function(){!k.silent&&k.debug&&(k.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,k.name+":"),w.debug.apply(console,arguments)))},verbose:function(){!k.silent&&k.verbose&&k.debug&&(k.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,k.name+":"),w.verbose.apply(console,arguments)))},error:function(){k.silent||(w.error=Function.prototype.bind.call(console.error,console,k.name+":"),w.error.apply(console,arguments))},performance:{log:function(e){var t,n;k.performance&&(n=(t=(new Date).getTime())-(c||t),c=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:Y,"Execution Time":n})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(w.performance.display,500)},display:function(){var t=k.name+":",n=0;c=!1,clearTimeout(w.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(void 0!==console.group||void 0!==console.table)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,r){var o,a,s,l=Z;return n=n||p,r=Y||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(w.error(P.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},f?(void 0===Z&&w.initialize(),w.invoke(d)):(void 0!==Z&&Z.invoke("destroy"),w.initialize())}),void 0!==i?i:o},e.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",values:!1,apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:t,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(e,t,n){},onAdd:function(e,t,n){},onRemove:function(e,t,n){},onLabelSelect:function(e){},onLabelCreate:function(t,n){return e(this)},onLabelRemove:function(e){return!0},onNoResults:function(e){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}},e.fn.dropdown.settings.templates={dropdown:function(t){var n=t.placeholder||!1,r=(t.values,"");return r+='<i class="dropdown icon"></i>',t.placeholder?r+='<div class="default text">'+n+"</div>":r+='<div class="text"></div>',r+='<div class="menu">',e.each(t.values,function(e,t){r+=t.disabled?'<div class="disabled item" data-value="'+t.value+'">'+t.name+"</div>":'<div class="item" data-value="'+t.value+'">'+t.name+"</div>"}),r+="</div>"},menu:function(t,n){var r=t[n.values]||{},i="";return e.each(r,function(e,t){var r=t[n.text]?'data-text="'+t[n.text]+'"':"",o=t[n.disabled]?"disabled ":"";i+='<div class="'+o+'item" data-value="'+t[n.value]+'"'+r+">",i+=t[n.name],i+="</div>"}),i},label:function(e,t){return t+'<i class="delete icon"></i>'},message:function(e){return e},addition:function(e){return e}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.embed=function(n){var r,i=e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var d,f=e.isPlainObject(n)?e.extend(!0,{},e.fn.embed.settings,n):e.extend({},e.fn.embed.settings),p=f.selector,h=f.className,g=f.sources,v=f.error,m=f.metadata,b=f.namespace,y=f.templates,x="."+b,_="module-"+b,w=(e(t),e(this)),k=(w.find(p.placeholder),w.find(p.icon),w.find(p.embed)),T=this,A=w.data(_);d={initialize:function(){d.debug("Initializing embed"),d.determine.autoplay(),d.create(),d.bind.events(),d.instantiate()},instantiate:function(){d.verbose("Storing instance of module",d),A=d,w.data(_,d)},destroy:function(){d.verbose("Destroying previous instance of embed"),d.reset(),w.removeData(_).off(x)},refresh:function(){d.verbose("Refreshing selector cache"),w.find(p.placeholder),w.find(p.icon),k=w.find(p.embed)},bind:{events:function(){d.has.placeholder()&&(d.debug("Adding placeholder events"),w.on("click"+x,p.placeholder,d.createAndShow).on("click"+x,p.icon,d.createAndShow))}},create:function(){d.get.placeholder()?d.createPlaceholder():d.createAndShow()},createPlaceholder:function(e){var t=d.get.icon(),n=d.get.url();d.generate.embed(n);e=e||d.get.placeholder(),w.html(y.placeholder(e,t)),d.debug("Creating placeholder for embed",e,t)},createEmbed:function(t){d.refresh(),t=t||d.get.url(),k=e("<div/>").addClass(h.embed).html(d.generate.embed(t)).appendTo(w),f.onCreate.call(T,t),d.debug("Creating embed object",k)},changeEmbed:function(e){k.html(d.generate.embed(e))},createAndShow:function(){d.createEmbed(),d.show()},change:function(e,t,n){d.debug("Changing video to ",e,t,n),w.data(m.source,e).data(m.id,t),n?w.data(m.url,n):w.removeData(m.url),d.has.embed()?d.changeEmbed():d.create()},reset:function(){d.debug("Clearing embed and showing placeholder"),d.remove.active(),d.remove.embed(),d.showPlaceholder(),f.onReset.call(T)},show:function(){d.debug("Showing embed"),d.set.active(),f.onDisplay.call(T)},hide:function(){d.debug("Hiding embed"),d.showPlaceholder()},showPlaceholder:function(){d.debug("Showing placeholder image"),d.remove.active(),f.onPlaceholderDisplay.call(T)},get:{id:function(){return f.id||w.data(m.id)},placeholder:function(){return f.placeholder||w.data(m.placeholder)},icon:function(){return f.icon?f.icon:void 0!==w.data(m.icon)?w.data(m.icon):d.determine.icon()},source:function(e){return f.source?f.source:void 0!==w.data(m.source)?w.data(m.source):d.determine.source()},type:function(){var e=d.get.source();return void 0!==g[e]&&g[e].type},url:function(){return f.url?f.url:void 0!==w.data(m.url)?w.data(m.url):d.determine.url()}},determine:{autoplay:function(){d.should.autoplay()&&(f.autoplay=!0)},source:function(t){var n=!1;return(t=t||d.get.url())&&e.each(g,function(e,r){if(-1!==t.search(r.domain))return n=e,!1}),n},icon:function(){var e=d.get.source();return void 0!==g[e]&&g[e].icon},url:function(){var e,t=f.id||w.data(m.id),n=f.source||w.data(m.source);return(e=void 0!==g[n]&&g[n].url.replace("{id}",t))&&w.data(m.url,e),e}},set:{active:function(){w.addClass(h.active)}},remove:{active:function(){w.removeClass(h.active)},embed:function(){k.empty()}},encode:{parameters:function(e){var t,n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&amp;")}},generate:{embed:function(e){d.debug("Generating embed html");var t,n,r=d.get.source();return(e=d.get.url(e))?(n=d.generate.parameters(r),t=y.iframe(e,n)):d.error(v.noURL,w),t},parameters:function(t,n){var r=g[t]&&void 0!==g[t].parameters?g[t].parameters(f):{};return(n=n||f.parameters)&&(r=e.extend({},r,n)),r=f.onEmbed(r),d.encode.parameters(r)}},has:{embed:function(){return k.length>0},placeholder:function(){return f.placeholder||w.data(m.placeholder)}},should:{autoplay:function(){return"auto"===f.autoplay?f.placeholder||void 0!==w.data(m.placeholder):f.autoplay}},is:{video:function(){return"video"==d.get.type()}},setting:function(t,n){if(d.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],n):f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];d[t]=n}},debug:function(){!f.silent&&f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){f.silent||(d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments))},performance:{log:function(e){var t,n;f.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,500)},display:function(){var t=f.name+":",n=0;a=!1,clearTimeout(d.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),i.length>1&&(t+=" ("+i.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,i){var o,a,s,l=A;return n=n||u,i=T||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(d.error(v.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},c?(void 0===A&&d.initialize(),d.invoke(l)):(void 0!==A&&A.invoke("destroy"),d.initialize())}),void 0!==r?r:this},e.fn.embed.settings={name:"Embed",namespace:"embed",silent:!1,debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.color||void 0,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.color||void 0,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{iframe:function(e,t){var n=e;return t&&(n+="?"+t),'<iframe src="'+n+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(e,t){var n="";return t&&(n+='<i class="'+t+' icon"></i>'),e&&(n+='<img class="placeholder" src="'+e+'">'),n}},api:!1,onPause:function(){},onPlay:function(){},onStop:function(){}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.modal=function(r){var i,o=e(this),a=e(t),s=e(n),l=e("body"),c=o.selector||"",u=(new Date).getTime(),d=[],f=arguments[0],p="string"==typeof f,h=[].slice.call(arguments,1),g=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var o,v,m,b,y,x,_,w,k,T=e.isPlainObject(r)?e.extend(!0,{},e.fn.modal.settings,r):e.extend({},e.fn.modal.settings),A=T.selector,C=T.className,S=T.namespace,M=T.error,E="."+S,O="module-"+S,L=e(this),P=e(T.context),D=L.find(A.close),R=this,F=L.data(O),j=!1;k={initialize:function(){k.verbose("Initializing dimmer",P),k.create.id(),k.create.dimmer(),k.refreshModals(),k.bind.events(),T.observeChanges&&k.observeChanges(),k.instantiate()},instantiate:function(){k.verbose("Storing instance of modal"),F=k,L.data(O,F)},create:{dimmer:function(){var t={debug:T.debug,dimmerName:"modals"},n=e.extend(!0,t,T.dimmerSettings);void 0!==e.fn.dimmer?(k.debug("Creating dimmer"),b=P.dimmer(n),T.detachable?(k.verbose("Modal is detachable, moving content into dimmer"),b.dimmer("add content",L)):k.set.undetached(),y=b.dimmer("get dimmer")):k.error(M.dimmer)},id:function(){_=(Math.random().toString(16)+"000000000").substr(2,8),x="."+_,k.verbose("Creating unique id for element",_)}},destroy:function(){k.verbose("Destroying previous modal"),L.removeData(O).off(E),a.off(x),y.off(x),D.off(E),P.dimmer("destroy")},observeChanges:function(){"MutationObserver"in t&&((w=new MutationObserver(function(e){k.debug("DOM tree modified, refreshing"),k.refresh()})).observe(R,{childList:!0,subtree:!0}),k.debug("Setting up mutation observer",w))},refresh:function(){k.remove.scrolling(),k.cacheSizes(),k.set.screenHeight(),k.set.type(),k.set.position()},refreshModals:function(){v=L.siblings(A.modal),o=v.add(L)},attachEvents:function(t,n){var r=e(t);n=e.isFunction(k[n])?k[n]:k.toggle,r.length>0?(k.debug("Attaching modal events to element",t,n),r.off(E).on("click"+E,n)):k.error(M.notFound,t)},bind:{events:function(){k.verbose("Attaching events"),L.on("click"+E,A.close,k.event.close).on("click"+E,A.approve,k.event.approve).on("click"+E,A.deny,k.event.deny),a.on("resize"+x,k.event.resize)}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){j||!1===T.onApprove.call(R,e(this))?k.verbose("Approve callback returned false cancelling hide"):(j=!0,k.hide(function(){j=!1}))},deny:function(){j||!1===T.onDeny.call(R,e(this))?k.verbose("Deny callback returned false cancelling hide"):(j=!0,k.hide(function(){j=!1}))},close:function(){k.hide()},click:function(t){var r=e(t.target).closest(A.modal).length>0,i=e.contains(n.documentElement,t.target);!r&&i&&(k.debug("Dimmer clicked, hiding all modals"),k.is.active()&&(k.remove.clickaway(),T.allowMultiple?k.hide():k.hideAll()))},debounce:function(e,t){clearTimeout(k.timer),k.timer=setTimeout(e,t)},keyboard:function(e){27==e.which&&(T.closable?(k.debug("Escape key pressed hiding modal"),k.hide()):k.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){b.dimmer("is active")&&(k.is.animating()||k.is.active())&&g(k.refresh)}},toggle:function(){k.is.active()||k.is.animating()?k.hide():k.show()},show:function(t){t=e.isFunction(t)?t:function(){},k.refreshModals(),k.set.dimmerSettings(),k.showModal(t)},hide:function(t){t=e.isFunction(t)?t:function(){},k.refreshModals(),k.hideModal(t)},showModal:function(t){t=e.isFunction(t)?t:function(){},k.is.animating()||!k.is.active()?(k.showDimmer(),k.cacheSizes(),k.set.position(),k.set.screenHeight(),k.set.type(),k.set.clickaway(),!T.allowMultiple&&k.others.active()?k.hideOthers(k.showModal):(T.allowMultiple&&T.detachable&&L.detach().appendTo(y),T.onShow.call(R),T.transition&&void 0!==e.fn.transition&&L.transition("is supported")?(k.debug("Showing modal with css animations"),L.transition({debug:T.debug,animation:T.transition+" in",queue:T.queue,duration:T.duration,useFailSafe:!0,onComplete:function(){T.onVisible.apply(R),T.keyboardShortcuts&&k.add.keyboardShortcuts(),k.save.focus(),k.set.active(),T.autofocus&&k.set.autofocus(),t()}})):k.error(M.noTransition))):k.debug("Modal is already visible")},hideModal:function(t,n){t=e.isFunction(t)?t:function(){},k.debug("Hiding modal"),!1!==T.onHide.call(R,e(this))?(k.is.animating()||k.is.active())&&(T.transition&&void 0!==e.fn.transition&&L.transition("is supported")?(k.remove.active(),L.transition({debug:T.debug,animation:T.transition+" out",queue:T.queue,duration:T.duration,useFailSafe:!0,onStart:function(){k.others.active()||n||k.hideDimmer(),T.keyboardShortcuts&&k.remove.keyboardShortcuts()},onComplete:function(){T.onHidden.call(R),k.restore.focus(),t()}})):k.error(M.noTransition)):k.verbose("Hide callback returned false cancelling hide")},showDimmer:function(){b.dimmer("is animating")||!b.dimmer("is active")?(k.debug("Showing dimmer"),b.dimmer("show")):k.debug("Dimmer already visible")},hideDimmer:function(){b.dimmer("is animating")||b.dimmer("is active")?b.dimmer("hide",function(){k.remove.clickaway(),k.remove.screenHeight()}):k.debug("Dimmer is not visible cannot hide")},hideAll:function(t){var n=o.filter("."+C.active+", ."+C.animating);t=e.isFunction(t)?t:function(){},n.length>0&&(k.debug("Hiding all visible modals"),k.hideDimmer(),n.modal("hide modal",t))},hideOthers:function(t){var n=v.filter("."+C.active+", ."+C.animating);t=e.isFunction(t)?t:function(){},n.length>0&&(k.debug("Hiding other modals",v),n.modal("hide modal",t,!0))},others:{active:function(){return v.filter("."+C.active).length>0},animating:function(){return v.filter("."+C.animating).length>0}},add:{keyboardShortcuts:function(){k.verbose("Adding keyboard shortcuts"),s.on("keyup"+E,k.event.keyboard)}},save:{focus:function(){m=e(n.activeElement).blur()}},restore:{focus:function(){m&&m.length>0&&m.focus()}},remove:{active:function(){L.removeClass(C.active)},clickaway:function(){T.closable&&y.off("click"+x)},bodyStyle:function(){""===l.attr("style")&&(k.verbose("Removing style attribute"),l.removeAttr("style"))},screenHeight:function(){k.debug("Removing page height"),l.css("height","")},keyboardShortcuts:function(){k.verbose("Removing keyboard shortcuts"),s.off("keyup"+E)},scrolling:function(){b.removeClass(C.scrolling),L.removeClass(C.scrolling)}},cacheSizes:function(){L.addClass(C.loading);var r=L.prop("scrollHeight"),i=L.outerHeight();void 0!==k.cache&&0===i||(k.cache={pageHeight:e(n).outerHeight(),height:i+T.offset,scrollHeight:r+T.offset,contextHeight:"body"==T.context?e(t).height():b.height()},k.cache.topOffset=-k.cache.height/2),L.removeClass(C.loading),k.debug("Caching modal and container sizes",k.cache)},can:{fit:function(){var e=k.cache.contextHeight,t=k.cache.contextHeight/2,n=k.cache.topOffset,r=k.cache.scrollHeight,i=k.cache.height,o=T.padding;return r>i?t+n+r+o<e:i+2*o<e}},is:{active:function(){return L.hasClass(C.active)},animating:function(){return L.transition("is supported")?L.transition("is animating"):L.is(":visible")},scrolling:function(){return b.hasClass(C.scrolling)},modernBrowser:function(){return!(t.ActiveXObject||"ActiveXObject"in t)}},set:{autofocus:function(){var e=L.find("[tabindex], :input").filter(":visible"),t=e.filter("[autofocus]"),n=t.length>0?t.first():e.first();n.length>0&&n.focus()},clickaway:function(){T.closable&&y.on("click"+x,k.event.click)},dimmerSettings:function(){if(void 0!==e.fn.dimmer){var t={debug:T.debug,dimmerName:"modals",variation:!1,closable:"auto",duration:{show:T.duration,hide:T.duration}},n=e.extend(!0,t,T.dimmerSettings);T.inverted?(n.variation=void 0!==n.variation?n.variation+" inverted":"inverted",y.addClass(C.inverted)):y.removeClass(C.inverted),T.blurring?b.addClass(C.blurring):b.removeClass(C.blurring),P.dimmer("setting",n)}else k.error(M.dimmer)},screenHeight:function(){k.can.fit()?l.css("height",""):(k.debug("Modal is taller than page content, resizing page height"),l.css("height",k.cache.height+2*T.padding))},active:function(){L.addClass(C.active)},scrolling:function(){b.addClass(C.scrolling),L.addClass(C.scrolling)},type:function(){k.can.fit()?(k.verbose("Modal fits on screen"),k.others.active()||k.others.animating()||k.remove.scrolling()):(k.verbose("Modal cannot fit on screen setting to scrolling"),k.set.scrolling())},position:function(){k.verbose("Centering modal on page",k.cache),k.can.fit()?L.css({top:"",marginTop:k.cache.topOffset}):L.css({marginTop:"",top:s.scrollTop()})},undetached:function(){b.addClass(C.undetached)}},setting:function(t,n){if(k.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,T,t);else{if(void 0===n)return T[t];e.isPlainObject(T[t])?e.extend(!0,T[t],n):T[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,k,t);else{if(void 0===n)return k[t];k[t]=n}},debug:function(){!T.silent&&T.debug&&(T.performance?k.performance.log(arguments):(k.debug=Function.prototype.bind.call(console.info,console,T.name+":"),k.debug.apply(console,arguments)))},verbose:function(){!T.silent&&T.verbose&&T.debug&&(T.performance?k.performance.log(arguments):(k.verbose=Function.prototype.bind.call(console.info,console,T.name+":"),k.verbose.apply(console,arguments)))},error:function(){T.silent||(k.error=Function.prototype.bind.call(console.error,console,T.name+":"),k.error.apply(console,arguments))},performance:{log:function(e){var t,n;T.performance&&(n=(t=(new Date).getTime())-(u||t),u=t,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(k.performance.timer),k.performance.timer=setTimeout(k.performance.display,500)},display:function(){var t=T.name+":",n=0;u=!1,clearTimeout(k.performance.timer),e.each(d,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",c&&(t+=" '"+c+"'"),(void 0!==console.group||void 0!==console.table)&&d.length>0&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),d=[]}},invoke:function(t,n,r){var o,a,s,l=F;return n=n||h,r=R||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},p?(void 0===F&&k.initialize(),k.invoke(f)):(void 0!==F&&F.invoke("destroy"),k.initialize())}),void 0!==i?i:this},e.fn.modal.settings={name:"Modal",namespace:"modal",silent:!1,debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,inverted:!1,blurring:!1,dimmerSettings:{closable:!1,useCSS:!0},keyboardShortcuts:!0,context:"body",queue:!1,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){return!0},onHidden:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",inverted:"inverted",loading:"loading",scrolling:"scrolling",undetached:"undetached"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.nag=function(n){var r,i=e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var i,d=e.isPlainObject(n)?e.extend(!0,{},e.fn.nag.settings,n):e.extend({},e.fn.nag.settings),f=(d.className,d.selector),p=d.error,h=d.namespace,g="."+h,v=h+"-module",m=e(this),b=(m.find(f.close),d.context?e(d.context):e("body")),y=this,x=m.data(v);t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame;i={initialize:function(){i.verbose("Initializing element"),m.on("click"+g,f.close,i.dismiss).data(v,i),d.detachable&&m.parent()[0]!==b[0]&&m.detach().prependTo(b),d.displayTime>0&&setTimeout(i.hide,d.displayTime),i.show()},destroy:function(){i.verbose("Destroying instance"),m.removeData(v).off(g)},show:function(){i.should.show()&&!m.is(":visible")&&(i.debug("Showing nag",d.animation.show),"fade"==d.animation.show?m.fadeIn(d.duration,d.easing):m.slideDown(d.duration,d.easing))},hide:function(){i.debug("Showing nag",d.animation.hide),"fade"==d.animation.show?m.fadeIn(d.duration,d.easing):m.slideUp(d.duration,d.easing)},onHide:function(){i.debug("Removing nag",d.animation.hide),m.remove(),d.onHide&&d.onHide()},dismiss:function(e){d.storageMethod&&i.storage.set(d.key,d.value),i.hide(),e.stopImmediatePropagation(),e.preventDefault()},should:{show:function(){return d.persist?(i.debug("Persistent nag is set, can show nag"),!0):i.storage.get(d.key)!=d.value.toString()?(i.debug("Stored value is not set, can show nag",i.storage.get(d.key)),!0):(i.debug("Stored value is set, cannot show nag",i.storage.get(d.key)),!1)}},get:{storageOptions:function(){var e={};return d.expires&&(e.expires=d.expires),d.domain&&(e.domain=d.domain),d.path&&(e.path=d.path),e}},clear:function(){i.storage.remove(d.key)},storage:{set:function(n,r){var o=i.get.storageOptions();if("localstorage"==d.storageMethod&&void 0!==t.localStorage)t.localStorage.setItem(n,r),i.debug("Value stored using local storage",n,r);else if("sessionstorage"==d.storageMethod&&void 0!==t.sessionStorage)t.sessionStorage.setItem(n,r),i.debug("Value stored using session storage",n,r);else{if(void 0===e.cookie)return void i.error(p.noCookieStorage);e.cookie(n,r,o),i.debug("Value stored using cookie",n,r,o)}},get:function(n,r){var o;return"localstorage"==d.storageMethod&&void 0!==t.localStorage?o=t.localStorage.getItem(n):"sessionstorage"==d.storageMethod&&void 0!==t.sessionStorage?o=t.sessionStorage.getItem(n):void 0!==e.cookie?o=e.cookie(n):i.error(p.noCookieStorage),"undefined"!=o&&"null"!=o&&void 0!==o&&null!==o||(o=void 0),o},remove:function(n){var r=i.get.storageOptions();"localstorage"==d.storageMethod&&void 0!==t.localStorage?t.localStorage.removeItem(n):"sessionstorage"==d.storageMethod&&void 0!==t.sessionStorage?t.sessionStorage.removeItem(n):void 0!==e.cookie?e.removeCookie(n,r):i.error(p.noStorage)}},setting:function(t,n){if(i.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];e.isPlainObject(d[t])?e.extend(!0,d[t],n):d[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,i,t);else{if(void 0===n)return i[t];i[t]=n}},debug:function(){!d.silent&&d.debug&&(d.performance?i.performance.log(arguments):(i.debug=Function.prototype.bind.call(console.info,console,d.name+":"),i.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?i.performance.log(arguments):(i.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),i.verbose.apply(console,arguments)))},error:function(){d.silent||(i.error=Function.prototype.bind.call(console.error,console,d.name+":"),i.error.apply(console,arguments))},performance:{log:function(e){var t,n;d.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":n})),clearTimeout(i.performance.timer),i.performance.timer=setTimeout(i.performance.display,500)},display:function(){var t=d.name+":",n=0;a=!1,clearTimeout(i.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,o){var a,s,l,c=x;return n=n||u,o=y||o,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,r){var o=n!=a?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[o])&&n!=a)c=c[o];else{if(void 0!==c[o])return s=c[o],!1;if(!e.isPlainObject(c[r])||n==a)return void 0!==c[r]?(s=c[r],!1):(i.error(p.method,t),!1);c=c[r]}})),e.isFunction(s)?l=s.apply(o,n):void 0!==s&&(l=s),e.isArray(r)?r.push(l):void 0!==r?r=[r,l]:void 0!==l&&(r=l),s}},c?(void 0===x&&i.initialize(),i.invoke(l)):(void 0!==x&&x.invoke("destroy"),i.initialize())}),void 0!==r?r:this},e.fn.nag.settings={name:"Nag",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},context:!1,detachable:!1,expires:30,domain:!1,path:"/",storageMethod:"cookie",key:"nag",value:"dismiss",error:{noCookieStorage:"$.cookie is not included. A storage solution is required.",noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".close.icon"},speed:500,easing:"easeOutQuad",onHide:function(){}},e.extend(e.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}})}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.popup=function(r){var i,o=e(this),a=e(n),s=e(t),l=e("body"),c=o.selector||"",u=(new Date).getTime(),d=[],f=arguments[0],p="string"==typeof f,h=[].slice.call(arguments,1);return o.each(function(){var o,g,v,m,b,y,x=e.isPlainObject(r)?e.extend(!0,{},e.fn.popup.settings,r):e.extend({},e.fn.popup.settings),_=x.selector,w=x.className,k=x.error,T=x.metadata,A=x.namespace,C="."+x.namespace,S="module-"+A,M=e(this),E=e(x.context),O=e(x.scrollContext),L=e(x.boundary),P=x.target?e(x.target):M,D=0,R=!1,F=!1,j=this,I=M.data(S);y={initialize:function(){y.debug("Initializing",M),y.createID(),y.bind.events(),!y.exists()&&x.preserve&&y.create(),x.observeChanges&&y.observeChanges(),y.instantiate()},instantiate:function(){y.verbose("Storing instance",y),I=y,M.data(S,I)},observeChanges:function(){"MutationObserver"in t&&((v=new MutationObserver(y.event.documentChanged)).observe(n,{childList:!0,subtree:!0}),y.debug("Setting up mutation observer",v))},refresh:function(){x.popup?o=e(x.popup).eq(0):x.inline&&(o=P.nextAll(_.popup).eq(0),x.popup=o),x.popup?(o.addClass(w.loading),g=y.get.offsetParent(),o.removeClass(w.loading),x.movePopup&&y.has.popup()&&y.get.offsetParent(o)[0]!==g[0]&&(y.debug("Moving popup to the same offset parent as target"),o.detach().appendTo(g))):g=x.inline?y.get.offsetParent(P):y.has.popup()?y.get.offsetParent(o):l,g.is("html")&&g[0]!==l[0]&&(y.debug("Setting page as offset parent"),g=l),y.get.variation()&&y.set.variation()},reposition:function(){y.refresh(),y.set.position()},destroy:function(){y.debug("Destroying previous module"),v&&v.disconnect(),o&&!x.preserve&&y.removePopup(),clearTimeout(y.hideTimer),clearTimeout(y.showTimer),y.unbind.close(),y.unbind.events(),M.removeData(S)},event:{start:function(t){var n=e.isPlainObject(x.delay)?x.delay.show:x.delay;clearTimeout(y.hideTimer),F||(y.showTimer=setTimeout(y.show,n))},end:function(){var t=e.isPlainObject(x.delay)?x.delay.hide:x.delay;clearTimeout(y.showTimer),y.hideTimer=setTimeout(y.hide,t)},touchstart:function(e){F=!0,y.show()},resize:function(){y.is.visible()&&y.set.position()},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==j||e(t).find(j).length>0)&&(y.debug("Element removed from DOM, tearing down events"),y.destroy())})})},hideGracefully:function(t){var r=e(t.target),i=e.contains(n.documentElement,t.target),o=r.closest(_.popup).length>0;t&&!o&&i?(y.debug("Click occurred outside popup hiding popup"),y.hide()):y.debug("Click was inside popup, keeping popup open")}},create:function(){var t=y.get.html(),n=y.get.title(),r=y.get.content();t||r||n?(y.debug("Creating pop-up html"),t||(t=x.templates.popup({title:n,content:r})),o=e("<div/>").addClass(w.popup).data(T.activator,M).html(t),x.inline?(y.verbose("Inserting popup element inline",o),o.insertAfter(M)):(y.verbose("Appending popup element to body",o),o.appendTo(E)),y.refresh(),y.set.variation(),x.hoverable&&y.bind.popup(),x.onCreate.call(o,j)):0!==P.next(_.popup).length?(y.verbose("Pre-existing popup found"),x.inline=!0,x.popup=P.next(_.popup).data(T.activator,M),y.refresh(),x.hoverable&&y.bind.popup()):x.popup?(e(x.popup).data(T.activator,M),y.verbose("Used popup specified in settings"),y.refresh(),x.hoverable&&y.bind.popup()):y.debug("No content specified skipping display",j)},createID:function(){b=(Math.random().toString(16)+"000000000").substr(2,8),m="."+b,y.verbose("Creating unique id for element",b)},toggle:function(){y.debug("Toggling pop-up"),y.is.hidden()?(y.debug("Popup is hidden, showing pop-up"),y.unbind.close(),y.show()):(y.debug("Popup is visible, hiding pop-up"),y.hide())},show:function(e){if(e=e||function(){},y.debug("Showing pop-up",x.transition),y.is.hidden()&&(!y.is.active()||!y.is.dropdown())){if(y.exists()||y.create(),!1===x.onShow.call(o,j))return void y.debug("onShow callback returned false, cancelling popup animation");x.preserve||x.popup||y.refresh(),o&&y.set.position()&&(y.save.conditions(),x.exclusive&&y.hideAll(),y.animate.show(e))}},hide:function(e){if(e=e||function(){},y.is.visible()||y.is.animating()){if(!1===x.onHide.call(o,j))return void y.debug("onHide callback returned false, cancelling popup animation");y.remove.visible(),y.unbind.close(),y.restore.conditions(),y.animate.hide(e)}},hideAll:function(){e(_.popup).filter("."+w.popupVisible).each(function(){e(this).data(T.activator).popup("hide")})},exists:function(){return!!o&&(x.inline||x.popup?y.has.popup():o.closest(E).length>=1)},removePopup:function(){y.has.popup()&&!x.popup&&(y.debug("Removing popup",o),o.remove(),o=void 0,x.onRemove.call(o,j))},save:{conditions:function(){y.cache={title:M.attr("title")},y.cache.title&&M.removeAttr("title"),y.verbose("Saving original attributes",y.cache.title)}},restore:{conditions:function(){return y.cache&&y.cache.title&&(M.attr("title",y.cache.title),y.verbose("Restoring original attributes",y.cache.title)),!0}},supports:{svg:function(){return"undefined"==typeof SVGGraphicsElement}},animate:{show:function(t){t=e.isFunction(t)?t:function(){},x.transition&&void 0!==e.fn.transition&&M.transition("is supported")?(y.set.visible(),o.transition({animation:x.transition+" in",queue:!1,debug:x.debug,verbose:x.verbose,duration:x.duration,onComplete:function(){y.bind.close(),t.call(o,j),x.onVisible.call(o,j)}})):y.error(k.noTransition)},hide:function(t){t=e.isFunction(t)?t:function(){},y.debug("Hiding pop-up"),!1!==x.onHide.call(o,j)?x.transition&&void 0!==e.fn.transition&&M.transition("is supported")?o.transition({animation:x.transition+" out",queue:!1,duration:x.duration,debug:x.debug,verbose:x.verbose,onComplete:function(){y.reset(),t.call(o,j),x.onHidden.call(o,j)}}):y.error(k.noTransition):y.debug("onHide callback returned false, cancelling popup animation")}},change:{content:function(e){o.html(e)}},get:{html:function(){return M.removeData(T.html),M.data(T.html)||x.html},title:function(){return M.removeData(T.title),M.data(T.title)||x.title},content:function(){return M.removeData(T.content),M.data(T.content)||M.attr("title")||x.content},variation:function(){return M.removeData(T.variation),M.data(T.variation)||x.variation},popup:function(){return o},popupOffset:function(){return o.offset()},calculations:function(){var e,n=P[0],r=L[0]==t,i=x.inline||x.popup&&x.movePopup?P.position():P.offset(),a=r?{top:0,left:0}:L.offset(),l={},c=r?{top:s.scrollTop(),left:s.scrollLeft()}:{top:0,left:0};return l={target:{element:P[0],width:P.outerWidth(),height:P.outerHeight(),top:i.top,left:i.left,margin:{}},popup:{width:o.outerWidth(),height:o.outerHeight()},parent:{width:g.outerWidth(),height:g.outerHeight()},screen:{top:a.top,left:a.left,scroll:{top:c.top,left:c.left},width:L.width(),height:L.height()}},x.setFluidWidth&&y.is.fluid()&&(l.container={width:o.parent().outerWidth()},l.popup.width=l.container.width),l.target.margin.top=x.inline?parseInt(t.getComputedStyle(n).getPropertyValue("margin-top"),10):0,l.target.margin.left=x.inline?y.is.rtl()?parseInt(t.getComputedStyle(n).getPropertyValue("margin-right"),10):parseInt(t.getComputedStyle(n).getPropertyValue("margin-left"),10):0,e=l.screen,l.boundary={top:e.top+e.scroll.top,bottom:e.top+e.scroll.top+e.height,left:e.left+e.scroll.left,right:e.left+e.scroll.left+e.width},l},id:function(){return b},startEvent:function(){return"hover"==x.on?"mouseenter":"focus"==x.on&&"focus"},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"==x.on?"mouseleave":"focus"==x.on&&"blur"},distanceFromBoundary:function(e,t){var n,r,i={};return n=(t=t||y.get.calculations()).popup,r=t.boundary,e&&(i={top:e.top-r.top,left:e.left-r.left,right:r.right-(e.left+n.width),bottom:r.bottom-(e.top+n.height)},y.verbose("Distance from boundaries determined",e,i)),i},offsetParent:function(t){var n=(void 0!==t?t[0]:M[0]).parentNode,r=e(n);if(n)for(var i="none"===r.css("transform"),o="static"===r.css("position"),a=r.is("html");n&&!a&&o&&i;)n=n.parentNode,i="none"===(r=e(n)).css("transform"),o="static"===r.css("position"),a=r.is("html");return r&&r.length>0?r:e()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(e){var t=e.split(" "),n=t[0],r=t[1],i="top"==n||"bottom"==n,o=!1,a=!1,s=!1;return R||(y.verbose("All available positions available"),R=y.get.positions()),y.debug("Recording last position tried",e),R[e]=!0,"opposite"===x.prefer&&(s=(s=[{top:"bottom",bottom:"top",left:"right",right:"left"}[n],r]).join(" "),o=!0===R[s],y.debug("Trying opposite strategy",s)),"adjacent"===x.prefer&&i&&(s=(s=[n,{left:"center",center:"right",right:"left"}[r]]).join(" "),a=!0===R[s],y.debug("Trying adjacent strategy",s)),(a||o)&&(y.debug("Using backup position",s),s={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"}[e]),s}},set:{position:function(e,t){if(0!==P.length&&0!==o.length){var n,r,i,a,s,l,c,u;if(t=t||y.get.calculations(),e=e||M.data(T.position)||x.position,n=M.data(T.offset)||x.offset,r=x.distanceAway,i=t.target,a=t.popup,s=t.parent,0===i.width&&0===i.height&&!y.is.svg(i.element))return y.debug("Popup target is hidden, no action taken"),!1;switch(x.inline&&(y.debug("Adding margin to calculation",i.margin),"left center"==e||"right center"==e?(n+=i.margin.top,r+=-i.margin.left):"top left"==e||"top center"==e||"top right"==e?(n+=i.margin.left,r-=i.margin.top):(n+=i.margin.left,r+=i.margin.top)),y.debug("Determining popup position from calculations",e,t),y.is.rtl()&&(e=e.replace(/left|right/g,function(e){return"left"==e?"right":"left"}),y.debug("RTL: Popup position updated",e)),D==x.maxSearchDepth&&"string"==typeof x.lastResort&&(e=x.lastResort),e){case"top left":l={top:"auto",bottom:s.height-i.top+r,left:i.left+n,right:"auto"};break;case"top center":l={bottom:s.height-i.top+r,left:i.left+i.width/2-a.width/2+n,top:"auto",right:"auto"};break;case"top right":l={bottom:s.height-i.top+r,right:s.width-i.left-i.width-n,top:"auto",left:"auto"};break;case"left center":l={top:i.top+i.height/2-a.height/2+n,right:s.width-i.left+r,left:"auto",bottom:"auto"};break;case"right center":l={top:i.top+i.height/2-a.height/2+n,left:i.left+i.width+r,bottom:"auto",right:"auto"};break;case"bottom left":l={top:i.top+i.height+r,left:i.left+n,bottom:"auto",right:"auto"};break;case"bottom center":l={top:i.top+i.height+r,left:i.left+i.width/2-a.width/2+n,bottom:"auto",right:"auto"};break;case"bottom right":l={top:i.top+i.height+r,right:s.width-i.left-i.width-n,left:"auto",bottom:"auto"}}if(void 0===l&&y.error(k.invalidPosition,e),y.debug("Calculated popup positioning values",l),o.css(l).removeClass(w.position).addClass(e).addClass(w.loading),c=y.get.popupOffset(),u=y.get.distanceFromBoundary(c,t),y.is.offstage(u,e)){if(y.debug("Position is outside viewport",e),D<x.maxSearchDepth)return D++,e=y.get.nextPosition(e),y.debug("Trying new position",e),!!o&&y.set.position(e,t);if(!x.lastResort)return y.debug("Popup could not find a position to display",o),y.error(k.cannotPlace,j),y.remove.attempts(),y.remove.loading(),y.reset(),x.onUnplaceable.call(o,j),!1;y.debug("No position found, showing with last position")}return y.debug("Position is on stage",e),y.remove.attempts(),y.remove.loading(),x.setFluidWidth&&y.is.fluid()&&y.set.fluidWidth(t),!0}y.error(k.notFound)},fluidWidth:function(e){e=e||y.get.calculations(),y.debug("Automatically setting element width to parent width",e.parent.width),o.css("width",e.container.width)},variation:function(e){(e=e||y.get.variation())&&y.has.popup()&&(y.verbose("Adding variation to popup",e),o.addClass(e))},visible:function(){M.addClass(w.visible)}},remove:{loading:function(){o.removeClass(w.loading)},variation:function(e){(e=e||y.get.variation())&&(y.verbose("Removing variation",e),o.removeClass(e))},visible:function(){M.removeClass(w.visible)},attempts:function(){y.verbose("Resetting all searched positions"),D=0,R=!1}},bind:{events:function(){y.debug("Binding popup events to module"),"click"==x.on&&M.on("click"+C,y.toggle),"hover"==x.on&&M.on("touchstart"+C,y.event.touchstart),y.get.startEvent()&&M.on(y.get.startEvent()+C,y.event.start).on(y.get.endEvent()+C,y.event.end),x.target&&y.debug("Target set to element",P),s.on("resize"+m,y.event.resize)},popup:function(){y.verbose("Allowing hover events on popup to prevent closing"),o&&y.has.popup()&&o.on("mouseenter"+C,y.event.start).on("mouseleave"+C,y.event.end)},close:function(){(!0===x.hideOnScroll||"auto"==x.hideOnScroll&&"click"!=x.on)&&y.bind.closeOnScroll(),"hover"==x.on&&F&&y.bind.touchClose(),"click"==x.on&&x.closable&&y.bind.clickaway()},closeOnScroll:function(){y.verbose("Binding scroll close event to document"),O.one(y.get.scrollEvent()+m,y.event.hideGracefully)},touchClose:function(){y.verbose("Binding popup touchclose event to document"),a.on("touchstart"+m,function(e){y.verbose("Touched away from popup"),y.event.hideGracefully.call(j,e)})},clickaway:function(){y.verbose("Binding popup close event to document"),a.on("click"+m,function(e){y.verbose("Clicked away from popup"),y.event.hideGracefully.call(j,e)})}},unbind:{events:function(){s.off(m),M.off(C)},close:function(){a.off(m),O.off(m)}},has:{popup:function(){return o&&o.length>0}},is:{offstage:function(t,n){var r=[];return e.each(t,function(e,t){t<-x.jitter&&(y.debug("Position exceeds allowable distance from edge",e,t,n),r.push(e))}),r.length>0},svg:function(e){return y.supports.svg()&&e instanceof SVGGraphicsElement},active:function(){return M.hasClass(w.active)},animating:function(){return void 0!==o&&o.hasClass(w.animating)},fluid:function(){return void 0!==o&&o.hasClass(w.fluid)},visible:function(){return void 0!==o&&o.hasClass(w.popupVisible)},dropdown:function(){return M.hasClass(w.dropdown)},hidden:function(){return!y.is.visible()},rtl:function(){return"rtl"==M.css("direction")}},reset:function(){y.remove.visible(),x.preserve?void 0!==e.fn.transition&&o.transition("remove transition"):y.removePopup()},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,x,t);else{if(void 0===n)return x[t];x[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,y,t);else{if(void 0===n)return y[t];y[t]=n}},debug:function(){!x.silent&&x.debug&&(x.performance?y.performance.log(arguments):(y.debug=Function.prototype.bind.call(console.info,console,x.name+":"),y.debug.apply(console,arguments)))},verbose:function(){!x.silent&&x.verbose&&x.debug&&(x.performance?y.performance.log(arguments):(y.verbose=Function.prototype.bind.call(console.info,console,x.name+":"),y.verbose.apply(console,arguments)))},error:function(){x.silent||(y.error=Function.prototype.bind.call(console.error,console,x.name+":"),y.error.apply(console,arguments))},performance:{log:function(e){var t,n;x.performance&&(n=(t=(new Date).getTime())-(u||t),u=t,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":n})),clearTimeout(y.performance.timer),y.performance.timer=setTimeout(y.performance.display,500)},display:function(){var t=x.name+":",n=0;u=!1,clearTimeout(y.performance.timer),e.each(d,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",c&&(t+=" '"+c+"'"),(void 0!==console.group||void 0!==console.table)&&d.length>0&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),d=[]}},invoke:function(t,n,r){var o,a,s,l=I;return n=n||h,r=j||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},p?(void 0===I&&y.initialize(),y.invoke(f)):(void 0!==I&&I.invoke("destroy"),y.initialize())}),void 0!==i?i:this},e.fn.popup.settings={name:"Popup",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"popup",observeChanges:!0,onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onUnplaceable:function(){},onHidden:function(){},on:"hover",boundary:t,addTouchEvents:!0,position:"top left",variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",scrollContext:t,prefer:"opposite",lastResort:!1,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>",notFound:"The target or popup you specified does not exist on the page"},metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",animating:"animating",dropdown:"dropdown",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible",popupVisible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(/[&<>"'`]/g,function(e){return t[e]}):e},popup:function(t){var n="",r=e.fn.popup.settings.templates.escape;return void 0!==typeof t&&(void 0!==typeof t.title&&t.title&&(t.title=r(t.title),n+='<div class="header">'+t.title+"</div>"),void 0!==typeof t.content&&t.content&&(t.content=r(t.content),n+='<div class="content">'+t.content+"</div>")),n}}}}(e,window,document),function(e,t,n,r){"use strict";void 0!==(t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")())&&t.Math==Math||("undefined"!=typeof self&&self.Math==Math?self:Function("return this")());e.fn.progress=function(t){var r,i=e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var i,d=e.isPlainObject(t)?e.extend(!0,{},e.fn.progress.settings,t):e.extend({},e.fn.progress.settings),f=d.className,p=d.metadata,h=d.namespace,g=d.selector,v=d.error,m="."+h,b="module-"+h,y=e(this),x=e(this).find(g.bar),_=e(this).find(g.progress),w=e(this).find(g.label),k=this,T=y.data(b),A=!1;i={initialize:function(){i.debug("Initializing progress bar",d),i.set.duration(),i.set.transitionEvent(),i.read.metadata(),i.read.settings(),i.instantiate()},instantiate:function(){i.verbose("Storing instance of progress",i),T=i,y.data(b,i)},destroy:function(){i.verbose("Destroying previous progress for",y),clearInterval(T.interval),i.remove.state(),y.removeData(b),T=void 0},reset:function(){i.remove.nextValue(),i.update.progress(0)},complete:function(){(void 0===i.percent||i.percent<100)&&(i.remove.progressPoll(),i.set.percent(100))},read:{metadata:function(){var e={percent:y.data(p.percent),total:y.data(p.total),value:y.data(p.value)};e.percent&&(i.debug("Current percent value set from metadata",e.percent),i.set.percent(e.percent)),e.total&&(i.debug("Total value set from metadata",e.total),i.set.total(e.total)),e.value&&(i.debug("Current value set from metadata",e.value),i.set.value(e.value),i.set.progress(e.value))},settings:function(){!1!==d.total&&(i.debug("Current total set in settings",d.total),i.set.total(d.total)),!1!==d.value&&(i.debug("Current value set in settings",d.value),i.set.value(d.value),i.set.progress(i.value)),!1!==d.percent&&(i.debug("Current percent set in settings",d.percent),i.set.percent(d.percent))}},bind:{transitionEnd:function(e){var t=i.get.transitionEnd();x.one(t+m,function(t){clearTimeout(i.failSafeTimer),e.call(this,t)}),i.failSafeTimer=setTimeout(function(){x.triggerHandler(t)},d.duration+d.failSafeDelay),i.verbose("Adding fail safe timer",i.timer)}},increment:function(e){var t,n;i.has.total()?n=(t=i.get.value())+(e=e||1):(n=(t=i.get.percent())+(e=e||i.get.randomValue()),100,i.debug("Incrementing percentage by",t,n)),n=i.get.normalizedValue(n),i.set.progress(n)},decrement:function(e){var t,n;i.get.total()?(n=(t=i.get.value())-(e=e||1),i.debug("Decrementing value by",e,t)):(n=(t=i.get.percent())-(e=e||i.get.randomValue()),i.debug("Decrementing percentage by",e,t)),n=i.get.normalizedValue(n),i.set.progress(n)},has:{progressPoll:function(){return i.progressPoll},total:function(){return!1!==i.get.total()}},get:{text:function(e){var t=i.value||0,n=i.total||0,r=A?i.get.displayPercent():i.percent||0,o=i.total>0?n-t:100-r;return e=(e=e||"").replace("{value}",t).replace("{total}",n).replace("{left}",o).replace("{percent}",r),i.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0)return i.debug("Value cannot decrement below 0"),0;if(i.has.total()){if(e>i.total)return i.debug("Value cannot increment above total",i.total),i.total}else if(e>100)return i.debug("Value cannot increment above 100 percent"),100;return e},updateInterval:function(){return"auto"==d.updateInterval?d.duration:d.updateInterval},randomValue:function(){return i.debug("Generating random increment percentage"),Math.floor(Math.random()*d.random.max+d.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")&&+e.replace(/[^\d.]/g,""):e},transitionEnd:function(){var e,t=n.createElement("element"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(void 0!==t.style[e])return r[e]},displayPercent:function(){var e=x.width(),t=y.width(),n=e>parseInt(x.css("min-width"),10)?e/t*100:i.percent;return d.precision>0?Math.round(n*(10*d.precision))/(10*d.precision):Math.round(n)},percent:function(){return i.percent||0},value:function(){return i.nextValue||i.value||0},total:function(){return i.total||!1}},create:{progressPoll:function(){i.progressPoll=setTimeout(function(){i.update.toNextValue(),i.remove.progressPoll()},i.get.updateInterval())}},is:{complete:function(){return i.is.success()||i.is.warning()||i.is.error()},success:function(){return y.hasClass(f.success)},warning:function(){return y.hasClass(f.warning)},error:function(){return y.hasClass(f.error)},active:function(){return y.hasClass(f.active)},visible:function(){return y.is(":visible")}},remove:{progressPoll:function(){i.verbose("Removing progress poll timer"),i.progressPoll&&(clearTimeout(i.progressPoll),delete i.progressPoll)},nextValue:function(){i.verbose("Removing progress value stored for next update"),delete i.nextValue},state:function(){i.verbose("Removing stored state"),delete i.total,delete i.percent,delete i.value},active:function(){i.verbose("Removing active state"),y.removeClass(f.active)},success:function(){i.verbose("Removing success state"),y.removeClass(f.success)},warning:function(){i.verbose("Removing warning state"),y.removeClass(f.warning)},error:function(){i.verbose("Removing error state"),y.removeClass(f.error)}},set:{barWidth:function(e){e>100?i.error(v.tooHigh,e):e<0?i.error(v.tooLow,e):(x.css("width",e+"%"),y.attr("data-percent",parseInt(e,10)))},duration:function(e){e="number"==typeof(e=e||d.duration)?e+"ms":e,i.verbose("Setting progress bar transition duration",e),x.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=d.precision>0?Math.round(e*(10*d.precision))/(10*d.precision):Math.round(e),i.percent=e,i.has.total()||(i.value=d.precision>0?Math.round(e/100*i.total*(10*d.precision))/(10*d.precision):Math.round(e/100*i.total*10)/10,d.limitValues&&(i.value=i.value>100?100:i.value<0?0:i.value)),i.set.barWidth(e),i.set.labelInterval(),i.set.labels(),d.onChange.call(k,e,i.value,i.total)},labelInterval:function(){clearInterval(i.interval),i.bind.transitionEnd(function(){i.verbose("Bar finished animating, removing continuous label updates"),clearInterval(i.interval),A=!1,i.set.labels()}),A=!0,i.interval=setInterval(function(){e.contains(n.documentElement,k)||(clearInterval(i.interval),A=!1),i.set.labels()},d.framerate)},labels:function(){i.verbose("Setting both bar progress and outer label text"),i.set.barLabel(),i.set.state()},label:function(e){(e=e||"")&&(e=i.get.text(e),i.verbose("Setting label to text",e),w.text(e))},state:function(e){100===(e=void 0!==e?e:i.percent)?d.autoSuccess&&!(i.is.warning()||i.is.error()||i.is.success())?(i.set.success(),i.debug("Automatically triggering success at 100%")):(i.verbose("Reached 100% removing active state"),i.remove.active(),i.remove.progressPoll()):e>0?(i.verbose("Adjusting active progress bar label",e),i.set.active()):(i.remove.active(),i.set.label(d.text.active))},barLabel:function(e){void 0!==e?_.text(i.get.text(e)):"ratio"==d.label&&i.total?(i.verbose("Adding ratio to bar label"),_.text(i.get.text(d.text.ratio))):"percent"==d.label&&(i.verbose("Adding percentage to bar label"),_.text(i.get.text(d.text.percent)))},active:function(e){e=e||d.text.active,i.debug("Setting active state"),d.showActivity&&!i.is.active()&&y.addClass(f.active),i.remove.warning(),i.remove.error(),i.remove.success(),(e=d.onLabelUpdate("active",e,i.value,i.total))&&i.set.label(e),i.bind.transitionEnd(function(){d.onActive.call(k,i.value,i.total)})},success:function(e){e=e||d.text.success||d.text.active,i.debug("Setting success state"),y.addClass(f.success),i.remove.active(),i.remove.warning(),i.remove.error(),i.complete(),d.text.success?(e=d.onLabelUpdate("success",e,i.value,i.total),i.set.label(e)):(e=d.onLabelUpdate("active",e,i.value,i.total),i.set.label(e)),i.bind.transitionEnd(function(){d.onSuccess.call(k,i.total)})},warning:function(e){e=e||d.text.warning,i.debug("Setting warning state"),y.addClass(f.warning),i.remove.active(),i.remove.success(),i.remove.error(),i.complete(),(e=d.onLabelUpdate("warning",e,i.value,i.total))&&i.set.label(e),i.bind.transitionEnd(function(){d.onWarning.call(k,i.value,i.total)})},error:function(e){e=e||d.text.error,i.debug("Setting error state"),y.addClass(f.error),i.remove.active(),i.remove.success(),i.remove.warning(),i.complete(),(e=d.onLabelUpdate("error",e,i.value,i.total))&&i.set.label(e),i.bind.transitionEnd(function(){d.onError.call(k,i.value,i.total)})},transitionEvent:function(){i.get.transitionEnd()},total:function(e){i.total=e},value:function(e){i.value=e},progress:function(e){i.has.progressPoll()?(i.debug("Updated within interval, setting next update to use new value",e),i.set.nextValue(e)):(i.debug("First update in progress update interval, immediately updating",e),i.update.progress(e),i.create.progressPoll())},nextValue:function(e){i.nextValue=e}},update:{toNextValue:function(){var e=i.nextValue;e&&(i.debug("Update interval complete using last updated value",e),i.update.progress(e),i.remove.nextValue())},progress:function(e){var t;!1===(e=i.get.numericValue(e))&&i.error(v.nonNumeric,e),e=i.get.normalizedValue(e),i.has.total()?(i.set.value(e),t=e/i.total*100,i.debug("Calculating percent complete from total",t),i.set.percent(t)):(t=e,i.debug("Setting value to exact percentage value",t),i.set.percent(t))}},setting:function(t,n){if(i.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];e.isPlainObject(d[t])?e.extend(!0,d[t],n):d[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,i,t);else{if(void 0===n)return i[t];i[t]=n}},debug:function(){!d.silent&&d.debug&&(d.performance?i.performance.log(arguments):(i.debug=Function.prototype.bind.call(console.info,console,d.name+":"),i.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?i.performance.log(arguments):(i.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),i.verbose.apply(console,arguments)))},error:function(){d.silent||(i.error=Function.prototype.bind.call(console.error,console,d.name+":"),i.error.apply(console,arguments))},performance:{log:function(e){var t,n;d.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":n})),clearTimeout(i.performance.timer),i.performance.timer=setTimeout(i.performance.display,500)},display:function(){var t=d.name+":",n=0;a=!1,clearTimeout(i.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,o){var a,s,l,c=T;return n=n||u,o=k||o,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,r){var o=n!=a?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[o])&&n!=a)c=c[o];else{if(void 0!==c[o])return s=c[o],!1;if(!e.isPlainObject(c[r])||n==a)return void 0!==c[r]?(s=c[r],!1):(i.error(v.method,t),!1);c=c[r]}})),e.isFunction(s)?l=s.apply(o,n):void 0!==s&&(l=s),e.isArray(r)?r.push(l):void 0!==r?r=[r,l]:void 0!==l&&(r=l),s}},c?(void 0===T&&i.initialize(),i.invoke(l)):(void 0!==T&&T.invoke("destroy"),i.initialize())}),void 0!==r?r:this},e.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(e,t,n,r){return t},onChange:function(e,t,n){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.rating=function(t){var n,r=e(this),i=r.selector||"",o=(new Date).getTime(),a=[],s=arguments[0],l="string"==typeof s,c=[].slice.call(arguments,1);return r.each(function(){var u,d,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.rating.settings,t):e.extend({},e.fn.rating.settings),p=f.namespace,h=f.className,g=f.metadata,v=f.selector,m=(f.error,"."+p),b="module-"+p,y=this,x=e(this).data(b),_=e(this),w=_.find(v.icon);d={initialize:function(){d.verbose("Initializing rating module",f),0===w.length&&d.setup.layout(),f.interactive?d.enable():d.disable(),d.set.initialLoad(),d.set.rating(d.get.initialRating()),d.remove.initialLoad(),d.instantiate()},instantiate:function(){d.verbose("Instantiating module",f),x=d,_.data(b,d)},destroy:function(){d.verbose("Destroying previous instance",x),d.remove.events(),_.removeData(b)},refresh:function(){w=_.find(v.icon)},setup:{layout:function(){var t=d.get.maxRating(),n=e.fn.rating.settings.templates.icon(t);d.debug("Generating icon html dynamically"),_.html(n),d.refresh()}},event:{mouseenter:function(){var t=e(this);t.nextAll().removeClass(h.selected),_.addClass(h.selected),t.addClass(h.selected).prevAll().addClass(h.selected)},mouseleave:function(){_.removeClass(h.selected),w.removeClass(h.selected)},click:function(){var t=e(this),n=d.get.rating(),r=w.index(t)+1;("auto"==f.clearable?1===w.length:f.clearable)&&n==r?d.clearRating():d.set.rating(r)}},clearRating:function(){d.debug("Clearing current rating"),d.set.rating(0)},bind:{events:function(){d.verbose("Binding events"),_.on("mouseenter"+m,v.icon,d.event.mouseenter).on("mouseleave"+m,v.icon,d.event.mouseleave).on("click"+m,v.icon,d.event.click)}},remove:{events:function(){d.verbose("Removing events"),_.off(m)},initialLoad:function(){u=!1}},enable:function(){d.debug("Setting rating to interactive mode"),d.bind.events(),_.removeClass(h.disabled)},disable:function(){d.debug("Setting rating to read-only mode"),d.remove.events(),_.addClass(h.disabled)},is:{initialLoad:function(){return u}},get:{initialRating:function(){return void 0!==_.data(g.rating)?(_.removeData(g.rating),_.data(g.rating)):f.initialRating},maxRating:function(){return void 0!==_.data(g.maxRating)?(_.removeData(g.maxRating),_.data(g.maxRating)):f.maxRating},rating:function(){var e=w.filter("."+h.active).length;return d.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var t=e-1>=0?e-1:0,n=w.eq(t);_.removeClass(h.selected),w.removeClass(h.selected).removeClass(h.active),e>0&&(d.verbose("Setting current rating to",e),n.prevAll().addBack().addClass(h.active)),d.is.initialLoad()||f.onRate.call(y,e)},initialLoad:function(){u=!0}},setting:function(t,n){if(d.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],n):f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];d[t]=n}},debug:function(){!f.silent&&f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){f.silent||(d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments))},performance:{log:function(e){var t,n;f.performance&&(n=(t=(new Date).getTime())-(o||t),o=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,500)},display:function(){var t=f.name+":",n=0;o=!1,clearTimeout(d.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",i&&(t+=" '"+i+"'"),r.length>1&&(t+=" ("+r.length+")"),(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,r,i){var o,a,s,l=x;return r=r||c,i=y||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,r):void 0!==a&&(s=a),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),a}},l?(void 0===x&&d.initialize(),d.invoke(s)):(void 0!==x&&x.invoke("destroy"),d.initialize())}),void 0!==n?n:this},e.fn.rating.settings={name:"Rating",namespace:"rating",slent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var t=1,n="";t<=e;)n+='<i class="icon"></i>',t++;return n}}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.search=function(r){var i,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return e(this).each(function(){var f,p=e.isPlainObject(r)?e.extend(!0,{},e.fn.search.settings,r):e.extend({},e.fn.search.settings),h=p.className,g=p.metadata,v=p.regExp,m=p.fields,b=p.selector,y=p.error,x=p.namespace,_="."+x,w=x+"-module",k=e(this),T=k.find(b.prompt),A=k.find(b.searchButton),C=k.find(b.results),S=k.find(b.result),M=(k.find(b.category),this),E=k.data(w),O=!1,L=!1;f={initialize:function(){f.verbose("Initializing module"),f.determine.searchFields(),f.bind.events(),f.set.type(),f.create.results(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),E=f,k.data(w,f)},destroy:function(){f.verbose("Destroying instance"),k.off(_).removeData(w)},refresh:function(){f.debug("Refreshing selector cache"),T=k.find(b.prompt),A=k.find(b.searchButton),k.find(b.category),C=k.find(b.results),S=k.find(b.result)},refreshResults:function(){C=k.find(b.results),S=k.find(b.result)},bind:{events:function(){f.verbose("Binding events to search"),p.automatic&&(k.on(f.get.inputEvent()+_,b.prompt,f.event.input),T.attr("autocomplete","off")),k.on("focus"+_,b.prompt,f.event.focus).on("blur"+_,b.prompt,f.event.blur).on("keydown"+_,b.prompt,f.handleKeyboard).on("click"+_,b.searchButton,f.query).on("mousedown"+_,b.results,f.event.result.mousedown).on("mouseup"+_,b.results,f.event.result.mouseup).on("click"+_,b.result,f.event.result.click)}},determine:{searchFields:function(){r&&void 0!==r.searchFields&&(p.searchFields=r.searchFields)}},event:{input:function(){p.searchDelay?(clearTimeout(f.timer),f.timer=setTimeout(function(){f.is.focused()&&f.query()},p.searchDelay)):f.query()},focus:function(){f.set.focus(),p.searchOnFocus&&f.has.minimumCharacters()&&f.query(function(){f.can.show()&&f.showResults()})},blur:function(e){var t=function(){f.cancel.query(),f.remove.focus(),f.timer=setTimeout(f.hideResults,p.hideDelay)};n.activeElement===this||(L=!1,f.resultsClicked?(f.debug("Determining if user action caused search to close"),k.one("click.close"+_,b.results,function(e){f.is.inMessage(e)||O?T.focus():(O=!1,f.is.animating()||f.is.hidden()||t())})):(f.debug("Input blurred without user action, closing results"),t()))},result:{mousedown:function(){f.resultsClicked=!0},mouseup:function(){f.resultsClicked=!1},click:function(n){f.debug("Search result selected");var r=e(this),i=r.find(b.title).eq(0),o=r.is("a[href]")?r:r.find("a[href]").eq(0),a=o.attr("href")||!1,s=o.attr("target")||!1,l=(i.html(),i.length>0&&i.text()),c=f.get.results(),u=r.data(g.result)||f.get.result(l,c);if(e.isFunction(p.onSelect)&&!1===p.onSelect.call(M,u,c))return f.debug("Custom onSelect callback cancelled default select action"),void(O=!0);f.hideResults(),l&&f.set.value(l),a&&(f.verbose("Opening search link found in result",o),"_blank"==s||n.ctrlKey?t.open(a):t.location.href=a)}}},handleKeyboard:function(e){var t,n=k.find(b.result),r=k.find(b.category),i=n.filter("."+h.active),o=n.index(i),a=n.length,s=i.length>0,l=e.which,c=13,u=38,d=40;if(l==27&&(f.verbose("Escape key pressed, blurring search field"),f.hideResults(),L=!0),f.is.visible())if(l==c){if(f.verbose("Enter key pressed, selecting active result"),n.filter("."+h.active).length>0)return f.event.result.click.call(n.filter("."+h.active),e),e.preventDefault(),!1}else l==u&&s?(f.verbose("Up key pressed, changing active result"),t=o-1<0?o:o-1,r.removeClass(h.active),n.removeClass(h.active).eq(t).addClass(h.active).closest(r).addClass(h.active),e.preventDefault()):l==d&&(f.verbose("Down key pressed, changing active result"),t=o+1>=a?o:o+1,r.removeClass(h.active),n.removeClass(h.active).eq(t).addClass(h.active).closest(r).addClass(h.active),e.preventDefault());else l==c&&(f.verbose("Enter key pressed, executing query"),f.query(),f.set.buttonPressed(),T.one("keyup",f.remove.buttonFocus))},setup:{api:function(t,n){var r={debug:p.debug,on:!1,cache:!0,action:"search",urlData:{query:t},onSuccess:function(e){f.parse.response.call(M,e,t),n()},onFailure:function(){f.displayMessage(y.serverError),n()},onAbort:function(e){},onError:f.error};e.extend(!0,r,p.apiSettings),f.verbose("Setting up API request",r),k.api(r)}},can:{useAPI:function(){return void 0!==e.fn.api},show:function(){return f.is.focused()&&!f.is.visible()&&!f.is.empty()},transition:function(){return p.transition&&void 0!==e.fn.transition&&k.transition("is supported")}},is:{animating:function(){return C.hasClass(h.animating)},hidden:function(){return C.hasClass(h.hidden)},inMessage:function(t){if(t.target){var r=e(t.target);return e.contains(n.documentElement,t.target)&&r.closest(b.message).length>0}},empty:function(){return""===C.html()},visible:function(){return C.filter(":visible").length>0},focused:function(){return T.filter(":focus").length>0}},get:{inputEvent:function(){var e=T[0];return void 0!==e&&void 0!==e.oninput?"input":void 0!==e&&void 0!==e.onpropertychange?"propertychange":"keyup"},value:function(){return T.val()},results:function(){return k.data(g.results)},result:function(t,n){var r=["title","id"],i=!1;return t=void 0!==t?t:f.get.value(),n=void 0!==n?n:f.get.results(),"category"===p.type?(f.debug("Finding result that matches",t),e.each(n,function(n,o){if(e.isArray(o.results)&&(i=f.search.object(t,o.results,r)[0]))return!1})):(f.debug("Finding result in results object",t),i=f.search.object(t,n,r)[0]),i||!1}},select:{firstResult:function(){f.verbose("Selecting first result"),S.first().addClass(h.active)}},set:{focus:function(){k.addClass(h.focus)},loading:function(){k.addClass(h.loading)},value:function(e){f.verbose("Setting search input value",e),T.val(e)},type:function(e){e=e||p.type,"category"==p.type&&k.addClass(p.type)},buttonPressed:function(){A.addClass(h.pressed)}},remove:{loading:function(){k.removeClass(h.loading)},focus:function(){k.removeClass(h.focus)},buttonPressed:function(){A.removeClass(h.pressed)}},query:function(t){t=e.isFunction(t)?t:function(){};var n=f.get.value(),r=f.read.cache(n);t=t||function(){},f.has.minimumCharacters()?(r?(f.debug("Reading result from cache",n),f.save.results(r.results),f.addResults(r.html),f.inject.id(r.results),t()):(f.debug("Querying for",n),e.isPlainObject(p.source)||e.isArray(p.source)?(f.search.local(n),t()):f.can.useAPI()?f.search.remote(n,t):(f.error(y.source),t())),p.onSearchQuery.call(M,n)):f.hideResults()},search:{local:function(e){var t,n=f.search.object(e,p.content);f.set.loading(),f.save.results(n),f.debug("Returned local search results",n),t=f.generateResults({results:n}),f.remove.loading(),f.addResults(t),f.inject.id(n),f.write.cache(e,{html:t,results:n})},remote:function(t,n){n=e.isFunction(n)?n:function(){},k.api("is loading")&&k.api("abort"),f.setup.api(t,n),k.api("query")},object:function(t,n,r){var i=[],o=[],a=t.toString().replace(v.escape,"\\$&"),s=new RegExp(v.beginsWith+a,"i"),l=function(t,n){var r=-1==e.inArray(n,i),a=-1==e.inArray(n,o);r&&a&&t.push(n)};return n=n||p.source,r=void 0!==r?r:p.searchFields,e.isArray(r)||(r=[r]),void 0===n||!1===n?(f.error(y.source),[]):(e.each(r,function(r,a){e.each(n,function(e,n){"string"==typeof n[a]&&(-1!==n[a].search(s)?l(i,n):p.searchFullText&&f.fuzzySearch(t,n[a])&&l(o,n))})}),e.merge(i,o))}},fuzzySearch:function(e,t){var n=t.length,r=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),r>n)return!1;if(r===n)return e===t;e:for(var i=0,o=0;i<r;i++){for(var a=e.charCodeAt(i);o<n;)if(t.charCodeAt(o++)===a)continue e;return!1}return!0},parse:{response:function(e,t){var n=f.generateResults(e);f.verbose("Parsing server response",e),void 0!==e&&void 0!==t&&void 0!==e[m.results]&&(f.addResults(n),f.inject.id(e[m.results]),f.write.cache(t,{html:n,results:e[m.results]}),f.save.results(e[m.results]))}},cancel:{query:function(){f.can.useAPI()&&k.api("abort")}},has:{minimumCharacters:function(){return f.get.value().length>=p.minCharacters},results:function(){return 0!==C.length&&""!=C.html()}},clear:{cache:function(e){var t=k.data(g.cache);e?e&&t&&t[e]&&(f.debug("Removing value from cache",e),delete t[e],k.data(g.cache,t)):(f.debug("Clearing cache",e),k.removeData(g.cache))}},read:{cache:function(e){var t=k.data(g.cache);return!!p.cache&&(f.verbose("Checking cache for generated html for query",e),"object"==typeof t&&void 0!==t[e]&&t[e])}},create:{id:function(e,t){var n,r=e+1;return void 0!==t?(n=String.fromCharCode(97+t)+r,f.verbose("Creating category result id",n)):(n=r,f.verbose("Creating result id",n)),n},results:function(){0===C.length&&(C=e("<div />").addClass(h.results).appendTo(k))}},inject:{result:function(e,t,n){f.verbose("Injecting result into results");var r=void 0!==n?C.children().eq(n).children(b.result).eq(t):C.children(b.result).eq(t);f.verbose("Injecting results metadata",r),r.data(g.result,e)},id:function(t){f.debug("Injecting unique ids into results");var n=0,r=0;return"category"===p.type?e.each(t,function(t,i){r=0,e.each(i.results,function(e,t){var o=i.results[e];void 0===o.id&&(o.id=f.create.id(r,n)),f.inject.result(o,r,n),r++}),n++}):e.each(t,function(e,n){var i=t[e];void 0===i.id&&(i.id=f.create.id(r)),f.inject.result(i,r),r++}),t}},save:{results:function(e){f.verbose("Saving current search results to metadata",e),k.data(g.results,e)}},write:{cache:function(e,t){var n=void 0!==k.data(g.cache)?k.data(g.cache):{};p.cache&&(f.verbose("Writing generated html to cache",e,t),n[e]=t,k.data(g.cache,n))}},addResults:function(t){if(e.isFunction(p.onResultsAdd)&&!1===p.onResultsAdd.call(C,t))return f.debug("onResultsAdd callback cancelled default action"),!1;t?(C.html(t),f.refreshResults(),p.selectFirstResult&&f.select.firstResult(),f.showResults()):f.hideResults(function(){C.empty()})},showResults:function(t){t=e.isFunction(t)?t:function(){},L||!f.is.visible()&&f.has.results()&&(f.can.transition()?(f.debug("Showing results with css animations"),C.transition({animation:p.transition+" in",debug:p.debug,verbose:p.verbose,duration:p.duration,onComplete:function(){t()},queue:!0})):(f.debug("Showing results with javascript"),C.stop().fadeIn(p.duration,p.easing)),p.onResultsOpen.call(C))},hideResults:function(t){t=e.isFunction(t)?t:function(){},f.is.visible()&&(f.can.transition()?(f.debug("Hiding results with css animations"),C.transition({animation:p.transition+" out",debug:p.debug,verbose:p.verbose,duration:p.duration,onComplete:function(){t()},queue:!0})):(f.debug("Hiding results with javascript"),C.stop().fadeOut(p.duration,p.easing)),p.onResultsClose.call(C))},generateResults:function(t){f.debug("Generating html from response",t);var n=p.templates[p.type],r=e.isPlainObject(t[m.results])&&!e.isEmptyObject(t[m.results]),i=e.isArray(t[m.results])&&t[m.results].length>0,o="";return r||i?(p.maxResults>0&&(r?"standard"==p.type&&f.error(y.maxResults):t[m.results]=t[m.results].slice(0,p.maxResults)),e.isFunction(n)?o=n(t,m):f.error(y.noTemplate,!1)):p.showNoResults&&(o=f.displayMessage(y.noResults,"empty")),p.onResults.call(M,t),o},displayMessage:function(e,t){return t=t||"standard",f.debug("Displaying message",e,t),f.addResults(p.templates.message(e,t)),p.templates.message(e,t)},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===n)return p[t];p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];f[t]=n}},debug:function(){!p.silent&&p.debug&&(p.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,p.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),f.verbose.apply(console,arguments)))},error:function(){p.silent||(f.error=Function.prototype.bind.call(console.error,console,p.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,n;p.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:M,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=p.name+":",n=0;s=!1,clearTimeout(f.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),o.length>1&&(t+=" ("+o.length+")"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var o,a,s,l=E;return n=n||d,r=M||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},u?(void 0===E&&f.initialize(),f.invoke(c)):(void 0!==E&&E.invoke("destroy"),f.initialize())}),void 0!==i?i:this},e.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchOnFocus:!0,searchFields:["title","description"],displayField:"",searchFullText:!0,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(/[&<>"'`]/g,function(e){return t[e]}):e},message:function(e,t){var n="";return void 0!==e&&void 0!==t&&(n+='<div class="message '+t+'">',n+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",n+="</div>"),n},category:function(t,n){var r="";e.fn.search.settings.templates.escape;return void 0!==t[n.categoryResults]&&(e.each(t[n.categoryResults],function(t,i){void 0!==i[n.results]&&i.results.length>0&&(r+='<div class="category">',void 0!==i[n.categoryName]&&(r+='<div class="name">'+i[n.categoryName]+"</div>"),e.each(i.results,function(e,t){t[n.url]?r+='<a class="result" href="'+t[n.url]+'">':r+='<a class="result">',void 0!==t[n.image]&&(r+='<div class="image"> <img src="'+t[n.image]+'"></div>'),r+='<div class="content">',void 0!==t[n.price]&&(r+='<div class="price">'+t[n.price]+"</div>"),void 0!==t[n.title]&&(r+='<div class="title">'+t[n.title]+"</div>"),void 0!==t[n.description]&&(r+='<div class="description">'+t[n.description]+"</div>"),r+="</div>",r+="</a>"}),r+="</div>")}),t[n.action]&&(r+='<a href="'+t[n.action][n.actionURL]+'" class="action">'+t[n.action][n.actionText]+"</a>"),r)},standard:function(t,n){var r="";return void 0!==t[n.results]&&(e.each(t[n.results],function(e,t){t[n.url]?r+='<a class="result" href="'+t[n.url]+'">':r+='<a class="result">',void 0!==t[n.image]&&(r+='<div class="image"> <img src="'+t[n.image]+'"></div>'),r+='<div class="content">',void 0!==t[n.price]&&(r+='<div class="price">'+t[n.price]+"</div>"),void 0!==t[n.title]&&(r+='<div class="title">'+t[n.title]+"</div>"),void 0!==t[n.description]&&(r+='<div class="description">'+t[n.description]+"</div>"),r+="</div>",r+="</a>"}),t[n.action]&&(r+='<a href="'+t[n.action][n.actionURL]+'" class="action">'+t[n.action][n.actionText]+"</a>"),r)}}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.shape=function(r){var i,o=e(this),a=(e("body"),(new Date).getTime()),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1),d=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var t,f,p,h=o.selector||"",g=e.isPlainObject(r)?e.extend(!0,{},e.fn.shape.settings,r):e.extend({},e.fn.shape.settings),v=g.namespace,m=g.selector,b=g.error,y=g.className,x="."+v,_="module-"+v,w=e(this),k=w.find(m.sides),T=w.find(m.side),A=!1,C=this,S=w.data(_);p={initialize:function(){p.verbose("Initializing module for",C),p.set.defaultSide(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),S=p,w.data(_,S)},destroy:function(){p.verbose("Destroying previous module for",C),w.removeData(_).off(x)},refresh:function(){p.verbose("Refreshing selector cache for",C),w=e(C),k=e(this).find(m.shape),T=e(this).find(m.side)},repaint:function(){p.verbose("Forcing repaint event");(k[0]||n.createElement("div")).offsetWidth},animate:function(e,n){p.verbose("Animating box with properties",e),n=n||function(e){p.verbose("Executing animation callback"),void 0!==e&&e.stopPropagation(),p.reset(),p.set.active()},g.beforeChange.call(f[0]),p.get.transitionEvent()?(p.verbose("Starting CSS animation"),w.addClass(y.animating),k.css(e).one(p.get.transitionEvent(),n),p.set.duration(g.duration),d(function(){w.addClass(y.animating),t.addClass(y.hidden)})):n()},queue:function(e){p.debug("Queueing animation of",e),k.one(p.get.transitionEvent(),function(){p.debug("Executing queued animation"),setTimeout(function(){w.shape(e)},0)})},reset:function(){p.verbose("Animating states reset"),w.removeClass(y.animating).attr("style","").removeAttr("style"),k.attr("style","").removeAttr("style"),T.attr("style","").removeAttr("style").removeClass(y.hidden),f.removeClass(y.animating).attr("style","").removeAttr("style")},is:{complete:function(){return T.filter("."+y.active)[0]==f[0]},animating:function(){return w.hasClass(y.animating)}},set:{defaultSide:function(){t=w.find("."+g.className.active),f=t.next(m.side).length>0?t.next(m.side):w.find(m.side).first(),A=!1,p.verbose("Active side set to",t),p.verbose("Next side set to",f)},duration:function(e){e="number"==typeof(e=e||g.duration)?e+"ms":e,p.verbose("Setting animation duration",e),(g.duration||0===g.duration)&&k.add(T).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},currentStageSize:function(){var e=w.find("."+g.className.active),t=e.outerWidth(!0),n=e.outerHeight(!0);w.css({width:t,height:n})},stageSize:function(){var e=w.clone().addClass(y.loading),t=e.find("."+g.className.active),n=A?e.find(m.side).eq(A):t.next(m.side).length>0?t.next(m.side):e.find(m.side).first(),r="next"==g.width?n.outerWidth(!0):"initial"==g.width?w.width():g.width,i="next"==g.height?n.outerHeight(!0):"initial"==g.height?w.height():g.height;t.removeClass(y.active),n.addClass(y.active),e.insertAfter(w),e.remove(),"auto"!=g.width&&(w.css("width",r+g.jitter),p.verbose("Specifying width during animation",r)),"auto"!=g.height&&(w.css("height",i+g.jitter),p.verbose("Specifying height during animation",i))},nextSide:function(e){A=e,f=T.filter(e),A=T.index(f),0===f.length&&(p.set.defaultSide(),p.error(b.side)),p.verbose("Next side manually set to",f)},active:function(){p.verbose("Setting new side to active",f),T.removeClass(y.active),f.addClass(y.active),g.onChange.call(f[0]),p.set.defaultSide()}},flip:{up:function(){if(!p.is.complete()||p.is.animating()||g.allowRepeats)if(p.is.animating())p.queue("flip up");else{p.debug("Flipping up",f);var e=p.get.transform.up();p.set.stageSize(),p.stage.above(),p.animate(e)}else p.debug("Side already visible",f)},down:function(){if(!p.is.complete()||p.is.animating()||g.allowRepeats)if(p.is.animating())p.queue("flip down");else{p.debug("Flipping down",f);var e=p.get.transform.down();p.set.stageSize(),p.stage.below(),p.animate(e)}else p.debug("Side already visible",f)},left:function(){if(!p.is.complete()||p.is.animating()||g.allowRepeats)if(p.is.animating())p.queue("flip left");else{p.debug("Flipping left",f);var e=p.get.transform.left();p.set.stageSize(),p.stage.left(),p.animate(e)}else p.debug("Side already visible",f)},right:function(){if(!p.is.complete()||p.is.animating()||g.allowRepeats)if(p.is.animating())p.queue("flip right");else{p.debug("Flipping right",f);var e=p.get.transform.right();p.set.stageSize(),p.stage.right(),p.animate(e)}else p.debug("Side already visible",f)},over:function(){!p.is.complete()||p.is.animating()||g.allowRepeats?p.is.animating()?p.queue("flip over"):(p.debug("Flipping over",f),p.set.stageSize(),p.stage.behind(),p.animate(p.get.transform.over())):p.debug("Side already visible",f)},back:function(){!p.is.complete()||p.is.animating()||g.allowRepeats?p.is.animating()?p.queue("flip back"):(p.debug("Flipping back",f),p.set.stageSize(),p.stage.behind(),p.animate(p.get.transform.back())):p.debug("Side already visible",f)}},get:{transform:{up:function(){return{transform:"translateY("+-(t.outerHeight(!0)-f.outerHeight(!0))/2+"px) translateZ("+-t.outerHeight(!0)/2+"px) rotateX(-90deg)"}},down:function(){return{transform:"translateY("+-(t.outerHeight(!0)-f.outerHeight(!0))/2+"px) translateZ("+-t.outerHeight(!0)/2+"px) rotateX(90deg)"}},left:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) translateZ("+-t.outerWidth(!0)/2+"px) rotateY(90deg)"}},right:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) translateZ("+-t.outerWidth(!0)/2+"px) rotateY(-90deg)"}},over:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) rotateY(180deg)"}},back:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=n.createElement("element"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(void 0!==t.style[e])return r[e]},nextSide:function(){return t.next(m.side).length>0?t.next(m.side):w.find(m.side).first()}},stage:{above:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};p.verbose("Setting the initial animation position as above",f,e),k.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};p.verbose("Setting the initial animation position as below",f,e),k.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e=t.outerWidth(!0),n=f.outerWidth(!0),r={origin:(e-n)/2,depth:{active:n/2,next:e/2}};p.verbose("Setting the initial animation position as left",f,r),k.css({transform:"translateZ(-"+r.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+r.depth.active+"px)"}),f.addClass(y.animating).css({left:r.origin+"px",transform:"rotateY(-90deg) translateZ("+r.depth.next+"px)"})},right:function(){var e=t.outerWidth(!0),n=f.outerWidth(!0),r={origin:(e-n)/2,depth:{active:n/2,next:e/2}};p.verbose("Setting the initial animation position as left",f,r),k.css({transform:"translateZ(-"+r.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+r.depth.active+"px)"}),f.addClass(y.animating).css({left:r.origin+"px",transform:"rotateY(90deg) translateZ("+r.depth.next+"px)"})},behind:function(){var e=t.outerWidth(!0),n=f.outerWidth(!0),r={origin:(e-n)/2,depth:{active:n/2,next:e/2}};p.verbose("Setting the initial animation position as behind",f,r),t.css({transform:"rotateY(0deg)"}),f.addClass(y.animating).css({left:r.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,n){if(p.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===n)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===n)return p[t];p[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,g.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),p.verbose.apply(console,arguments)))},error:function(){g.silent||(p.error=Function.prototype.bind.call(console.error,console,g.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,n;g.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:C,"Execution Time":n})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=g.name+":",n=0;a=!1,clearTimeout(p.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",h&&(t+=" '"+h+"'"),o.length>1&&(t+=" ("+o.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,r){var o,a,s,l=S;return n=n||u,r=C||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},c?(void 0===S&&p.initialize(),p.invoke(l)):(void 0!==S&&S.invoke("destroy"),p.initialize())}),void 0!==i?i:this},e.fn.shape.settings={name:"Shape",silent:!1,debug:!1,verbose:!1,jitter:0,performance:!0,namespace:"shape",width:"initial",height:"initial",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sidebar=function(r){var i,o=e(this),a=e(t),s=e(n),l=e("html"),c=e("head"),u=o.selector||"",d=(new Date).getTime(),f=[],p=arguments[0],h="string"==typeof p,g=[].slice.call(arguments,1),v=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var o,m,b,y,x,_,w=e.isPlainObject(r)?e.extend(!0,{},e.fn.sidebar.settings,r):e.extend({},e.fn.sidebar.settings),k=w.selector,T=w.className,A=w.namespace,C=w.regExp,S=w.error,M="."+A,E="module-"+A,O=e(this),L=e(w.context),P=O.children(k.sidebar),D=(L.children(k.fixed),L.children(k.pusher)),R=this,F=O.data(E);_={initialize:function(){_.debug("Initializing sidebar",r),_.create.id(),x=_.get.transitionEvent(),w.delaySetup?v(_.setup.layout):_.setup.layout(),v(function(){_.setup.cache()}),_.instantiate()},instantiate:function(){_.verbose("Storing instance of module",_),F=_,O.data(E,_)},create:{id:function(){b=(Math.random().toString(16)+"000000000").substr(2,8),m="."+b,_.verbose("Creating unique id for element",b)}},destroy:function(){_.verbose("Destroying previous module for",O),O.off(M).removeData(E),_.is.ios()&&_.remove.ios(),L.off(m),a.off(m),s.off(m)},event:{clickaway:function(e){var t=D.find(e.target).length>0||D.is(e.target),n=L.is(e.target);t&&(_.verbose("User clicked on dimmed page"),_.hide()),n&&(_.verbose("User clicked on dimmable context (scaled out page)"),_.hide())},touch:function(e){},containScroll:function(e){R.scrollTop<=0&&(R.scrollTop=1),R.scrollTop+R.offsetHeight>=R.scrollHeight&&(R.scrollTop=R.scrollHeight-R.offsetHeight-1)},scroll:function(t){0===e(t.target).closest(k.sidebar).length&&t.preventDefault()}},bind:{clickaway:function(){_.verbose("Adding clickaway events to context",L),w.closable&&L.on("click"+m,_.event.clickaway).on("touchend"+m,_.event.clickaway)},scrollLock:function(){w.scrollLock&&(_.debug("Disabling page scroll"),a.on("DOMMouseScroll"+m,_.event.scroll)),_.verbose("Adding events to contain sidebar scroll"),s.on("touchmove"+m,_.event.touch),O.on("scroll"+M,_.event.containScroll)}},unbind:{clickaway:function(){_.verbose("Removing clickaway events from context",L),L.off(m)},scrollLock:function(){_.verbose("Removing scroll lock from page"),s.off(m),a.off(m),O.off("scroll"+M)}},add:{inlineCSS:function(){var t,n=_.cache.width||O.outerWidth(),r=_.cache.height||O.outerHeight(),i=_.is.rtl(),a=_.get.direction(),s={left:n,right:-n,top:r,bottom:-r};i&&(_.verbose("RTL detected, flipping widths"),s.left=-n,s.right=n),t="<style>","left"===a||"right"===a?(_.debug("Adding CSS rules for animation distance",n),t+=" .ui.visible."+a+".sidebar ~ .fixed, .ui.visible."+a+".sidebar ~ .pusher {   -webkit-transform: translate3d("+s[a]+"px, 0, 0);           transform: translate3d("+s[a]+"px, 0, 0); }"):"top"!==a&&"bottom"!=a||(t+=" .ui.visible."+a+".sidebar ~ .fixed, .ui.visible."+a+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+s[a]+"px, 0);           transform: translate3d(0, "+s[a]+"px, 0); }"),_.is.ie()&&("left"===a||"right"===a?(_.debug("Adding CSS rules for animation distance",n),t+=" body.pushable > .ui.visible."+a+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+s[a]+"px, 0, 0);           transform: translate3d("+s[a]+"px, 0, 0); }"):"top"!==a&&"bottom"!=a||(t+=" body.pushable > .ui.visible."+a+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+s[a]+"px, 0);           transform: translate3d(0, "+s[a]+"px, 0); }"),t+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"),o=e(t+="</style>").appendTo(c),_.debug("Adding sizing css to head",o)}},refresh:function(){_.verbose("Refreshing selector cache"),L=e(w.context),P=L.children(k.sidebar),D=L.children(k.pusher),L.children(k.fixed),_.clear.cache()},refreshSidebars:function(){_.verbose("Refreshing other sidebars"),P=L.children(k.sidebar)},repaint:function(){_.verbose("Forcing repaint event"),R.style.display="none";R.offsetHeight;R.scrollTop=R.scrollTop,R.style.display=""},setup:{cache:function(){_.cache={width:O.outerWidth(),height:O.outerHeight(),rtl:"rtl"==O.css("direction")}},layout:function(){0===L.children(k.pusher).length&&(_.debug("Adding wrapper element for sidebar"),_.error(S.pusher),D=e('<div class="pusher" />'),L.children().not(k.omitted).not(P).wrapAll(D),_.refresh()),0!==O.nextAll(k.pusher).length&&O.nextAll(k.pusher)[0]===D[0]||(_.debug("Moved sidebar to correct parent element"),_.error(S.movedSidebar,R),O.detach().prependTo(L),_.refresh()),_.clear.cache(),_.set.pushable(),_.set.direction()}},attachEvents:function(t,n){var r=e(t);n=e.isFunction(_[n])?_[n]:_.toggle,r.length>0?(_.debug("Attaching sidebar events to element",t,n),r.on("click"+M,n)):_.error(S.notFound,t)},show:function(t){if(t=e.isFunction(t)?t:function(){},_.is.hidden()){if(_.refreshSidebars(),w.overlay&&(_.error(S.overlay),w.transition="overlay"),_.refresh(),_.othersActive())if(_.debug("Other sidebars currently visible"),w.exclusive){if("overlay"!=w.transition)return void _.hideOthers(_.show);_.hideOthers()}else w.transition="overlay";_.pushPage(function(){t.call(R),w.onShow.call(R)}),w.onChange.call(R),w.onVisible.call(R)}else _.debug("Sidebar is already visible")},hide:function(t){t=e.isFunction(t)?t:function(){},(_.is.visible()||_.is.animating())&&(_.debug("Hiding sidebar",t),_.refreshSidebars(),_.pullPage(function(){t.call(R),w.onHidden.call(R)}),w.onChange.call(R),w.onHide.call(R))},othersAnimating:function(){return P.not(O).filter("."+T.animating).length>0},othersVisible:function(){return P.not(O).filter("."+T.visible).length>0},othersActive:function(){return _.othersVisible()||_.othersAnimating()},hideOthers:function(e){var t=P.not(O).filter("."+T.visible),n=t.length,r=0;e=e||function(){},t.sidebar("hide",function(){++r==n&&e()})},toggle:function(){_.verbose("Determining toggled direction"),_.is.hidden()?_.show():_.hide()},pushPage:function(t){var n,r,i,o=_.get.transition(),a="overlay"===o||_.othersActive()?O:D;t=e.isFunction(t)?t:function(){},"scale down"==w.transition&&_.scrollToTop(),_.set.transition(o),_.repaint(),n=function(){_.bind.clickaway(),_.add.inlineCSS(),_.set.animating(),_.set.visible()},r=function(){_.set.dimmed()},i=function(e){e.target==a[0]&&(a.off(x+m,i),_.remove.animating(),_.bind.scrollLock(),t.call(R))},a.off(x+m),a.on(x+m,i),v(n),w.dimPage&&!_.othersVisible()&&v(r)},pullPage:function(t){var n,r,i=_.get.transition(),o="overlay"==i||_.othersActive()?O:D;t=e.isFunction(t)?t:function(){},_.verbose("Removing context push state",_.get.direction()),_.unbind.clickaway(),_.unbind.scrollLock(),n=function(){_.set.transition(i),_.set.animating(),_.remove.visible(),w.dimPage&&!_.othersVisible()&&D.removeClass(T.dimmed)},r=function(e){e.target==o[0]&&(o.off(x+m,r),_.remove.animating(),_.remove.transition(),_.remove.inlineCSS(),("scale down"==i||w.returnScroll&&_.is.mobile())&&_.scrollBack(),t.call(R))},o.off(x+m),o.on(x+m,r),v(n)},scrollToTop:function(){_.verbose("Scrolling to top of page to avoid animation issues"),y=e(t).scrollTop(),O.scrollTop(0),t.scrollTo(0,0)},scrollBack:function(){_.verbose("Scrolling back to original page position"),t.scrollTo(0,y)},clear:{cache:function(){_.verbose("Clearing cached dimensions"),_.cache={}}},set:{ios:function(){l.addClass(T.ios)},pushed:function(){L.addClass(T.pushed)},pushable:function(){L.addClass(T.pushable)},dimmed:function(){D.addClass(T.dimmed)},active:function(){O.addClass(T.active)},animating:function(){O.addClass(T.animating)},transition:function(e){e=e||_.get.transition(),O.addClass(e)},direction:function(e){e=e||_.get.direction(),O.addClass(T[e])},visible:function(){O.addClass(T.visible)},overlay:function(){O.addClass(T.overlay)}},remove:{inlineCSS:function(){_.debug("Removing inline css styles",o),o&&o.length>0&&o.remove()},ios:function(){l.removeClass(T.ios)},pushed:function(){L.removeClass(T.pushed)},pushable:function(){L.removeClass(T.pushable)},active:function(){O.removeClass(T.active)},animating:function(){O.removeClass(T.animating)},transition:function(e){e=e||_.get.transition(),O.removeClass(e)},direction:function(e){e=e||_.get.direction(),O.removeClass(T[e])},visible:function(){O.removeClass(T.visible)},overlay:function(){O.removeClass(T.overlay)}},get:{direction:function(){return O.hasClass(T.top)?T.top:O.hasClass(T.right)?T.right:O.hasClass(T.bottom)?T.bottom:T.left},transition:function(){var e,t=_.get.direction();return e=_.is.mobile()?"auto"==w.mobileTransition?w.defaultTransition.mobile[t]:w.mobileTransition:"auto"==w.transition?w.defaultTransition.computer[t]:w.transition,_.verbose("Determined transition",e),e},transitionEvent:function(){var e,t=n.createElement("element"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(void 0!==t.style[e])return r[e]}},is:{ie:function(){return!t.ActiveXObject&&"ActiveXObject"in t||"ActiveXObject"in t},ios:function(){var e=navigator.userAgent,t=e.match(C.ios),n=e.match(C.mobileChrome);return!(!t||n)&&(_.verbose("Browser was found to be iOS",e),!0)},mobile:function(){var e=navigator.userAgent;return e.match(C.mobile)?(_.verbose("Browser was found to be mobile",e),!0):(_.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!_.is.visible()},visible:function(){return O.hasClass(T.visible)},open:function(){return _.is.visible()},closed:function(){return _.is.hidden()},vertical:function(){return O.hasClass(T.top)},animating:function(){return L.hasClass(T.animating)},rtl:function(){return void 0===_.cache.rtl&&(_.cache.rtl="rtl"==O.css("direction")),_.cache.rtl}},setting:function(t,n){if(_.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,w,t);else{if(void 0===n)return w[t];e.isPlainObject(w[t])?e.extend(!0,w[t],n):w[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,_,t);else{if(void 0===n)return _[t];_[t]=n}},debug:function(){!w.silent&&w.debug&&(w.performance?_.performance.log(arguments):(_.debug=Function.prototype.bind.call(console.info,console,w.name+":"),_.debug.apply(console,arguments)))},verbose:function(){!w.silent&&w.verbose&&w.debug&&(w.performance?_.performance.log(arguments):(_.verbose=Function.prototype.bind.call(console.info,console,w.name+":"),_.verbose.apply(console,arguments)))},error:function(){w.silent||(_.error=Function.prototype.bind.call(console.error,console,w.name+":"),_.error.apply(console,arguments))},performance:{log:function(e){var t,n;w.performance&&(n=(t=(new Date).getTime())-(d||t),d=t,f.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(_.performance.timer),_.performance.timer=setTimeout(_.performance.display,500)},display:function(){var t=w.name+":",n=0;d=!1,clearTimeout(_.performance.timer),e.each(f,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",u&&(t+=" '"+u+"'"),(void 0!==console.group||void 0!==console.table)&&f.length>0&&(console.groupCollapsed(t),console.table?console.table(f):e.each(f,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),f=[]}},invoke:function(t,n,r){var o,a,s,l=F;return n=n||g,r=R||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(_.error(S.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},h?(void 0===F&&_.initialize(),_.invoke(p)):(void 0!==F&&_.invoke("destroy"),_.initialize())}),void 0!==i?i:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sticky=function(r){var i,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return o.each(function(){var o,f,p,h,g,v=e.isPlainObject(r)?e.extend(!0,{},e.fn.sticky.settings,r):e.extend({},e.fn.sticky.settings),m=v.className,b=v.namespace,y=v.error,x="."+b,_="module-"+b,w=e(this),k=e(t),T=e(v.scrollContext),A=(w.selector,w.data(_)),C=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},S=this;g={initialize:function(){g.determineContainer(),g.determineContext(),g.verbose("Initializing sticky",v,o),g.save.positions(),g.checkErrors(),g.bind.events(),v.observeChanges&&g.observeChanges(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),A=g,w.data(_,g)},destroy:function(){g.verbose("Destroying previous instance"),g.reset(),p&&p.disconnect(),h&&h.disconnect(),k.off("load"+x,g.event.load).off("resize"+x,g.event.resize),T.off("scrollchange"+x,g.event.scrollchange),w.removeData(_)},observeChanges:function(){"MutationObserver"in t&&(p=new MutationObserver(g.event.documentChanged),h=new MutationObserver(g.event.changed),p.observe(n,{childList:!0,subtree:!0}),h.observe(S,{childList:!0,subtree:!0}),h.observe(f[0],{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",h))},determineContainer:function(){o=v.container?e(v.container):w.offsetParent()},determineContext:function(){0!==(f=v.context?e(v.context):o).length||g.error(y.invalidContext,v.context,w)},checkErrors:function(){if(g.is.hidden()&&g.error(y.visible,w),g.cache.element.height>g.cache.context.height)return g.reset(),void g.error(y.elementSize,w)},bind:{events:function(){k.on("load"+x,g.event.load).on("resize"+x,g.event.resize),T.off("scroll"+x).on("scroll"+x,g.event.scroll).on("scrollchange"+x,g.event.scrollchange)}},event:{changed:function(e){clearTimeout(g.timer),g.timer=setTimeout(function(){g.verbose("DOM tree modified, updating sticky menu",e),g.refresh()},100)},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==S||e(t).find(S).length>0)&&(g.debug("Element removed from DOM, tearing down events"),g.destroy())})})},load:function(){g.verbose("Page contents finished loading"),C(g.refresh)},resize:function(){g.verbose("Window resized"),C(g.refresh)},scroll:function(){C(function(){T.triggerHandler("scrollchange"+x,T.scrollTop())})},scrollchange:function(e,t){g.stick(t),v.onScroll.call(S)}},refresh:function(e){g.reset(),v.context||g.determineContext(),e&&g.determineContainer(),g.save.positions(),g.stick(),v.onReposition.call(S)},supports:{sticky:function(){var t=e("<div/>");t[0];return t.addClass(m.supported),t.css("position").match("sticky")}},save:{lastScroll:function(e){g.lastScroll=e},elementScroll:function(e){g.elementScroll=e},positions:function(){var e={height:T.height()},t={margin:{top:parseInt(w.css("margin-top"),10),bottom:parseInt(w.css("margin-bottom"),10)},offset:w.offset(),width:w.outerWidth(),height:w.outerHeight()},n={offset:f.offset(),height:f.outerHeight()};o.outerHeight();g.is.standardScroll()||(g.debug("Non-standard scroll. Removing scroll offset from element offset"),e.top=T.scrollTop(),e.left=T.scrollLeft(),t.offset.top+=e.top,n.offset.top+=e.top,t.offset.left+=e.left,n.offset.left+=e.left),g.cache={fits:t.height+v.offset<=e.height,sameHeight:t.height==n.height,scrollContext:{height:e.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:n.offset.top,height:n.height,bottom:n.offset.top+n.height}},g.set.containerSize(),g.stick(),g.debug("Caching element positions",g.cache)}},get:{direction:function(e){var t="down";return e=e||T.scrollTop(),void 0!==g.lastScroll&&(g.lastScroll<e?t="down":g.lastScroll>e&&(t="up")),t},scrollChange:function(e){return e=e||T.scrollTop(),g.lastScroll?e-g.lastScroll:0},currentElementScroll:function(){return g.elementScroll?g.elementScroll:g.is.top()?Math.abs(parseInt(w.css("top"),10))||0:Math.abs(parseInt(w.css("bottom"),10))||0},elementScroll:function(e){e=e||T.scrollTop();var t=g.cache.element,n=g.cache.scrollContext,r=g.get.scrollChange(e),i=t.height-n.height+v.offset,o=g.get.currentElementScroll(),a=o+r;return o=g.cache.fits||a<0?0:a>i?i:a}},remove:{lastScroll:function(){delete g.lastScroll},elementScroll:function(e){delete g.elementScroll},minimumSize:function(){o.css("min-height","")},offset:function(){w.css("margin-top","")}},set:{offset:function(){g.verbose("Setting offset on element",v.offset),w.css("margin-top",v.offset)},containerSize:function(){var e=o.get(0).tagName;"HTML"===e||"body"==e?g.determineContainer():Math.abs(o.outerHeight()-g.cache.context.height)>v.jitter&&(g.debug("Context has padding, specifying exact height for container",g.cache.context.height),o.css({height:g.cache.context.height}))},minimumSize:function(){var e=g.cache.element;o.css("min-height",e.height)},scroll:function(e){g.debug("Setting scroll on element",e),g.elementScroll!=e&&(g.is.top()&&w.css("bottom","").css("top",-e),g.is.bottom()&&w.css("top","").css("bottom",e))},size:function(){0!==g.cache.element.height&&0!==g.cache.element.width&&(S.style.setProperty("width",g.cache.element.width+"px","important"),S.style.setProperty("height",g.cache.element.height+"px","important"))}},is:{standardScroll:function(){return T[0]==t},top:function(){return w.hasClass(m.top)},bottom:function(){return w.hasClass(m.bottom)},initialPosition:function(){return!g.is.fixed()&&!g.is.bound()},hidden:function(){return!w.is(":visible")},bound:function(){return w.hasClass(m.bound)},fixed:function(){return w.hasClass(m.fixed)}},stick:function(e){var t=e||T.scrollTop(),n=g.cache,r=n.fits,i=n.sameHeight,o=n.element,a=n.scrollContext,s=n.context,l=g.is.bottom()&&v.pushing?v.bottomOffset:v.offset,c=(e={top:t+l,bottom:t+l+a.height},g.get.direction(e.top),r?0:g.get.elementScroll(e.top)),u=!r;0!==o.height&&!i&&(g.is.initialPosition()?e.top>=s.bottom?(g.debug("Initial element position is bottom of container"),g.bindBottom()):e.top>o.top&&(o.height+e.top-c>=s.bottom?(g.debug("Initial element position is bottom of container"),g.bindBottom()):(g.debug("Initial element position is fixed"),g.fixTop())):g.is.fixed()?g.is.top()?e.top<=o.top?(g.debug("Fixed element reached top of container"),g.setInitialPosition()):o.height+e.top-c>=s.bottom?(g.debug("Fixed element reached bottom of container"),g.bindBottom()):u&&(g.set.scroll(c),g.save.lastScroll(e.top),g.save.elementScroll(c)):g.is.bottom()&&(e.bottom-o.height<=o.top?(g.debug("Bottom fixed rail has reached top of container"),g.setInitialPosition()):e.bottom>=s.bottom?(g.debug("Bottom fixed rail has reached bottom of container"),g.bindBottom()):u&&(g.set.scroll(c),g.save.lastScroll(e.top),g.save.elementScroll(c))):g.is.bottom()&&(e.top<=o.top?(g.debug("Jumped from bottom fixed to top fixed, most likely used home/end button"),g.setInitialPosition()):v.pushing?g.is.bound()&&e.bottom<=s.bottom&&(g.debug("Fixing bottom attached element to bottom of browser."),g.fixBottom()):g.is.bound()&&e.top<=s.bottom-o.height&&(g.debug("Fixing bottom attached element to top of browser."),g.fixTop())))},bindTop:function(){g.debug("Binding element to top of parent container"),g.remove.offset(),w.css({left:"",top:"",marginBottom:""}).removeClass(m.fixed).removeClass(m.bottom).addClass(m.bound).addClass(m.top),v.onTop.call(S),v.onUnstick.call(S)},bindBottom:function(){g.debug("Binding element to bottom of parent container"),g.remove.offset(),w.css({left:"",top:""}).removeClass(m.fixed).removeClass(m.top).addClass(m.bound).addClass(m.bottom),v.onBottom.call(S),v.onUnstick.call(S)},setInitialPosition:function(){g.debug("Returning to initial position"),g.unfix(),g.unbind()},fixTop:function(){g.debug("Fixing element to top of page"),v.setSize&&g.set.size(),g.set.minimumSize(),g.set.offset(),w.css({left:g.cache.element.left,bottom:"",marginBottom:""}).removeClass(m.bound).removeClass(m.bottom).addClass(m.fixed).addClass(m.top),v.onStick.call(S)},fixBottom:function(){g.debug("Sticking element to bottom of page"),v.setSize&&g.set.size(),g.set.minimumSize(),g.set.offset(),w.css({left:g.cache.element.left,bottom:"",marginBottom:""}).removeClass(m.bound).removeClass(m.top).addClass(m.fixed).addClass(m.bottom),v.onStick.call(S)},unbind:function(){g.is.bound()&&(g.debug("Removing container bound position on element"),g.remove.offset(),w.removeClass(m.bound).removeClass(m.top).removeClass(m.bottom))},unfix:function(){g.is.fixed()&&(g.debug("Removing fixed position on element"),g.remove.minimumSize(),g.remove.offset(),w.removeClass(m.fixed).removeClass(m.top).removeClass(m.bottom),v.onUnstick.call(S))},reset:function(){g.debug("Resetting elements position"),g.unbind(),g.unfix(),g.resetCSS(),g.remove.offset(),g.remove.lastScroll()},resetCSS:function(){w.css({width:"",height:""}),o.css({height:""})},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(void 0===n)return v[t];v[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===n)return g[t];g[t]=n}},debug:function(){!v.silent&&v.debug&&(v.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,v.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),g.verbose.apply(console,arguments)))},error:function(){v.silent||(g.error=Function.prototype.bind.call(console.error,console,v.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,n;v.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,0)},display:function(){var t=v.name+":",n=0;s=!1,clearTimeout(g.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var o,a,s,l=A;return n=n||d,r=S||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},u?(void 0===A&&g.initialize(),g.invoke(c)):(void 0!==A&&A.invoke("destroy"),g.initialize())}),void 0!==i?i:this},e.fn.sticky.settings={name:"Sticky",namespace:"sticky",silent:!1,debug:!1,verbose:!0,performance:!0,pushing:!1,context:!1,container:!1,scrollContext:t,offset:0,bottomOffset:0,jitter:5,setSize:!0,observeChanges:!1,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible. Use silent setting to surpress this warning in production.",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.tab=function(r){var i,o=e.isFunction(this)?e(t):e(this),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1),f=!1;return o.each(function(){var p,h,g,v,m,b,y=e.isPlainObject(r)?e.extend(!0,{},e.fn.tab.settings,r):e.extend({},e.fn.tab.settings),x=y.className,_=y.metadata,w=y.selector,k=y.error,T="."+y.namespace,A="module-"+y.namespace,C=e(this),S={},M=!0,E=0,O=this,L=C.data(A);m={initialize:function(){m.debug("Initializing tab menu item",C),m.fix.callbacks(),m.determineTabs(),m.debug("Determining tabs",y.context,h),y.auto&&m.set.auto(),m.bind.events(),y.history&&!f&&(m.initializeHistory(),f=!0),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),L=m,C.data(A,m)},destroy:function(){m.debug("Destroying tabs",C),C.removeData(A).off(T)},bind:{events:function(){e.isWindow(O)||(m.debug("Attaching tab activation events to element",C),C.on("click"+T,m.event.click))}},determineTabs:function(){var t;"parent"===y.context?(C.closest(w.ui).length>0?(t=C.closest(w.ui),m.verbose("Using closest UI element as parent",t)):t=C,p=t.parent(),m.verbose("Determined parent element for creating context",p)):y.context?(p=e(y.context),m.verbose("Using selector for tab context",y.context,p)):p=e("body"),y.childrenOnly?(h=p.children(w.tabs),m.debug("Searching tab context children for tabs",p,h)):(h=p.find(w.tabs),m.debug("Searching tab context for tabs",p,h))},fix:{callbacks:function(){e.isPlainObject(r)&&(r.onTabLoad||r.onTabInit)&&(r.onTabLoad&&(r.onLoad=r.onTabLoad,delete r.onTabLoad,m.error(k.legacyLoad,r.onLoad)),r.onTabInit&&(r.onFirstLoad=r.onTabInit,delete r.onTabInit,m.error(k.legacyInit,r.onFirstLoad)),y=e.extend(!0,{},e.fn.tab.settings,r))}},initializeHistory:function(){if(m.debug("Initializing page state"),void 0===e.address)return m.error(k.state),!1;if("state"==y.historyType){if(m.debug("Using HTML5 to manage state"),!1===y.path)return m.error(k.path),!1;e.address.history(!0).state(y.path)}e.address.bind("change",m.event.history.change)},event:{click:function(t){var n=e(this).data(_.tab);void 0!==n?(y.history?(m.verbose("Updating page state",t),e.address.value(n)):(m.verbose("Changing tab",t),m.changeTab(n)),t.preventDefault()):m.debug("No tab specified")},history:{change:function(t){var n=t.pathNames.join("/")||m.get.initialPath(),r=y.templates.determineTitle(n)||!1;m.performance.display(),m.debug("History change event",n,t),b=t,void 0!==n&&m.changeTab(n),r&&e.address.title(r)}}},refresh:function(){g&&(m.debug("Refreshing tab",g),m.changeTab(g))},cache:{read:function(e){return void 0!==e&&S[e]},add:function(e,t){e=e||g,m.debug("Adding cached content for",e),S[e]=t},remove:function(e){e=e||g,m.debug("Removing cached content for",e),delete S[e]}},set:{auto:function(){var t="string"==typeof y.path?y.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";m.verbose("Setting up automatic tab retrieval from server",t),e.isPlainObject(y.apiSettings)?y.apiSettings.url=t:y.apiSettings={url:t}},loading:function(e){var t=m.get.tabElement(e);t.hasClass(x.loading)||(m.verbose("Setting loading state for",t),t.addClass(x.loading).siblings(h).removeClass(x.active+" "+x.loading),t.length>0&&y.onRequest.call(t[0],e))},state:function(t){e.address.value(t)}},changeTab:function(n){var r=t.history&&t.history.pushState&&y.ignoreFirstLoad&&M,i=y.auto||e.isPlainObject(y.apiSettings),o=i&&!r?m.utilities.pathToArray(n):m.get.defaultPathArray(n);n=m.utilities.arrayToPath(o),e.each(o,function(t,a){var s,l,c,u,d=o.slice(0,t+1),f=m.utilities.arrayToPath(d),h=m.is.tab(f),w=t+1==o.length,T=m.get.tabElement(f);if(m.verbose("Looking for tab",a),h){if(m.verbose("Tab was found",a),g=f,v=m.utilities.filterArray(o,d),w?u=!0:(l=o.slice(0,t+2),c=m.utilities.arrayToPath(l),(u=!m.is.tab(c))&&m.verbose("Tab parameters found",l)),u&&i)return r?(m.debug("Ignoring remote content on first tab load",f),M=!1,m.cache.add(n,T.html()),m.activate.all(f),y.onFirstLoad.call(T[0],f,v,b),y.onLoad.call(T[0],f,v,b)):(m.activate.navigation(f),m.fetch.content(f,n)),!1;m.debug("Opened local tab",f),m.activate.all(f),m.cache.read(f)||(m.cache.add(f,!0),m.debug("First time tab loaded calling tab init"),y.onFirstLoad.call(T[0],f,v,b)),y.onLoad.call(T[0],f,v,b)}else{if(-1!=n.search("/")||""===n)return m.error(k.missingTab,C,p,f),!1;if(f=(s=e("#"+n+', a[name="'+n+'"]')).closest("[data-tab]").data(_.tab),T=m.get.tabElement(f),s&&s.length>0&&f)return m.debug("Anchor link used, opening parent tab",T,s),T.hasClass(x.active)||setTimeout(function(){m.scrollTo(s)},0),m.activate.all(f),m.cache.read(f)||(m.cache.add(f,!0),m.debug("First time tab loaded calling tab init"),y.onFirstLoad.call(T[0],f,v,b)),y.onLoad.call(T[0],f,v,b),!1}})},scrollTo:function(t){var r=!!(t&&t.length>0)&&t.offset().top;!1!==r&&(m.debug("Forcing scroll to an in-page link in a hidden tab",r,t),e(n).scrollTop(r))},update:{content:function(t,n,r){var i=m.get.tabElement(t),o=i[0];r=void 0!==r?r:y.evaluateScripts,"string"==typeof y.cacheType&&"dom"==y.cacheType.toLowerCase()&&"string"!=typeof n?i.empty().append(e(n).clone(!0)):r?(m.debug("Updating HTML and evaluating inline scripts",t,n),i.html(n)):(m.debug("Updating HTML",t,n),o.innerHTML=n)}},fetch:{content:function(t,n){var r,i,o=m.get.tabElement(t),a={dataType:"html",encodeParameters:!1,on:"now",cache:y.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(e){"response"==y.cacheType&&m.cache.add(n,e),m.update.content(t,e),t==g?(m.debug("Content loaded",t),m.activate.tab(t)):m.debug("Content loaded in background",t),y.onFirstLoad.call(o[0],t,v,b),y.onLoad.call(o[0],t,v,b),y.loadOnce?m.cache.add(n,!0):"string"==typeof y.cacheType&&"dom"==y.cacheType.toLowerCase()&&o.children().length>0?setTimeout(function(){var e=o.children().clone(!0);e=e.not("script"),m.cache.add(n,e)},0):m.cache.add(n,o.html())},urlData:{tab:n}},s=o.api("get request")||!1,l=s&&"pending"===s.state();n=n||t,i=m.cache.read(n),y.cache&&i?(m.activate.tab(t),m.debug("Adding cached content",n),y.loadOnce||("once"==y.evaluateScripts?m.update.content(t,i,!1):m.update.content(t,i)),y.onLoad.call(o[0],t,v,b)):l?(m.set.loading(t),m.debug("Content is already loading",n)):void 0!==e.api?(r=e.extend(!0,{},y.apiSettings,a),m.debug("Retrieving remote content",n,r),m.set.loading(t),o.api(r)):m.error(k.api)}},activate:{all:function(e){m.activate.tab(e),m.activate.navigation(e)},tab:function(e){var t=m.get.tabElement(e),n="siblings"==y.deactivate?t.siblings(h):h.not(t),r=t.hasClass(x.active);m.verbose("Showing tab content for",t),r||(t.addClass(x.active),n.removeClass(x.active+" "+x.loading),t.length>0&&y.onVisible.call(t[0],e))},navigation:function(e){var t=m.get.navElement(e),n="siblings"==y.deactivate?t.siblings(o):o.not(t),r=t.hasClass(x.active);m.verbose("Activating tab navigation for",t,e),r||(t.addClass(x.active),n.removeClass(x.active+" "+x.loading))}},deactivate:{all:function(){m.deactivate.navigation(),m.deactivate.tabs()},navigation:function(){o.removeClass(x.active)},tabs:function(){h.removeClass(x.active+" "+x.loading)}},is:{tab:function(e){return void 0!==e&&m.get.tabElement(e).length>0}},get:{initialPath:function(){return o.eq(0).data(_.tab)||h.eq(0).data(_.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return m.utilities.pathToArray(m.get.defaultPath(e))},defaultPath:function(e){var t=o.filter("[data-"+_.tab+'^="'+e+'/"]').eq(0).data(_.tab)||!1;if(t){if(m.debug("Found default tab",t),E<y.maxDepth)return E++,m.get.defaultPath(t);m.error(k.recursion)}else m.debug("No default tabs found for",e,h);return E=0,e},navElement:function(e){return e=e||g,o.filter("[data-"+_.tab+'="'+e+'"]')},tabElement:function(e){var t,n,r,i;return e=e||g,r=m.utilities.pathToArray(e),i=m.utilities.last(r),t=h.filter("[data-"+_.tab+'="'+e+'"]'),n=h.filter("[data-"+_.tab+'="'+i+'"]'),t.length>0?t:n},tab:function(){return g}},utilities:{filterArray:function(t,n){return e.grep(t,function(t){return-1==e.inArray(t,n)})},last:function(t){return!!e.isArray(t)&&t[t.length-1]},pathToArray:function(e){return void 0===e&&(e=g),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return!!e.isArray(t)&&t.join("/")}},setting:function(t,n){if(m.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,y,t);else{if(void 0===n)return y[t];e.isPlainObject(y[t])?e.extend(!0,y[t],n):y[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(void 0===n)return m[t];m[t]=n}},debug:function(){!y.silent&&y.debug&&(y.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,y.name+":"),m.debug.apply(console,arguments)))},verbose:function(){!y.silent&&y.verbose&&y.debug&&(y.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,y.name+":"),m.verbose.apply(console,arguments)))},error:function(){y.silent||(m.error=Function.prototype.bind.call(console.error,console,y.name+":"),m.error.apply(console,arguments))},performance:{log:function(e){var t,n;y.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:O,"Execution Time":n})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var t=y.name+":",n=0;s=!1,clearTimeout(m.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var o,a,s,l=L;return n=n||d,r=O||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(m.error(k.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},u?(void 0===L&&m.initialize(),m.invoke(c)):(void 0!==L&&L.invoke("destroy"),m.initialize())}),void 0!==i?i:this},e.tab=function(){e(t).tab.apply(this,arguments)},e.fn.tab.settings={name:"Tab",namespace:"tab",silent:!1,debug:!1,verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,deactivate:"siblings",alwaysRefresh:!1,cache:!0,loadOnce:!1,cacheType:"response",ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",onFirstLoad:function(e,t,n){},onLoad:function(e,t,n){},onVisible:function(e,t,n){},onRequest:function(e,t,n){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.transition=function(){var r,i=e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments,c=l[0],u=[].slice.call(arguments,1),d="string"==typeof c;t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame;return i.each(function(t){var f,p,h,g,v,m,b,y,x,_=e(this),w=this;(x={initialize:function(){f=x.get.settings.apply(w,l),g=f.className,h=f.error,v=f.metadata,y="."+f.namespace,b="module-"+f.namespace,p=_.data(b)||x,m=x.get.animationEndEvent(),d&&(d=x.invoke(c)),!1===d&&(x.verbose("Converted arguments into settings object",f),f.interval?x.delay(f.animate):x.animate(),x.instantiate())},instantiate:function(){x.verbose("Storing instance of module",x),p=x,_.data(b,p)},destroy:function(){x.verbose("Destroying previous module for",w),_.removeData(b)},refresh:function(){x.verbose("Refreshing display type on next animation"),delete x.displayType},forceRepaint:function(){x.verbose("Forcing element repaint");var e=_.parent(),t=_.next();0===t.length?_.detach().appendTo(e):_.detach().insertBefore(t)},repaint:function(){x.verbose("Repainting element");w.offsetWidth},delay:function(e){var n,r=x.get.animationDirection();r||(r=x.can.transition()?x.get.direction():"static"),e=void 0!==e?e:f.interval,n="auto"==f.reverse&&r==g.outward||1==f.reverse?(i.length-t)*f.interval:t*f.interval,x.debug("Delaying animation by",n),setTimeout(x.animate,n)},animate:function(e){if(f=e||f,!x.is.supported())return x.error(h.support),!1;if(x.debug("Preparing animation",f.animation),x.is.animating()){if(f.queue)return!f.allowRepeats&&x.has.direction()&&x.is.occurring()&&!0!==x.queuing?x.debug("Animation is currently occurring, preventing queueing same animation",f.animation):x.queue(f.animation),!1;if(!f.allowRepeats&&x.is.occurring())return x.debug("Animation is already occurring, will not execute repeated animation",f.animation),!1;x.debug("New animation started, completing previous early",f.animation),p.complete()}x.can.animate()?x.set.animating(f.animation):x.error(h.noAnimation,f.animation,w)},reset:function(){x.debug("Resetting animation to beginning conditions"),x.remove.animationCallbacks(),x.restore.conditions(),x.remove.animating()},queue:function(e){x.debug("Queueing animation of",e),x.queuing=!0,_.one(m+".queue"+y,function(){x.queuing=!1,x.repaint(),x.animate.apply(this,f)})},complete:function(e){x.debug("Animation complete",f.animation),x.remove.completeCallback(),x.remove.failSafe(),x.is.looping()||(x.is.outward()?(x.verbose("Animation is outward, hiding element"),x.restore.conditions(),x.hide()):x.is.inward()?(x.verbose("Animation is outward, showing element"),x.restore.conditions(),x.show()):(x.verbose("Static animation completed"),x.restore.conditions(),f.onComplete.call(w)))},force:{visible:function(){var e=_.attr("style"),t=x.get.userStyle(),n=x.get.displayType(),r=t+"display: "+n+" !important;",i=_.css("display"),o=void 0===e||""===e;i!==n?(x.verbose("Overriding default display to show element",n),_.attr("style",r)):o&&_.removeAttr("style")},hidden:function(){var e=_.attr("style"),t=_.css("display"),n=void 0===e||""===e;"none"===t||x.is.hidden()?n&&_.removeAttr("style"):(x.verbose("Overriding default display to hide element"),_.css("display","none"))}},has:{direction:function(t){var n=!1;return"string"==typeof(t=t||f.animation)&&(t=t.split(" "),e.each(t,function(e,t){t!==g.inward&&t!==g.outward||(n=!0)})),n},inlineDisplay:function(){var t=_.attr("style")||"";return e.isArray(t.match(/display.*?;/,""))}},set:{animating:function(e){var t;x.remove.completeCallback(),e=e||f.animation,t=x.get.animationClass(e),x.save.animation(t),x.force.visible(),x.remove.hidden(),x.remove.direction(),x.start.animation(t)},duration:function(e,t){((t="number"==typeof(t=t||f.duration)?t+"ms":t)||0===t)&&(x.verbose("Setting animation duration",t),_.css({"animation-duration":t}))},direction:function(e){(e=e||x.get.direction())==g.inward?x.set.inward():x.set.outward()},looping:function(){x.debug("Transition set to loop"),_.addClass(g.looping)},hidden:function(){_.addClass(g.transition).addClass(g.hidden)},inward:function(){x.debug("Setting direction to inward"),_.removeClass(g.outward).addClass(g.inward)},outward:function(){x.debug("Setting direction to outward"),_.removeClass(g.inward).addClass(g.outward)},visible:function(){_.addClass(g.transition).addClass(g.visible)}},start:{animation:function(e){e=e||x.get.animationClass(),x.debug("Starting tween",e),_.addClass(e).one(m+".complete"+y,x.complete),f.useFailSafe&&x.add.failSafe(),x.set.duration(f.duration),f.onStart.call(w)}},save:{animation:function(e){x.cache||(x.cache={}),x.cache.animation=e},displayType:function(e){"none"!==e&&_.data(v.displayType,e)},transitionExists:function(t,n){e.fn.transition.exists[t]=n,x.verbose("Saving existence of transition",t,n)}},restore:{conditions:function(){var e=x.get.currentAnimation();e&&(_.removeClass(e),x.verbose("Removing animation class",x.cache)),x.remove.duration()}},add:{failSafe:function(){var e=x.get.duration();x.timer=setTimeout(function(){_.triggerHandler(m)},e+f.failSafeDelay),x.verbose("Adding fail safe timer",x.timer)}},remove:{animating:function(){_.removeClass(g.animating)},animationCallbacks:function(){x.remove.queueCallback(),x.remove.completeCallback()},queueCallback:function(){_.off(".queue"+y)},completeCallback:function(){_.off(".complete"+y)},display:function(){_.css("display","")},direction:function(){_.removeClass(g.inward).removeClass(g.outward)},duration:function(){_.css("animation-duration","")},failSafe:function(){x.verbose("Removing fail safe timer",x.timer),x.timer&&clearTimeout(x.timer)},hidden:function(){_.removeClass(g.hidden)},visible:function(){_.removeClass(g.visible)},looping:function(){x.debug("Transitions are no longer looping"),x.is.looping()&&(x.reset(),_.removeClass(g.looping))},transition:function(){_.removeClass(g.visible).removeClass(g.hidden)}},get:{settings:function(t,n,r){return"object"==typeof t?e.extend(!0,{},e.fn.transition.settings,t):"function"==typeof r?e.extend({},e.fn.transition.settings,{animation:t,onComplete:r,duration:n}):"string"==typeof n||"number"==typeof n?e.extend({},e.fn.transition.settings,{animation:t,duration:n}):"object"==typeof n?e.extend({},e.fn.transition.settings,n,{animation:t}):"function"==typeof n?e.extend({},e.fn.transition.settings,{animation:t,onComplete:n}):e.extend({},e.fn.transition.settings,{animation:t})},animationClass:function(e){var t=e||f.animation,n=x.can.transition()&&!x.has.direction()?x.get.direction()+" ":"";return g.animating+" "+g.transition+" "+n+t},currentAnimation:function(){return!(!x.cache||void 0===x.cache.animation)&&x.cache.animation},currentDirection:function(){return x.is.inward()?g.inward:g.outward},direction:function(){return x.is.hidden()||!x.is.visible()?g.inward:g.outward},animationDirection:function(t){var n;return"string"==typeof(t=t||f.animation)&&(t=t.split(" "),e.each(t,function(e,t){t===g.inward?n=g.inward:t===g.outward&&(n=g.outward)})),n||!1},duration:function(e){return!1===(e=e||f.duration)&&(e=_.css("animation-duration")||0),"string"==typeof e?e.indexOf("ms")>-1?parseFloat(e):1e3*parseFloat(e):e},displayType:function(e){return e=void 0===e||e,f.displayType?f.displayType:(e&&void 0===_.data(v.displayType)&&x.can.transition(!0),_.data(v.displayType))},userStyle:function(e){return(e=e||_.attr("style")||"").replace(/display.*?;/,"")},transitionExists:function(t){return e.fn.transition.exists[t]},animationStartEvent:function(){var e,t=n.createElement("div"),r={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(e in r)if(void 0!==t.style[e])return r[e];return!1},animationEndEvent:function(){var e,t=n.createElement("div"),r={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(e in r)if(void 0!==t.style[e])return r[e];return!1}},can:{transition:function(t){var n,r,i,o,a,s,l=f.animation,c=x.get.transitionExists(l),u=x.get.displayType(!1);if(void 0===c||t){if(x.verbose("Determining whether animation exists"),n=_.attr("class"),r=_.prop("tagName"),o=(i=e("<"+r+" />").addClass(n).insertAfter(_)).addClass(l).removeClass(g.inward).removeClass(g.outward).addClass(g.animating).addClass(g.transition).css("animationName"),a=i.addClass(g.inward).css("animationName"),u||(u=i.attr("class",n).removeAttr("style").removeClass(g.hidden).removeClass(g.visible).show().css("display"),x.verbose("Determining final display state",u),x.save.displayType(u)),i.remove(),o!=a)x.debug("Direction exists for animation",l),s=!0;else{if("none"==o||!o)return void x.debug("No animation defined in css",l);x.debug("Static animation found",l,u),s=!1}x.save.transitionExists(l,s)}return void 0!==c?c:s},animate:function(){return void 0!==x.can.transition()}},is:{animating:function(){return _.hasClass(g.animating)},inward:function(){return _.hasClass(g.inward)},outward:function(){return _.hasClass(g.outward)},looping:function(){return _.hasClass(g.looping)},occurring:function(e){return e="."+(e=e||f.animation).replace(" ","."),_.filter(e).length>0},visible:function(){return _.is(":visible")},hidden:function(){return"hidden"===_.css("visibility")},supported:function(){return!1!==m}},hide:function(){x.verbose("Hiding element"),x.is.animating()&&x.reset(),w.blur(),x.remove.display(),x.remove.visible(),x.set.hidden(),x.force.hidden(),f.onHide.call(w),f.onComplete.call(w)},show:function(e){x.verbose("Showing element",e),x.remove.hidden(),x.set.visible(),x.force.visible(),f.onShow.call(w),f.onComplete.call(w)},toggle:function(){x.is.visible()?x.hide():x.show()},stop:function(){x.debug("Stopping current animation"),_.triggerHandler(m)},stopAll:function(){x.debug("Stopping all animation"),x.remove.queueCallback(),_.triggerHandler(m)},clear:{queue:function(){x.debug("Clearing animation queue"),x.remove.queueCallback()}},enable:function(){x.verbose("Starting animation"),_.removeClass(g.disabled)},disable:function(){x.debug("Stopping animation"),_.addClass(g.disabled)},setting:function(t,n){if(x.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===n)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],n):f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,x,t);else{if(void 0===n)return x[t];x[t]=n}},debug:function(){!f.silent&&f.debug&&(f.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,f.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),x.verbose.apply(console,arguments)))},error:function(){f.silent||(x.error=Function.prototype.bind.call(console.error,console,f.name+":"),x.error.apply(console,arguments))},performance:{log:function(e){var t,n;f.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":n})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(x.performance.display,500)},display:function(){var t=f.name+":",n=0;a=!1,clearTimeout(x.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),i.length>1&&(t+=" ("+i.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,i){var o,a,s,l=p;return n=n||u,i=w||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]&&(a=l[r],!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),void 0!==a&&a}}).initialize()}),void 0!==r?r:this},e.fn.transition.exists={},e.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to surpress this warning in production.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();e.api=e.fn.api=function(n){var r,i=e.isFunction(this)?e(t):e(this),o=i.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var i,d,f,p,h,g=e.isPlainObject(n)?e.extend(!0,{},e.fn.api.settings,n):e.extend({},e.fn.api.settings),v=g.namespace,m=g.metadata,b=g.selector,y=g.error,x=g.className,_="."+v,w="module-"+v,k=e(this),T=k.closest(b.form),A=g.stateContext?e(g.stateContext):k,C=this,S=A[0],M=k.data(w);h={initialize:function(){c||h.bind.events(),h.instantiate()},instantiate:function(){h.verbose("Storing instance of module",h),M=h,k.data(w,M)},destroy:function(){h.verbose("Destroying previous module for",C),k.removeData(w).off(_)},bind:{events:function(){var e=h.get.event();e?(h.verbose("Attaching API events to element",e),k.on(e+_,h.event.trigger)):"now"==g.on&&(h.debug("Querying API endpoint immediately"),h.query())}},decode:{json:function(e){if(void 0!==e&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}},read:{cachedResponse:function(e){var n;if(void 0!==t.Storage)return n=sessionStorage.getItem(e),h.debug("Using cached response",e,n),n=h.decode.json(n);h.error(y.noStorage)}},write:{cachedResponse:function(n,r){r&&""===r?h.debug("Response empty, not caching",r):void 0!==t.Storage?(e.isPlainObject(r)&&(r=JSON.stringify(r)),sessionStorage.setItem(n,r),h.verbose("Storing cached response for url",n,r)):h.error(y.noStorage)}},query:function(){if(h.is.disabled())h.debug("Element is disabled API request aborted");else{if(h.is.loading()){if(!g.interruptRequests)return void h.debug("Cancelling request, previous request is still pending");h.debug("Interrupting previous request"),h.abort()}if(g.defaultData&&e.extend(!0,g.urlData,h.get.defaultData()),g.serializeForm&&(g.data=h.add.formData(g.data)),!1===(d=h.get.settings()))return h.cancelled=!0,void h.error(y.beforeSend);if(h.cancelled=!1,(f=h.get.templatedURL())||h.is.mocked()){if((f=h.add.urlData(f))||h.is.mocked()){if(d.url=g.base+f,i=e.extend(!0,{},g,{type:g.method||g.type,data:void 0,url:g.base+f,beforeSend:g.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),h.debug("Querying URL",i.url),h.verbose("Using AJAX settings",i),"local"===g.cache&&h.read.cachedResponse(f))return h.debug("Response returned from local cache"),h.request=h.create.request(),void h.request.resolveWith(S,[h.read.cachedResponse(f)]);g.throttle?g.throttleFirstRequest||h.timer?(h.debug("Throttling request",g.throttle),clearTimeout(h.timer),h.timer=setTimeout(function(){h.timer&&delete h.timer,h.debug("Sending throttled request",void 0,i.method),h.send.request()},g.throttle)):(h.debug("Sending request",void 0,i.method),h.send.request(),h.timer=setTimeout(function(){},g.throttle)):(h.debug("Sending request",void 0,i.method),h.send.request())}}else h.error(y.missingURL)}},should:{removeError:function(){return!0===g.hideError||"auto"===g.hideError&&!h.is.form()}},is:{disabled:function(){return k.filter(b.disabled).length>0},expectingJSON:function(){return"json"===g.dataType||"jsonp"===g.dataType},form:function(){return k.is("form")||A.is("form")},mocked:function(){return g.mockResponse||g.mockResponseAsync||g.response||g.responseAsync},input:function(){return k.is("input")},loading:function(){return!!h.request&&"pending"==h.request.state()},abortedRequest:function(e){return e&&void 0!==e.readyState&&0===e.readyState?(h.verbose("XHR request determined to be aborted"),!0):(h.verbose("XHR request was not aborted"),!1)},validResponse:function(t){return h.is.expectingJSON()&&e.isFunction(g.successTest)?(h.debug("Checking JSON returned success",g.successTest,t),g.successTest(t)?(h.debug("Response passed success test",t),!0):(h.debug("Response failed success test",t),!1)):(h.verbose("Response is not JSON, skipping validation",g.successTest,t),!0)}},was:{cancelled:function(){return h.cancelled||!1},succesful:function(){return h.request&&"resolved"==h.request.state()},failure:function(){return h.request&&"rejected"==h.request.state()},complete:function(){return h.request&&("resolved"==h.request.state()||"rejected"==h.request.state())}},add:{urlData:function(t,n){var r,i;return t&&(r=t.match(g.regExp.required),i=t.match(g.regExp.optional),n=n||g.urlData,r&&(h.debug("Looking for required URL variables",r),e.each(r,function(r,i){var o=-1!==i.indexOf("$")?i.substr(2,i.length-3):i.substr(1,i.length-2),a=e.isPlainObject(n)&&void 0!==n[o]?n[o]:void 0!==k.data(o)?k.data(o):void 0!==A.data(o)?A.data(o):n[o];if(void 0===a)return h.error(y.requiredParameter,o,t),t=!1,!1;h.verbose("Found required variable",o,a),a=g.encodeParameters?h.get.urlEncodedValue(a):a,t=t.replace(i,a)})),i&&(h.debug("Looking for optional URL variables",r),e.each(i,function(r,i){var o=-1!==i.indexOf("$")?i.substr(3,i.length-4):i.substr(2,i.length-3),a=e.isPlainObject(n)&&void 0!==n[o]?n[o]:void 0!==k.data(o)?k.data(o):void 0!==A.data(o)?A.data(o):n[o];void 0!==a?(h.verbose("Optional variable Found",o,a),t=t.replace(i,a)):(h.verbose("Optional variable not found",o),t=-1!==t.indexOf("/"+i)?t.replace("/"+i,""):t.replace(i,""))}))),t},formData:function(t){var n=void 0!==e.fn.serializeObject,r=n?T.serializeObject():T.serialize();return t=t||g.data,e.isPlainObject(t)?n?(h.debug("Extending existing data with form data",t,r),t=e.extend(!0,{},t,r)):(h.error(y.missingSerialize),h.debug("Cant extend data. Replacing data with form data",t,r),t=r):(h.debug("Adding form data",r),t=r),t}},send:{request:function(){h.set.loading(),h.request=h.create.request(),h.is.mocked()?h.mockedXHR=h.create.mockedXHR():h.xhr=h.create.xhr(),g.onRequest.call(S,h.request,h.xhr)}},event:{trigger:function(e){h.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(t,n,r){var i=this,o=(new Date).getTime()-p,a=g.loadingDuration-o,s=!!e.isFunction(g.onResponse)&&(h.is.expectingJSON()?g.onResponse.call(i,e.extend(!0,{},t)):g.onResponse.call(i,t));a=a>0?a:0,s&&(h.debug("Modified API response in onResponse callback",g.onResponse,s,t),t=s),a>0&&h.debug("Response completed early delaying state change by",a),setTimeout(function(){h.is.validResponse(t)?h.request.resolveWith(i,[t,r]):h.request.rejectWith(i,[r,"invalid"])},a)},fail:function(e,t,n){var r=this,i=(new Date).getTime()-p,o=g.loadingDuration-i;(o=o>0?o:0)>0&&h.debug("Response completed early delaying state change by",o),setTimeout(function(){h.is.abortedRequest(e)?h.request.rejectWith(r,[e,"aborted",n]):h.request.rejectWith(r,[e,"error",t,n])},o)}},request:{done:function(e,t){h.debug("Successful API Response",e),"local"===g.cache&&f&&(h.write.cachedResponse(f,e),h.debug("Saving server response locally",h.cache)),g.onSuccess.call(S,e,k,t)},complete:function(e,t){var n,r;h.was.succesful()?(r=e,n=t):(n=e,r=h.get.responseFromXHR(n)),h.remove.loading(),g.onComplete.call(S,r,k,n)},fail:function(e,t,n){var r=h.get.responseFromXHR(e),o=h.get.errorFromRequest(r,t,n);if("aborted"==t)return h.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,n),g.onAbort.call(S,t,k,e),!0;"invalid"==t?h.debug("JSON did not pass success test. A server-side error has most likely occurred",r):"error"==t&&void 0!==e&&(h.debug("XHR produced a server error",t,n),200!=e.status&&void 0!==n&&""!==n&&h.error(y.statusMessage+n,i.url),g.onError.call(S,o,k,e)),g.errorDuration&&"aborted"!==t&&(h.debug("Adding error state"),h.set.error(),h.should.removeError()&&setTimeout(h.remove.error,g.errorDuration)),h.debug("API Request failed",o,e),g.onFailure.call(S,r,k,e)}}},create:{request:function(){return e.Deferred().always(h.event.request.complete).done(h.event.request.done).fail(h.event.request.fail)},mockedXHR:function(){var t,n,r,i=g.mockResponse||g.response,o=g.mockResponseAsync||g.responseAsync;return r=e.Deferred().always(h.event.xhr.complete).done(h.event.xhr.done).fail(h.event.xhr.fail),i?(e.isFunction(i)?(h.debug("Using specified synchronous callback",i),n=i.call(S,d)):(h.debug("Using settings specified response",i),n=i),r.resolveWith(S,[n,!1,{responseText:n}])):e.isFunction(o)&&(t=function(e){h.debug("Async callback returned response",e),e?r.resolveWith(S,[e,!1,{responseText:e}]):r.rejectWith(S,[{responseText:e},!1,!1])},h.debug("Using specified async response callback",o),o.call(S,d,t)),r},xhr:function(){var t;return t=e.ajax(i).always(h.event.xhr.always).done(h.event.xhr.done).fail(h.event.xhr.fail),h.verbose("Created server request",t,i),t}},set:{error:function(){h.verbose("Adding error state to element",A),A.addClass(x.error)},loading:function(){h.verbose("Adding loading state to element",A),A.addClass(x.loading),p=(new Date).getTime()}},remove:{error:function(){h.verbose("Removing error state from element",A),A.removeClass(x.error)},loading:function(){h.verbose("Removing loading state from element",A),A.removeClass(x.loading)}},get:{responseFromXHR:function(t){return!!e.isPlainObject(t)&&(h.is.expectingJSON()?h.decode.json(t.responseText):t.responseText)},errorFromRequest:function(t,n,r){return e.isPlainObject(t)&&void 0!==t.error?t.error:void 0!==g.error[n]?g.error[n]:r},request:function(){return h.request||!1},xhr:function(){return h.xhr||!1},settings:function(){var t;return(t=g.beforeSend.call(S,g))&&(void 0!==t.success&&(h.debug("Legacy success callback detected",t),h.error(y.legacyParameters,t.success),t.onSuccess=t.success),void 0!==t.failure&&(h.debug("Legacy failure callback detected",t),h.error(y.legacyParameters,t.failure),t.onFailure=t.failure),void 0!==t.complete&&(h.debug("Legacy complete callback detected",t),h.error(y.legacyParameters,t.complete),t.onComplete=t.complete)),void 0===t&&h.error(y.noReturnedValue),!1===t?t:void 0!==t?e.extend(!0,{},t):e.extend(!0,{},g)},urlEncodedValue:function(e){var n=t.decodeURIComponent(e),r=t.encodeURIComponent(e);return n!==e?(h.debug("URL value is already encoded, avoiding double encoding",e),e):(h.verbose("Encoding value using encodeURIComponent",e,r),r)},defaultData:function(){var t={};return e.isWindow(C)||(h.is.input()?t.value=k.val():h.is.form()||(t.text=k.text())),t},event:function(){return e.isWindow(C)||"now"==g.on?(h.debug("API called without element, no events attached"),!1):"auto"==g.on?k.is("input")?void 0!==C.oninput?"input":void 0!==C.onpropertychange?"propertychange":"keyup":k.is("form")?"submit":"click":g.on},templatedURL:function(e){if(e=e||k.data(m.action)||g.action||!1,f=k.data(m.url)||g.url||!1)return h.debug("Using specified url",f),f;if(e){if(h.debug("Looking up url for action",e,g.api),void 0===g.api[e]&&!h.is.mocked())return void h.error(y.missingAction,g.action,g.api);f=g.api[e]}else h.is.form()&&(f=k.attr("action")||A.attr("action")||!1,h.debug("No url or action specified, defaulting to form action",f));return f}},abort:function(){var e=h.get.xhr();e&&"resolved"!==e.state()&&(h.debug("Cancelling API request"),e.abort())},reset:function(){h.remove.error(),h.remove.loading()},setting:function(t,n){if(h.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===n)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(void 0===n)return h[t];h[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,g.name+":"),h.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),h.verbose.apply(console,arguments)))},error:function(){g.silent||(h.error=Function.prototype.bind.call(console.error,console,g.name+":"),h.error.apply(console,arguments))},performance:{log:function(e){var t,n;g.performance&&(n=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,500)},display:function(){var t=g.name+":",n=0;a=!1,clearTimeout(h.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,i){var o,a,s,l=M;return n=n||u,i=C||i,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(h.error(y.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(i,n):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},c?(void 0===M&&h.initialize(),h.invoke(l)):(void 0!==M&&M.invoke("destroy"),h.initialize())}),void 0!==r?r:this},e.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.state=function(t){var r,i=e(this),o=i.selector||"",a=(n.documentElement,(new Date).getTime()),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var n,d=e.isPlainObject(t)?e.extend(!0,{},e.fn.state.settings,t):e.extend({},e.fn.state.settings),f=d.error,p=d.metadata,h=d.className,g=d.namespace,v=d.states,m=d.text,b="."+g,y=g+"-module",x=e(this),_=this,w=x.data(y);n={initialize:function(){n.verbose("Initializing module"),d.automatic&&n.add.defaults(),d.context&&""!==o?e(d.context).on(o,"mouseenter"+b,n.change.text).on(o,"mouseleave"+b,n.reset.text).on(o,"click"+b,n.toggle.state):x.on("mouseenter"+b,n.change.text).on("mouseleave"+b,n.reset.text).on("click"+b,n.toggle.state),n.instantiate()},instantiate:function(){n.verbose("Storing instance of module",n),w=n,x.data(y,n)},destroy:function(){n.verbose("Destroying previous module",w),x.off(b).removeData(y)},refresh:function(){n.verbose("Refreshing selector cache"),x=e(_)},add:{defaults:function(){var r=t&&e.isPlainObject(t.states)?t.states:{};e.each(d.defaults,function(t,i){void 0!==n.is[t]&&n.is[t]()&&(n.verbose("Adding default states",t,_),e.extend(d.states,i,r))})}},is:{active:function(){return x.hasClass(h.active)},loading:function(){return x.hasClass(h.loading)},inactive:function(){return!x.hasClass(h.active)},state:function(e){return void 0!==h[e]&&x.hasClass(h[e])},enabled:function(){return!x.is(d.filter.active)},disabled:function(){return x.is(d.filter.active)},textEnabled:function(){return!x.is(d.filter.text)},button:function(){return x.is(".button:not(a, .submit)")},input:function(){return x.is("input")},progress:function(){return x.is(".ui.progress")}},allow:function(e){n.debug("Now allowing state",e),v[e]=!0},disallow:function(e){n.debug("No longer allowing",e),v[e]=!1},allows:function(e){return v[e]||!1},enable:function(){x.removeClass(h.disabled)},disable:function(){x.addClass(h.disabled)},setState:function(e){n.allows(e)&&x.addClass(h[e])},removeState:function(e){n.allows(e)&&x.removeClass(h[e])},toggle:{state:function(){var t;if(n.allows("active")&&n.is.enabled()){if(n.refresh(),void 0!==e.fn.api)if(t=x.api("get request"),x.api("was cancelled"))n.debug("API Request cancelled by beforesend"),d.activateTest=function(){return!1},d.deactivateTest=function(){return!1};else if(t)return void n.listenTo(t);n.change.state()}}},listenTo:function(t){n.debug("API request detected, waiting for state signal",t),t&&(m.loading&&n.update.text(m.loading),e.when(t).then(function(){"resolved"==t.state()?(n.debug("API request succeeded"),d.activateTest=function(){return!0},d.deactivateTest=function(){return!0}):(n.debug("API request failed"),d.activateTest=function(){return!1},d.deactivateTest=function(){return!1}),n.change.state()}))},change:{state:function(){n.debug("Determining state change direction"),n.is.inactive()?n.activate():n.deactivate(),d.sync&&n.sync(),d.onChange.call(_)},text:function(){n.is.textEnabled()&&(n.is.disabled()?(n.verbose("Changing text to disabled text",m.hover),n.update.text(m.disabled)):n.is.active()?m.hover?(n.verbose("Changing text to hover text",m.hover),n.update.text(m.hover)):m.deactivate&&(n.verbose("Changing text to deactivating text",m.deactivate),n.update.text(m.deactivate)):m.hover?(n.verbose("Changing text to hover text",m.hover),n.update.text(m.hover)):m.activate&&(n.verbose("Changing text to activating text",m.activate),n.update.text(m.activate)))}},activate:function(){d.activateTest.call(_)&&(n.debug("Setting state to active"),x.addClass(h.active),n.update.text(m.active),d.onActivate.call(_))},deactivate:function(){d.deactivateTest.call(_)&&(n.debug("Setting state to inactive"),x.removeClass(h.active),n.update.text(m.inactive),d.onDeactivate.call(_))},sync:function(){n.verbose("Syncing other buttons to current state"),n.is.active()?i.not(x).state("activate"):i.not(x).state("deactivate")},get:{text:function(){return d.selector.text?x.find(d.selector.text).text():x.html()},textFor:function(e){return m[e]||!1}},flash:{text:function(e,t,r){var i=n.get.text();n.debug("Flashing text message",e,t),e=e||d.text.flash,t=t||d.flashDuration,r=r||function(){},n.update.text(e),setTimeout(function(){n.update.text(i),r.call(_)},t)}},reset:{text:function(){var e=m.active||x.data(p.storedText),t=m.inactive||x.data(p.storedText);n.is.textEnabled()&&(n.is.active()&&e?(n.verbose("Resetting active text",e),n.update.text(e)):t&&(n.verbose("Resetting inactive text",e),n.update.text(t)))}},update:{text:function(e){var t=n.get.text();e&&e!==t?(n.debug("Updating text",e),d.selector.text?x.data(p.storedText,e).find(d.selector.text).text(e):x.data(p.storedText,e).html(e)):n.debug("Text is already set, ignoring update",e)}},setting:function(t,r){if(n.debug("Changing setting",t,r),e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===r)return d[t];e.isPlainObject(d[t])?e.extend(!0,d[t],r):d[t]=r}},internal:function(t,r){if(e.isPlainObject(t))e.extend(!0,n,t);else{if(void 0===r)return n[t];n[t]=r}},debug:function(){!d.silent&&d.debug&&(d.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,d.name+":"),n.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),n.verbose.apply(console,arguments)))},error:function(){d.silent||(n.error=Function.prototype.bind.call(console.error,console,d.name+":"),n.error.apply(console,arguments))},performance:{log:function(e){var t,r;d.performance&&(r=(t=(new Date).getTime())-(a||t),a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:_,"Execution Time":r})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,500)},display:function(){var t=d.name+":",r=0;a=!1,clearTimeout(n.performance.timer),e.each(s,function(e,t){r+=t["Execution Time"]}),t+=" "+r+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,o){var a,s,l,c=w;return i=i||u,o=_||o,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(r,i){var o=r!=a?i+t[r+1].charAt(0).toUpperCase()+t[r+1].slice(1):t;if(e.isPlainObject(c[o])&&r!=a)c=c[o];else{if(void 0!==c[o])return s=c[o],!1;if(!e.isPlainObject(c[i])||r==a)return void 0!==c[i]?(s=c[i],!1):(n.error(f.method,t),!1);c=c[i]}})),e.isFunction(s)?l=s.apply(o,i):void 0!==s&&(l=s),e.isArray(r)?r.push(l):void 0!==r?r=[r,l]:void 0!==l&&(r=l),s}},c?(void 0===w&&n.initialize(),n.invoke(l)):(void 0!==w&&w.invoke("destroy"),n.initialize())}),void 0!==r?r:this},e.fn.state.settings={name:"State",debug:!1,verbose:!1,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:1e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{beforeSend:"The before send function has cancelled state change",method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{active:"active",disabled:"disabled",error:"error",loading:"loading",success:"success",warning:"warning"},selector:{text:!1},defaults:{input:{disabled:!0,loading:!0,active:!0},button:{disabled:!0,loading:!0,active:!0},progress:{active:!0,success:!0,warning:!0,error:!0}},states:{active:!0,disabled:!0,error:!0,loading:!0,success:!0,warning:!0},text:{disabled:!1,flash:!1,hover:!1,active:!1,inactive:!1,activate:!1,deactivate:!1}}}(e,window,document),function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.visibility=function(r){var i,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1),f=o.length,p=0;return o.each(function(){var o,h,g,v,m=e.isPlainObject(r)?e.extend(!0,{},e.fn.visibility.settings,r):e.extend({},e.fn.visibility.settings),b=m.className,y=m.namespace,x=m.error,_=m.metadata,w="."+y,k="module-"+y,T=e(t),A=e(this),C=e(m.context),S=(A.selector,A.data(k)),M=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},E=this,O=!1;v={initialize:function(){v.debug("Initializing",m),v.setup.cache(),v.should.trackChanges()&&("image"==m.type&&v.setup.image(),"fixed"==m.type&&v.setup.fixed(),m.observeChanges&&v.observeChanges(),v.bind.events()),v.save.position(),v.is.visible()||v.error(x.visible,A),m.initialCheck&&v.checkVisibility(),v.instantiate()},instantiate:function(){v.debug("Storing instance",v),A.data(k,v),S=v},destroy:function(){v.verbose("Destroying previous module"),g&&g.disconnect(),h&&h.disconnect(),T.off("load"+w,v.event.load).off("resize"+w,v.event.resize),C.off("scroll"+w,v.event.scroll).off("scrollchange"+w,v.event.scrollchange),"fixed"==m.type&&(v.resetFixed(),v.remove.placeholder()),A.off(w).removeData(k)},observeChanges:function(){"MutationObserver"in t&&(h=new MutationObserver(v.event.contextChanged),g=new MutationObserver(v.event.changed),h.observe(n,{childList:!0,subtree:!0}),g.observe(E,{childList:!0,subtree:!0}),v.debug("Setting up mutation observer",g))},bind:{events:function(){v.verbose("Binding visibility events to scroll and resize"),m.refreshOnLoad&&T.on("load"+w,v.event.load),T.on("resize"+w,v.event.resize),C.off("scroll"+w).on("scroll"+w,v.event.scroll).on("scrollchange"+w,v.event.scrollchange)}},event:{changed:function(e){v.verbose("DOM tree modified, updating visibility calculations"),v.timer=setTimeout(function(){v.verbose("DOM tree modified, updating sticky menu"),v.refresh()},100)},contextChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==E||e(t).find(E).length>0)&&(v.debug("Element removed from DOM, tearing down events"),v.destroy())})})},resize:function(){v.debug("Window resized"),m.refreshOnResize&&M(v.refresh)},load:function(){v.debug("Page finished loading"),M(v.refresh)},scroll:function(){m.throttle?(clearTimeout(v.timer),v.timer=setTimeout(function(){C.triggerHandler("scrollchange"+w,[C.scrollTop()])},m.throttle)):M(function(){C.triggerHandler("scrollchange"+w,[C.scrollTop()])})},scrollchange:function(e,t){v.checkVisibility(t)}},precache:function(t,r){t instanceof Array||(t=[t]);for(var i=t.length,o=0,a=[],s=n.createElement("img"),l=function(){++o>=t.length&&e.isFunction(r)&&r()};i--;)(s=n.createElement("img")).onload=l,s.onerror=l,s.src=t[i],a.push(s)},enableCallbacks:function(){v.debug("Allowing callbacks to occur"),O=!1},disableCallbacks:function(){v.debug("Disabling all callbacks temporarily"),O=!0},should:{trackChanges:function(){return u?(v.debug("One time query, no need to bind events"),!1):(v.debug("Callbacks being attached"),!0)}},setup:{cache:function(){v.cache={occurred:{},screen:{},element:{}}},image:function(){var e=A.data(_.src);e&&(v.verbose("Lazy loading image",e),m.once=!0,m.observeChanges=!1,m.onOnScreen=function(){v.debug("Image on screen",E),v.precache(e,function(){v.set.image(e,function(){++p==f&&m.onAllLoaded.call(this),m.onLoad.call(this)})})})},fixed:function(){v.debug("Setting up fixed"),m.once=!1,m.observeChanges=!1,m.initialCheck=!0,m.refreshOnLoad=!0,r.transition||(m.transition=!1),v.create.placeholder(),v.debug("Added placeholder",o),m.onTopPassed=function(){v.debug("Element passed, adding fixed position",A),v.show.placeholder(),v.set.fixed(),m.transition&&void 0!==e.fn.transition&&A.transition(m.transition,m.duration)},m.onTopPassedReverse=function(){v.debug("Element returned to position, removing fixed",A),v.hide.placeholder(),v.remove.fixed()}}},create:{placeholder:function(){v.verbose("Creating fixed position placeholder"),o=A.clone(!1).css("display","none").addClass(b.placeholder).insertAfter(A)}},show:{placeholder:function(){v.verbose("Showing placeholder"),o.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){v.verbose("Hiding placeholder"),o.css("display","none").css("visibility","")}},set:{fixed:function(){v.verbose("Setting element to fixed position"),A.addClass(b.fixed).css({position:"fixed",top:m.offset+"px",left:"auto",zIndex:m.zIndex}),m.onFixed.call(E)},image:function(t,n){if(A.attr("src",t),m.transition)if(void 0!==e.fn.transition){if(A.hasClass(b.visible))return void v.debug("Transition already occurred on this image, skipping animation");A.transition(m.transition,m.duration,n)}else A.fadeIn(m.duration,n);else A.show()}},is:{onScreen:function(){return v.get.elementCalculations().onScreen},offScreen:function(){return v.get.elementCalculations().offScreen},visible:function(){return!(!v.cache||!v.cache.element)&&!(0===v.cache.element.width&&0===v.cache.element.offset.top)},verticallyScrollableContext:function(){var e=C.get(0)!==t&&C.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=C.get(0)!==t&&C.css("overflow-x");return"auto"==e||"scroll"==e}},refresh:function(){v.debug("Refreshing constants (width/height)"),"fixed"==m.type&&v.resetFixed(),v.reset(),v.save.position(),m.checkOnRefresh&&v.checkVisibility(),m.onRefresh.call(E)},resetFixed:function(){v.remove.fixed(),v.remove.occurred()},reset:function(){v.verbose("Resetting all cached values"),e.isPlainObject(v.cache)&&(v.cache.screen={},v.cache.element={})},checkVisibility:function(e){v.verbose("Checking visibility of element",v.cache.element),!O&&v.is.visible()&&(v.save.scroll(e),v.save.calculations(),v.passed(),v.passingReverse(),v.topVisibleReverse(),v.bottomVisibleReverse(),v.topPassedReverse(),v.bottomPassedReverse(),v.onScreen(),v.offScreen(),v.passing(),v.topVisible(),v.bottomVisible(),v.topPassed(),v.bottomPassed(),m.onUpdate&&m.onUpdate.call(E,v.get.elementCalculations()))},passed:function(t,n){var r=v.get.elementCalculations();if(t&&n)m.onPassed[t]=n;else{if(void 0!==t)return v.get.pixelsPassed(t)>r.pixelsPassed;r.passing&&e.each(m.onPassed,function(e,t){r.bottomVisible||r.pixelsPassed>v.get.pixelsPassed(e)?v.execute(t,e):m.once||v.remove.occurred(t)})}},onScreen:function(e){var t=v.get.elementCalculations(),n=e||m.onOnScreen;if(e&&(v.debug("Adding callback for onScreen",e),m.onOnScreen=e),t.onScreen?v.execute(n,"onScreen"):m.once||v.remove.occurred("onScreen"),void 0!==e)return t.onOnScreen},offScreen:function(e){var t=v.get.elementCalculations(),n=e||m.onOffScreen;if(e&&(v.debug("Adding callback for offScreen",e),m.onOffScreen=e),t.offScreen?v.execute(n,"offScreen"):m.once||v.remove.occurred("offScreen"),void 0!==e)return t.onOffScreen},passing:function(e){var t=v.get.elementCalculations(),n=e||m.onPassing;if(e&&(v.debug("Adding callback for passing",e),m.onPassing=e),t.passing?v.execute(n,"passing"):m.once||v.remove.occurred("passing"),void 0!==e)return t.passing},topVisible:function(e){var t=v.get.elementCalculations(),n=e||m.onTopVisible;if(e&&(v.debug("Adding callback for top visible",e),m.onTopVisible=e),t.topVisible?v.execute(n,"topVisible"):m.once||v.remove.occurred("topVisible"),void 0===e)return t.topVisible},bottomVisible:function(e){var t=v.get.elementCalculations(),n=e||m.onBottomVisible;if(e&&(v.debug("Adding callback for bottom visible",e),m.onBottomVisible=e),t.bottomVisible?v.execute(n,"bottomVisible"):m.once||v.remove.occurred("bottomVisible"),void 0===e)return t.bottomVisible},topPassed:function(e){var t=v.get.elementCalculations(),n=e||m.onTopPassed;if(e&&(v.debug("Adding callback for top passed",e),m.onTopPassed=e),t.topPassed?v.execute(n,"topPassed"):m.once||v.remove.occurred("topPassed"),void 0===e)return t.topPassed},bottomPassed:function(e){var t=v.get.elementCalculations(),n=e||m.onBottomPassed;if(e&&(v.debug("Adding callback for bottom passed",e),m.onBottomPassed=e),t.bottomPassed?v.execute(n,"bottomPassed"):m.once||v.remove.occurred("bottomPassed"),void 0===e)return t.bottomPassed},passingReverse:function(e){var t=v.get.elementCalculations(),n=e||m.onPassingReverse;if(e&&(v.debug("Adding callback for passing reverse",e),m.onPassingReverse=e),t.passing?m.once||v.remove.occurred("passingReverse"):v.get.occurred("passing")&&v.execute(n,"passingReverse"),void 0!==e)return!t.passing},topVisibleReverse:function(e){var t=v.get.elementCalculations(),n=e||m.onTopVisibleReverse;if(e&&(v.debug("Adding callback for top visible reverse",e),m.onTopVisibleReverse=e),t.topVisible?m.once||v.remove.occurred("topVisibleReverse"):v.get.occurred("topVisible")&&v.execute(n,"topVisibleReverse"),void 0===e)return!t.topVisible},bottomVisibleReverse:function(e){var t=v.get.elementCalculations(),n=e||m.onBottomVisibleReverse;if(e&&(v.debug("Adding callback for bottom visible reverse",e),m.onBottomVisibleReverse=e),t.bottomVisible?m.once||v.remove.occurred("bottomVisibleReverse"):v.get.occurred("bottomVisible")&&v.execute(n,"bottomVisibleReverse"),void 0===e)return!t.bottomVisible},topPassedReverse:function(e){var t=v.get.elementCalculations(),n=e||m.onTopPassedReverse;if(e&&(v.debug("Adding callback for top passed reverse",e),m.onTopPassedReverse=e),t.topPassed?m.once||v.remove.occurred("topPassedReverse"):v.get.occurred("topPassed")&&v.execute(n,"topPassedReverse"),void 0===e)return!t.onTopPassed},bottomPassedReverse:function(e){var t=v.get.elementCalculations(),n=e||m.onBottomPassedReverse;if(e&&(v.debug("Adding callback for bottom passed reverse",e),m.onBottomPassedReverse=e),t.bottomPassed?m.once||v.remove.occurred("bottomPassedReverse"):v.get.occurred("bottomPassed")&&v.execute(n,"bottomPassedReverse"),void 0===e)return!t.bottomPassed},execute:function(e,t){var n=v.get.elementCalculations(),r=v.get.screenCalculations();(e=e||!1)&&(m.continuous?(v.debug("Callback being called continuously",t,n),e.call(E,n,r)):v.get.occurred(t)||(v.debug("Conditions met",t,n),e.call(E,n,r))),v.save.occurred(t)},remove:{fixed:function(){v.debug("Removing fixed position"),A.removeClass(b.fixed).css({position:"",top:"",left:"",zIndex:""}),m.onUnfixed.call(E)},placeholder:function(){v.debug("Removing placeholder content"),o&&o.remove()},occurred:function(e){if(e){var t=v.cache.occurred;void 0!==t[e]&&!0===t[e]&&(v.debug("Callback can now be called again",e),v.cache.occurred[e]=!1)}else v.cache.occurred={}}},save:{calculations:function(){v.verbose("Saving all calculations necessary to determine positioning"),v.save.direction(),v.save.screenCalculations(),v.save.elementCalculations()},occurred:function(e){e&&(void 0!==v.cache.occurred[e]&&!0===v.cache.occurred[e]||(v.verbose("Saving callback occurred",e),v.cache.occurred[e]=!0))},scroll:function(e){e=e+m.offset||C.scrollTop()+m.offset,v.cache.scroll=e},direction:function(){var e,t=v.get.scroll(),n=v.get.lastScroll();return e=t>n&&n?"down":t<n&&n?"up":"static",v.cache.direction=e,v.cache.direction},elementPosition:function(){var e=v.cache.element,t=v.get.screenSize();return v.verbose("Saving element position"),e.fits=e.height<t.height,e.offset=A.offset(),e.width=A.outerWidth(),e.height=A.outerHeight(),v.is.verticallyScrollableContext()&&(e.offset.top+=C.scrollTop()-C.offset().top),v.is.horizontallyScrollableContext()&&(e.offset.left+=C.scrollLeft-C.offset().left),v.cache.element=e,e},elementCalculations:function(){var e=v.get.screenCalculations(),t=v.get.elementPosition();return m.includeMargin?(t.margin={},t.margin.top=parseInt(A.css("margin-top"),10),t.margin.bottom=parseInt(A.css("margin-bottom"),10),t.top=t.offset.top-t.margin.top,t.bottom=t.offset.top+t.height+t.margin.bottom):(t.top=t.offset.top,t.bottom=t.offset.top+t.height),t.topPassed=e.top>=t.top,t.bottomPassed=e.top>=t.bottom,t.topVisible=e.bottom>=t.top&&!t.bottomPassed,t.bottomVisible=e.bottom>=t.bottom&&!t.topPassed,t.pixelsPassed=0,t.percentagePassed=0,t.onScreen=t.topVisible&&!t.bottomPassed,t.passing=t.topPassed&&!t.bottomPassed,t.offScreen=!t.onScreen,t.passing&&(t.pixelsPassed=e.top-t.top,t.percentagePassed=(e.top-t.top)/t.height),v.cache.element=t,v.verbose("Updated element calculations",t),t},screenCalculations:function(){var e=v.get.scroll();return v.save.direction(),v.cache.screen.top=e,v.cache.screen.bottom=e+v.cache.screen.height,v.cache.screen},screenSize:function(){v.verbose("Saving window position"),v.cache.screen={height:C.height()}},position:function(){v.save.screenSize(),v.save.elementPosition()}},get:{pixelsPassed:function(e){var t=v.get.elementCalculations();return e.search("%")>-1?t.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return void 0!==v.cache.occurred&&v.cache.occurred[e]||!1},direction:function(){return void 0===v.cache.direction&&v.save.direction(),v.cache.direction},elementPosition:function(){return void 0===v.cache.element&&v.save.elementPosition(),v.cache.element},elementCalculations:function(){return void 0===v.cache.element&&v.save.elementCalculations(),v.cache.element},screenCalculations:function(){return void 0===v.cache.screen&&v.save.screenCalculations(),v.cache.screen},screenSize:function(){return void 0===v.cache.screen&&v.save.screenSize(),v.cache.screen},scroll:function(){return void 0===v.cache.scroll&&v.save.scroll(),v.cache.scroll},lastScroll:function(){return void 0===v.cache.screen?(v.debug("First scroll event, no last scroll could be found"),!1):v.cache.screen.top}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(void 0===n)return m[t];m[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(void 0===n)return v[t];v[t]=n}},debug:function(){!m.silent&&m.debug&&(m.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,m.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!m.silent&&m.verbose&&m.debug&&(m.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),v.verbose.apply(console,arguments)))},error:function(){m.silent||(v.error=Function.prototype.bind.call(console.error,console,m.name+":"),v.error.apply(console,arguments))},performance:{log:function(e){var t,n;m.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:E,"Execution Time":n})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var t=m.name+":",n=0;s=!1,clearTimeout(v.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var o,a,s,l=S;return n=n||d,r=E||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(n,r){var i=n!=o?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[i])&&n!=o)l=l[i];else{if(void 0!==l[i])return a=l[i],!1;if(!e.isPlainObject(l[r])||n==o)return void 0!==l[r]?(a=l[r],!1):(v.error(x.method,t),!1);l=l[r]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},u?(void 0===S&&v.initialize(),S.save.scroll(),S.save.calculations(),v.invoke(c)):(void 0!==S&&S.invoke("destroy"),v.initialize())}),void 0!==i?i:this},e.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:t,throttle:!1,type:!1,zIndex:"10",transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder",visible:"visible"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}}(e,window,document)}).call(t,n(0))},function(e,t,n){(function(t,r){!function(t){var i,o=t._||n(2),a=(i=t.Backbone||n(45)).View.extend({events:{submit:function(e){this.trigger("submit",e)}},initialize:function(e){var t=this;e=this.options=o.extend({submitButton:!1},e);var n=this.schema=function(){if(e.schema)return o.result(e,"schema");var n=e.model;return n&&n.schema?o.result(n,"schema"):t.schema?o.result(t,"schema"):{}}();o.extend(this,o.pick(e,"model","data","idPrefix","templateData"));var r=this.constructor;this.template=e.template||this.template||r.template,this.Fieldset=e.Fieldset||this.Fieldset||r.Fieldset,this.Field=e.Field||this.Field||r.Field,this.NestedField=e.NestedField||this.NestedField||r.NestedField;var i=this.selectedFields=e.fields||o.keys(n),a=this.fields={};o.each(i,function(e){var t=n[e];a[e]=this.createField(e,t)},this);var s=e.fieldsets||o.result(this,"fieldsets")||[i];this.fieldsets=[];o.each(s,function(e){this.fieldsets.push(this.createFieldset(e))},this)},createFieldset:function(e){var t={schema:e,fields:this.fields};return new this.Fieldset(t)},createField:function(e,t){var n={form:this,key:e,schema:t,idPrefix:this.idPrefix};this.model?n.model=this.model:this.data?n.value=this.data[e]:n.value=null;var r=new this.Field(n);return this.listenTo(r.editor,"all",this.handleEditorEvent),r},handleEditorEvent:function(e,t){var n=t.key+":"+e;switch(this.trigger.call(this,n,this,t,Array.prototype.slice.call(arguments,2)),e){case"change":this.trigger("change",this);break;case"focus":this.hasFocus||this.trigger("focus",this);break;case"blur":if(this.hasFocus){var r=this;setTimeout(function(){o.find(r.fields,function(e){return e.editor.hasFocus})||r.trigger("blur",r)},0)}}},templateData:function(){return{submitButton:this.options.submitButton}},render:function(){var e=this,t=this.fields,n=i.$,r=n(n.trim(this.template(o.result(this,"templateData"))));return r.find("[data-editors]").add(r).each(function(r,i){var a=n(i),s=a.attr("data-editors");if(!o.isUndefined(s)){var l="*"==s?e.selectedFields||o.keys(t):s.split(",");o.each(l,function(e){var n=t[e];a.append(n.editor.render().el)})}}),r.find("[data-fields]").add(r).each(function(r,i){var a=n(i),s=a.attr("data-fields");if(!o.isUndefined(s)){var l="*"==s?e.selectedFields||o.keys(t):s.split(",");o.each(l,function(e){var n=t[e];a.append(n.render().el)})}}),r.find("[data-fieldsets]").add(r).each(function(t,r){var i=n(r),a=i.attr("data-fieldsets");o.isUndefined(a)||o.each(e.fieldsets,function(e){i.append(e.render().el)})}),this.setElement(r),r.addClass(this.className),this},validate:function(e){var t=this.fields,n=this.model,r={};if(e=e||{},o.each(t,function(e){var t=e.validate();t&&(r[e.key]=t)}),!e.skipModelValidate&&n&&n.validate){var i=n.validate(this.getValue());if(i){var a=o.isObject(i)&&!o.isArray(i);a||(r._others=r._others||[],r._others.push(i)),a&&o.each(i,function(e,n){if(t[n]&&!r[n])t[n].setError(e),r[n]=e;else{r._others=r._others||[];var i={};i[n]=e,r._others.push(i)}})}}return o.isEmpty(r)?null:r},commit:function(e){var t,n={skipModelValidate:!(e=e||{}).validate},r=this.validate(n);if(r)return r;var i=o.extend({error:function(e,n){t=n}},e);return this.model.set(this.getValue(),i),t||void 0},getValue:function(e){if(e)return this.fields[e].getValue();var t={};return o.each(this.fields,function(e){t[e.key]=e.getValue()}),t},setValue:function(e,t){var n,r={};for(n in"string"==typeof e?r[e]=t:r=e,this.schema)void 0!==r[n]&&this.fields[n].setValue(r[n])},getEditor:function(e){var t=this.fields[e];if(!t)throw new Error("Field not found: "+e);return t.editor},focus:function(){if(!this.hasFocus){var e=this.fieldsets[0].getFieldAt(0);e&&e.editor.focus()}},blur:function(){if(this.hasFocus){var e=o.find(this.fields,function(e){return e.editor.hasFocus});e&&e.editor.blur()}},trigger:function(e){return"focus"===e?this.hasFocus=!0:"blur"===e&&(this.hasFocus=!1),i.View.prototype.trigger.apply(this,arguments)},remove:function(){return o.each(this.fieldsets,function(e){e.remove()}),o.each(this.fields,function(e){e.remove()}),i.View.prototype.remove.apply(this,arguments)}},{template:o.template('    <form>     <div data-fieldsets></div>      <% if (submitButton) { %>        <button type="submit"><%= submitButton %></button>      <% } %>    </form>  ',null,this.templateSettings),templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},editors:{}});a.validators=function(){var e={};return e.errMessages={required:"Required",regexp:"Invalid",number:"Must be a number",email:"Invalid email address",url:"Invalid URL",match:o.template('Must match field "<%= field %>"',null,a.templateSettings)},e.required=function(e){return e=o.extend({type:"required",message:this.errMessages.required},e),function(t){e.value=t;var n={type:e.type,message:o.isFunction(e.message)?e.message(e):e.message};if(null===t||void 0===t||!1===t||""===t)return n}},e.regexp=function(e){if(!e.regexp)throw new Error('Missing required "regexp" option for "regexp" validator');return e=o.extend({type:"regexp",match:!0,message:this.errMessages.regexp},e),function(t){e.value=t;var n={type:e.type,message:o.isFunction(e.message)?e.message(e):e.message};if(null!==t&&void 0!==t&&""!==t)return"string"==typeof e.regexp&&(e.regexp=new RegExp(e.regexp,e.flags)),(e.match?!e.regexp.test(t):e.regexp.test(t))?n:void 0}},e.number=function(t){return t=o.extend({type:"number",message:this.errMessages.number,regexp:/^[0-9]*\.?[0-9]*?$/},t),e.regexp(t)},e.email=function(t){return t=o.extend({type:"email",message:this.errMessages.email,regexp:/^[\w\-]{1,}([\w\-\+.]{1,1}[\w\-]{1,}){0,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/},t),e.regexp(t)},e.url=function(t){return t=o.extend({type:"url",message:this.errMessages.url,regexp:/^(http|https):\/\/(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i},t),e.regexp(t)},e.match=function(e){if(!e.field)throw new Error('Missing required "field" options for "match" validator');return e=o.extend({type:"match",message:this.errMessages.match},e),function(t,n){e.value=t;var r={type:e.type,message:o.isFunction(e.message)?e.message(e):e.message};if(null!==t&&void 0!==t&&""!==t)return t!==n[e.field]?r:void 0}},e}(),a.Fieldset=i.View.extend({initialize:function(e){e=e||{};var t=this.schema=this.createSchema(e.schema);this.fields=o.pick(e.fields,t.fields),this.template=e.template||t.template||this.template||this.constructor.template},createSchema:function(e){return o.isArray(e)&&(e={fields:e}),e.legend=e.legend||null,e},getFieldAt:function(e){var t=this.schema.fields[e];return this.fields[t]},templateData:function(){return this.schema},render:function(){this.schema;var e=this.fields,t=i.$,n=t(t.trim(this.template(o.result(this,"templateData"))));return n.find("[data-fields]").add(n).each(function(n,r){var i=t(r),a=i.attr("data-fields");o.isUndefined(a)||o.each(e,function(e){i.append(e.render().el)})}),this.setElement(n),this},remove:function(){o.each(this.fields,function(e){e.remove()}),i.View.prototype.remove.call(this)}},{template:o.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  ",null,a.templateSettings)}),a.Field=i.View.extend({initialize:function(e){e=e||{},o.extend(this,o.pick(e,"form","key","model","value","idPrefix"));var t=this.schema=this.createSchema(e.schema);this.template=e.template||t.template||this.template||this.constructor.template,this.errorClassName=e.errorClassName||this.errorClassName||this.constructor.errorClassName,this.editor=this.createEditor()},createSchema:function(e){return o.isString(e)&&(e={type:e}),(e=o.extend({type:"Text",title:this.createTitle()},e)).type=o.isString(e.type)?a.editors[e.type]:e.type,e},createEditor:function(){var e=o.extend(o.pick(this,"schema","form","key","model","value"),{id:this.createEditorId()});return new(0,this.schema.type)(e)},createEditorId:function(){var e=this.idPrefix,t=this.key;return t=t.replace(/\./g,"_"),o.isString(e)||o.isNumber(e)?e+t:o.isNull(e)?t:this.model?this.model.cid+"_"+t:t},createTitle:function(){var e=this.key;return e=(e=e.replace(/([A-Z])/g," $1")).replace(/^./,function(e){return e.toUpperCase()})},templateData:function(){var e=this.schema;return{help:e.help||"",title:e.title,fieldAttrs:e.fieldAttrs,editorAttrs:e.editorAttrs,key:this.key,editorId:this.editor.id}},render:function(){var e=this.schema,t=this.editor,n=i.$;if(e.type==a.editors.Hidden)return this.setElement(t.render().el);var r=n(n.trim(this.template(o.result(this,"templateData"))));return e.fieldClass&&r.addClass(e.fieldClass),e.fieldAttrs&&r.attr(e.fieldAttrs),r.find("[data-editor]").add(r).each(function(e,r){var i=n(r),a=i.attr("data-editor");o.isUndefined(a)||i.append(t.render().el)}),this.setElement(r),this},validate:function(){var e=this.editor.validate();return e?this.setError(e.message):this.clearError(),e},setError:function(e){this.editor.hasNestedForm||(this.$el.addClass(this.errorClassName),this.$("[data-error]").html(e))},clearError:function(){this.$el.removeClass(this.errorClassName),this.$("[data-error]").empty()},commit:function(){return this.editor.commit()},getValue:function(){return this.editor.getValue()},setValue:function(e){this.editor.setValue(e)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove(),i.View.prototype.remove.call(this)}},{template:o.template('    <div>      <label for="<%= editorId %>"><%= title %></label>      <div>        <span data-editor></span>        <div data-error></div>        <div><%= help %></div>      </div>    </div>  ',null,a.templateSettings),errorClassName:"error"}),a.NestedField=a.Field.extend({template:o.template("    <div>      <span data-editor></span>      <% if (help) { %>        <div><%= help %></div>      <% } %>      <div data-error></div>    </div>  ",null,a.templateSettings)}),a.Editor=a.editors.Base=i.View.extend({defaultValue:null,hasFocus:!1,initialize:function(e){if((e=e||{}).model){if(!e.key)throw new Error("Missing option: 'key'");this.model=e.model,this.value=this.model.get(e.key)}else void 0!==e.value&&(this.value=e.value);void 0===this.value&&(this.value=this.defaultValue),o.extend(this,o.pick(e,"key","form"));var t=this.schema=e.schema||{};this.validators=e.validators||t.validators,this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),t.editorClass&&this.$el.addClass(t.editorClass),t.editorAttrs&&this.$el.attr(t.editorAttrs)},getName:function(){return(this.key||"").replace(/\./g,"_")},getValue:function(){return this.value},setValue:function(e){this.value=e},focus:function(){throw new Error("Not implemented")},blur:function(){throw new Error("Not implemented")},commit:function(e){var t=this.validate();return t||(this.listenTo(this.model,"invalid",function(e,n){t=n}),this.model.set(this.key,this.getValue(),e),t||void 0)},validate:function(){this.$el;var e=null,t=this.getValue(),n=this.form?this.form.getValue():{},r=this.validators,i=this.getValidator;return r&&o.every(r,function(r){return!(e=i(r)(t,n))}),e},trigger:function(e){return"focus"===e?this.hasFocus=!0:"blur"===e&&(this.hasFocus=!1),i.View.prototype.trigger.apply(this,arguments)},getValidator:function(e){var t=a.validators;if(o.isRegExp(e))return t.regexp({regexp:e});if(o.isString(e)){if(!t[e])throw new Error('Validator "'+e+'" not found');return t[e]()}if(o.isFunction(e))return e;if(o.isObject(e)&&e.type){var n=e;return t[n.type](n)}throw new Error("Invalid validator: "+e)}}),a.editors.Text=a.Editor.extend({tagName:"input",defaultValue:"",previousValue:"",events:{keyup:"determineChange",keypress:function(e){var t=this;setTimeout(function(){t.determineChange()},0)},select:function(e){this.trigger("select",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){a.editors.Base.prototype.initialize.call(this,e);var t=this.schema,n="text";t&&t.editorAttrs&&t.editorAttrs.type&&(n=t.editorAttrs.type),t&&t.dataType&&(n=t.dataType),this.$el.attr("type",n)},render:function(){return this.setValue(this.value),this},determineChange:function(e){var t=this.$el.val();t!==this.previousValue&&(this.previousValue=t,this.trigger("change",this))},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){this.hasFocus||this.$el.focus()},blur:function(){this.hasFocus&&this.$el.blur()},select:function(){this.$el.select()}}),a.editors.TextArea=a.editors.Text.extend({tagName:"textarea",initialize:function(e){a.editors.Base.prototype.initialize.call(this,e)}}),a.editors.Password=a.editors.Text.extend({initialize:function(e){a.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","password")}}),a.editors.Number=a.editors.Text.extend({defaultValue:0,events:o.extend({},a.editors.Text.prototype.events,{keypress:"onKeyPress",change:"onKeyPress"}),initialize:function(e){a.editors.Text.prototype.initialize.call(this,e);var t=this.schema;this.$el.attr("type","number"),t&&t.editorAttrs&&t.editorAttrs.step||this.$el.attr("step","any")},onKeyPress:function(e){var t=this,n=function(){setTimeout(function(){t.determineChange()},0)};if(0!==e.charCode){var r=this.$el.val();void 0!=e.charCode&&(r+=String.fromCharCode(e.charCode)),/^[0-9]*\.?[0-9]*?$/.test(r)?n():e.preventDefault()}else n()},getValue:function(){var e=this.$el.val();return""===e?null:parseFloat(e,10)},setValue:function(e){e=o.isNumber(e)?e:o.isString(e)&&""!==e?parseFloat(e,10):null,o.isNaN(e)&&(e=null),a.editors.Text.prototype.setValue.call(this,e)}}),a.editors.Hidden=a.editors.Text.extend({defaultValue:"",initialize:function(e){a.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","hidden")},focus:function(){},blur:function(){}}),a.editors.Checkbox=a.editors.Base.extend({defaultValue:!1,tagName:"input",events:{click:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){a.editors.Base.prototype.initialize.call(this,e),this.$el.attr("type","checkbox")},render:function(){return this.setValue(this.value),this},getValue:function(){return this.$el.prop("checked")},setValue:function(e){e?this.$el.prop("checked",!0):this.$el.prop("checked",!1)},focus:function(){this.hasFocus||this.$el.focus()},blur:function(){this.hasFocus&&this.$el.blur()}}),a.editors.Select=a.editors.Base.extend({tagName:"select",previousValue:"",events:{keyup:"determineChange",keypress:function(e){var t=this;setTimeout(function(){t.determineChange()},0)},change:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){if(a.editors.Base.prototype.initialize.call(this,e),!this.schema||!this.schema.options)throw new Error("Missing required 'schema.options'")},render:function(){return this.setOptions(this.schema.options),this},setOptions:function(e){var t=this;if(e instanceof i.Collection){var n=e;n.length>0?this.renderOptions(e):n.fetch({success:function(n){t.renderOptions(e)}})}else o.isFunction(e)?e(function(e){t.renderOptions(e)},t):this.renderOptions(e)},renderOptions:function(e){var t,n=this.$el;t=this._getOptionsHtml(e),n.html(t),this.setValue(this.value)},_getOptionsHtml:function(e){var t;if(o.isString(e))t=e;else if(o.isArray(e))t=this._arrayToHtml(e);else if(e instanceof i.Collection)t=this._collectionToHtml(e);else if(o.isFunction(e)){var n;e(function(e){n=e},this),t=this._getOptionsHtml(n)}else t=this._objectToHtml(e);return t},determineChange:function(e){var t=this.getValue();t!==this.previousValue&&(this.previousValue=t,this.trigger("change",this))},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){this.hasFocus||this.$el.focus()},blur:function(){this.hasFocus&&this.$el.blur()},_collectionToHtml:function(e){var t=[];return e.each(function(e){t.push({val:e.id,label:e.toString()})}),this._arrayToHtml(t)},_objectToHtml:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({val:n,label:e[n]});return this._arrayToHtml(t)},_arrayToHtml:function(e){var t=[];return o.each(e,function(e){if(o.isObject(e))if(e.group)t.push('<optgroup label="'+e.group+'">'),t.push(this._getOptionsHtml(e.options)),t.push("</optgroup>");else{var n=e.val||0===e.val?e.val:"";t.push('<option value="'+n+'">'+e.label+"</option>")}else t.push("<option>"+e+"</option>")},this),t.join("")}}),a.editors.Radio=a.editors.Select.extend({tagName:"ul",events:{"change input[type=radio]":function(){this.trigger("change",this)},"focus input[type=radio]":function(){this.hasFocus||this.trigger("focus",this)},"blur input[type=radio]":function(){if(this.hasFocus){var e=this;setTimeout(function(){e.$("input[type=radio]:focus")[0]||e.trigger("blur",e)},0)}}},getTemplate:function(){return this.schema.template||this.constructor.template},getValue:function(){return this.$("input[type=radio]:checked").val()},setValue:function(e){this.$("input[type=radio]").val([e])},focus:function(){if(!this.hasFocus){var e=this.$("input[type=radio]:checked");e[0]?e.focus():this.$("input[type=radio]").first().focus()}},blur:function(){this.hasFocus&&this.$("input[type=radio]:focus").blur()},_arrayToHtml:function(e){var t=this.getTemplate(),n=this.getName(),r=this.id;return t({items:o.map(e,function(e,t){var i={name:n,id:r+"-"+t};return o.isObject(e)?(i.value=e.val||0===e.val?e.val:"",i.label=e.label):(i.value=e,i.label=e),i})})}},{template:o.template('    <% _.each(items, function(item) { %>      <li>        <input type="radio" name="<%= item.name %>" value="<%= item.value %>" id="<%= item.id %>" />        <label for="<%= item.id %>"><%= item.label %></label>      </li>    <% }); %>  ',null,a.templateSettings)}),a.editors.Checkboxes=a.editors.Select.extend({tagName:"ul",groupNumber:0,events:{"click input[type=checkbox]":function(){this.trigger("change",this)},"focus input[type=checkbox]":function(){this.hasFocus||this.trigger("focus",this)},"blur input[type=checkbox]":function(){if(this.hasFocus){var e=this;setTimeout(function(){e.$("input[type=checkbox]:focus")[0]||e.trigger("blur",e)},0)}}},getValue:function(){var e=[];return this.$("input[type=checkbox]:checked").each(function(){e.push(r(this).val())}),e},setValue:function(e){o.isArray(e)||(e=[e]),this.$("input[type=checkbox]").val(e)},focus:function(){this.hasFocus||this.$("input[type=checkbox]").first().focus()},blur:function(){this.hasFocus&&this.$("input[type=checkbox]:focus").blur()},_arrayToHtml:function(e){var t=[],n=this;return o.each(e,function(e,r){var i="<li>",a=!0;if(o.isObject(e))if(e.group){var s=n.id;n.id+="-"+n.groupNumber++,i='<fieldset class="group"> <legend>'+e.group+"</legend>",i+=n._arrayToHtml(e.options),i+="</fieldset>",n.id=s,a=!1}else{var l=e.val||0===e.val?e.val:"";i+='<input type="checkbox" name="'+n.getName()+'" value="'+l+'" id="'+n.id+"-"+r+'" />',i+='<label for="'+n.id+"-"+r+'">'+e.label+"</label>"}else i+='<input type="checkbox" name="'+n.getName()+'" value="'+e+'" id="'+n.id+"-"+r+'" />',i+='<label for="'+n.id+"-"+r+'">'+e+"</label>";a&&(i+="</li>"),t.push(i)}),t.join("")}}),a.editors.Object=a.editors.Base.extend({hasNestedForm:!0,initialize:function(e){if(this.value={},a.editors.Base.prototype.initialize.call(this,e),!this.form)throw new Error('Missing required option "form"');if(!this.schema.subSchema)throw new Error("Missing required 'schema.subSchema' option for Object editor")},render:function(){var e=this.form.constructor;return this.nestedForm=new e({schema:this.schema.subSchema,data:this.value,idPrefix:this.id+"_",Field:e.NestedField}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){return this.nestedForm?this.nestedForm.getValue():this.value},setValue:function(e){this.value=e,this.render()},focus:function(){this.hasFocus||this.nestedForm.focus()},blur:function(){this.hasFocus&&this.nestedForm.blur()},remove:function(){this.nestedForm.remove(),i.View.prototype.remove.call(this)},validate:function(){return this.nestedForm.validate()},_observeFormEvents:function(){this.nestedForm&&this.nestedForm.on("all",function(){var e=o.toArray(arguments);e[1]=this,this.trigger.apply(this,e)},this)}}),a.editors.NestedModel=a.editors.Object.extend({initialize:function(e){if(a.editors.Base.prototype.initialize.call(this,e),!this.form)throw new Error('Missing required option "form"');if(!e.schema.model)throw new Error('Missing required "schema.model" option for NestedModel editor')},render:function(){var e=this.form.constructor,t=this.value||{},n=(this.key,this.schema.model),r=t.constructor===n?t:new n(t);return this.nestedForm=new e({model:r,idPrefix:this.id+"_",fieldTemplate:"nestedField"}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},commit:function(){var e=this.nestedForm.commit();return e?(this.$el.addClass("error"),e):a.editors.Object.prototype.commit.call(this)}}),a.editors.Date=a.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){this.hasFocus||this.trigger("focus",this)},"blur select":function(){if(this.hasFocus){var e=this;setTimeout(function(){e.$("select:focus")[0]||e.trigger("blur",e)},0)}}},initialize:function(e){e=e||{},a.editors.Base.prototype.initialize.call(this,e);var t=a.editors.Date,n=new Date;if(this.options=o.extend({monthNames:t.monthNames,showMonthNames:t.showMonthNames},e),this.schema=o.extend({yearStart:n.getFullYear()-100,yearEnd:n.getFullYear()},e.schema||{}),this.value&&!o.isDate(this.value)&&(this.value=new Date(this.value)),!this.value){var r=new Date;r.setSeconds(0),r.setMilliseconds(0),this.value=r}this.template=e.template||this.constructor.template},render:function(){var e=this.options,t=this.schema,n=i.$,r=o.map(o.range(1,32),function(e){return'<option value="'+e+'">'+e+"</option>"}),a=o.map(o.range(0,12),function(t){return'<option value="'+t+'">'+(e.showMonthNames?e.monthNames[t]:t+1)+"</option>"}),s=t.yearStart<t.yearEnd?o.range(t.yearStart,t.yearEnd+1):o.range(t.yearStart,t.yearEnd-1,-1),l=o.map(s,function(e){return'<option value="'+e+'">'+e+"</option>"}),c=n(n.trim(this.template({dates:r.join(""),months:a.join(""),years:l.join("")})));return this.$date=c.find('[data-type="date"]'),this.$month=c.find('[data-type="month"]'),this.$year=c.find('[data-type="year"]'),this.$hidden=n('<input type="hidden" name="'+this.key+'" />'),c.append(this.$hidden),this.setValue(this.value),this.setElement(c),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.$year.val(),t=this.$month.val(),n=this.$date.val();return e&&t&&n?new Date(e,t,n):null},setValue:function(e){this.$date.val(e.getDate()),this.$month.val(e.getMonth()),this.$year.val(e.getFullYear()),this.updateHidden()},focus:function(){this.hasFocus||this.$("select").first().focus()},blur:function(){this.hasFocus&&this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();o.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)}},{template:o.template('    <div>      <select data-type="date"><%= dates %></select>      <select data-type="month"><%= months %></select>      <select data-type="year"><%= years %></select>    </div>  ',null,a.templateSettings),showMonthNames:!0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}),a.editors.DateTime=a.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){this.hasFocus||this.trigger("focus",this)},"blur select":function(){if(this.hasFocus){var e=this;setTimeout(function(){e.$("select:focus")[0]||e.trigger("blur",e)},0)}}},initialize:function(e){e=e||{},a.editors.Base.prototype.initialize.call(this,e),this.options=o.extend({DateEditor:a.editors.DateTime.DateEditor},e),this.schema=o.extend({minsInterval:15},e.schema||{}),this.dateEditor=new this.options.DateEditor(e),this.value=this.dateEditor.value,this.template=e.template||this.constructor.template},render:function(){function e(e){return e<10?"0"+e:e}var t=this.schema,n=i.$,r=o.map(o.range(0,24),function(t){return'<option value="'+t+'">'+e(t)+"</option>"}),a=o.map(o.range(0,60,t.minsInterval),function(t){return'<option value="'+t+'">'+e(t)+"</option>"}),s=n(n.trim(this.template({hours:r.join(),mins:a.join()})));return s.find("[data-date]").append(this.dateEditor.render().el),this.$hour=s.find('select[data-type="hour"]'),this.$min=s.find('select[data-type="min"]'),this.$hidden=s.find('input[type="hidden"]'),this.setValue(this.value),this.setElement(s),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.dateEditor.getValue(),t=this.$hour.val(),n=this.$min.val();return e&&t&&n?(e.setHours(t),e.setMinutes(n),e):null},setValue:function(e){o.isDate(e)||(e=new Date(e)),this.dateEditor.setValue(e),this.$hour.val(e.getHours()),this.$min.val(e.getMinutes()),this.updateHidden()},focus:function(){this.hasFocus||this.$("select").first().focus()},blur:function(){this.hasFocus&&this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();o.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)},remove:function(){this.dateEditor.remove(),a.editors.Base.prototype.remove.call(this)}},{template:o.template('    <div class="bbf-datetime">      <div class="bbf-date-container" data-date></div>      <select data-type="hour"><%= hours %></select>      :      <select data-type="min"><%= mins %></select>    </div>  ',null,a.templateSettings),DateEditor:a.editors.Date}),a.VERSION="0.14.1",i.Form=a,e.exports=a}(window||t||this)}).call(t,n(1),n(0))},function(e,t,n){var r,i;!function(o,a){r=[n(2),n(0),t],void 0===(i=function(e,t,n){o.Backbone=a(o,n,e,t)}.apply(t,r))||(e.exports=i)}(this,function(e,t,n,r){var i=e.Backbone,o=[],a=o.slice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(e,t,n){return c(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,o=n.once(function(){i.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,r)},off:function(e,t,r){var i,o,a,s,l,u,d,f;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(l=0,u=(s=e?[e]:n.keys(this._events)).length;l<u;l++)if(e=s[l],a=this._events[e]){if(this._events[e]=i=[],t||r)for(d=0,f=a.length;d<f;d++)o=a[d],(t&&t!==o.callback&&t!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&u(n,t),r&&u(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var o=!t&&!r;for(var a in r||"object"!=typeof t||(r=this),e&&((i={})[e._listenId]=e),i)(e=i[a]).off(t,r,this),(o||n.isEmpty(e._events))&&delete this._listeningTo[a];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){for(var o=n.split(l),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0},u=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};n.each({listenTo:"on",listenToOnce:"once"},function(e,t){s[t]=function(t,r,i){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=n.uniqueId("l"))]=t,i||"object"!=typeof r||(i=this),t[e](r,i,this),this}}),s.bind=s.on,s.unbind=s.off,n.extend(t,s);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,r){var i,o,a,s,l,c,u,d;if(null==e)return this;if("object"==typeof e?(o=e,r=t):(o={})[e]=t,r||(r={}),!this._validate(o,r))return!1;for(i in a=r.unset,l=r.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)t=o[i],n.isEqual(d[i],t)||s.push(i),n.isEqual(u[i],t)?delete this.changed[i]:this.changed[i]=t,a?delete d[i]:d[i]=t;if(!l){s.length&&(this._pending=r);for(var f=0,p=s.length;f<p;f++)this.trigger("change:"+s[f],this,d[s[f]],r)}if(c)return this;if(!l)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in e)n.isEqual(i[o],t=e[o])||((r||(r={}))[o]=t);return r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},P(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,o,a,s=this.attributes;if(null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},s,i)),void 0===r.parse&&(r.parse=!0);var l=this,c=r.success;return r.success=function(e){l.attributes=s;var t=l.parse(e,r);if(r.wait&&(t=n.extend(i||{},t)),n.isObject(t)&&!l.set(t,r))return!1;c&&c(l,e,r),l.trigger("sync",l,e,r)},P(this,r),"patch"===(o=this.isNew()?"create":r.patch?"patch":"update")&&(r.attrs=i),a=this.sync(o,this,r),i&&r.wait&&(this.attributes=s),a},destroy:function(e){var t=this,r=(e=e?n.clone(e):{}).success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;P(this,e);var o=this.sync("delete",this,e);return e.wait||i(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}});n.each(["keys","values","pairs","invert","pick","omit"],function(e){d.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},p={add:!0,remove:!0,merge:!0},h={add:!0,remove:!1};n.extend(f.prototype,s,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,h))},remove:function(e,t){var r,i,o,a,s=!n.isArray(e);for(e=s?[e]:n.clone(e),t||(t={}),r=0,i=e.length;r<i;r++)(a=e[r]=this.get(e[r]))&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,t.silent||(t.index=o,a.trigger("remove",a,this,t)),this._removeReference(a,t));return s?e[0]:e},set:function(e,t){(t=n.defaults({},t,p)).parse&&(e=this.parse(e,t));var r,i,o,a,s,l,c,u=!n.isArray(e);e=u?e?[e]:[]:n.clone(e);var f=t.at,h=this.model,g=this.comparator&&null==f&&!1!==t.sort,v=n.isString(this.comparator)?this.comparator:null,m=[],b=[],y={},x=t.add,_=t.merge,w=t.remove,k=!(g||!x||!w)&&[];for(r=0,i=e.length;r<i;r++){if(o=(s=e[r]||{})instanceof d?a=s:s[h.prototype.idAttribute||"id"],l=this.get(o))w&&(y[l.cid]=!0),_&&(s=s===a?a.attributes:s,t.parse&&(s=l.parse(s,t)),l.set(s,t),g&&!c&&l.hasChanged(v)&&(c=!0)),e[r]=l;else if(x){if(!(a=e[r]=this._prepareModel(s,t)))continue;m.push(a),this._addReference(a,t)}a=l||a,!k||!a.isNew()&&y[a.id]||k.push(a),y[a.id]=!0}if(w){for(r=0,i=this.length;r<i;++r)y[(a=this.models[r]).cid]||b.push(a);b.length&&this.remove(b,t)}if(m.length||k&&k.length)if(g&&(c=!0),this.length+=m.length,null!=f)for(r=0,i=m.length;r<i;r++)this.models.splice(f+r,0,m[r]);else{k&&(this.models.length=0);var T=k||m;for(r=0,i=T.length;r<i;r++)this.models.push(T[r])}if(c&&this.sort({silent:!0}),!t.silent){for(r=0,i=m.length;r<i;r++)(a=m[r]).trigger("add",a,this,t);(c||k&&k.length)&&this.trigger("sort",this,t)}return u?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},P(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;(t=t?n.clone(t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});n.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});n.each(["groupBy","countBy","sortBy","indexBy"],function(e){f.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var g=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,m)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},v=/^(\S+)\s*(.*)$/,m=["model","collection","el","id","attributes","className","tagName","events"];n.extend(g.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[e[t]]),r){var i=t.match(v),o=i[1],a=i[2];r=n.bind(r,this),o+=".delegateEvents"+this.cid,""===a?this.$el.on(o,r):this.$el.on(o,a,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}}}),t.sync=function(e,r,i){var o=y[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||L()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1),"PATCH"===a.type&&b&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=t.ajax(n.extend(a,i));return r.trigger("request",r,l,i),l};var b=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),y={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var x=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,k=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(x.prototype,s,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,function(n){var a=o._extractParameters(e,n);o.execute(i,a),o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),t.history.trigger("route",o,r,a)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(T,"\\$&").replace(_,"(?:$1)?").replace(w,function(e,t){return t?e:"([^/?]+)"}).replace(k,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var A=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},C=/^[#\/]|\s+$/g,S=/^\/+|\/+$/g,M=/msie [\w.]+/,E=/\/$/,O=/#.*$/;A.started=!1,n.extend(A.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(E,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(C,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,o=M.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);if(this.root=("/"+this.root+"/").replace(S,"/"),o&&this._wantsHashChange){var a=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(C,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!A.started)return!1;t&&!0!==t||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(O,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new A;d.extend=f.extend=x.extend=g.extend=A.extend=function(e,t){var r,i=this;r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&n.extend(r.prototype,e),r.__super__=i.prototype,r};var L=function(){throw new Error('A "url" property or function must be specified')},P=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n.n(r),o=n(8);n.n(o);
/**
 * @file      Model classes for Backbone.js.
 * @author    Philipp Engel
 * @license   BSD-2-Clause
 * @copyright Hochschule Neubrandenburg - University of Applied Sciences, 2017
 * @see       {@link https://github.com/dabamos/openadms-ui/}()
 */
let a={};a.Settings=i.a.Model.extend({initialize:function(e){this.localStorage=new o.LocalStorage(e)},parse:function(e){return e[0]}}),a.App=i.a.Model.extend({defaults:{name:"undefined",title:"Undefined",icon:"help",compiled:null,script:null}}),a.AppsList=i.a.Collection.extend({model:a.App})},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),i=n.n(r),o=n(2),a=n.n(o),s=n(3),l=n.n(s),c=n(9),u=n.n(c),d=n(7);
/**
 * @file      Views for Backbone.js.
 * @author    Philipp Engel
 * @license   BSD-2-Clause
 * @copyright Hochschule Neubrandenburg - University of Applied Sciences, 2017
 * @see       {@link https://github.com/dabamos/openadms-ui/}
 */
let f={};u.a.useDefaults();let p=u.a.get("view");f.Page=l.a.View.extend({el:"#main",initialize:function(){},renderError:function(e){let t=d.default.get("error"),n=t.get("compiled"),r={name:e,title:t.get("title"),icon:t.get("icon")};return this.$el.html(n(r)),this},renderApp:function(e,t){let n=d.default.get(e);if(null!=n){p.debug(`Rendering app "${e}"`);let r=n.get("script"),i=n.get("compiled"),o={name:n.get("name"),title:n.get("title"),icon:n.get("icon")};this.$el.html(i(o)),r(t)}else p.debug(`App "${e}" not found`),this.renderError(e);return this}}),f.AppItem=l.a.View.extend({tagName:"a",initialize:function(e){a.a.bindAll(this,"render"),this.model.bind("change",this.render)},render:function(){let e=i()(this.el);return e.empty(),e.addClass("item"),e.attr("href","#app/"+this.model.get("name")),e.append('<i class="'+this.model.get("icon")+' icon"></i>'),e.append(this.model.get("title")),this}}),f.AppsMenu=l.a.View.extend({collection:null,el:"#apps-menu",initialize:function(e){this.collection=e,a.a.bindAll(this,"render"),this.collection.bind("reset",this.render),this.collection.bind("add",this.render),this.collection.bind("remove",this.render)},render:function(){let e=i()(this.el);return e.empty(),this.collection.forEach(function(t){let n=new f.AppItem({model:t});e.append(n.render().el)}),this}})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),i=n.n(r);
/**
 * @file      Router for Backbone.js.
 * @author    Philipp Engel
 * @license   BSD-2-Clause
 * @copyright Hochschule Neubrandenburg - University of Applied Sciences, 2017
 * @see       {@link https://github.com/dabamos/openadms-ui/}
 */
let o={};o.Router=i.a.Router.extend({initialize:function(e){this.view=e},routes:{"":"showApp","app/:name(/*args)":"showApp"},showApp:function(e,t){null===e&&(e="index"),this.view.renderApp(e,t)}})}]);